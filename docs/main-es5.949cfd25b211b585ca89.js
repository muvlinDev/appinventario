!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){return r(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||u(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){if(Array.isArray(e))return e}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||o(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function v(e){var t=k();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,w(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function y(e,t,n){return(y=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkappinventario_frontend=self.webpackChunkappinventario_frontend||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,n,r){"use strict";r.d(n,{deG:function(){return pn},tb:function(){return Mu},AFp:function(){return Du},ip1:function(){return Ou},CZH:function(){return Nu},hGG:function(){return Rc},z2F:function(){return bc},sBO:function(){return Ms},Sil:function(){return Qu},_Vd:function(){return us},EJc:function(){return Vu},SBq:function(){return fs},qLn:function(){return Fr},vpe:function(){return fu},gxx:function(){return ka},tBr:function(){return qn},XFs:function(){return z},OlP:function(){return vn},zs3:function(){return Pa},ZZ4:function(){return Os},aQg:function(){return Ds},soG:function(){return qu},YKP:function(){return Ks},v3s:function(){return _c},h0i:function(){return Gs},PXZ:function(){return pc},R0b:function(){return $u},FiY:function(){return Vn},Lbi:function(){return Zu},g9A:function(){return Fu},Qsj:function(){return ps},FYo:function(){return vs},JOm:function(){return Ur},Tiy:function(){return ms},q3G:function(){return Ir},tp0:function(){return jn},EAV:function(){return Sc},Rgc:function(){return Bs},dDg:function(){return ac},DyG:function(){return gn},q4F:function(){return ks},GfV:function(){return ys},s_b:function(){return Qs},ifc:function(){return Q},eFA:function(){return gc},G48:function(){return dc},Gpc:function(){return I},X6Q:function(){return fc},_c5:function(){return Ac},VLi:function(){return sc},c2e:function(){return Uu},zSh:function(){return wa},wAp:function(){return Qo},vHH:function(){return R},EiD:function(){return Sr},mCW:function(){return cr},qzn:function(){return $n},JVY:function(){return er},pB0:function(){return ir},eBb:function(){return nr},L6k:function(){return tr},LAX:function(){return rr},cg1:function(){return Go},Tjo:function(){return Ic},kL8:function(){return Ko},yhl:function(){return Xn},dqk:function(){return X},sIi:function(){return za},CqO:function(){return uo},QGY:function(){return oo},F4k:function(){return so},RDi:function(){return Ze},AaK:function(){return x},z3N:function(){return Jn},qOj:function(){return Fa},TTD:function(){return Re},_Bn:function(){return as},xp6:function(){return _i},uIk:function(){return Wa},Tol:function(){return xo},ekj:function(){return To},Suo:function(){return Eu},Xpm:function(){return le},lG2:function(){return me},Yz7:function(){return P},cJS:function(){return L},oAB:function(){return ve},Yjl:function(){return ye},Y36:function(){return Ja},_UZ:function(){return no},BQk:function(){return io},ynx:function(){return ro},qZA:function(){return to},TgZ:function(){return eo},EpF:function(){return ao},n5z:function(){return cn},Ikx:function(){return Vo},LFG:function(){return Dn},$8M:function(){return hn},NdJ:function(){return co},CRH:function(){return Iu},oxw:function(){return fo},ALo:function(){return cu},lcZ:function(){return lu},Q6J:function(){return $a},s9C:function(){return vo},iGM:function(){return xu},CHM:function(){return tt},oJD:function(){return Ar},LSH:function(){return Cr},kYT:function(){return pe},Udp:function(){return _o},d8E:function(){return jo},YNc:function(){return Ya},_uU:function(){return Lo},Oqu:function(){return Fo},hij:function(){return Zo},AsE:function(){return Mo},lnq:function(){return Uo},HOy:function(){return qo},Gf:function(){return Su}});var o=r(9765),u=r(5319),c=r(7574),l=r(6682),p=r(2441),k=r(1307);function b(){return new o.xQ}function _(e){for(var t in e)if(e[t]===_)return t;throw Error("Could not find renamed property on target object.")}function T(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(x).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function S(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var E=_({__forward_ref__:_});function I(e){return e.__forward_ref__=I,e.toString=function(){return x(this())},e}function A(e){return C(e)?e():e}function C(e){return"function"==typeof e&&e.hasOwnProperty(E)&&e.__forward_ref__===I}var R=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return n}(m(Error));function O(e){return"string"==typeof e?e:null==e?"":String(e)}function N(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():O(e)}function D(e,t){var n=t?" in ".concat(t):"";throw new R("201","No provider for ".concat(N(e)," found").concat(n))}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function L(e){return{providers:e.providers||[],imports:e.imports||[]}}function F(e){return Z(e,q)||Z(e,j)}function Z(e,t){return e.hasOwnProperty(t)?e[t]:null}function M(e){return e&&(e.hasOwnProperty(V)||e.hasOwnProperty(B))?e[V]:null}var U,q=_({"\u0275prov":_}),V=_({"\u0275inj":_}),j=_({ngInjectableDef:_}),B=_({ngInjectorDef:_}),z=((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z);function H(e){var t=U;return U=e,t}function G(e,t,n){var r=F(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&z.Optional?null:void 0!==t?t:void D(x(e),"Injector")}function K(e){return{toString:e}.toString()}var W=((W=W||{})[W.OnPush=0]="OnPush",W[W.Default=1]="Default",W),Q=((Q=Q||{})[Q.Emulated=0]="Emulated",Q[Q.None=2]="None",Q[Q.ShadowDom=3]="ShadowDom",Q),Y="undefined"!=typeof globalThis&&globalThis,J="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,X=Y||"undefined"!=typeof global&&global||J||$,ee={},te=[],ne=_({"\u0275cmp":_}),re=_({"\u0275dir":_}),ie=_({"\u0275pipe":_}),ae=_({"\u0275mod":_}),oe=_({"\u0275loc":_}),se=_({"\u0275fac":_}),ue=_({__NG_ELEMENT_ID__:_}),ce=0;function le(e){return K(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===W.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||te,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Q.Emulated,id:"c",styles:e.styles||te,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=ce++,n.inputs=ge(e.inputs,t),n.outputs=ge(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(he)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(fe)}:null,n})}function he(e){return ke(e)||function(e){return e[re]||null}(e)}function fe(e){return function(e){return e[ie]||null}(e)}var de={};function ve(e){return K(function(){var t={type:e.type,bootstrap:e.bootstrap||te,declarations:e.declarations||te,imports:e.imports||te,exports:e.exports||te,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(de[e.id]=e.type),t})}function pe(e,t){return K(function(){var n=be(e,!0);n.declarations=t.declarations||te,n.imports=t.imports||te,n.exports=t.exports||te})}function ge(e,t){if(null==e)return ee;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var me=le;function ye(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ke(e){return e[ne]||null}function be(e,t){var n=e[ae]||null;if(!n&&!0===t)throw new Error("Type ".concat(x(e)," does not have '\u0275mod' property."));return n}function we(e){return Array.isArray(e)&&"object"==typeof e[1]}function _e(e){return Array.isArray(e)&&!0===e[1]}function Te(e){return 0!=(8&e.flags)}function xe(e){return 2==(2&e.flags)}function Se(e){return 1==(1&e.flags)}function Ee(e){return null!==e.template}function Ie(e){return 0!=(512&e[2])}function Ae(e,t){return e.hasOwnProperty(se)?e[se]:null}var Ce=function(){function e(t,n,r){f(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return h(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Re(){return Oe}function Oe(e){return e.type.prototype.ngOnChanges&&(e.setInput=De),Ne}function Ne(){var e=Fe(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===ee)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function De(e,t,n,r){var i=Fe(e)||function(e,t){return e[Le]=t}(e,{previous:ee,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new Ce(u&&u.currentValue,t,o===ee),e[r]=t}Re.ngInherit=!0;var Pe,Le="__ngSimpleChanges__";function Fe(e){return e[Le]||null}function Ze(e){Pe=e}function Me(){return void 0!==Pe?Pe:"undefined"!=typeof document?document:void 0}function Ue(e){return!!e.listen}var qe={createRenderer:function(e,t){return Me()}};function Ve(e){for(;Array.isArray(e);)e=e[0];return e}function je(e,t){return Ve(t[e])}function Be(e,t){return Ve(t[e.index])}function ze(e,t){return e.data[t]}function He(e,t){var n=t[e];return we(n)?n:n[0]}function Ge(e){return 4==(4&e[2])}function Ke(e){return 128==(128&e[2])}function We(e,t){return null==t?null:e[t]}function Qe(e){e[18]=0}function Ye(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Je={lFrame:wt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $e(){return Je.bindingsEnabled}function Xe(){return Je.lFrame.lView}function et(){return Je.lFrame.tView}function tt(e){return Je.lFrame.contextLView=e,e[8]}function nt(){for(var e=rt();null!==e&&64===e.type;)e=e.parent;return e}function rt(){return Je.lFrame.currentTNode}function it(e,t){var n=Je.lFrame;n.currentTNode=e,n.isParent=t}function at(){return Je.lFrame.isParent}function ot(){Je.lFrame.isParent=!1}function st(){return Je.isInCheckNoChangesMode}function ut(e){Je.isInCheckNoChangesMode=e}function ct(){return Je.lFrame.bindingIndex}function lt(){return Je.lFrame.bindingIndex++}function ht(e){var t=Je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ft(e,t){var n=Je.lFrame;n.bindingIndex=n.bindingRootIndex=e,dt(t)}function dt(e){Je.lFrame.currentDirectiveIndex=e}function vt(e){var t=Je.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function pt(){return Je.lFrame.currentQueryIndex}function gt(e){Je.lFrame.currentQueryIndex=e}function mt(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function yt(e,t,n){if(n&z.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&z.Host||(r=mt(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}var a=Je.lFrame=bt();return a.currentTNode=t,a.lView=e,!0}function kt(e){var t=bt(),n=e[1];Je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function bt(){var e=Je.lFrame,t=null===e?null:e.child;return null===t?wt(e):t}function wt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function _t(){var e=Je.lFrame;return Je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Tt=_t;function xt(){var e=_t();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function St(){return Je.lFrame.selectedIndex}function Et(e){Je.lFrame.selectedIndex=e}function It(){var e=Je.lFrame;return ze(e.tView,e.selectedIndex)}function At(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Ct(e,t,n){Nt(e,t,3,n)}function Rt(e,t,n,r){(3&e[2])===n&&Nt(e,t,n,r)}function Ot(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Nt(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,s=void 0!==r?65535&e[18]:0;s<a;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Dt(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Dt(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var Pt=function e(t,n,r){f(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Lt(e,t,n){for(var r=Ue(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var c=a,l=n[++i];Zt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Ft(e){return 3===e||4===e||6===e}function Zt(e){return 64===e.charCodeAt(0)}function Mt(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Ut(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Ut(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function qt(e){return-1!==e}function Vt(e){return 32767&e}function jt(e,t){for(var n=function(e){return e>>16}(e),r=t;n>0;)r=r[15],n--;return r}var Bt=!0;function zt(e){var t=Bt;return Bt=e,t}var Ht=0;function Gt(e,t){var n=Wt(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Kt(r.data,e),Kt(t,null),Kt(r.blueprint,null));var i=Qt(e,t),a=e.injectorIndex;if(qt(i))for(var o=Vt(i),s=jt(i,t),u=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|u[o+c];return t[a+8]=i,a}function Kt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Wt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Qt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Yt(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ue)&&(r=n[ue]),null==r&&(r=n[ue]=Ht++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Jt(e,t,n){if(n&z.Optional)return e;D(t,"NodeInjector")}function $t(e,t,n,r){if(n&z.Optional&&void 0===r&&(r=null),0==(n&(z.Self|z.Host))){var i=e[9],a=H(void 0);try{return i?i.get(t,r,n&z.Optional):G(t,r,n&z.Optional)}finally{H(a)}}return Jt(r,t,n)}function Xt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ue)?e[ue]:void 0;return"number"==typeof t?t>=0?255&t:tn:t}(n);if("function"==typeof a){if(!yt(t,e,r))return r&z.Host?Jt(i,n,r):$t(t,n,r,i);try{var o=a(r);if(null!=o||r&z.Optional)return o;D(n)}finally{Tt()}}else if("number"==typeof a){var s=null,u=Wt(e,t),c=-1,l=r&z.Host?t[16][6]:null;for((-1===u||r&z.SkipSelf)&&(-1!==(c=-1===u?Qt(e,t):t[u+8])&&sn(r,!1)?(s=t[1],u=Vt(c),t=jt(c,t)):u=-1);-1!==u;){var h=t[1];if(on(a,u,h.data)){var f=nn(u,t,n,s,r,l);if(f!==en)return f}-1!==(c=t[u+8])&&sn(r,t[1].data[u+8]===l)&&on(a,u,t)?(s=h,u=Vt(c),t=jt(c,t)):u=-1}}}return $t(t,n,r,i)}var en={};function tn(){return new un(nt(),Xe())}function nn(e,t,n,r,i,a){var o=t[1],s=o.data[e+8],u=rn(s,o,n,null==r?xe(s)&&Bt:r!=o&&0!=(3&s.type),i&z.Host&&a===s);return null!==u?an(t,o,u,s):en}function rn(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,s=1048575&a,u=e.directiveStart,c=a>>20,l=i?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=o[u];if(d&&Ee(d)&&d.type===n)return u}return null}function an(e,t,n,r){var i=e[n],a=t.data;if(function(e){return e instanceof Pt}(i)){var o=i;o.resolving&&function(e,t){throw new R("200","Circular dependency in DI detected for ".concat(e))}(N(a[n]));var s=zt(o.canSeeViewProviders);o.resolving=!0;var u=o.injectImpl?H(o.injectImpl):null;yt(e,r,z.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,a=r.ngOnInit,o=r.ngDoCheck;if(i){var s=Oe(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==u&&H(u),zt(s),o.resolving=!1,Tt()}}return i}function on(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function sn(e,t){return!(e&z.Self||e&z.Host&&t)}var un=function(){function e(t,n){f(this,e),this._tNode=t,this._lView=n}return h(e,[{key:"get",value:function(e,t){return Xt(this._tNode,this._lView,e,void 0,t)}}]),e}();function cn(e){return K(function(){for(var t=e.prototype.constructor,n=t[se]||ln(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var a=i[se]||ln(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function ln(e){return C(e)?function(){var t=ln(A(e));return t&&t()}:Ae(e)}function hn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Ft(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(nt(),e)}var fn="__parameters__";function dn(e,t,n){return K(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=y(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty(fn)?e[fn]:Object.defineProperty(e,fn,{value:[]})[fn];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var vn=function(){function e(t,n){f(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return h(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),pn=new vn("AnalyzeForEntryComponents"),gn=Function;function mn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),mn(r,t)):t!==e&&t.push(r)}return t}function yn(e,t){e.forEach(function(e){return Array.isArray(e)?yn(e,t):t(e)})}function kn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function bn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function wn(e,t,n){var r=Tn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function _n(e,t){var n=Tn(e,t);if(n>=0)return e[1|n]}function Tn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var xn,Sn={},En="__NG_DI_FLAG__",In="ngTempTokenPath",An=/\n/gm,Cn="__source",Rn=_({provide:String,useValue:_});function On(e){var t=xn;return xn=e,t}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;if(void 0===xn)throw new Error("inject() must be called from an injection context");return null===xn?G(e,void 0,t):xn.get(e,t&z.Optional?null:void 0,t)}function Dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;return(U||Nn)(A(e),t)}function Pn(e){for(var t=[],n=0;n<e.length;n++){var r=A(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=z.Default,o=0;o<r.length;o++){var s=r[o],u=Fn(s);"number"==typeof u?-1===u?i=s.token:a|=u:i=s}t.push(Dn(i,a))}else t.push(Dn(r))}return t}function Ln(e,t){return e[En]=t,e.prototype[En]=t,e}function Fn(e){return e[En]}function Zn(e,t,n,r){var i=e[In];throw t[Cn]&&i.unshift(t[Cn]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=x(t);if(Array.isArray(t))i=t.map(x).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):x(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(An,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[In]=null,e}var Mn,Un,qn=Ln(dn("Inject",function(e){return{token:e}}),-1),Vn=Ln(dn("Optional"),8),jn=Ln(dn("SkipSelf"),4);function Bn(e){var t;return(null===(t=function(){if(void 0===Mn&&(Mn=null,X.trustedTypes))try{Mn=X.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return Mn}())||void 0===t?void 0:t.createHTML(e))||e}function zn(e){var t;return(null===(t=function(){if(void 0===Un&&(Un=null,X.trustedTypes))try{Un=X.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return Un}())||void 0===t?void 0:t.createHTML(e))||e}var Hn=function(){function e(t){f(this,e),this.changingThisBreaksApplicationSecurity=t}return h(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Gn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Hn),Kn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Hn),Wn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Hn),Qn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Hn),Yn=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Hn);function Jn(e){return e instanceof Hn?e.changingThisBreaksApplicationSecurity:e}function $n(e,t){var n=Xn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function Xn(e){return e instanceof Hn&&e.getTypeName()||null}function er(e){return new Gn(e)}function tr(e){return new Kn(e)}function nr(e){return new Wn(e)}function rr(e){return new Qn(e)}function ir(e){return new Yn(e)}var ar=function(){function e(t){f(this,e),this.inertDocumentHelper=t}return h(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Bn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}]),e}(),or=function(){function e(t){if(f(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return h(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Bn(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Bn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;("xmlns:ns1"===r||0===r.indexOf("ns1:"))&&e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),sr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ur=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function cr(e){return(e=String(e)).match(sr)||e.match(ur)?e:"unsafe:"+e}function lr(e){var t,n={},r=s(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function hr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var fr,dr=lr("area,br,col,hr,img,wbr"),vr=lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pr=lr("rp,rt"),gr=hr(dr,hr(vr,lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hr(pr,lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hr(pr,vr)),mr=lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yr=lr("srcset"),kr=hr(mr,yr,lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),br=lr("script,style,template"),wr=function(){function e(){f(this,e),this.sanitizedSomething=!1,this.buf=[]}return h(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!gr.hasOwnProperty(t))return this.sanitizedSomething=!0,!br.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var a=r.item(i),o=a.name,s=o.toLowerCase();if(kr.hasOwnProperty(s)){var u=a.value;mr[s]&&(u=cr(u)),yr[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return cr(e.trim())}).join(", ")),this.buf.push(" ",o,'="',xr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();gr.hasOwnProperty(t)&&!dr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(xr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),_r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tr=/([^\#-~ |!])/g;function xr(e){return e.replace(/&/g,"&amp;").replace(_r,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Tr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Sr(e,t){var n=null;try{fr=fr||function(e){var t=new or(e);return function(){try{return!!(new window.DOMParser).parseFromString(Bn(""),"text/html")}catch(e){return!1}}()?new ar(t):t}(e);var r=t?String(t):"";n=fr.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==a);return Bn((new wr).sanitizeChildren(Er(n)||n))}finally{if(n)for(var o=Er(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function Er(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ir=((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir);function Ar(e){var t=Rr();return t?zn(t.sanitize(Ir.HTML,e)||""):$n(e,"HTML")?zn(Jn(e)):Sr(Me(),O(e))}function Cr(e){var t=Rr();return t?t.sanitize(Ir.URL,e)||"":$n(e,"URL")?Jn(e):cr(O(e))}function Rr(){var e=Xe();return e&&e[12]}var Or="__ngContext__";function Nr(e,t){e[Or]=t}function Dr(e){var t=function(e){return e[Or]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Pr(e){return e.ngOriginalError}function Lr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Fr=function(){function e(){f(this,e),this._console=console}return h(e,[{key:"handleError",value:function(e){var t,n=this._findOriginalError(e),r=this._findContext(e),i=(t=e)&&t.ngErrorLogger||Lr;i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}},{key:"_findContext",value:function(e){return e?e.ngDebugContext||this._findContext(Pr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&Pr(e);t&&Pr(t);)t=Pr(t);return t||null}}]),e}(),Zr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(X);function Mr(e){return e instanceof Function?e():e}var Ur=((Ur=Ur||{})[Ur.Important=1]="Important",Ur[Ur.DashCase=2]="DashCase",Ur);function qr(e,t){return(void 0)(e,t)}function Vr(e){var t=e[3];return _e(t)?t[3]:t}function jr(e){return zr(e[13])}function Br(e){return zr(e[4])}function zr(e){for(;null!==e&&!_e(e);)e=e[4];return e}function Hr(e,t,n,r,i){if(null!=r){var a,o=!1;_e(r)?a=r:we(r)&&(o=!0,r=r[0]);var s=Ve(r);0===e&&null!==n?null==i?$r(t,n,s):Jr(t,n,s,i||null,!0):1===e&&null!==n?Jr(t,n,s,i||null,!0):2===e?function(e,t,n){var r=ei(e,t);r&&function(e,t,n,r){Ue(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,r,i){var a=n[7];a!==Ve(n)&&Hr(t,e,r,a,i);for(var o=10;o<n.length;o++){var s=n[o];oi(s[1],s,e,t,r,a)}}(t,e,a,n,i)}}function Gr(e,t,n){return Ue(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Kr(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ye(i,-1)),n.splice(r,1)}function Wr(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&Kr(i,r),t>0&&(e[n-1][4]=r[4]);var a=bn(e,10+t);!function(e,t){oi(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);var o=a[19];null!==o&&o.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Qr(e,t){if(!(256&t[2])){var n=t[11];Ue(n)&&n.destroyNode&&oi(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Yr(e[1],e);for(;t;){var n=null;if(we(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)we(t)&&Yr(t[1],t),t=t[3];null===t&&(t=e),we(t)&&Yr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Yr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof Pt)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var s=i[a[o]],u=a[o+1];try{u.call(s)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],s="function"==typeof o?o(t):Ve(t[o]),u=r[i=n[a+2]],c=n[a+3];"boolean"==typeof c?s.removeEventListener(n[a],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),a+=2}else{var l=r[i=n[a+1]];n[a].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)r[h]();t[7]=null}}(e,t),1===t[1].type&&Ue(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&_e(t[3])){n!==t[3]&&Kr(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function Jr(e,t,n,r,i){Ue(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function $r(e,t,n){Ue(e)?e.appendChild(t,n):t.appendChild(n)}function Xr(e,t,n,r,i){null!==r?Jr(e,t,n,r,i):$r(e,t,n)}function ei(e,t){return Ue(e)?e.parentNode(t):t.parentNode}function ti(e,t,n,r){var i=function(e,t,n){return function(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===Q.None||i===Q.Emulated)return null}return Be(r,n)}(e,t.parent,n)}(e,r,t),a=t[11],o=function(e,t,n){return function(e,t,n){return 40&e.type?Be(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)Xr(a,i,n[s],o,!1);else Xr(a,i,n,o,!1)}function ni(e,t){if(null!==t){var n=t.type;if(3&n)return Be(t,e);if(4&n)return ii(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return ni(e,r);var i=e[t.index];return _e(i)?ii(-1,i):Ve(i)}if(32&n)return qr(t,e)()||Ve(e[t.index]);var a=ri(e,t);return null!==a?Array.isArray(a)?a[0]:ni(Vr(e[16]),a):ni(e,t.next)}return null}function ri(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ii(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return ni(r,i)}return t[7]}function ai(e,t,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;if(o&&0===t&&(s&&Nr(Ve(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)ai(e,t,n.child,r,i,a,!1),Hr(t,e,i,s,a);else if(32&u){for(var c=qr(n,r),l=void 0;l=c();)Hr(t,e,i,l,a);Hr(t,e,i,s,a)}else 16&u?si(e,t,r,n,i,a):Hr(t,e,i,s,a);n=o?n.projectionNext:n.next}}function oi(e,t,n,r,i,a){ai(n,r,e.firstChild,t,i,a,!1)}function si(e,t,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Hr(t,e,i,s[u],a);else ai(e,t,s,o[3],i,a,!0)}function ui(e,t,n){Ue(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ci(e,t,n){Ue(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function li(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}var hi="ng-template";function fi(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==li((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function di(e){return 4===e.type&&e.value!==hi}function vi(e,t,n){return t===(4!==e.type||n?e.value:hi)}function pi(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Ft(e[t]))return t;return e.length}(i),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!vi(e,u,n)||""===u&&1===t.length){if(gi(r))return!1;o=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!fi(e.attrs,c,n)){if(gi(r))return!1;o=!0}continue}var l=mi(8&r?"class":u,i,di(e),n);if(-1===l){if(gi(r))return!1;o=!0;continue}if(""!==c){var h;h=l>a?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==li(f,c,0)||2&r&&c!==h){if(gi(r))return!1;o=!0}}}}else{if(!o&&!gi(r)&&!gi(u))return!1;if(o&&gi(u))continue;o=!1,r=u|1&r}}return gi(r)||o}function gi(e){return 0==(1&e)}function mi(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function yi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(pi(e,t[r],n))return!0;return!1}function ki(e,t){return e?":not("+t.trim()+")":t}function bi(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gi(o)&&(t+=ki(a,i),i=""),r=o,a=a||!gi(r);n++}return""!==i&&(t+=ki(a,i)),t}var wi={};function _i(e){Ti(et(),Xe(),St()+e,st())}function Ti(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Ct(t,i,n)}else{var a=e.preOrderHooks;null!==a&&Rt(t,a,0,n)}Et(n)}function xi(e,t){return e<<17|t<<2}function Si(e){return e>>17&32767}function Ei(e){return 2|e}function Ii(e){return(131068&e)>>2}function Ai(e,t){return-131069&e|t<<2}function Ci(e){return 1|e}function Ri(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1];if(-1!==a){var o=e.data[a];gt(i),o.contentQueries(2,t[a],a)}}}function Oi(e,t,n,r,i,a,o,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Qe(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=a,l[16]=2==t.type?e[16]:l,l}function Ni(e,t,n,r,i){var a=e.data[t];if(null===a)a=function(e,t,n,r,i){var a=rt(),o=at(),s=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=s),null!==a&&(o?null==a.child&&null!==s.parent&&(a.child=s):null===a.next&&(a.next=s)),s}(e,t,n,r,i),Je.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var o=function(){var e=Je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();a.injectorIndex=null===o?-1:o.injectorIndex}return it(a,!0),a}function Di(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Pi(e,t,n){kt(t);try{var r=e.viewQuery;null!==r&&la(1,r,n);var i=e.template;null!==i&&Zi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ri(e,t),e.staticViewQueries&&la(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)aa(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,xt()}}function Li(e,t,n,r){var i=t[2];if(256!=(256&i)){kt(t);var a=st();try{Qe(t),function(e){Je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Zi(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&Ct(t,s,null)}else{var u=e.preOrderHooks;null!==u&&Rt(t,u,0,null),Ot(t,0)}if(function(e){for(var t=jr(e);null!==t;t=Br(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],a=i[3];0==(1024&i[2])&&Ye(a,1),i[2]|=1024}}(t),function(e){for(var t=jr(e);null!==t;t=Br(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Ke(r)&&Li(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Ri(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&Ct(t,c)}else{var l=e.contentHooks;null!==l&&Rt(t,l,1),Ot(t,1)}!function(e,t){var n=e.hostBindingOpCodes;if(null!==n)try{for(var r=0;r<n.length;r++){var i=n[r];if(i<0)Et(~i);else{var a=i,o=n[++r],s=n[++r];ft(o,a),s(2,t[a])}}}finally{Et(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)ra(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&la(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&Ct(t,d)}else{var v=e.viewHooks;null!==v&&Rt(t,v,2),Ot(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ye(t[3],-1))}finally{xt()}}}function Fi(e,t,n,r){var i=t[10],a=!st(),o=Ge(t);try{a&&!o&&i.begin&&i.begin(),o&&Pi(e,t,r),Li(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function Zi(e,t,n,r,i){var a=St(),o=2&r;try{Et(-1),o&&t.length>20&&Ti(e,t,20,st()),n(r,i)}finally{Et(a)}}function Mi(e,t,n){if(Te(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function Ui(e,t,n){!$e()||(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||Gt(n,t),Nr(r,t);for(var o=n.initialInputs,s=i;s<a;s++){var u=e.data[s],c=Ee(u);c&&Xi(t,n,u);var l=an(t,e,s,n);Nr(l,t),null!==o&&ea(0,s-i,l,u,0,o),c&&(He(n.index,t)[8]=l)}}(e,t,n,Be(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=Je.lFrame.currentDirectiveIndex;try{Et(a);for(var s=r;s<i;s++){var u=e.data[s],c=t[s];dt(s),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Wi(u,c)}}finally{Et(-1),dt(o)}}(e,t,n))}function qi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Be,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(t,e):e[o];e[i++]=s}}function Vi(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ji(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ji(e,t,n,r,i,a,o,s,u,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:wi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Bi(e,t,n,r){var i=fa(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&da(e).push(r,i.length-1))}function zi(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Hi(e,t,n,r,i,a,o,s){var u,c=Be(t,n),l=t.inputs;!s&&null!=l&&(u=l[r])?(pa(e,n,u,r,i),xe(t)&&function(e,t){var n=He(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,Ue(a)?a.setProperty(c,r,i):Zt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Gi(e,t,n,r){var i=!1;if($e()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];yi(n,o.selectors,!1)&&(i||(i=[]),Yt(Gt(n,t),e,o.type),Ee(o)?(Qi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,Ji(n,e.data.length,a.length);for(var s=0;s<a.length;s++){var u=a[s];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=Di(e,t,a.length,null),f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=Mt(n.mergedAttrs,d.hostAttrs),$i(e,n,t,h,d),Yi(h,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);var v=d.type.prototype;!c&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||di(t)?null:ta(l,i);a.push(h),o=zi(l,u,o),s=zi(c.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new R("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=Mt(n.mergedAttrs,n.attrs),i}function Ki(e,t,n,r,i,a){var o=a.hostBindings;if(o){var s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);var u=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,o)}}function Wi(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Qi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Yi(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ee(t)&&(n[""]=e)}}function Ji(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function $i(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Ae(i.type)),o=new Pt(a,Ee(i),null);e.blueprint[r]=o,n[r]=o,Ki(e,t,0,r,Di(e,n,i.hostVars,wi),i)}function Xi(e,t,n){var r=Be(t,e),i=Vi(n),a=e[10],o=oa(e,Oi(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function ea(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var c=o[u++],l=o[u++],h=o[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function ta(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function na(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function ra(e,t){var n=He(t,e);if(Ke(n)){var r=n[1];80&n[2]?Li(r,n,r.template,n[8]):n[5]>0&&ia(n)}}function ia(e){for(var t=jr(e);null!==t;t=Br(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Li(i,r,i.template,r[8])}else r[5]>0&&ia(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var s=He(a[o],e);Ke(s)&&s[5]>0&&ia(s)}}function aa(e,t){var n=He(t,e),r=n[1];(function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Pi(r,n,n[8])}function oa(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function sa(e){for(;e;){e[2]|=64;var t=Vr(e);if(Ie(e)&&!t)return e;e=t}return null}function ua(e,t,n){var r=t[10];r.begin&&r.begin();try{Li(e,t,e.template,n)}catch(i){throw va(t,i),i}finally{r.end&&r.end()}}function ca(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Dr(n),i=r[1];Fi(i,r,i.template,n)}}(e[8])}function la(e,t,n){gt(0),t(e,n)}var ha=Promise.resolve(null);function fa(e){return e[7]||(e[7]=[])}function da(e){return e.cleanup||(e.cleanup=[])}function va(e,t){var n=e[9],r=n?n.get(Fr,null):null;r&&r.handleError(t)}function pa(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function ga(e,t,n){var r=je(t,e);!function(e,t,n){Ue(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function ma(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?i=S(i,s):2==a&&(r=S(r,s+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ya,ka=new vn("INJECTOR",-1),ba=function(){function e(){f(this,e)}return h(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;if(t===Sn){var n=new Error("NullInjectorError: No provider for ".concat(x(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),wa=new vn("Set Injector scope."),_a={},Ta={};function xa(){return void 0===ya&&(ya=new ba),ya}function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Ea(e,n,t||xa(),r)}var Ea=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&yn(n,function(e){return i.processProvider(e,t,n)}),yn([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(ka,Ca(void 0,this));var s=this.records.get(wa);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:x(t))}return h(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;this.assertNotDestroyed();var r,i=On(this),a=H(void 0);try{if(!(n&z.SkipSelf)){var o=this.records.get(e);if(void 0===o){var s=("function"==typeof(r=e)||"object"==typeof r&&r instanceof vn)&&F(e);o=s&&this.injectableDefInScope(s)?Ca(Ia(e),_a):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&z.Self?xa():this.parent).get(e,t=n&z.Optional&&t===Sn?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[In]=u[In]||[]).unshift(x(e)),i)throw u;return Zn(u,e,"R3InjectorError",this.source)}throw u}finally{H(a),On(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(x(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=A(e)))return!1;var i=M(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=M(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{yn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;yn(i,function(e){return r.processProvider(e,n,i||te)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(o);var h=Ae(o)||function(){return new o};this.records.set(o,Ca(h,_a));var f=i.providers;if(null!=f&&!s){var d=e;yn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r,i=Oa(e=A(e))?e:A(e&&e.provide),a=Ra(r=e)?Ca(void 0,r.useValue):Ca(Aa(r),_a);if(Oa(e)||!0!==e.multi)this.records.get(i);else{var o=this.records.get(i);o||((o=Ca(void 0,_a,!0)).factory=function(){return Pn(o.multi)},this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,a)}},{key:"hydrate",value:function(e,t){return t.value===_a&&(t.value=Ta,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=A(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function Ia(e){var t=F(e),n=null!==t?t.factory:Ae(e);if(null!==n)return n;if(e instanceof vn)throw new Error("Token ".concat(x(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(x(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[q]||e[j]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Aa(e,t,n){var r;if(Oa(e)){var i=A(e);return Ae(i)||Ia(i)}if(Ra(e))r=function(){return A(e.useValue)};else if(function(e){return!(!e||!e.useFactory)}(e))r=function(){return e.useFactory.apply(e,a(Pn(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return Dn(A(e.useExisting))};else{var o=A(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ae(o)||Ia(o);r=function(){return y(o,a(Pn(e.deps)))}}return r}function Ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Ra(e){return null!==e&&"object"==typeof e&&Rn in e}function Oa(e){return"function"==typeof e}var Na,Da=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Sa(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Pa=((Na=function(){function e(){f(this,e)}return h(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Da(e,t,""):Da(e.providers,e.parent,e.name||"")}}]),e}()).THROW_IF_NOT_FOUND=Sn,Na.NULL=new ba,Na.\u0275prov=P({token:Na,providedIn:"any",factory:function(){return Dn(ka)}}),Na.__NG_ELEMENT_ID__=-1,Na);function La(e,t){At(Dr(e)[1],nt())}function Fa(e){for(var t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0,r=[e];t;){var i=void 0;if(Ee(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var a=e;a.inputs=Za(e.inputs),a.declaredInputs=Za(e.declaredInputs),a.outputs=Za(e.outputs);var o=i.hostBindings;o&&qa(e,o);var s=i.viewQuery,u=i.contentQueries;if(s&&Ma(e,s),u&&Ua(e,u),T(e.inputs,i.inputs),T(e.declaredInputs,i.declaredInputs),T(e.outputs,i.outputs),Ee(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===Fa&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Mt(i.hostAttrs,n=Mt(n,i.hostAttrs))}}(r)}function Za(e){return e===ee?{}:e===te?[]:e}function Ma(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Ua(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function qa(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var Va=null;function ja(){if(!Va){var e=X.Symbol;if(e&&e.iterator)Va=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Va=r)}}return Va}var Ba=function(){function e(t){f(this,e),this.wrapped=t}return h(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function za(e){return!!Ha(e)&&(Array.isArray(e)||!(e instanceof Map)&&ja()in e)}function Ha(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ga(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ka(e,t,n,r){var i=Ga(e,t,n);return Ga(e,t+1,r)||i}function Wa(e,t,n,r){var i=Xe();return Ga(i,lt(),t)&&(et(),function(e,t,n,r,i,a){var o=Be(e,t);!function(e,t,n,r,i,a,o){if(null==a)Ue(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var s=null==o?O(a):o(a,r||"",i);Ue(e)?e.setAttribute(t,i,s,n):n?t.setAttributeNS(n,i,s):t.setAttribute(i,s)}}(t[11],o,a,e.value,n,r,i)}(It(),i,e,t,n,r)),Wa}function Qa(e,t,n,r){return Ga(e,lt(),n)?t+O(n)+r:wi}function Ya(e,t,n,r,i,a,o,s){var u=Xe(),c=et(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,a,o,s,u){var c=t.consts,l=Ni(t,e,4,o||null,We(c,s));Gi(t,n,l,We(c,u)),At(t,l);var h=l.tViews=ji(2,l,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,a,o):c.data[l];it(h,!1);var f=u[11].createComment("");ti(c,u,f,h),Nr(f,u),oa(u,u[l]=na(f,u,f,h)),Se(h)&&Ui(c,u,h),null!=o&&qi(u,h,s)}function Ja(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default,n=Xe();return null===n?Dn(e,t):Xt(nt(),n,A(e),t)}function $a(e,t,n){var r=Xe();return Ga(r,lt(),t)&&Hi(et(),It(),r,e,t,r[11],n,!1),$a}function Xa(e,t,n,r,i){var a=i?"class":"style";pa(e,n,t.inputs[a],a,r)}function eo(e,t,n,r){var i=Xe(),a=et(),o=20+e,s=i[11],u=i[o]=Gr(s,t,Je.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,r,i,a,o){var s=t.consts,u=Ni(t,e,2,i,We(s,a));return Gi(t,n,u,We(s,o)),null!==u.attrs&&ma(u,u.attrs,!1),null!==u.mergedAttrs&&ma(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,a,i,0,t,n,r):a.data[o];it(c,!0);var l=c.mergedAttrs;null!==l&&Lt(s,u,l);var h=c.classes;null!==h&&ci(s,u,h);var f=c.styles;null!==f&&ui(s,u,f),64!=(64&c.flags)&&ti(a,i,u,c),0===Je.lFrame.elementDepthCount&&Nr(u,i),Je.lFrame.elementDepthCount++,Se(c)&&(Ui(a,i,c),Mi(a,c,i)),null!==r&&qi(i,c)}function to(){var e=nt();at()?ot():it(e=e.parent,!1);var t=e;Je.lFrame.elementDepthCount--;var n=et();n.firstCreatePass&&(At(n,e),Te(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Xa(n,t,Xe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Xa(n,t,Xe(),t.stylesWithoutHost,!1)}function no(e,t,n,r){eo(e,t,n,r),to()}function ro(e,t,n){var r=Xe(),i=et(),a=e+20,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=We(a,r),s=Ni(t,e,8,"ng-container",o);return null!==o&&ma(s,o,!0),Gi(t,n,s,We(a,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(a,i,r,t,n):i.data[a];it(o,!0);var s=r[a]=r[11].createComment("");ti(i,r,s,o),Nr(s,r),Se(o)&&(Ui(i,r,o),Mi(i,o,r)),null!=n&&qi(r,o)}function io(){var e=nt(),t=et();at()?ot():it(e=e.parent,!1),t.firstCreatePass&&(At(t,e),Te(e)&&t.queries.elementEnd(e))}function ao(){return Xe()}function oo(e){return!!e&&"function"==typeof e.then}function so(e){return!!e&&"function"==typeof e.subscribe}var uo=so;function co(e,t,n,r){var i=Xe(),a=et(),o=nt();return function(e,t,n,r,i,a,o,s){var u=Se(r),c=e.firstCreatePass&&da(e),l=t[8],h=fa(t),f=!0;if(3&r.type||s){var d=Be(r,t),v=s?s(d):d,p=h.length,g=s?function(e){return s(Ve(e[r.index]))}:r.index;if(Ue(n)){var m=null;if(!s&&u&&(m=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=t[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}(e,t,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,f=!1;else{a=ho(r,t,l,a,!1);var y=n.listen(v,i,a);h.push(a,y),c&&c.push(i,g,p,p+1)}}else a=ho(r,t,l,a,!0),v.addEventListener(i,a,o),h.push(a),c&&c.push(i,g,p,o)}else a=ho(r,t,l,a,!1);var k,b=r.outputs;if(f&&null!==b&&(k=b[i])){var w=k.length;if(w)for(var _=0;_<w;_+=2){var T=t[k[_]][k[_+1]].subscribe(a),x=h.length;h.push(a,T),c&&c.push(i,r.index,x,-(x+1))}}}(a,i,i[11],o,e,t,!!n,r),co}function lo(e,t,n,r){try{return!1!==n(r)}catch(i){return va(e,i),!1}}function ho(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?He(e.index,t):t;0==(32&t[2])&&sa(o);for(var s=lo(t,0,r,a),u=n.__ngNextListenerFn__;u;)s=lo(t,0,u,a)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Je.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Je.lFrame.contextLView))[8]}(e)}function vo(e,t,n){return po(e,"",t,"",n),vo}function po(e,t,n,r,i){var a=Xe(),o=Qa(a,t,n,r);return o!==wi&&Hi(et(),It(),a,e,o,a[11],i,!1),po}function go(e,t,n,r,i){for(var a=e[n+1],o=null===t,s=r?Si(a):Ii(a),u=!1;0!==s&&(!1===u||o);){var c=e[s+1];mo(e[s],t)&&(u=!0,e[s+1]=r?Ci(c):Ei(c)),s=r?Si(c):Ii(c)}u&&(e[n+1]=r?Ei(a):Ci(a))}function mo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Tn(e,t)>=0}var yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ko(e){return e.substring(yo.key,yo.keyEnd)}function bo(e,t){var n=yo.textEnd;return n===t?-1:(t=yo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,yo.key=t,n),wo(e,t,n))}function wo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function _o(e,t,n){return Eo(e,t,n,!1),_o}function To(e,t){return Eo(e,t,null,!0),To}function xo(e){!function(e,t,n,r){var i=et(),a=ht(2);i.firstUpdatePass&&Ao(i,null,a,r);var o=Xe();if(n!==wi&&Ga(o,a,n)){var s=i.data[St()];if(Po(s,r)&&!Io(i,a)){var u=s.classesWithoutHost;null!==u&&(n=S(u,n||"")),Xa(i,s,o,n,r)}else!function(e,t,n,r,i,a,o,s){i===wi&&(i=te);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<a.length?a[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<a.length?a[c+1]:void 0,v=void 0,p=null;l===h?(u+=2,c+=2,f!==d&&(p=h,v=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,v=d),null!==p&&Oo(e,t,n,r,p,v,true,s),l=u<i.length?i[u]:null,h=c<a.length?a[c]:null}}(i,s,o,o[11],o[a+1],o[a+1]=function(e,t,n){if(null==n||""===n)return te;var r=[],i=Jn(n);if(Array.isArray(i))for(var a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(var o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,a)}}(wn,So,e,!0)}function So(e,t){for(var n=function(e){return function(e){yo.key=0,yo.keyEnd=0,yo.value=0,yo.valueEnd=0,yo.textEnd=e.length}(e),bo(e,wo(e,0,yo.textEnd))}(t);n>=0;n=bo(t,n))wn(e,ko(t),!0)}function Eo(e,t,n,r){var i=Xe(),a=et(),o=ht(2);a.firstUpdatePass&&Ao(a,e,o,r),t!==wi&&Ga(i,o,t)&&Oo(a,a.data[St()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=x(Jn(e)))),e}(t,n),r,o)}function Io(e,t){return t>=e.expandoStartIndex}function Ao(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[St()],o=Io(e,n);Po(a,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=vt(e),a=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ro(n=Co(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Co(i,e,t,n,r),null===a){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==Ii(r))return e[Si(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[Si(n?t.classBindings:t.styleBindings)]=r}(e,t,r,s=Ro(s=Co(null,e,t,s[1],r),t.attrs,r))}else a=function(e,t,n){for(var r,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=Ro(r,e[a].hostAttrs,n);return Ro(r,t.attrs,n)}(e,t,r)}return void 0!==a&&(r?t.residualClasses=a:t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=a?t.classBindings:t.styleBindings,s=Si(o),u=Ii(o);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||Tn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Si(e[s+1]);e[r+1]=xi(f,s),0!==f&&(e[f+1]=Ai(e[f+1],r)),e[s+1]=function(e,t){return 131071&e|t<<17}(e[s+1],r)}else e[r+1]=xi(s,0),0!==s&&(e[s+1]=Ai(e[s+1],r)),s=r;else e[r+1]=xi(u,0),0===s?s=r:e[u+1]=Ai(e[u+1],r),u=r;l&&(e[r+1]=Ei(e[r+1])),go(e,c,r,!0),go(e,c,r,!1),function(e,t,n,r,i){var a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&Tn(a,t)>=0&&(n[r+1]=Ci(n[r+1]))}(t,c,e,r,a),o=xi(s,u),a?t.classBindings=o:t.styleBindings=o}(i,a,t,n,o,r)}}function Co(e,t,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=Ro(r,(a=t[s]).hostAttrs,i),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function Ro(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var a=0;a<t.length;a++){var o=t[a];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),wn(e,o,!!n||t[++a]))}return void 0===e?null:e}function Oo(e,t,n,r,i,a,o,s){if(3&t.type){var u=e.data,c=u[s+1];Do(function(e){return 1==(1&e)}(c)?No(u,t,n,i,Ii(c),o):void 0)||(Do(a)||function(e){return 2==(2&e)}(c)&&(a=No(u,null,n,i,s,o)),function(e,t,n,r,i){var a=Ue(e);if(t)i?a?e.addClass(n,r):n.classList.add(r):a?e.removeClass(n,r):n.classList.remove(r);else{var o=-1===r.indexOf("-")?void 0:Ur.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),o|=Ur.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,s?"important":"")}}}(r,o,je(St(),n),i,a))}}function No(e,t,n,r,i,a){for(var o,s=null===t;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===wi&&(f=h?te:void 0);var d=h?_n(f,r):l===r?f:void 0;if(c&&!Do(d)&&(d=_n(u,r)),Do(d)&&(o=d,s))return o;var v=e[i+1];i=s?Si(v):Ii(v)}if(null!==t){var p=a?t.residualClasses:t.residualStyles;null!=p&&(o=_n(p,r))}return o}function Do(e){return void 0!==e}function Po(e,t){return 0!=(e.flags&(t?16:32))}function Lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Xe(),r=et(),i=e+20,a=r.firstCreatePass?Ni(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ue(e)?e.createText(t):e.createTextNode(t)}(n[11],t);ti(r,n,o,a),it(a,!1)}function Fo(e){return Zo("",e,""),Fo}function Zo(e,t,n){var r=Xe(),i=Qa(r,e,t,n);return i!==wi&&ga(r,St(),i),Zo}function Mo(e,t,n,r,i){var a=Xe(),o=function(e,t,n,r,i,a){var o=Ka(e,ct(),n,i);return ht(2),o?t+O(n)+r+O(i)+a:wi}(a,e,t,n,r,i);return o!==wi&&ga(a,St(),o),Mo}function Uo(e,t,n,r,i,a,o){var s=Xe(),u=function(e,t,n,r,i,a,o,s){var u=function(e,t,n,r,i){var a=Ka(e,t,n,r);return Ga(e,t+2,i)||a}(e,ct(),n,i,o);return ht(3),u?t+O(n)+r+O(i)+a+O(o)+s:wi}(s,e,t,n,r,i,a,o);return u!==wi&&ga(s,St(),u),Uo}function qo(e,t,n,r,i,a,o,s,u){var c=Xe(),l=function(e,t,n,r,i,a,o,s,u,c){var l=function(e,t,n,r,i,a){var o=Ka(e,t,n,r);return Ka(e,t+2,i,a)||o}(e,ct(),n,i,o,u);return ht(4),l?t+O(n)+r+O(i)+a+O(o)+s+O(u)+c:wi}(c,e,t,n,r,i,a,o,s,u);return l!==wi&&ga(c,St(),l),qo}function Vo(e,t,n){var r=Xe();return Ga(r,lt(),t)&&Hi(et(),It(),r,e,t,r[11],n,!0),Vo}function jo(e,t,n){var r=Xe();if(Ga(r,lt(),t)){var i=et(),a=It();Hi(i,a,r,e,t,function(e,t,n){return(null===e||Ee(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}(vt(i.data),a,r),n,!0)}return jo}var Bo=void 0,zo=["en",[["a","p"],["AM","PM"],Bo],[["AM","PM"],Bo,Bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bo,"{1} 'at' {0}",Bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Ho={};function Go(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Wo(t);if(n)return n;var r=t.split("-")[0];if(n=Wo(r))return n;if("en"===r)return zo;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Ko(e){return Go(e)[Qo.PluralCase]}function Wo(e){return e in Ho||(Ho[e]=X.ng&&X.ng.common&&X.ng.common.locales&&X.ng.common.locales[e]),Ho[e]}var Qo=((Qo=Qo||{})[Qo.LocaleId=0]="LocaleId",Qo[Qo.DayPeriodsFormat=1]="DayPeriodsFormat",Qo[Qo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qo[Qo.DaysFormat=3]="DaysFormat",Qo[Qo.DaysStandalone=4]="DaysStandalone",Qo[Qo.MonthsFormat=5]="MonthsFormat",Qo[Qo.MonthsStandalone=6]="MonthsStandalone",Qo[Qo.Eras=7]="Eras",Qo[Qo.FirstDayOfWeek=8]="FirstDayOfWeek",Qo[Qo.WeekendRange=9]="WeekendRange",Qo[Qo.DateFormat=10]="DateFormat",Qo[Qo.TimeFormat=11]="TimeFormat",Qo[Qo.DateTimeFormat=12]="DateTimeFormat",Qo[Qo.NumberSymbols=13]="NumberSymbols",Qo[Qo.NumberFormats=14]="NumberFormats",Qo[Qo.CurrencyCode=15]="CurrencyCode",Qo[Qo.CurrencySymbol=16]="CurrencySymbol",Qo[Qo.CurrencyName=17]="CurrencyName",Qo[Qo.Currencies=18]="Currencies",Qo[Qo.Directionality=19]="Directionality",Qo[Qo.PluralCase=20]="PluralCase",Qo[Qo.ExtraData=21]="ExtraData",Qo),Yo="en-US";function Jo(e){(function(e,t){null==e&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+" [Expected=> ".concat(null," ").concat("!="," ").concat(t," <=Actual]"))}(t,e)})(e,"Expected localeId to be defined"),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function $o(e,t,n,r,i){if(e=A(e),Array.isArray(e))for(var a=0;a<e.length;a++)$o(e[a],t,n,r,i);else{var o=et(),s=Xe(),u=Oa(e)?e:A(e.provide),c=Aa(e),l=nt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Oa(e)||!e.multi){var v=new Pt(c,i,Ja),p=ts(u,t,i?h:h+d,f);-1===p?(Yt(Gt(l,s),o,u),Xo(o,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(v),s.push(v)):(n[p]=v,s[p]=v)}else{var g=ts(u,t,h+d,f),m=ts(u,t,h,h+d),y=g>=0&&n[g],k=m>=0&&n[m];if(i&&!k||!i&&!y){Yt(Gt(l,s),o,u);var b=function(e,t,n,r,i){var a=new Pt(e,n,Ja);return a.multi=[],a.index=t,a.componentProviders=0,es(a,i,r&&!n),a}(i?rs:ns,n.length,i,r,c);!i&&k&&(n[m].providerFactory=b),Xo(o,e,t.length,0),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),s.push(b)}else Xo(o,e,g>-1?g:m,es(n[i?m:g],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function Xo(e,t,n,r){var i=Oa(t);if(i||function(e){return!!e.useClass}(t)){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var s=o.indexOf(n);-1===s?o.push(n,[r,a]):o[s+1].push(r,a)}else o.push(n,a)}}}function es(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ts(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function ns(e,t,n,r){return is(this.multi,[])}function rs(e,t,n,r){var i,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=an(n,n[1],this.providerFactory.index,r);is(a,i=s.slice(0,o));for(var u=o;u<s.length;u++)i.push(s[u])}else is(a,i=[]);return i}function is(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function as(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=et();if(r.firstCreatePass){var i=Ee(e);$o(n,r.data,r.blueprint,i,!0),$o(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var os=function e(){f(this,e)},ss=function(){function e(){f(this,e)}return h(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(x(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),us=function(){var e=function e(){f(this,e)};return e.NULL=new ss,e}();function cs(){}function ls(e,t){return new fs(Be(e,t))}var hs=function(){return ls(nt(),Xe())},fs=function(){var e=function e(t){f(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=hs,e}();function ds(e){return e instanceof fs?e.nativeElement:e}var vs=function e(){f(this,e)},ps=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=function(){return gs()},e}(),gs=function(){var e=Xe(),t=He(nt().index,e);return function(e){return e[11]}(we(t)?t:e)},ms=function(){var e=function e(){f(this,e)};return e.\u0275prov=P({token:e,providedIn:"root",factory:function(){return null}}),e}(),ys=function e(t){f(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},ks=new ys("12.2.11"),bs=function(){function e(){f(this,e)}return h(e,[{key:"supports",value:function(e){return za(e)}},{key:"create",value:function(e){return new _s(e)}}]),e}(),ws=function(e,t){return t},_s=function(){function e(t){f(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ws}return h(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<Es(n,r,i)?t:n,o=Es(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[a.previousIndex]=c-u}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!za(e))throw new Error("Error trying to diff '".concat(x(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[ja()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Ts(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ss),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ss),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),Ts=function e(t,n){f(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},xs=function(){function e(){f(this,e),this._head=null,this._tail=null}return h(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Ss=function(){function e(){f(this,e),this.map=new Map}return h(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new xs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function Es(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Is=function(){function e(){f(this,e)}return h(e,[{key:"supports",value:function(e){return e instanceof Map||Ha(e)}},{key:"create",value:function(){return new As}}]),e}(),As=function(){function e(){f(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return h(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Ha(e)))throw new Error("Error trying to diff '".concat(x(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new Cs(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),Cs=function e(t){f(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function Rs(){return new Os([new bs])}var Os=function(){var e=function(){function e(t){f(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Rs())},deps:[[e,new jn,new Vn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:Rs}),e}();function Ns(){return new Ds([new Is])}var Ds=function(){var e=function(){function e(t){f(this,e),this.factories=t}return h(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Ns())},deps:[[e,new jn,new Vn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:Ns}),e}();function Ps(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=t[n.index];if(null!==o&&r.push(Ve(o)),_e(o))for(var s=10;s<o.length;s++){var u=o[s],c=u[1].firstChild;null!==c&&Ps(u[1],u,c,r)}var l=n.type;if(8&l)Ps(e,t,n.child,r);else if(32&l)for(var h=qr(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=ri(t,n);if(Array.isArray(d))r.push.apply(r,a(d));else{var v=Vr(t[16]);Ps(v[1],v,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Ls=function(){function e(t,n){f(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return h(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return Ps(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(_e(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Wr(e,n),bn(t,n))}this._attachedToViewContainer=!1}Qr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Bi(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){sa(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ua(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){ut(!0);try{ua(e,t,n)}finally{ut(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,oi(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Fs=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e))._view=e,r}return h(n,[{key:"detectChanges",value:function(){ca(this._view)}},{key:"checkNoChanges",value:function(){!function(e){ut(!0);try{ca(e)}finally{ut(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Ls),Zs=function(e){return function(e,t,n){if(xe(e)&&!n){var r=He(e.index,t);return new Ls(r,r)}return 47&e.type?new Ls(t[16],t):null}(nt(),Xe(),16==(16&e))},Ms=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=Zs,e}(),Us=[new Is],qs=new Os([new bs]),Vs=new Ds(Us),js=function(){return Hs(nt(),Xe())},Bs=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=js,e}(),zs=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return h(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Oi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Pi(t,n,e),new Ls(n)}}]),n}(Bs);function Hs(e,t){return 4&e.type?new zs(t,e,ls(e,t)):null}var Gs=function e(){f(this,e)},Ks=function e(){f(this,e)},Ws=function(){return Xs(nt(),Xe())},Qs=function(){var e=function e(){f(this,e)};return e.__NG_ELEMENT_ID__=Ws,e}(),Ys=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return h(n,[{key:"element",get:function(){return ls(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new un(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Qt(this._hostTNode,this._hostLView);if(qt(e)){var t=jt(e,this._hostLView),n=Vt(e);return new un(t[1].data[n+8],t)}return new un(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Js(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(Gs,null);o&&(i=o)}var s=e.create(a,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(_e(r[3])){var a=this.indexOf(e);if(-1!==a)this.detach(a);else{var o=r[3],s=new n(o,o[6],o[3]);s.detach(s.indexOf(e))}}var u=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-10?(t[4]=n[i],kn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(i,r,c,u);var l=ii(u,c),h=r[11],f=ei(h,c[7]);return null!==f&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,oi(e,r,n,1,i,a)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),kn($s(c),u,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Js(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Wr(this._lContainer,t);n&&(bn($s(this._lContainer),t),Qr(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Wr(this._lContainer,t);return n&&null!=bn($s(this._lContainer),t)?new Ls(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(Qs);function Js(e){return e[8]}function $s(e){return e[8]||(e[8]=[])}function Xs(e,t){var n,r=t[e.index];if(_e(r))n=r;else{var i;if(8&e.type)i=Ve(r);else{var a=t[11];i=a.createComment("");var o=Be(e,t);Jr(a,ei(a,o),i,function(e,t){return Ue(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=na(r,t,i,e),oa(t,n)}return new Ys(n,e,t)}var eu={},tu=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).ngModule=e,r}return h(n,[{key:"resolveComponentFactory",value:function(e){var t=ke(e);return new iu(t,this.ngModule)}}]),n}(us);function nu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var ru=new vn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Zr}}),iu=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(bi).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return h(n,[{key:"inputs",get:function(){return nu(this.componentDef.inputs)}},{key:"outputs",get:function(){return nu(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,eu,i);return a!==eu||r===eu?a:t.get(n,r,i)}}}(e,r.injector):e,s=o.get(vs,qe),u=o.get(ms,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ue(e))return e.selectRootElement(t,n===Q.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Gr(s.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Zr,clean:ha,playerHandler:null,flags:0},v=ji(0,null,null,1,0,null,null,null,null,null),p=Oi(null,v,d,f,null,null,s,c,u,o);kt(p);try{var g=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var s=Ni(o,20,2,"#host",null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(ma(s,u,!0),null!==e&&(Lt(i,e,u),null!==s.classes&&ci(i,e,s.classes),null!==s.styles&&ui(i,e,s.styles)));var c=r.createRenderer(e,t),l=Oi(n,Vi(t),null,t.onPush?64:16,n[20],s,r,c,null,null);return o.firstCreatePass&&(Yt(Gt(s,n),o,t.type),Qi(o,s),Ji(s,n.length,1)),oa(n,l),n[20]=l}(h,this.componentDef,p,s,c);if(h)if(n)Lt(c,h,["ng-version",ks.full]);else{var m=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!gi(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,k=m.classes;y&&Lt(c,h,y),k&&k.length>0&&ci(c,h,k.join(" "))}if(a=ze(v,20),void 0!==t)for(var b=a.projection=[],w=0;w<this.ngContentSelectors.length;w++){var _=t[w];b.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=nt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),$i(e,r,t,Di(e,t,1,null),n));var i=an(t,e,r.directiveStart,r);Nr(i,t);var a=Be(r,t);return a&&Nr(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var s=nt();t.contentQueries(1,o,s.directiveStart)}var u=nt();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Et(u.index),Ki(n[1],u,0,u.directiveStart,u.directiveEnd,t),Wi(t,o)),o}(g,this.componentDef,p,d,[La]),Pi(v,p,null)}finally{xt()}return new au(this.componentType,i,ls(a,p),p,a)}}]),n}(os),au=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this)).location=i,s._rootLView=a,s._tNode=o,s.instance=r,s.hostView=s.changeDetectorRef=new Fs(a),s.componentType=e,s}return h(n,[{key:"injector",get:function(){return new un(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return function e(){f(this,e)}}()),ou=new Map,su=function(e){d(n,e);var t=v(n);function n(e,r){var i;f(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=g(i),i.destroyCbs=[],i.componentFactoryResolver=new tu(g(i));var a=be(e),o=e[oe]||null;return o&&Jo(o),i._bootstrapComponents=Mr(a.bootstrap),i._r3Injector=Sa(e,r,[{provide:Gs,useValue:g(i)},{provide:us,useValue:i.componentFactoryResolver}],x(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return h(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;return e===Pa||e===Gs||e===ka?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(Gs),uu=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).moduleType=e,null!==be(e)&&function(e){var t=new Set;!function e(n){var r=be(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(x(t)," vs ").concat(x(t.name)))}(i,ou.get(i),n),ou.set(i,n));var a,o=s(Mr(r.imports));try{for(o.s();!(a=o.n()).done;){var u=a.value;t.has(u)||(t.add(u),e(u))}}catch(c){o.e(c)}finally{o.f()}}(e)}(e),r}return h(n,[{key:"create",value:function(e){return new su(this.moduleType,e)}}]),n}(Ks);function cu(e,t){var n,r=et(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new R("302","The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var a=n.factory||(n.factory=Ae(n.type)),o=H(Ja);try{var s=zt(!1),u=a();return zt(s),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(r,Xe(),i,u),u}finally{H(o)}}function lu(e,t,n){var r=e+20,i=Xe(),a=function(e,t){return e[t]}(i,r);return function(e,t){return Ba.isWrapped(t)&&(t=Ba.unwrap(t),e[ct()]=wi),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?function(e,t,n,r,i,a){var o=t+n;return Ga(e,o,i)?function(e,t,n){return e[t]=n}(e,o+1,a?r.call(a,i):r(i)):function(e,t){var n=e[t];return n===wi?void 0:n}(e,o+1)}(i,function(){var e=Je.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),t,a.transform,n,a):a.transform(n))}function hu(e){return function(t){setTimeout(e,void 0,t)}}var fu=function(e){d(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(this,n),(e=t.call(this)).__isAsync=r,e}return h(n,[{key:"emit",value:function(e){i(w(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var a,o,s,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(a=f.next)||void 0===a?void 0:a.bind(f),l=null===(o=f.error)||void 0===o?void 0:o.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=hu(l),c&&(c=hu(c)),h&&(h=hu(h)));var d=i(w(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof u.w&&e.add(d),d}}]),n}(o.xQ);function du(){return this._results[ja()]()}var vu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=ja(),r=e.prototype;r[n]||(r[n]=du)}return h(e,[{key:"changes",get:function(){return this._changes||(this._changes=new fu)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=mn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var pu=function(){function e(t){f(this,e),this.queryList=t,this.matches=null}return h(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),gu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.queries=t}return h(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Ru(e,t).matches&&this.queries[t].setDirty()}}]),e}(),mu=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;f(this,e),this.predicate=t,this.flags=n,this.read=r},yu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];f(this,e),this.queries=t}return h(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),ku=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;f(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return h(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,bu(t,i)),this.matchTNodeWithReadOption(e,t,rn(t,e,i,!1,!1))}else n===Bs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,rn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===fs||r===Qs||r===Bs&&4&t.type)this.addMatch(t.index,-2);else{var i=rn(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function bu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function wu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?ls(e,t):4&e.type?Hs(e,t):null}(t,e):-2===n?function(e,t,n){return n===fs?ls(t,e):n===Bs?Hs(t,e):n===Qs?Xs(t,e):void 0}(e,t,r):an(e,e[1],n,t)}function _u(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var c=o[u];s.push(c<0?null:wu(t,a[c],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function Tu(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=_u(e,t,i,n),s=0;s<a.length;s+=2){var u=a[s];if(u>0)r.push(o[s/2]);else{for(var c=a[s+1],l=t[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Tu(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],v=0;v<d.length;v++){var p=d[v];Tu(p[1],p,c,r)}}}return r}function xu(e){var t=Xe(),n=et(),r=pt();gt(r+1);var i=Ru(n,r);if(e.dirty&&Ge(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?Tu(n,t,r,[]):_u(n,t,i,r);e.reset(a,ds),e.notifyOnChanges()}return!0}return!1}function Su(e,t,n){var r=et();r.firstCreatePass&&(Cu(r,new mu(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Au(r,Xe(),t)}function Eu(e,t,n,r){var i=et();if(i.firstCreatePass){var a=nt();Cu(i,new mu(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Au(i,Xe(),n)}function Iu(){return e=Xe(),t=pt(),e[19].queries[t].queryList;var e,t}function Au(e,t,n){var r=new vu(4==(4&n));Bi(e,t,r,r.destroy),null===t[19]&&(t[19]=new gu),t[19].queries.push(new pu(r))}function Cu(e,t,n){null===e.queries&&(e.queries=new yu),e.queries.track(new ku(t,n))}function Ru(e,t){return e.queries.getByIndex(t)}var Ou=new vn("Application Initializer"),Nu=function(){var e=function(){function e(t){var n=this;f(this,e),this.appInits=t,this.resolve=cs,this.reject=cs,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return h(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(oo(r))t.push(r);else if(uo(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Dn(Ou,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Du=new vn("AppId"),Pu={provide:Du,useFactory:function(){return"".concat(Lu()).concat(Lu()).concat(Lu())},deps:[]};function Lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Fu=new vn("Platform Initializer"),Zu=new vn("Platform ID"),Mu=new vn("appBootstrapListener"),Uu=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),qu=new vn("LocaleId"),Vu=new vn("DefaultCurrencyCode"),ju=function e(t,n){f(this,e),this.ngModuleFactory=t,this.componentFactories=n},Bu=function(e){return new uu(e)},zu=Bu,Hu=function(e){return Promise.resolve(Bu(e))},Gu=function(e){var t=Bu(e),n=Mr(be(e).declarations).reduce(function(e,t){var n=ke(t);return n&&e.push(new iu(n)),e},[]);return new ju(t,n)},Ku=Gu,Wu=function(e){return Promise.resolve(Gu(e))},Qu=function(){var e=function(){function e(){f(this,e),this.compileModuleSync=zu,this.compileModuleAsync=Hu,this.compileModuleAndAllComponentsSync=Ku,this.compileModuleAndAllComponentsAsync=Wu}return h(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Yu=Promise.resolve(0);function Ju(e){"undefined"==typeof Zone?Yu.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var $u=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,a=void 0!==i&&i,o=t.shouldCoalesceRunChangeDetection,s=void 0!==o&&o;if(f(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fu(!1),this.onMicrotaskEmpty=new fu(!1),this.onStable=new fu(!1),this.onError=new fu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!s&&a,u.shouldCoalesceRunChangeDetection=s,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){var e=X.requestAnimationFrame,t=X.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){var t=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(X,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,tc(e),e.isCheckStableRunning=!0,ec(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),tc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(n,r,i,a,o,s){try{return nc(e),n.invokeTask(i,a,o,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&t(),rc(e)}},onInvoke:function(n,r,i,a,o,s,u){try{return nc(e),n.invoke(i,a,o,s,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),rc(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,tc(e),ec(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}(u)}return h(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,Xu,cs,cs);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),Xu={};function ec(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function tc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function nc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rc(e){e._nesting--,ec(e)}var ic=function(){function e(){f(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fu,this.onMicrotaskEmpty=new fu,this.onStable=new fu,this.onError=new fu}return h(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),ac=function(){var e=function(){function e(t){var n=this;f(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return h(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){$u.assertNotInAngularZone(),Ju(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Ju(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Dn($u))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),oc=function(){var e=function(){function e(){f(this,e),this._applications=new Map,cc.addToWindow(this)}return h(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return cc.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function sc(e){cc=e}var uc,cc=new(function(){function e(){f(this,e)}return h(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),lc=!0,hc=!1;function fc(){return hc=!0,lc}function dc(){if(hc)throw new Error("Cannot enable prod mode after platform setup.");lc=!1}var vc=new vn("AllowMultipleToken"),pc=function e(t,n){f(this,e),this.name=t,this.token=n};function gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new vn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=mc();if(!a||a.injector.get(vc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:wa,useValue:"platform"});!function(e){if(uc&&!uc.destroyed&&!uc.injector.get(vc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");uc=e.get(yc);var t=e.get(Fu,null);t&&t.forEach(function(e){return e()})}(Pa.create({providers:o,name:r}))}return function(e){var t=mc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function mc(){return uc&&!uc.destroyed?uc:null}var yc=function(){var e=function(){function e(t){f(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return h(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n=this,r=function(e,t){return"noop"===e?new ic:("zone.js"===e?void 0:e)||new $u({enableLongStackTrace:fc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)})}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:$u,useValue:r}];return r.run(function(){var a=Pa.create({providers:i,parent:n.injector,name:e.moduleType.name}),o=e.create(a),s=o.injector.get(Fr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular(function(){var e=r.onError.subscribe({next:function(e){s.handleError(e)}});o.onDestroy(function(){wc(n._modules,o),e.unsubscribe()})}),function(e,r,i){try{var a=((s=o.injector.get(Nu)).runInitializers(),s.donePromise.then(function(){return Jo(o.injector.get(qu,Yo)||Yo),n._moduleDoBootstrap(o),o}));return oo(a)?a.catch(function(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}):a}catch(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}var s}(s,r)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=kc({},n);return function(e,t,n){var r=new uu(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(bc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(x(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Dn(Pa))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function kc(e,t){return Array.isArray(t)?t.reduce(kc,e):Object.assign(Object.assign({},e),t)}var bc=function(){var e=function(){function e(t,n,r,i,a){var o=this;f(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var s=new c.y(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),u=new c.y(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){$u.assertNotInAngularZone(),Ju(function(){!o._stable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks&&(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){$u.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,l.T)(s,u.pipe(function(e){return(0,k.x)()(function(e,t){return function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,p.N);return r.source=t,r.subjectFactory=n,r}}(b)(e))}))}return h(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof os?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(Gs),a=n.create(Pa.NULL,[],t||n.selector,i),o=a.location.nativeElement,s=a.injector.get(ac,null),u=s&&a.injector.get(oc);return s&&u&&u.registerApplication(o,s),a.onDestroy(function(){r.detachView(a.hostView),wc(r.components,a),u&&u.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=s(this._views);try{for(n.s();!(t=n.n()).done;){var r;t.value.detectChanges()}}catch(i){n.e(i)}finally{n.f()}}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;wc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Mu,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Dn($u),Dn(Pa),Dn(Fr),Dn(us),Dn(Nu))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function wc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var _c=function e(){f(this,e)},Tc=function e(){f(this,e)},xc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Sc=function(){var e=function(){function e(t,n){f(this,e),this._compiler=t,this._config=n||xc}return h(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var n=this,i=t(e.split("#"),2),a=i[0],o=i[1];return void 0===o&&(o="default"),r(8255)(a).then(function(e){return e[o]}).then(function(e){return Ec(e,a,o)}).then(function(e){return n._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var n=t(e.split("#"),2),i=n[0],a=n[1],o="NgFactory";return void 0===a&&(a="default",o=""),r(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[a+o]}).then(function(e){return Ec(e,i,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Dn(Qu),Dn(Tc,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Ec(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Ic=function(e){return null},Ac=gc(null,"core",[{provide:Zu,useValue:"unknown"},{provide:yc,deps:[Pa]},{provide:oc,deps:[]},{provide:Uu,deps:[]}]),Cc=[{provide:bc,useClass:bc,deps:[$u,Pa,Fr,us,Nu]},{provide:ru,deps:[$u],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Nu,useClass:Nu,deps:[[new Vn,Ou]]},{provide:Qu,useClass:Qu,deps:[]},Pu,{provide:Os,useFactory:function(){return qs},deps:[]},{provide:Ds,useFactory:function(){return Vs},deps:[]},{provide:qu,useFactory:function(e){return Jo(e=e||"undefined"!=typeof $localize&&$localize.locale||Yo),e},deps:[[new qn(qu),new Vn,new jn]]},{provide:Vu,useValue:"USD"}],Rc=function(){var e=function e(t){f(this,e)};return e.\u0275fac=function(t){return new(t||e)(Dn(bc))},e.\u0275mod=ve({type:e}),e.\u0275inj=L({providers:Cc}),e}()},8939:function(e,n,r){"use strict";r.d(n,{hO:function(){return b},xv:function(){return p},Dh:function(){return v},GT:function(){return l},cc:function(){return w},on:function(){return g},pX:function(){return c}});var i=r(3018),o=r(7841),s=r(6643);e=r.hmd(e);var u=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,o){return n.runOutsideAngular(function(){var i;if(e[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,e[o]),e[o];if(u.indexOf(o)>-1)return function(){};var s=t.toPromise().then(function(e){var t=e&&e[o];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return s[t]},apply:function(e,t,n){return s.then(function(e){var t,i=e&&e.apply(void 0,a(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(o,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},d=function e(t){return f(this,e),t},v=new i.OlP("angularfire2.app.options"),p=new i.OlP("angularfire2.app.name");function g(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var a=o.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return o.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(a.options)&&y("error","".concat(a.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(s){}return new d(a)}var m,y=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},k={provide:d,useFactory:g,deps:[v,i.R0b,[new i.FiY,p]]},b=((m=function(){function e(t){f(this,e),o.Z.registerVersion("angularfire",s.q4.full,"core"),o.Z.registerVersion("angularfire",s.q4.full,"app-compat"),o.Z.registerVersion("angular",i.q4F.full,t.toString())}return h(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:v,useValue:t},{provide:p,useValue:n}]}}}]),e}()).\u0275fac=function(e){return new(e||m)(i.LFG(i.Lbi))},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({providers:[k]}),m);function w(e,n,r,i,a){var o=t(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),s=o[1],u=o[2];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(r){return e===t}}(a,u)||(T("error","".concat(n," was already initialized on the ").concat(r," Firebase App with different settings.").concat(_?" You may need to reload as Firebase is not HMR aware.":"")),T("warn",{is:a,was:u})),s;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,a]),c}var _=!!e.hot,T=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:function(e,n,r){"use strict";r.d(n,{q4:function(){return Un},iC:function(){return Yn},HU:function(){return Wn},vb:function(){return zn},JM:function(){return Bn}});var i=r(3018),o=r(2329),u=r(8239),c=r(5452),l=r(3854),d=r(6034),v=r(5601),p=r(6676),g="@firebase/installations",m="0.5.2",y="w:".concat(m),k="FIS_v2",b=new l.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function w(e){return e instanceof l.ZR&&e.code.includes("request-failed")}function _(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function T(e){return{token:e.token,requestStatus:2,expiresIn:R(e.expiresIn),creationTime:Date.now()}}function x(e,t){return S.apply(this,arguments)}function S(){return(S=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",b.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I(e,t){var n=t.refreshToken,r=E(e);return r.append("Authorization",function(e){return"".concat(k," ").concat(e)}(n)),r}function A(e){return C.apply(this,arguments)}function C(){return(C=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){return Number(e.replace("s","000"))}function O(e,t){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fid,i=_(t),a={method:"POST",headers:E(t),body:JSON.stringify({fid:r,authVersion:k,appId:t.appId,sdkVersion:y})},e.next=5,A(function(){return fetch(i,a)});case 5:if(!(o=e.sent).ok){e.next=11;break}return e.next=9,o.json();case 9:return s=e.sent,e.abrupt("return",{fid:s.fid||r,registrationStatus:2,refreshToken:s.refreshToken,authToken:T(s.authToken)});case 11:return e.next=13,x("Create Installation",o);case 13:throw e.sent;case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return new Promise(function(t){setTimeout(t,e)})}var P=/^[cdef][\w-]{21}$/;function L(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,a(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return P.test(t)?t:""}catch(e){return""}}function F(e){return"".concat(e.appName,"!").concat(e.appId)}var Z=new Map;function M(e,t){var n=F(e);U(n,t),function(e,t){var n=(!q&&"BroadcastChannel"in self&&((q=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){U(e.data.key,e.data.fid)}),q);n&&n.postMessage({key:e,fid:t}),0===Z.size&&q&&(q.close(),q=null)}(n,t)}function U(e,t){var n=Z.get(e);if(n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var q=null,V="firebase-installations-store",j=null;function B(){return j||(j=(0,p.openDb)("firebase-installations-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(V)}})),j}function z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t),e.next=3,B();case 3:return i=e.sent.transaction(V,"readwrite"),a=i.objectStore(V),e.next=7,a.get(r);case 7:return o=e.sent,e.next=10,a.put(n,r);case 10:return e.next=12,i.complete;case 12:return(!o||o.fid!==n.fid)&&M(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=F(t),e.next=3,B();case 3:return r=e.sent.transaction(V,"readwrite"),e.next=6,r.objectStore(V).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=F(t),e.next=3,B();case 3:return i=e.sent.transaction(V,"readwrite"),a=i.objectStore(V),e.next=7,a.get(r);case 7:if(o=e.sent,void 0!==(s=n(o))){e.next=14;break}return e.next=12,a.delete(r);case 12:e.next=16;break;case 14:return e.next=16,a.put(s,r);case 16:return e.next=18,i.complete;case 18:return s&&(!o||o.fid!==s.fid)&&M(t,s.fid),e.abrupt("return",s);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return(J=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,function(e){var r=$(e),i=X(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(e){return ie(e||{fid:L(),registrationStatus:0})}function X(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(b.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return ee.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:te(e)}:{installationEntry:t}}function ee(){return(ee=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=z,e.t1=t,e.next=5,O(t,n);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:if(e.prev=9,e.t3=e.catch(0),!w(e.t3)||409!==e.t3.customData.serverCode){e.next=16;break}return e.next=14,G(t);case 14:e.next=18;break;case 16:return e.next=18,z(t,{fid:n.fid,registrationStatus:0});case 18:throw e.t3;case 19:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,D(100);case 6:return e.next=8,re(t);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,Y(t);case 14:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",a||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e){return W(e,function(e){if(!e)throw b.create("installation-not-found");return ie(e)})}function ie(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function ae(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appConfig,i=t.platformLoggerProvider,a=se(r,n),o=I(r,n),(s=i.getImmediate({optional:!0}))&&o.append("x-firebase-client",s.getPlatformInfoString()),u={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:y}})},e.next=6,A(function(){return fetch(a,u)});case 6:if(!(c=e.sent).ok){e.next=13;break}return e.t0=T,e.next=11,c.json();case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.next=15,x("Generate Auth Token",c);case 15:throw e.sent;case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e,t){var n=t.fid;return"".concat(_(e),"/").concat(n,"/authTokens:generate")}function ue(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,W(t.appConfig,function(e){if(!pe(e))throw b.create("not-registered");var i=e.authToken;if(!n&&ge(i))return e;if(1===i.requestStatus)return r=le(t,n),e;if(!navigator.onLine)throw b.create("app-offline");var a=me(e);return r=de(t,a),a});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e,t){return he.apply(this,arguments)}function he(){return(he=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,D(100);case 6:return e.next=8,fe(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?ue(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e){return W(e,function(e){if(!pe(e))throw b.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function de(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,z(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),w(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,z(t.appConfig,a);case 16:e.next=20;break;case 18:return e.next=20,G(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function pe(e){return void 0!==e&&2===e.registrationStatus}function ge(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function me(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ye(){return(ye=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,Y(n.appConfig);case 3:return r=e.sent,i=r.installationEntry,a=r.registrationPromise,e.abrupt("return",(a?a.catch(console.error):ue(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,be(r.appConfig);case 4:return e.next=6,ue(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e){return we.apply(this,arguments)}function we(){return(we=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(e){return b.create("missing-app-config-values",{valueName:e})}var Te="installations";(0,c._registerComponent)(new d.wA(Te,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw _e("App Configuration");if(!e.name)throw _e("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw _e(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,c._getProvider)(t,"platform-logger"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,c._registerComponent)(new d.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,c._getProvider)(t,Te).getImmediate();return{getId:function(){return function(e){return ye.apply(this,arguments)}(n)},getToken:function(e){return function(e){return ke.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,c.registerVersion)(g,m),(0,c.registerVersion)(g,m,"esm2017");var xe="@firebase/remote-config",Se=new l.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"}),Ee=function(){function e(t,n,r,i){f(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return h(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=r.sent,a=t(i,2),o=a[0],!(s=a[1])||!n.isCachedDataFresh(e.cacheMaxAgeMillis,o)){r.next=8;break}return r.abrupt("return",s);case 8:return e.eTag=s&&s.eTag,r.next=11,n.client.fetch(e);case 11:return u=r.sent,c=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===u.status&&c.push(n.storage.setLastSuccessfulFetchResponse(u)),r.next=16,Promise.all(c);case 16:return r.abrupt("return",u);case 17:case"end":return r.stop()}},r)}))()}}]),e}();function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var Ae=function(){function e(t,n,r,i,a,o){f(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=o}return h(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s,u,c,l,h,f,d,v,p,g,m,y,k,b;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]);case 2:return i=r.sent,a=t(i,2),o=a[0],s=a[1],u="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(n.projectId,"/namespaces/").concat(n.namespace,":fetch?key=").concat(n.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:n.sdkVersion,app_instance_id:o,app_instance_id_token:s,app_id:n.appId,language_code:Ie()},h={method:"POST",headers:c,body:JSON.stringify(l)},f=fetch(u,h),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),r.prev=12,r.next=15,Promise.race([f,d]);case 15:return r.next=17,f;case 17:v=r.sent,r.next=24;break;case 20:throw r.prev=20,r.t0=r.catch(12),p="fetch-client-network","AbortError"===r.t0.name&&(p="fetch-timeout"),Se.create(p,{originalErrorMessage:r.t0.message});case 24:if(g=v.status,m=v.headers.get("ETag")||void 0,200!==v.status){r.next=37;break}return r.prev=27,r.next=30,v.json();case 30:b=r.sent,r.next=36;break;case 33:throw r.prev=33,r.t1=r.catch(27),Se.create("fetch-client-parse",{originalErrorMessage:r.t1.message});case 36:y=b.entries,k=b.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===k?g=500:"NO_CHANGE"===k?g=304:("NO_TEMPLATE"===k||"EMPTY_CONFIG"===k)&&(y={}),304===g||200===g){r.next=39;break}throw Se.create("fetch-status",{httpStatus:g});case 39:return r.abrupt("return",{status:g,eTag:m,config:y});case 40:case"end":return r.stop()}},r,null,[[12,20],[27,33]])}))()})}]),e}(),Ce=function(){function e(t,n){f(this,e),this.client=t,this.storage=n}return h(e,[{key:"fetch",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,i=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(Se.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,i.client.fetch(e);case 5:return a=t.sent,t.next=8,i.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",a);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return o={throttleEndTimeMillis:Date.now()+(0,l.$s)(r),backoffCount:r+1},t.next=18,i.storage.setThrottleMetadata(o);case 18:return t.abrupt("return",i.attemptFetch(e,o));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),Re=function(){function e(t,n,r,i,a){f(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return h(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function Oe(e,t){var n=e.target.error||void 0;return Se.create(t,{originalErrorMessage:n&&n.message})}var Ne="app_namespace_store",De=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var r=indexedDB.open("firebase_remote_config",1);r.onerror=function(e){t(Oe(e,"storage-open"))},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Ne,{keyPath:"compositeKey"})}}}catch(n){t(Se.create("storage-open",{originalErrorMessage:n}))}});f(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return h(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction([Ne],"readonly").objectStore(Ne),o=t.createCompositeKey(e);try{var s=a.get(o);s.onerror=function(e){i(Oe(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(s){i(Se.create("storage-get",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,a){var o=i.transaction([Ne],"readwrite").objectStore(Ne),s=n.createCompositeKey(e);try{var u=o.put({compositeKey:s,value:t});u.onerror=function(e){a(Oe(e,"storage-set"))},u.onsuccess=function(){r()}}catch(u){a(Se.create("storage-set",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var a=r.transaction([Ne],"readwrite").objectStore(Ne),o=t.createCompositeKey(e);try{var s=a.delete(o);s.onerror=function(e){i(Oe(e,"storage-delete"))},s.onsuccess=function(){n()}}catch(s){i(Se.create("storage-delete",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),Pe=function(){function e(t){f(this,e),this.storage=t}return h(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(a=t.sent)&&(e.lastFetchStatus=a),t.next=9,r;case 9:return(o=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=o),t.next=13,i;case 13:(s=t.sent)&&(e.activeConfig=s);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function Le(){return(Le=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,c._registerComponent)(new d.wA("remote-config",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Se.create("registration-window");if(!(0,l.hl)())throw Se.create("indexed-db-unavailable");var a=r.options,o=a.projectId,s=a.apiKey,u=a.appId;if(!o)throw Se.create("registration-project-id");if(!s)throw Se.create("registration-api-key");if(!u)throw Se.create("registration-app-id");var h=new De(u,r.name,n=n||"firebase"),f=new Pe(h),d=new v.Yd(xe);d.logLevel=v.in.ERROR;var p=new Ae(i,c.SDK_VERSION,n,o,s,u),g=new Ce(p,h),m=new Ee(g,h,f,d),y=new Re(r,m,f,h,d);return function(e){var t=(0,l.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0}))}(y),y},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(xe,"0.3.1"),(0,c.registerVersion)(xe,"0.3.1","esm2017");var Fe,Ze="/firebase-messaging-sw.js",Me="/firebase-cloud-messaging-push-scope",Ue="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qe="google.c.a.c_id",Ve="google.c.a.c_l",je="google.c.a.ts",Be="google.c.a.e",ze=((Fe=ze||(ze={})).PUSH_RECEIVED="push-received",Fe.NOTIFICATION_CLICKED="notification-clicked",ze);function He(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,a(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ge(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Ke="fcm_token_details_db",We="fcm_token_object_Store";function Qe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(Ke);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,p.openDb)(Ke,5,function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.oldVersion<2)&&r.objectStoreNames.contains(We)){e.next=2;break}return e.abrupt("return");case 2:return a=r.transaction.objectStore(We),e.next=5,a.index("fcmSenderId").get(t);case 5:return o=e.sent,e.next=8,a.clear();case 8:if(!o){e.next=17;break}if(2!==r.oldVersion){e.next=16;break}if((s=o).auth&&s.p256dh&&s.endpoint){e.next=13;break}return e.abrupt("return");case 13:n={token:s.fcmToken,createTime:null!==(i=s.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:s.auth,p256dh:s.p256dh,endpoint:s.endpoint,swScope:s.swScope,vapidKey:"string"==typeof s.vapidKey?s.vapidKey:He(s.vapidKey)}},e.next=17;break;case 16:3===r.oldVersion?n={token:(u=o).fcmToken,createTime:u.createTime,subscriptionOptions:{auth:He(u.auth),p256dh:He(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:He(u.vapidKey)}}:4===r.oldVersion&&(n={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:He(c.auth),p256dh:He(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:He(c.vapidKey)}});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=13,(0,p.deleteDb)(Ke);case 13:return e.next=15,(0,p.deleteDb)("fcm_vapid_details_db");case 15:return e.next=17,(0,p.deleteDb)("undefined");case 17:return e.abrupt("return",Je(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var $e="firebase-messaging-store",Xe=null;function et(){return Xe||(Xe=(0,p.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore($e)}})),Xe}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=st(t),e.next=3,et();case 3:return e.next=5,e.sent.transaction($e).objectStore($e).get(n);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,Qe(t.appConfig.senderId);case 10:if(!(i=e.sent)){e.next=15;break}return e.next=14,rt(t,i);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=st(t),e.next=3,et();case 3:return i=e.sent.transaction($e,"readwrite"),e.next=6,i.objectStore($e).put(n,r);case 6:return e.next=8,i.complete;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=st(t),e.next=3,et();case 3:return r=e.sent.transaction($e,"readwrite"),e.next=6,r.objectStore($e).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e){return e.appConfig.appId}var ut=new l.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t);case 2:return r=e.sent,i=yt(n),a={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(pt(t.appConfig),a);case 8:return e.next=10,e.sent.json();case 10:o=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),ut.create("token-subscribe-failed",{errorInfo:e.t0});case 16:if(!o.error){e.next=18;break}throw ut.create("token-subscribe-failed",{errorInfo:o.error.message});case 18:if(o.token){e.next=20;break}throw ut.create("token-subscribe-no-token");case 20:return e.abrupt("return",o.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function ht(e,t){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t);case 2:return r=e.sent,i=yt(n.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(pt(t.appConfig),"/").concat(n.token),a);case 8:return e.next=10,e.sent.json();case 10:o=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),ut.create("token-update-failed",{errorInfo:e.t0});case 16:if(!o.error){e.next=18;break}throw ut.create("token-update-failed",{errorInfo:o.error.message});case 18:if(o.token){e.next=20;break}throw ut.create("token-update-no-token");case 20:return e.abrupt("return",o.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function dt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat(pt(t.appConfig),"/").concat(n),r);case 7:return e.next=9,e.sent.json();case 9:if(!(i=e.sent).error){e.next=12;break}throw ut.create("token-unsubscribe-failed",{errorInfo:i.error.message});case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),ut.create("token-unsubscribe-failed",{errorInfo:e.t1});case 17:case"end":return e.stop()}},e,null,[[4,14]])}))).apply(this,arguments)}function pt(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function gt(e){return mt.apply(this,arguments)}function mt(){return(mt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==Ue&&(a.web.applicationPubKey=i),a}var kt=6048e5;function bt(e){return wt.apply(this,arguments)}function wt(){return(wt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:He(n.getKey("auth")),p256dh:He(n.getKey("p256dh"))},e.next=6,tt(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!Rt(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+kt?xt(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,dt(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",Et(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function _t(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,dt(t.firebaseDependencies,n.token);case 7:return e.next=9,at(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xt(e,t){return St.apply(this,arguments)}function St(){return(St=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,rt(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,_t(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Et(e,t){return It.apply(this,arguments)}function It(){return(It=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,rt(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ge(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function Ot(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){!t.data||(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function Nt(e){return"object"==typeof e&&!!e&&qe in e}function Dt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Pt(e){return ut.create("missing-app-config-values",{valueName:e})}Dt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Lt=function(){function e(t,n,r){f(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Pt("App Configuration Object");if(!e.name)throw Pt("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw Pt(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return h(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function Ft(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(Ze,{scope:Me});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),ut.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function Mt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!n&&!t.swRegistration,!e.t0){e.next=4;break}return e.next=4,Ft(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw ut.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=Ue);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(){return(jt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw ut.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw ut.create("permission-blocked");case 8:return e.next=10,qt(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,Mt(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",bt(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(e,t,n){return zt.apply(this,arguments)}function zt(){return(zt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ht(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r[qe],message_name:r[Ve],message_time:r[je],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e){switch(e){case ze.NOTIFICATION_CLICKED:return"notification_open";case ze.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gt(){return(Gt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===ze.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(Ot(r)):t.onMessageHandler.next(Ot(r))),i=r.data,e.t0=Nt(i)&&"1"===i[Be],!e.t0){e.next=9;break}return e.next=9,Bt(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Kt="@firebase/messaging";function Wt(){return(Wt=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t7="undefined"!=typeof window&&(0,l.hl)(),!e.t7){e.next=5;break}return e.next=4,(0,l.eu)();case 4:e.t7=e.sent;case 5:if(e.t6=e.t7,!e.t6){e.next=8;break}e.t6=(0,l.zI)();case 8:if(e.t5=e.t6,!e.t5){e.next=11;break}e.t5="serviceWorker"in navigator;case 11:if(e.t4=e.t5,!e.t4){e.next=14;break}e.t4="PushManager"in window;case 14:if(e.t3=e.t4,!e.t3){e.next=17;break}e.t3="Notification"in window;case 17:if(e.t2=e.t3,!e.t2){e.next=20;break}e.t2="fetch"in window;case 20:if(e.t1=e.t2,!e.t1){e.next=23;break}e.t1=ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification");case 23:if(e.t0=e.t1,!e.t0){e.next=26;break}e.t0=PushSubscription.prototype.hasOwnProperty("getKey");case 26:return e.abrupt("return",e.t0);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}(0,c._registerComponent)(new d.wA("messaging",function(e){var t=new Lt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return Gt.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,c._registerComponent)(new d.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return jt.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,c.registerVersion)(Kt,"0.9.2"),(0,c.registerVersion)(Kt,"0.9.2","esm2017");var Qt="analytics",Yt="firebase_id",Jt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$t="https://www.googletagmanager.com/gtag/js",Xt=new v.Yd("@firebase/analytics");function en(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function tn(e,t){var n=document.createElement("script");n.src="".concat($t,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function nn(e,t,n,r,i,a){return rn.apply(this,arguments)}function rn(){return(rn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a,o){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i[a],e.prev=1,!s){e.next=7;break}return e.next=5,n[s];case 5:e.next=14;break;case 7:return e.next=9,en(r);case 9:if(u=e.sent.find(function(e){return e.measurementId===a}),e.t0=u,!e.t0){e.next=14;break}return e.next=14,n[u.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),Xt.error(e.t1);case 19:t("config",a,o);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function an(e,t,n,r,i){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,en(r);case 7:c=e.sent,l=s(u),e.prev=9,f=function(){var e=h.value,t=c.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},l.s();case 12:if((h=l.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),Xt.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function sn(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes($t))return r}return null}var un=new l.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cn=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;f(this,e),this.throttleMetadata=t,this.intervalMillis=n}return h(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function ln(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function hn(e){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:ln(i)},o=Jt.replace("{app-id}",r),e.next=6,fetch(o,a);case 6:if(200===(s=e.sent).status||304===s.status){e.next=19;break}return u="",e.prev=9,e.next=12,s.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(u=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw un.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u});case 19:return e.abrupt("return",s.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function dn(e){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:cn,r=h.length>2?h[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,s=i.measurementId,a){e.next=5;break}throw un.create("no-app-id");case 5:if(o){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw un.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new kn,e.abrupt("return",(setTimeout((0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),pn({appId:a,apiKey:o,measurementId:s},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,h,f,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:cn,s=t.appId,u=t.measurementId,e.prev=3,e.next=6,mn(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!u){e.next=12;break}return e.abrupt("return",(Xt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:s,measurementId:u}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,hn(t);case 16:return c=e.sent,e.abrupt("return",(o.deleteThrottleMetadata(s),c));case 20:if(e.prev=20,e.t1=e.catch(13),yn(e.t1)){e.next=26;break}if(o.deleteThrottleMetadata(s),!u){e.next=25;break}return e.abrupt("return",(Xt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(u,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:s,measurementId:u}));case 25:throw e.t1;case 26:return h=503===Number(e.t1.customData.httpStatus)?(0,l.$s)(a,o.intervalMillis,30):(0,l.$s)(a,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},e.abrupt("return",(o.setThrottleMetadata(s,f),Xt.debug("Calling attemptFetch again in ".concat(h," millis")),pn(t,f,r,o)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function mn(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(function(){clearTimeout(a),r(un.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function yn(e){if(!(e instanceof l.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var kn=function(){function e(){f(this,e),this.listeners=[]}return h(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function bn(){return wn.apply(this,arguments)}function wn(){return(wn=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,l.hl)()){e.next=2;break}return e.abrupt("return",(Xt.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(Xt.warn(un.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function _n(){return(_n=(0,u.Z)(regeneratorRuntime.mark(function e(n,r,i,a,o,s,u){var c,l,h,f,d,v,p,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=dn(n)).then(function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&Xt.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return Xt.error(e)}),r.push(l),h=bn().then(function(e){if(e)return a.getId()}),e.next=5,Promise.all([l,h]);case 5:return f=e.sent,d=t(f,2),v=d[0],p=d[1],sn()||tn(s,v.measurementId),o("js",new Date),g=null!==(c=null==u?void 0:u.config)&&void 0!==c?c:{},e.abrupt("return",(g.origin="firebase",g.update=!0,null!=p&&(g[Yt]=p),o("config",v.measurementId,g),v.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Tn,xn,Sn=function(){function e(t){f(this,e),this.app=t}return h(e,[{key:"_delete",value:function(){return delete En[this.app.options.appId],Promise.resolve()}}]),e}(),En={},In=[],An={},Cn="dataLayer",Rn=!1;function On(){return(On=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i,a){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:o=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:o}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,l.ru)()&&(0,l.zI)()&&(0,l.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,l.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Dn="@firebase/analytics";(0,c._registerComponent)(new d.wA(Qt,function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,l.ru)()&&e.push("This is a browser extension environment."),(0,l.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=un.create("invalid-analytics-context",{errorInfo:t});Xt.warn(n.message)}}();var r=e.options.appId;if(!r)throw un.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw un.create("no-api-key");Xt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=En[r])throw un.create("already-exists",{id:r});if(!Rn){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Cn);var i=function(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=(0,u.Z)(regeneratorRuntime.mark(function i(a,o,s){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,an(e,t,n,o,s);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,nn(e,t,n,r,o,s);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),Xt.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}(En,In,An,Cn,"gtag"),a=i.wrappedGtag,o=i.gtagCore;xn=a,Tn=o,Rn=!0}return En[r]=function(e,t,n,r,i,a,o){return _n.apply(this,arguments)}(e,In,An,t,Tn,Cn,n),new Sn(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,c._registerComponent)(new d.wA("analytics-internal",function(e){try{var t=e.getProvider(Qt).getImmediate();return{logEvent:function(e,n,r){return function(e,t,n,r){e=(0,l.m9)(e),function(e,t,n,r,i){return On.apply(this,arguments)}(xn,En[e.app.options.appId],t,n,r).catch(function(e){return Xt.error(e)})}(t,e,n,r)}}}catch(t){throw un.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,c.registerVersion)(Dn,"0.7.2"),(0,c.registerVersion)(Dn,"0.7.2","esm2017");var Pn=r(7771),Ln=r(3637),Fn=r(3342),Zn=r(3101),Mn=r(309),Un=new i.GfV("7.1.1"),qn="__angularfire_symbol__analyticsIsSupported",Vn="__angularfire_symbol__remoteConfigIsSupported",jn="__angularfire_symbol__messagingIsSupported";function Bn(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[qn]||(globalThis[qn]=function(){return Nn.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__analyticsIsSupportedValue=e})),globalThis[jn]||(globalThis[jn]=function(){return Wt.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__messagingIsSupportedValue=e})),globalThis[Vn]||(globalThis[Vn]=function(){return Le.apply(this,arguments)}().then(function(e){return globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e}));var zn=function(e,t){var n=t?[t]:(0,o.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function Hn(){}var Gn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn.N;f(this,e),this.zone=t,this.delegate=n}return h(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),Kn=function(){function e(t){f(this,e),this.zone=t,this.task=null}return h(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",Hn,{},Hn,Hn)}),t.pipe((0,Fn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),Wn=function(){var e=function e(t){f(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new Gn(Zone.current)}),this.insideAngular=t.run(function(){return new Gn(Zone.current,Ln.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)};return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function Qn(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Yn(e){return Qn(),function(e){return function(t){return(t=t.lift(new Kn(e.ngZone))).pipe((0,Zn.R)(e.outsideAngular),(0,Mn.QV)(e.insideAngular))}}(Qn())(e)}},4486:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(3854),i=n(6034),a=n(5452),o=n(5601),s=function(){function e(t,n){var r=this;f(this,e),this._delegate=t,this.firebase=n,(0,a._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,a.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)&&r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,a._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,a._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.initializeApp(i,o);if((0,r.r3)(t,s.name))return t[s.name];var u=new e(s,n);return t[s.name]=u,u},app:i,registerVersion:a.registerVersion,setLogLevel:a.setLogLevel,onLog:a.onLog,apps:null,SDK_VERSION:a.SDK_VERSION,INTERNAL:{registerComponent:function(t){var o=t.name,s=o.replace("-compat","");if(a._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[s])throw u.create("invalid-app-argument",{appName:o});return e[s]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[s]=c,e.prototype[s]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,o).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:a}};function i(e){if(!(0,r.r3)(t,e=e||a._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(s);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=c;(0,a.registerVersion)("@firebase/app-compat","0.1.5",void 0)},5452:function(t,n,r){"use strict";var i;r.r(n),r.d(n,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return I},_DEFAULT_ENTRY_NAME:function(){return p},_addComponent:function(){return k},_addOrOverwriteComponent:function(){return b},_apps:function(){return m},_clearComponents:function(){return x},_components:function(){return y},_getProvider:function(){return _},_registerComponent:function(){return w},_removeServiceInstance:function(){return T},deleteApp:function(){return O},getApp:function(){return C},getApps:function(){return R},initializeApp:function(){return A},onLog:function(){return P},registerVersion:function(){return D},setLogLevel:function(){return L}});var a=r(8239),o=r(6034),u=r(5601),c=r(3854),l=function(){function e(t){f(this,e),this.container=t}return h(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if("VERSION"===(null==(n=e.getComponent())?void 0:n.type)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}var n;return null}).filter(function(e){return e}).join(" ")}}]),e}(),d="@firebase/app",v=new u.Yd("@firebase/app"),p="[DEFAULT]",g=(e(i={},d,"fire-core"),e(i,"@firebase/app-compat","fire-core-compat"),e(i,"@firebase/analytics","fire-analytics"),e(i,"@firebase/analytics-compat","fire-analytics-compat"),e(i,"@firebase/app-check","fire-app-check"),e(i,"@firebase/app-check-compat","fire-app-check-compat"),e(i,"@firebase/auth","fire-auth"),e(i,"@firebase/auth-compat","fire-auth-compat"),e(i,"@firebase/database","fire-rtdb"),e(i,"@firebase/database-compat","fire-rtdb-compat"),e(i,"@firebase/functions","fire-fn"),e(i,"@firebase/functions-compat","fire-fn-compat"),e(i,"@firebase/installations","fire-iid"),e(i,"@firebase/installations-compat","fire-iid-compat"),e(i,"@firebase/messaging","fire-fcm"),e(i,"@firebase/messaging-compat","fire-fcm-compat"),e(i,"@firebase/performance","fire-perf"),e(i,"@firebase/performance-compat","fire-perf-compat"),e(i,"@firebase/remote-config","fire-rc"),e(i,"@firebase/remote-config-compat","fire-rc-compat"),e(i,"@firebase/storage","fire-gcs"),e(i,"@firebase/storage-compat","fire-gcs-compat"),e(i,"@firebase/firestore","fire-fst"),e(i,"@firebase/firestore-compat","fire-fst-compat"),e(i,"fire-js","fire-js"),e(i,"firebase","fire-js-all"),i),m=new Map,y=new Map;function k(e,t){try{e.container.addComponent(t)}catch(n){v.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function b(e,t){e.container.addOrOverwriteComponent(t)}function w(e){var t=e.name;if(y.has(t))return v.debug("There were multiple attempts to register component ".concat(t,".")),!1;y.set(t,e);var n,r=s(m.values());try{for(r.s();!(n=r.n()).done;){k(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function _(e,t){return e.container.getProvider(t)}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;_(e,t).clearInstance(n)}function x(){y.clear()}var S=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),E=function(){function e(t,n,r){var i=this;f(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",function(){return i},"PUBLIC"))}return h(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw S.create("app-deleted",{appName:this._name})}}]),e}(),I="9.1.3";function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:p,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw S.create("bad-app-name",{appName:String(r)});var i=m.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw S.create("duplicate-app",{appName:r})}var a,u=new o.H0(r),l=s(y.values());try{for(l.s();!(a=l.n()).done;){var h=a.value;u.addComponent(h)}}catch(d){l.e(d)}finally{l.f()}var f=new E(e,n,u);return m.set(r,f),f}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=m.get(e);if(!t)throw S.create("no-app",{appName:e});return t}function R(){return Array.from(m.values())}function O(e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=m.has(n),!e.t0){e.next=7;break}return m.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t,n){var r,i=null!==(r=g[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&u.push("and"),s&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void v.warn(u.join(" "))}w(new o.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function P(e,t){if(null!==e&&"function"!=typeof e)throw S.create("invalid-log-argument");(0,u.Am)(e,t)}function L(e){(0,u.Ub)(e)}w(new o.wA("platform-logger",function(e){return new l(e)},"PRIVATE")),D(d,"0.7.4",""),D(d,"0.7.4","esm2017"),D("fire-js","")},6034:function(e,t,n){"use strict";n.d(t,{wA:function(){return a},H0:function(){return c}});var r=n(4762),i=n(3854),a=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),a=i.next();!a.done;a=i.next()){var s=(0,r.CR)(a.value,2),u=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,a=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:a});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(s)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,a=this.onInitCallbacks.get(t);if(a)try{for(var o=(0,r.XA)(a),s=o.next();!s.done;s=o.next()){var u=s.value;try{u(e,t)}catch(c){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===o?void 0:e}var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},5601:function(t,n,r){"use strict";var i;r.d(n,{in:function(){return u},Yd:function(){return p},Ub:function(){return g},Am:function(){return m}});var a,o=[],u=((a=u||(u={}))[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT",u),c={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},l=u.INFO,d=(e(i={},u.DEBUG,"log"),e(i,u.VERBOSE,"log"),e(i,u.INFO,"info"),e(i,u.WARN,"warn"),e(i,u.ERROR,"error"),i),v=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=d[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},p=function(){function e(t){f(this,e),this.name=t,this._logLevel=l,this._logHandler=v,this._userLogHandler=null,o.push(this)}return h(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in u))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?c[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.DEBUG].concat(t)),this._logHandler.apply(this,[this,u.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.VERBOSE].concat(t)),this._logHandler.apply(this,[this,u.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.INFO].concat(t)),this._logHandler.apply(this,[this,u.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.WARN].concat(t)),this._logHandler.apply(this,[this,u.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.ERROR].concat(t)),this._logHandler.apply(this,[this,u.ERROR].concat(t))}}]),e}();function g(e){o.forEach(function(t){t.setLogLevel(e)})}function m(e,t){var n,r=s(o);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=c[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:u[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}},3854:function(e,n,r){"use strict";r.d(n,{BH:function(){return l},LL:function(){return N},ZR:function(){return O},zI:function(){return R},US:function(){return a},tV:function(){return s},$s:function(){return z},r3:function(){return P},Sg:function(){return p},ne:function(){return V},vZ:function(){return F},ZB:function(){return u},pd:function(){return q},m9:function(){return H},z$:function(){return y},jU:function(){return w},ru:function(){return _},d:function(){return x},xb:function(){return L},w1:function(){return S},hl:function(){return A},uI:function(){return k},UG:function(){return b},b$:function(){return T},G6:function(){return I},Mn:function(){return E},xO:function(){return M},zd:function(){return U},eu:function(){return C}});var i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();r.push(a<<2|o>>4),64!==s&&(r.push(o<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},s=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||!c(n)||(e[n]=u(e[n],t[n]));return e}function c(e){return"__proto__"!==e}var l=function(){function e(){var t=this;f(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return h(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function w(){return"object"==typeof self&&self.self===self}function _(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function T(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return y().indexOf("Electron/")>=0}function S(){var e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return y().indexOf("MSAppHost/")>=0}function I(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){return"object"==typeof indexedDB}function C(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function R(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}var O=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(g(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(g(a),N.prototype.create),a}return n}(m(Error)),N=function(){function e(t,n,r){f(this,e),this.service=t,this.serviceName=n,this.errors=r}return h(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(D,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new O(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),D=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Z(s)&&Z(u)){if(!F(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Z(e){return null!==e&&"object"==typeof e}function M(e){for(var n=[],r=function(){var e=t(a[i],2),r=e[0],o=e[1];Array.isArray(o)?o.forEach(function(e){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(o))},i=0,a=Object.entries(e);i<a.length;i++)r();return n.length?"&"+n.join("&"):""}function U(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var r=t(e.split("="),2),i=r[0],a=r[1];n[decodeURIComponent(i)]=decodeURIComponent(a)}}),n}function q(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function V(e,t){var n=new j(e,t);return n.subscribe.bind(n)}var j=function(){function e(t,n){var r=this;f(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return h(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function B(){}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function H(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps}});var r=n(5452);(0,r.registerVersion)("firebase","9.1.3","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(4486);r.Z.registerVersion("firebase","9.1.3","app-compat")},4671:function(c,l,p){"use strict";p.r(l);var m=p(8239),y=p(4486),k=p(3854),b=p(5452),_=p(4762),T=p(5601),x=p(6034),S=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},E=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),I=new T.Yd("@firebase/auth");function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];I.logLevel<=T.in.ERROR&&I.error.apply(I,["Auth (".concat(b.SDK_VERSION,"): ").concat(e)].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw D.apply(void 0,[e].concat(n))}function R(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return D.apply(void 0,[e].concat(n))}function O(t,n,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),e({},n,r));return new k.LL("auth","Firebase",i).create(n,{appName:t.name})}function N(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&C(e,"argument-error"),O(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,o=n[0],s=a(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(a(s)))}return E.create.apply(E,[e].concat(n))}function P(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw D.apply(void 0,[t].concat(r))}function L(e){var t="INTERNAL ASSERTION FAILED: "+e;throw A(t),new Error(t)}function F(e,t){e||L(t)}var Z=new Map;function M(e){F(e instanceof Function,"Expected a class definition");var t=Z.get(e);return t?(F(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}function U(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function q(){return"http:"===V()||"https:"===V()}function V(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var j=function(){function e(t,n){f(this,e),this.shortDelay=t,this.longDelay=n,F(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}return h(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(q()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function B(e,t){F(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var z=function(){function e(){f(this,e)}return h(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},G=new j(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function W(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Y(t,a,function(){var e={},a={};i&&("GET"===n?a=i:e={body:JSON.stringify(i)});var o=(0,k.xO)(Object.assign({key:t.config.apiKey},a)).slice(1),s=new(z.headers());return s.set("Content-Type","application/json"),s.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&s.set("X-Firebase-Locale",t.languageCode),z.fetch()(ee(t,t.config.apiHost,r,o),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},e))}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(e,t,n){return J.apply(this,arguments)}function J(){return(J=(0,m.Z)(regeneratorRuntime.mark(function e(n,r,i){var a,o,s,u,c,l,h,f,d,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n._canInitEmulator=!1,a=Object.assign(Object.assign({},H),r),e.prev=2,o=new te(n),e.next=6,Promise.race([i(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw ne(n,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=15;break}return e.abrupt("return",u);case 15:if(c=s.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=t(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=18;break}throw ne(n,"credential-already-in-use",u);case 18:if("EMAIL_EXISTS"!==f){e.next=20;break}throw ne(n,"email-already-in-use",u);case 20:if(v=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=23;break}throw O(n,v,d);case 23:C(n,v),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof k.ZR)){e.next=30;break}throw e.t0;case 30:C(n,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function $(e,t,n,r){return X.apply(this,arguments)}function X(){return(X=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,W(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&C(t,"multi-factor-auth-required",{serverResponse:o}),o));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?B(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var te=function(){function e(t){var n=this;f(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(R(n.auth,"timeout"))},G.get())})}return h(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ne(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=R(e,t,r);return i.customData._tokenResponse=n,i}function re(){return(re=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t){return se.apply(this,arguments)}function se(){return(se=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ce(){return(ce=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=(0,k.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,P((a=he(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ue(le(a.auth_time)),issuedAtTime:ue(le(a.iat)),expirationTime:ue(le(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function le(e){return 1e3*Number(e)}function he(e){var n=t(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return A("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,k.tV)(i);return o?JSON.parse(o):(A("Failed to decode base64 JWT payload"),null)}catch(o){return A("Caught error parsing JWT payload as JSON",o),null}}function fe(e,t){return de.apply(this,arguments)}function de(){return(de=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof k.ZR&&ve(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function ve(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var pe=function(){function e(t){f(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return h(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),ge=function(){function e(t,n){f(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return h(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ue(this.lastLoginAt),this.creationTime=ue(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function me(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,fe(t,oe(r,{idToken:i}));case 6:P(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?we(o.providerUserInfo):[],u=be(t.providerData,s),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||(null==u?void 0:u.length)),l={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ge(o.createdAt,o.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,k.m9)(t),e.next=3,me(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(e,t){return[].concat(a(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),a(t))}function we(e){return e.map(function(e){var t=e.providerId,n=(0,_._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function _e(){return(_e=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,{},function(){var e=(0,k.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,i=r.tokenApiHost,a=r.apiKey,o=ee(t,i,"/v1/token","key=".concat(a));return z.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})});case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Te=function(){function e(){f(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return h(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){P(e.idToken,"internal-error"),P(void 0!==e.idToken,"internal-error"),P(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=he(e);return P(t,"internal-error"),P(void 0!==t.exp,"internal-error"),P(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(P(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){var i,a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return _e.apply(this,arguments)}(e,t);case 2:i=r.sent,a=i.accessToken,o=i.refreshToken,s=i.expiresIn,n.updateTokensAndExpiration(a,o,Number(s));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return L("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(P("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(P("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(P("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function xe(e,t){P("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Se=function(){function e(t){f(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=(0,_._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new pe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new ge(a.createdAt||void 0,a.lastLoginAt||void 0)}return h(e,[{key:"getIdToken",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(P(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return ce.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ke.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(P(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){P(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,me(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,fe(e,function(e,t){return re.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,v=null!==(o=n.photoURL)&&void 0!==o?o:void 0,p=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,T=n.stsTokenManager;P(k&&T,t,"internal-error");var x=Te.fromJSON(this.name,T);P("string"==typeof k,t,"internal-error"),xe(h,t.name),xe(f,t.name),P("boolean"==typeof b,t,"internal-error"),P("boolean"==typeof w,t,"internal-error"),xe(d,t.name),xe(v,t.name),xe(p,t.name),xe(g,t.name),xe(m,t.name),xe(y,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:x,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map(function(e){return Object.assign({},e)})),g&&(S._redirectEventId=g),S}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,m.Z)(regeneratorRuntime.mark(function i(){var a,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(a=new Te).updateFromServerResponse(n),o=new e({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r}),i.next=5,me(o);case 5:return i.abrupt("return",o);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),Ee=function(){var e=function(){function e(){f(this,e),this.type="NONE",this.storage={}}return h(e,[{key:"_isAvailable",value:function(){return(0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();return e.type="NONE",e}();function Ie(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Ae=function(){function e(t,n,r){f(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ie(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ie("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return h(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?Se._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,m.Z)(regeneratorRuntime.mark(function i(){var a,o,u,c,l,h,f,d,v,p;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(M(Ee),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:a=i.sent.filter(function(e){return e}),o=a[0]||M(Ee),u=Ie(r,t.config.apiKey,t.name),c=null,l=s(n),i.prev=9,l.s();case 11:if((h=l.n()).done){i.next=27;break}return f=h.value,i.prev=13,i.next=16,f._get(u);case 16:if(!(d=i.sent)){i.next=21;break}return v=Se._fromJSON(t,d),f!==o&&(c=v),o=f,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),l.e(i.t1);case 32:return i.prev=32,l.f(),i.finish(32);case 35:if(p=a.filter(function(e){return e._shouldAllowMigration}),!o._shouldAllowMigration||!p.length){i.next=47;break}if(o=p[0],i.t3=c,!i.t3){i.next=42;break}return i.next=42,o._set(u,c.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(o,t,r),i.next=48;break;case 47:i.t2=new e(o,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ce(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(De(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Re(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Le(t))return"Blackberry";if(Fe(t))return"Webos";if(Oe(t))return"Safari";if((t.includes("chrome/")||Ne(t))&&!t.includes("edge/"))return"Chrome";if(Pe(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/firefox\//i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/crios\//i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iemobile/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/android/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/blackberry/i.test(e)}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/webos/i.test(e)}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/iphone|ipad|ipod/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Ze(e)||Pe(e)||Fe(e)||Le(e)||/windows phone/i.test(e)||De(e)}function Ue(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ce((0,k.z$)());break;case"Worker":t="".concat(Ce((0,k.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(b.SDK_VERSION,"/").concat(r)}var qe=function(){function e(t,n){f(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return h(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=M(t)),this._initializationPromise=this.queue((0,m.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n._deleted,r.t0){r.next=14;break}return r.next=4,Ae.create(n,e);case 4:if(n.persistenceManager=r.sent,r.t1=!n._deleted,!r.t1){r.next=14;break}if(r.t2=null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively,!r.t2){r.next=11;break}return r.next=11,n._popupRedirectResolver._initialize(n);case 11:return r.next=13,n.initializeCurrentUser(t);case 13:!n._deleted&&(n._isInitialized=!0);case 14:case"end":return r.stop()}},r)}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=13;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=11;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:return t.abrupt("return",void t.sent);case 11:return t.next=13,e._updateCurrentUser(n);case 13:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,!e||!t.config.authDomain){n.next=12;break}return n.next=6,t.getOrInitRedirectPersistenceManager();case 6:return a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null==i?void 0:i._redirectEventId,n.next=10,t.tryRedirectSignIn(e);case 10:s=n.sent,(!a||a===o)&&(null==s?void 0:s.user)&&(i=s.user);case 12:if(!i){n.next=24;break}if(!i._redirectEventId){n.next=20;break}return P(t._popupRedirectResolver,t,"argument-error"),n.next=17,t.getOrInitRedirectPersistenceManager();case 17:n.t1=t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i),n.next=21;break;case 20:n.t1=t.reloadAndSetCurrentUserOrClear(i);case 21:n.t0=n.t1,n.next=25;break;case 24:n.t0=t.directlySetCurrentUser(null);case 25:return n.abrupt("return",n.t0);case 26:case"end":return n.stop()}},n)}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,me(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,k.m9)(e):null,n.abrupt("return",(r&&P(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._deleted){n.next=2;break}return n.abrupt("return",(e&&P(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.directlySetCurrentUser(e);case 2:t.notifyAuthListeners();case 3:case"end":return n.stop()}},n)})))));case 2:case"end":return n.stop()}},n)}))()}},{key:"signOut",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=4;break}return t.next=4,e._setRedirectUser(null);case 4:return t.abrupt("return",e._updateCurrentUser(null));case 5:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(M(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new k.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return P(r=e&&M(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Ae.create(t,[M(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return P(o,this,"internal-error"),o.then(function(){return a(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return P(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ue(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function Ve(e){return(0,k.m9)(e)}var je=function(){function e(t){var n=this;f(this,e),this.auth=t,this.observer=null,this.addObserver=(0,k.ne)(function(e){return n.observer=e})}return h(e,[{key:"next",get:function(){return P(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Be(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var He=function(){function e(t,n){f(this,e),this.providerId=t,this.signInMethod=n}return h(e,[{key:"toJSON",value:function(){return L("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return L("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return L("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return L("not implemented")}}]),e}();function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:resetPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function We(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(){return($e=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPassword",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(e,t){return et.apply(this,arguments)}function et(){return(et=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendOobCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return(it=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(){return(ct=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithEmailLink",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ht=function(e){d(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return h(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return $e.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return ct.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:C(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",We(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return lt.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:C(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(He);function ft(e,t){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithIdp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return h(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ft(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ft(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ft(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,k.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):C("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=(0,_._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(He);function pt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:sendVerificationCode",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(){return(mt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ne(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var kt={USER_NOT_FOUND:"user-not-found"};function bt(){return(bt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithPhoneNumber",K(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),kt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wt=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone","phone")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return yt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(He),_t=function(){function e(t){var n,r,i,a,o,s;f(this,e);var u=(0,k.zd)((0,k.pd)(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);P(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return h(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,k.zd)((0,k.pd)(e)).link,n=t?(0,k.zd)((0,k.pd)(t)).deep_link_id:null,r=(0,k.zd)((0,k.pd)(e)).deep_link_id;return(r?(0,k.zd)((0,k.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),Tt=function(){var e=function(){function e(){f(this,e),this.providerId=e.PROVIDER_ID}return h(e,null,[{key:"credential",value:function(e,t){return ht._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=_t.parseLink(t);return P(n,"argument-error"),ht._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),xt=function(){function e(t){f(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return h(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),St=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).scopes=[],e}return h(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return a(this.scopes)}}]),n}(xt),Et=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return P(e.idToken||e.accessToken,"argument-error"),vt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return P("providerId"in t&&"signInMethod"in t,"argument-error"),vt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o||!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(St),It=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"facebook.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(St);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),At=function(){var e=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(St);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),Ct=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"github.com")}return h(n,null,[{key:"credential",value:function(e){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(St);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Rt=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return h(n,[{key:"_getIdTokenResponse",value:function(e){return ft(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ft(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ft(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(He),Ot=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,"twitter.com")}return h(n,null,[{key:"credential",value:function(e,t){return vt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(St);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Nt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signUp",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pt=function(){function e(t){f(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return h(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,m.Z)(regeneratorRuntime.mark(function a(){var o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Se._fromIdTokenResponse(t,r,i);case 2:return o=a.sent,s=Lt(r),a.abrupt("return",new e({user:o,providerId:s,_tokenResponse:r,operationType:n}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,m.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return a=Lt(r),i.abrupt("return",new e({user:t,providerId:a,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Lt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ft(){return(Ft=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Pt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Nt(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Pt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Zt=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o,s;return f(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,o.name="FirebaseError",Object.setPrototypeOf(g(o),n.prototype),o.appName=e.name,o.code=r.code,o.tenantId=null!==(s=e.tenantId)&&void 0!==s?s:void 0,o.serverResponse=r.customData.serverResponse,o}return h(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(k.ZR);function Mt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){throw"auth/multi-factor-auth-required"===n.code?Zt._fromErrorAndOperation(e,n,t,r):n})}function Ut(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function qt(){return(qt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Bt(!0,r,n);case 3:return e.t0=ie,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ut(a||[]),r.providerData=r.providerData.filter(function(e){return o.has(e.providerId)}),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=fe,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Pt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(e,t,n){return zt.apply(this,arguments)}function zt(){return(zt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",P(Ut(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=2,e.next=5,fe(t,Mt(i,a,n,t),r);case 5:return P((o=e.sent).idToken,i,"internal-error"),P(s=he(o.idToken),i,"internal-error"),u=s.sub,e.abrupt("return",(P(t.uid===u,i,"user-mismatch"),Pt._forOperation(t,a,o)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&C(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Kt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Mt(t,i,n);case 4:return a=e.sent,e.next=7,Pt._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(o.user);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(Ve(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Bt(!1,r,n.providerId);case 3:return e.abrupt("return",Vt(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ht((0,k.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(t,"POST","/v1/accounts:signInWithCustomToken",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(){return(rn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,tn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Pt._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var an=function(){function e(t,n){f(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return h(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?on._fromServerResponse(e,t):C(e,"internal-error")}}]),e}(),on=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return h(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(an);function sn(e,t,n){var r;P((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),P(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function un(){return(un=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"PASSWORD_RESET",email:n},r&&sn(i,a,r),e.next=4,rt(i,a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cn(){return(cn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge((0,k.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(){return(ln=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye((0,k.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,Ge(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(P(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return P(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:P(i.mfaInfo,r,"internal-error");case 12:P(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=an._fromServerResponse(Ve(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dn(){return(dn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hn((0,k.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(){return(vn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,Nt(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Pt._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(){return(pn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a={requestType:"EMAIL_SIGNIN",email:n},P(r.handleCodeInApp,i,"argument-error"),r&&sn(i,a,r),e.next=5,at(i,a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gn(){return(gn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),a=Tt.credentialWithLink(n,r||U()),e.abrupt("return",(P(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Qt(i,a)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:createAuthUri",K(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(){return(kn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:q()?U():"http://localhost"},e.next=3,mn((0,k.m9)(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bn(){return(bn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&sn(r.auth,i,n),e.next=8,tt(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(){return(wn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&sn(i.auth,a,r),e.next=9,st(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _n(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xn(){return(xn=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=(0,k.m9)(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,fe(a,_n(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(u=a.providerData.find(function(e){return"password"===e.providerId}))&&(u.displayName=a.displayName,u.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sn(e,t,n){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,fe(t,We(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var In=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},An=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r,i)).username=a,o}return n}(In),Cn=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"facebook.com",r)}return n}(In),Rn=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return n}(An),On=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"google.com",r)}return n}(In),Nn=function(e){d(n,e);var t=v(n);function n(e,r,i){return f(this,n),t.call(this,e,"twitter.com",r,i)}return n}(An);function Dn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=he(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new In(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Cn(a,i);case"github.com":return new Rn(a,i);case"google.com":return new On(a,i);case"twitter.com":return new Nn(a,i,e.screenName||null);case"custom":case"anonymous":return new In(a,null);default:return new In(a,r,i)}}(n)}var Pn=function(){function t(e,n){f(this,t),this.type=e,this.credential=n}return h(t,[{key:"toJSON",value:function(){return{multiFactorSession:e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(e){return new t("enroll",e)}},{key:"_fromMfaPendingCredential",value:function(e){return new t("signin",e)}},{key:"fromJSON",value:function(e){var n,r;if(null==e?void 0:e.multiFactorSession){if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return t._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return t._fromIdtoken(e.multiFactorSession.idToken)}return null}}]),t}(),Ln=function(){function e(t,n,r){f(this,e),this.session=t,this.hints=n,this.signInResolver=r}return h(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=Ve(t),i=(n.serverResponse.mfaInfo||[]).map(function(e){return an._fromServerResponse(r,e)});P(n.serverResponse.mfaPendingCredential,r,"internal-error");var a,o=Pn._fromMfaPendingCredential(n.serverResponse.mfaPendingCredential);return new e(o,i,(a=(0,m.Z)(regeneratorRuntime.mark(function e(t){var i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:i=e.sent,delete n.serverResponse.mfaInfo,delete n.serverResponse.mfaPendingCredential,a=Object.assign(Object.assign({},n.serverResponse),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Pt._fromIdTokenResponse(r,n.operationType,a);case 10:return s=e.sent,e.next=13,r._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",(P(n.user,r,"internal-error"),Pt._forOperation(n.user,n.operationType,a)));case 15:C(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}))}}]),e}();function Fn(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:start",K(e,t))}var Zn=function(){function e(t){var n=this;f(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return an._fromServerResponse(t.auth,e)}))})}return h(e,[{key:"getSession",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pn,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){var i,a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return a=r.sent,r.next=6,fe(n.user,i._process(n.user.auth,a,t));case 6:return o=r.sent,r.next=9,n.user._updateTokensIfNecessary(o);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,fe(t.user,function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:withdraw",K(e,t))}(t.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(a);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Mn=new WeakMap,Un="__sak",qn=function(){function e(t,n){f(this,e),this.storage=t,this.type=n}return h(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Un,"1"),this.storage.removeItem(Un),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}(),Vn=function(){var e=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=(0,k.z$)();return Oe(e)||Ze(e)}()&&function(){try{return!(!window||window===window.top)}catch(n){return!1}}(),e.fallbackToPolling=Me(),e._shouldAllowMigration=!0,e}return h(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);!n&&t.localCache[r]===e||t.notifyListeners(r,e)},o=this.storage.getItem(r);(0,k.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t&&JSON.parse(t))}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,t){var r=this,a=this;return(0,m.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(w(n.prototype),"_set",r).call(a,e,t);case 2:a.localCache[e]=JSON.stringify(t);case 3:case"end":return o.stop()}},o)}))()}},{key:"_get",value:function(e){var t=this,r=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(w(n.prototype),"_get",t).call(r,e);case 2:return o=a.sent,a.abrupt("return",(r.localCache[e]=JSON.stringify(o),o));case 4:case"end":return a.stop()}},a)}))()}},{key:"_remove",value:function(e){var t=this,r=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(w(n.prototype),"_remove",t).call(r,e);case 2:delete r.localCache[e];case 3:case"end":return a.stop()}},a)}))()}}]),n}(qn);return e.type="LOCAL",e}(),jn=function(){var e=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.call(this,window.sessionStorage,"SESSION")}return h(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(qn);return e.type="SESSION",e}(),Bn=function(){var e=function(){function e(t){f(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return h(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,a=i.eventId,o=i.eventType,s=i.data,null==(u=t.handlersMap[o])?void 0:u.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:a,eventType:o}),c=Array.from(u).map(function(){var e=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,s));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(c);case 7:l=n.sent,r.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:l});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function zn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var Hn=function(){function e(t){f(this,e),this.target=t,this.handlers=new Set}return h(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,m.Z)(regeneratorRuntime.mark(function i(){var a,o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,u){var c=zn("",20);a.port1.start();var l=setTimeout(function(){u(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout(function(){u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),i(t.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},r.handlers.add(s),a.port1.addEventListener("message",s.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(function(){s&&r.removeMessageHandler(s)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Gn(){return window}function Kn(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function Wn(){return(Wn=(0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Qn="firebaseLocalStorageDb",Yn="firebaseLocalStorage",Jn="fbase_key",$n=function(){function e(t){f(this,e),this.request=t}return h(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function Xn(e,t){return e.transaction([Yn],t?"readwrite":"readonly").objectStore(Yn)}function er(){var e=indexedDB.open(Qn,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(Yn,{keyPath:Jn})}catch(r){n(r)}}),e.addEventListener("success",(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(Yn)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(Qn);return new $n(e).toPromise()}();case 8:return n.t0=t,n.next=11,er();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function tr(e,t,n){return nr.apply(this,arguments)}function nr(){return(nr=(0,m.Z)(regeneratorRuntime.mark(function t(n,r,i){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=Xn(n,!0).put((e(a={},Jn,r),e(a,"value",i),a)),t.abrupt("return",new $n(o).toPromise());case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function rr(){return(rr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xn(t,!1).get(n),e.next=3,new $n(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ir(e,t){var n=Xn(e,!0).delete(t);return new $n(n).toPromise()}var ar=function(){var e=function(){function e(){f(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return h(e,[{key:"_openDb",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,er();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Kn()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=Bn._getInstance(Kn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,m.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return Wn.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new Hn(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:!(i=t.sent)||(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,m.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,er();case 5:return t=e.sent,e.next=8,tr(t,Un,"1");case 8:return e.next=10,ir(t,Un);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return tr(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return rr.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return ir(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=Xn(e,!1).getAll();return new $n(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,a=s(n);try{for(a.s();!(o=a.n()).done;)u=o.value,c=u.fbase_key,l=u.value,i.add(c),JSON.stringify(e.localCache[c])!==JSON.stringify(l)&&(e.notifyListeners(c,l),r.push(c))}catch(v){a.e(v)}finally{a.f()}for(h=0,f=Object.keys(e.localCache);h<f.length;h++)d=f[h],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();return e.type="LOCAL",e}();function or(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:start",K(e,t))}function sr(){return(sr=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ur(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=R("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function cr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var lr=1e12,hr=function(){function e(t){f(this,e),this.auth=t,this.counter=lr,this._widgets=new Map}return h(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new fr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||lr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||lr))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||lr))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),fr=function(){function e(t,n,r){var i=this;f(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;P(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return h(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),dr=cr("rcb"),vr=new j(3e4,6e4),pr=function(){function e(){f(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gn().grecaptcha}return h(e,[{key:"load",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return P((t=r).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(r)?Promise.resolve(Gn().grecaptcha):new Promise(function(t,i){var a=Gn().setTimeout(function(){i(R(e,"network-request-failed"))},vr.get());Gn()[dr]=function(){Gn().clearTimeout(a),delete Gn()[dr];var o=Gn().grecaptcha;if(o){var s=o.render;o.render=function(e,t){var r=s(e,t);return n.counter++,r},n.hostLanguage=r,t(o)}else i(R(e,"internal-error"))},ur("https://www.google.com/recaptcha/api.js??".concat((0,k.xO)({onload:dr,render:"explicit",hl:r}))).catch(function(){clearTimeout(a),i(R(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Gn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),gr=function(){function e(){f(this,e)}return h(e,[{key:"load",value:function(e){return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new hr(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),mr="recaptcha",yr={theme:"light",type:"image"},kr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yr),r=arguments.length>2?arguments[2]:void 0;f(this,e),this.parameters=n,this.type=mr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(r),this.isInvisible="invisible"===this.parameters.size,P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;P(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gr:new pr,this.validateStartingState()}return h(e,[{key:"verify",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){!r||(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){P(!this.parameters.sitekey,this.auth,"argument-error"),P(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),P("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=Gn()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){P(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(q()&&!Kn(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return sr.apply(this,arguments)}(e.auth);case 8:P(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return P(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),br=function(){function e(t,n){f(this,e),this.verificationId=t,this.onConfirmation=n}return h(e,[{key:"confirm",value:function(e){var t=wt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function wr(){return(wr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,xr(i,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new br(a,function(e){return Qt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _r(){return(_r=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,Bt(!1,i,"phone");case 3:return e.next=5,xr(i.auth,n,(0,k.m9)(r));case 5:return a=e.sent,e.abrupt("return",new br(a,function(e){return Jt(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,k.m9)(t),e.next=3,xr(i.auth,n,(0,k.m9)(r));case 3:return a=e.sent,e.abrupt("return",new br(a,function(e){return Xt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xr(e,t,n){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,P("string"==typeof a,t,"argument-error"),P(r.type===mr,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(s=o.session,!("phoneNumber"in o)){e.next=11;break}return P("enroll"===s.type,t,"internal-error"),e.next=10,Fn(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return P("signin"===s.type,t,"internal-error"),P(u=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,or(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,pt(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Er(){return(Er=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vt((0,k.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ir=function(){var e=function(){function e(t){f(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ve(t)}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return xr(this.auth,e,(0,k.m9)(t))}}],[{key:"credential",value:function(e,t){return wt._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?wt._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function Ar(e,t){return t?M(t):(P(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Cr=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"custom","custom")).params=e,r}return h(n,[{key:"_getIdTokenResponse",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ft(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ft(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(He);function Rr(e){return Kt(e.auth,new Cr(e),e.bypassAuthState)}function Or(e){var t=e.auth,n=e.user;return P(n,t,"internal-error"),Ht(n,new Cr(e),e.bypassAuthState)}function Nr(e){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(P(r,n,"internal-error"),Vt(r,new Cr(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Pr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];f(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return h(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,m.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i,a,o,s,u,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,a=e.postBody,o=e.tenantId,s=e.error,u=e.type,!s){n.next=3;break}return n.abrupt("return",void t.reject(s));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(u)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return Nr;case"reauthViaPopup":case"reauthViaRedirect":return Or;default:C(this.auth,"internal-error")}}},{key:"resolve",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lr=new j(2e3,1e4);function Fr(){return(Fr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),N(t,n,xt),a=Ar(i,r),e.abrupt("return",new Ur(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N((i=(0,k.m9)(t)).auth,n,xt),a=Ar(i.auth,r),e.abrupt("return",new Ur(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mr(){return(Mr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N((i=(0,k.m9)(t)).auth,n,xt),a=Ar(i.auth,r),e.abrupt("return",new Ur(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ur=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=g(s),s}return h(n,[{key:"executeNotNull",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(P(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return F(1===e.filter.length,"Popup operations only handle one event"),n=zn(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(R(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(R(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(R(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Lr.get())}()}}]),n}(Pr);return e.currentPopupAction=null,e}(),qr=new Map,Vr=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return h(n,[{key:"execute",value:function(){var e=this,t=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=qr.get(t.auth._key())){r.next=20;break}return r.prev=2,r.next=5,function(e,t){return jr.apply(this,arguments)}(t.resolver,t.auth);case 5:if(!r.sent){r.next=11;break}return r.next=8,i(w(n.prototype),"execute",e).call(t);case 8:r.t0=r.sent,r.next=12;break;case 11:r.t0=null;case 12:o=r.t0,a=function(){return Promise.resolve(o)},r.next=19;break;case 16:r.prev=16,r.t1=r.catch(2),a=function(){return Promise.reject(r.t1)};case 19:qr.set(t.auth._key(),a);case 20:return r.abrupt("return",a());case 21:case"end":return r.stop()}},r,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var t=this,r=function(){return i(w(n.prototype),"onAuthEvent",t)},a=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",r().call(a,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,a.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(a.user=n,r().call(a,e)));case 9:a.resolve(null);case 10:t.next=13;break;case 12:a.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),n}(Pr);function jr(){return(jr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(n),e.next=3,Hr(t)._get(r);case 3:return e.t0=e.sent,i="true"===e.t0,e.next=7,Hr(t)._remove(r);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Br(e,t){return zr.apply(this,arguments)}function zr(){return(zr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr(t)._set(Gr(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hr(e){return M(e._redirectPersistence)}function Gr(e){return Ie("pendingRedirect",e.config.apiKey,e.name)}function Kr(){return(Kr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),N(t,n,xt),a=Ar(i,r),e.next=5,Br(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N((i=(0,k.m9)(t)).auth,n,xt),a=Ar(i.auth,r),e.next=5,Br(a,i.auth);case 5:return e.next=7,Xr(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N((i=(0,k.m9)(t)).auth,n,xt),a=Ar(i.auth,r),e.next=5,Bt(!1,i,n.providerId);case 5:return e.next=7,Br(a,i.auth);case 7:return e.next=9,Xr(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t)._initializationPromise;case 2:return e.abrupt("return",Jr(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jr(e,t){return $r.apply(this,arguments)}function $r(){return($r=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ve(t),a=Ar(i,n),e.next=5,new Vr(i,a,r).execute();case 5:if(o=e.sent,e.t0=o&&!r,!e.t0){e.next=13;break}return delete o.user._redirectEventId,e.next=11,i._persistUserIfCurrent(o.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xr(e){return ei.apply(this,arguments)}function ei(){return(ei=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=zn("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ti=function(){function e(t){f(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return h(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ri(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(R(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ni(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ni(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ni(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function ri(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function ii(e){return ai.apply(this,arguments)}function ai(){return(ai=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",W(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var oi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,si=/^https?/;function ui(){return(ui=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ii(t);case 4:n=e.sent,r=n.authorizedDomains,i=s(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ci(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:C(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function ci(e){var t=U(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!si.test(r))return!1;if(oi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var li=new j(3e4,6e4);function hi(){var e=Gn().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=a(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fi=null;function di(e){return fi=fi||function(e){return new Promise(function(t,n){var r,i,a;function o(){hi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){hi(),n(R(e,"network-request-failed"))},timeout:li.get()})}if(null===(i=null===(r=Gn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Gn().gapi)||void 0===a?void 0:a.load)){var s=cr("iframefcb");return Gn()[s]=function(){gapi.load?o():n(R(e,"network-request-failed"))},ur("https://apis.google.com/js/api.js?onload=".concat(s))}o()}}).catch(function(e){throw fi=null,e})}(e)}var vi=new j(5e3,15e3),pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},gi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(e){var t=e.config;P(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?B(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:b.SDK_VERSION},i=gi.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat((0,k.xO)(r).slice(1))}function yi(){return(yi=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,di(t);case 2:return n=e.sent,r=Gn().gapi,e.abrupt("return",(P(r,t,"internal-error"),n.open({where:document.body,url:mi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},function(e){return new Promise((n=(0,m.Z)(regeneratorRuntime.mark(function n(r,i){var a,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Gn().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=R(t,"network-request-failed"),o=Gn().setTimeout(function(){i(a)},vi.get()),e.ping(s).then(s,function(){i(a)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ki={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bi=function(){function e(t){f(this,e),this.window=t,this.associatedEvent=null}return h(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function wi(e,n,r,i,a,o){P(e.config.authDomain,e,"auth-domain-config-required"),P(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:b.SDK_VERSION,eventId:a};if(n instanceof xt){n.setDefaultLanguage(e.languageCode),s.providerId=n.providerId||"",(0,k.xb)(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters()));for(var u=0,c=Object.entries(o||{});u<c.length;u++){var l=t(c[u],2),h=l[0],f=l[1];s[h]=f}}if(n instanceof St){var d=n.getScopes().filter(function(e){return""!==e});d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var v=s,p=0,g=Object.keys(v);p<g.length;p++){var m=g[p];void 0===v[m]&&delete v[m]}return"".concat(function(e){var t=e.config;return t.emulator?B(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat((0,k.xO)(v).slice(1))}var _i,Ti="webStorageSupport",xi=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,"phone")).credential=e,r}return h(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return W(e,"POST","/v2/accounts/mfaEnrollment:finalize",K(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return W(e,"POST","/v2/accounts/mfaSignIn:finalize",K(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){f(this,e),this.factorId=t}return h(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return L("unexpected MultiFactorSessionType")}}}]),e}()),Si=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"assertion",value:function(e){return xi._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),Ei="@firebase/auth",Ii=function(){function e(t){f(this,e),this.auth=t,this.internalListeners=new Map}return h(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){P(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ai(){return window}function Ci(){return(Ci=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ai(),o=a.BuildInfo,F(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ni(n.sessionId);case 4:return s=e.sent,u={},e.abrupt("return",(Ze()?u.ibi=o.packageName:Pe()?u.apn=o.packageName:C(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,wi(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ai(),r=n.BuildInfo,i={},Ze()?i.iosBundleId=r.packageName:Pe()?i.androidPackageName=r.packageName:C(t,"operation-not-supported-in-this-environment"),e.next=4,ii(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oi(){return(Oi=(0,m.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ai(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout(function(){i(R(t,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null==document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Pe()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}});case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function Ni(e){return Di.apply(this,arguments)}function Di(){return(Di=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pi(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pi(e){if(F(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}_i="Browser",(0,b._registerComponent)(new x.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){P(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),P(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:_i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ue(_i)},r=new qe(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(M);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,b._registerComponent)(new x.wA("auth-internal",function(e){var t=Ve(e.getProvider("auth").getImmediate());return new Ii(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,b.registerVersion)(Ei,"0.18.3",void 0),(0,b.registerVersion)(Ei,"0.18.3","esm2017");var Li=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return h(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),i(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),n}(ti);function Fi(e){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ui()._get(qi(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,Ui()._remove(qi(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mi(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ui(){return M(Vn)}function qi(e){return Ie("authEvent",e.config.apiKey,e.name)}function Vi(e){if(!(null==e?void 0:e.includes("?")))return{};var t,i=e.split("?"),a=r(t=i)||o(t)||u(t)||n(),s=(a[0],a.slice(1));return(0,k.zd)(s.join("?"))}function ji(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:R("no-auth-event")}}function Bi(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return!("file:"!==Bi()&&"ionic:"!==Bi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hi(){try{var e=self.localStorage,t=zn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,k.hl)()}catch(_i){return Gi()&&(0,k.hl)()}return!1}function Gi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ki(){return("http:"===Bi()||"https:"===Bi()||(0,k.ru)()||zi())&&!((0,k.b$)()||(0,k.UG)())&&Hi()&&!Gi()}function Wi(){return zi()&&"undefined"!=typeof document}function Qi(){return(Qi=(0,m.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Wi()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ji=P,$i="persistence";function Xi(e){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ta(),r=Ie($i,t.config.apiKey,t.name),(null==n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ta(){return"undefined"!=typeof window?window:null}var na=P,ra=function(){function e(){f(this,e),this.browserResolver=M(function(){function e(){f(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jn,this._completeRedirectFn=Jr}return h(e,[{key:"_openPopup",value:function(e,n,r,i){var a=this;return(0,m.Z)(regeneratorRuntime.mark(function o(){var s,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return F(null===(s=a.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),u=wi(e,n,r,U(),i),o.abrupt("return",function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString(),u="",c=Object.assign(Object.assign({},ki),{width:i.toString(),height:a.toString(),top:o,left:s}),l=(0,k.z$)().toLowerCase();r&&(u=Ne(l)?"_blank":r),Re(l)&&(n=n||"http://localhost",c.scrollbars="yes");var h=Object.entries(c).reduce(function(e,n){var r=t(n,2),i=r[0],a=r[1];return"".concat(e).concat(i,"=").concat(a,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return Ze(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(n||"",u),new bi(null);var f=window.open(n||"",u,h);P(f,e,"popup-blocked");try{f.focus()}catch(d){}return new bi(f)}(e,u,zn()));case 3:case"end":return o.stop()}},o)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i._originValidation(e);case 2:return o=wi(e,t,n,U(),r),Gn().location.href=o,a.abrupt("return",new Promise(function(){}));case 5:case"end":return a.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(F(i,"If manager is not set, promise should be"),i)}var a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a}},{key:"initAndGetManager",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return yi.apply(this,arguments)}(e);case 2:return r=n.sent,i=new ti(e),n.abrupt("return",(r.register("authEvent",function(t){return P(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ti,{type:Ti},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ti];void 0!==i&&t(!!i),C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ui.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Me()||Oe()||Ze()}}]),e}()),this.cordovaResolver=M(function(){function e(){f(this,e),this._redirectPersistence=jn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new Li(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){C(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){var o,s,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return function(e){var t,n,r,i,a,o,s,u,c,l,h=Ai();P("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),P(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),P("function"==typeof(null===(a=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(u=null===(s=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),P("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),a.next=3,i._initialize(e);case 3:return o=a.sent,a.next=6,o.initialized();case 6:return o.resetRedirect(),qr.clear(),a.next=10,i._originValidation(e);case 10:return s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Mi(),postBody:null,tenantId:e.tenantId,error:R(e,"no-auth-event")}}(e,n,r),a.next=13,function(e,t){return Ui()._set(qi(e),t)}(e,s);case 13:return a.next=15,function(e,t,n){return Ci.apply(this,arguments)}(e,s,t);case 15:return u=a.sent,a.next=18,function(e){var t=Ai().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);case 18:return c=a.sent,a.abrupt("return",function(e,t,n){return Oi.apply(this,arguments)}(e,o,c));case 20:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ri.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,r=Ai(),i=r.universalLinks,a=r.handleOpenURL,o=r.BuildInfo,s=setTimeout((0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Fi(e);case 2:t.onEvent(ji());case 3:case"end":return n.stop()}},n)})),500),u=(n=(0,m.Z)(regeneratorRuntime.mark(function n(r){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,Fi(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=Vi(e),n=t.link?decodeURIComponent(t.link):void 0,r=Vi(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Vi(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Vi(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?R(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||ji());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,u);var c=a,l="".concat(o.packageName.toLowerCase(),"://");Ai().handleOpenURL=function(){var e=(0,m.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&u({url:t}),"function"==typeof c)try{c(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=jn,this._completeRedirectFn=Jr}return h(e,[{key:"_initialize",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,r){var i=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openPopup(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,m.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.selectUnderlyingResolver();case 2:return a.abrupt("return",i.assertedUnderlyingResolver._openRedirect(e,t,n,r));case 3:case"end":return a.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Wi()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return na(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return Qi.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function ia(e){return e.unwrap()}function aa(e){return oa(e)}function oa(e){var t=(e instanceof k.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof k.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return Ir.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=At;break;case"facebook.com":n=It;break;case"github.com":n=Ct;break;case"twitter.com":n=Ot;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Rt._create(r,s):vt._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Et(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof k.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function sa(e,t){return t.catch(function(t){throw t instanceof k.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new la(e,function(e,t){var n,r=(0,k.m9)(e),i=t;return P(t.operationType,r,"argument-error"),P(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ln._fromError(r,i)}(e,t));else if(r){var i=oa(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t=e.user;return{operationType:e.operationType,credential:aa(e),additionalUserInfo:Dn(e),user:ha.getOrCreate(t)}})}function ua(e,t){return ca.apply(this,arguments)}function ca(){return(ca=(0,m.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return sa(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var la=function(){function e(t,n){f(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return h(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return sa(ia(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ha=function(){function e(t){f(this,e),this._delegate=t,this.multiFactor=function(e){var t=(0,k.m9)(e);return Mn.has(t)||Mn.set(t,Zn._fromUser(t)),Mn.get(t)}(t)}return h(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,Jt(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",ua(n.auth,function(e,t,n){return _r.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,function(e,t,n){return Mr.apply(this,arguments)}(t._delegate,e,ra)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xi(Ve(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Qr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",sa(t.auth,Xt(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ua(this.auth,function(e,t,n){return Tr.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return sa(this.auth,function(e,t,n){return Zr.apply(this,arguments)}(this._delegate,e,ra))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xi(Ve(t.auth));case 2:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Wr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return function(e,t){return bn.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e,t){return qt.apply(this,arguments)}(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return function(e,t){return Sn((0,k.m9)(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Sn((0,k.m9)(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Er.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return xn.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return wn.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ha.USER_MAP=new WeakMap;var fa=P,da=function(){var e=function(){function e(t,n){if(f(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;fa(r,"invalid-api-key",{appName:t.name});var i=[Ee];if("undefined"!=typeof window){i=function(e,t){var n=ta();if(!(null==n?void 0:n.sessionStorage))return[];var r=Ie($i,e,t);switch(n.sessionStorage.getItem(r)){case Yi.NONE:return[Ee];case Yi.LOCAL:return[ar,jn];case Yi.SESSION:return[jn];default:return[]}}(r,t.name);for(var a=0,o=[ar,Vn,jn];a<o.length;a++){var s=o[a];i.includes(s)||i.push(s)}}fa(r,"invalid-api-key",{appName:t.name});var u="undefined"!=typeof window?ra:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:u}}),this._delegate._updateErrorMap(S),this.linkUnderlyingAuth()}return h(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ha.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,n){!function(e,n,r){var i=Ve(e);P(i._canInitEmulator,i,"emulator-config-failed"),P(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var a=!!(null==r?void 0:r.disableWarnings),o=Be(n),s=function(e){var n=Be(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){var o=a[1];return{host:o,port:ze(i.substr(o.length+1))}}var s=t(i.split(":"),2);return{host:s[0],port:ze(s[1])}}(n),u=s.host,c=s.port;i.config.emulator={url:"".concat(o,"//").concat(u).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,n)}},{key:"applyActionCode",value:function(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return hn(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return cn.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,m.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",sa(n._delegate,function(e,t,n){return vn.apply(this,arguments)}(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return kn.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=_t.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,m.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return fa(Ki(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,function(e,t){return Yr.apply(this,arguments)}(e._delegate,ra);case 3:return n=t.sent,t.abrupt("return",n?sa(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ve(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=va(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=va(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return pn.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return un.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){Ji(Object.values(Yi).includes(t),e,"invalid-persistence-type"),(0,k.b$)()?Ji(t!==Yi.SESSION,e,"unsupported-persistence-type"):(0,k.UG)()?Ji(t===Yi.NONE,e,"unsupported-persistence-type"):Gi()?Ji(t===Yi.NONE||t===Yi.LOCAL&&(0,k.hl)(),e,"unsupported-persistence-type"):Ji(t===Yi.NONE||Hi(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===Yi.SESSION?3:n.t0===Yi.LOCAL?5:n.t0===Yi.NONE?14:16;break;case 3:return r=jn,n.abrupt("break",17);case 5:return n.next=7,M(ar)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=ar,n.next=12;break;case 11:n.t1=Vn;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=Ee,n.abrupt("break",17);case 16:return n.abrupt("return",C("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return sa(this._delegate,function(e){return Ft.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return sa(this._delegate,Qt(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return sa(this._delegate,function(e,t){return rn.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return sa(this._delegate,function(e,t,n){return Qt((0,k.m9)(e),Tt.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return sa(this._delegate,function(e,t,n){return gn.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ua(this._delegate,function(e,t,n){return wr.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(fa(Ki(),t._delegate,"operation-not-supported-in-this-environment"),sa(t._delegate,function(e,t,n){return Fr.apply(this,arguments)}(t._delegate,e,ra))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,m.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return fa(Ki(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,Xi(t._delegate);case 3:return n.abrupt("return",function(e,t,n){return function(e,t,n){return Kr.apply(this,arguments)}(e,t,n)}(t._delegate,e,ra));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return dn.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=Yi,e}();function va(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&ha.getOrCreate(e))},error:t,complete:n}}var pa=function(){function e(){f(this,e),this.providerId="phone",this._delegate=new Ir(ia(y.Z.auth()))}return h(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ir.credential(e,t)}}]),e}();pa.PHONE_SIGN_IN_METHOD=Ir.PHONE_SIGN_IN_METHOD,pa.PROVIDER_ID=Ir.PROVIDER_ID;var ga=P,ma=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.Z.app();f(this,e),ga(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kr(t,n,i.auth()),this.type=this._delegate.type}return h(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new x.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new da(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Tt,FacebookAuthProvider:It,GithubAuthProvider:Ct,GoogleAuthProvider:At,OAuthProvider:Et,PhoneAuthProvider:pa,PhoneMultiFactorGenerator:Si,RecaptchaVerifier:ma,TwitterAuthProvider:Ot,Auth:da,AuthCredential:He,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.6")}(y.Z)},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,a=new Promise(function(a,o){n(i=e[t].apply(e,r)).then(a,o)});return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function a(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function v(e){this._db=e}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},a(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},a(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),v.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},a(v,"_db",["name","version","objectStoreNames"]),s(v,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new d(a.result,e.oldVersion,a.transaction))}),i.then(function(e){return new v(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r,i=n(7393),a=n(9181),o=n(6490),s=n(6554),u=n(4487),c=n(2494),l=((r=function(e){function t(e){f(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return h(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,s=function(e,t,n){if(e){if(e instanceof i.L)return e;if(e[a.b])return e[a.b]()}return e||t||n?new i.L(e,t,n):new i.L(o.c)}(e,t,n);if(s.add(r?r.call(s,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.v.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,a=t.isStopped;if(n||a)return!1;e=r&&r instanceof i.L?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=d(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:function(e){return 0===e.length?u.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=d(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(s.L)).create=function(e){return new r(e)},r);function d(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2494),i=n(4449),a={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return p},xQ:function(){return g}});var r,a=n(7574),o=n(7393),s=n(5319),u=n(7971),c=n(8858),l=n(9181),p=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).destination=e,r}return n}(o.L),g=((r=function(e,t){d(r,e);var n=v(r);function r(){var e;return f(this,r),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return h(r,[{key:t,value:function(){return new p(this)}},{key:"lift",value:function(e){var t=new m(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new u.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new u.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new u.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new u.N;return i(w(r.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new u.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new c.W(this,e))}},{key:"asObservable",value:function(){var e=new a.y;return e.source=this,e}}]),r}(a.y,l.b)).create=function(e,t){return new m(e,t)},r),m=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).destination=e,i.source=r,i}return h(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):s.w.EMPTY}}]),n}(g)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return h(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(5319).w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),a=n(6490),o=n(5319),s=n(9181),u=n(2494),c=n(4449),l=function(e,t){d(r,e);var n=v(r);function r(e,t,i){var o;switch(f(this,r),(o=n.call(this)).syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.c;break;case 1:if(!e){o.destination=a.c;break}if("object"==typeof e){e instanceof r?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(g(o))):(o.syncErrorThrowable=!0,o.destination=new p(g(o),e));break}default:o.syncErrorThrowable=!0,o.destination=new p(g(o),e,t,i)}return o}return h(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,i(w(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(o.w,s.b),p=function(e){d(n,e);var t=v(n);function n(e,i,o,s){var u;f(this,n),(u=t.call(this))._parentSubscriber=e;var c,l=g(u);return(0,r.m)(i)?c=i:i&&(c=i.next,o=i.error,s=i.complete,i!==a.c&&(l=Object.create(i),(0,r.m)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(g(u)))),u._context=l,u._next=c,u._error=o,u._complete=s,u}return h(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),u.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!u.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return u.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r,i=n(9796),a=n(1555),o=n(9105),s=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),u=function(){function e(t){f(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return h(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,u=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,o.m)(u)){r&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var v=l[f];if((0,a.K)(v))try{v.unsubscribe()}catch(p){t=t||[],p instanceof s?t=t.concat(c(p.errors)):t.push(p)}}if(t)throw new s(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof s?t.errors:t)},[])}u.EMPTY=((r=new u).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return s},ft:function(){return u}});var r=n(7393),i=n(7574),a=n(7444),o=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).parent=e,r}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),s=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function u(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,a.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,a=n(9765),o=n(7574),s=n(5319),u=n(1307),c=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return h(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.w).add(this.source.subscribe(new p(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,u.x)()(this)}}]),n}(o.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},p=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).connectable=r,i}return h(n,[{key:"_error",value:function(e){this._unsubscribe(),i(w(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),i(w(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(a.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return a}});var r=n(7574),i=new r.y(function(e){return e.complete()});function a(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),a=n(5319),o=n(6554),s=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){var i=e[o.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new a.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,s.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new a.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[u.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),a=n(4087);function o(e,t){return t?(0,a.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(7574),i=n(4869),a=n(3282),o=n(6693);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=t[t.length-1];return(0,i.K)(c)?(u=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(s=t.pop())):"number"==typeof c&&(s=t.pop()),null===u&&1===t.length&&t[0]instanceof r.y?t[0]:(0,a.J)(s)((0,o.n)(t,u))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),a=n(4087);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return(0,r.K)(o)?(t.pop(),(0,a.r)(t,o)):(0,i.n)(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(t,n){f(this,e),this.project=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}]),e}(),o=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).project=r,a.count=0,a.thisArg=i||g(a),a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r=n(9773),i=n(4487);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),a=n(5345);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(a){return a.pipe(o(function(n,a){return(0,i.D)(e(n,a)).pipe((0,r.U)(function(e,r){return t(n,e,a,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new s(e,n))})}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;f(this,e),this.project=t,this.concurrent=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}]),e}(),u=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return f(this,n),(i=t.call(this,e)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return h(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new a.IY(this),n=this.destination;n.add(t);var r=(0,a.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(a.Ds)},309:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return u}});var r=n(7393),i=n(9193),a=n(5917),o=n(7574),s=function(){function e(t,n,r){f(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return h(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,a.of)(this.value);case"E":return e=this.error,new o.y(function(t){return t.error(e)});case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new c(e,t))}}s.completeNotification=new s("C"),s.undefinedValueNotification=new s("N",void 0);var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}]),e}(),l=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return f(this,n),(i=t.call(this,e)).scheduler=r,i.delay=a,i}return h(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new p(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(s.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(s.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(s.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),p=function e(t,n){f(this,e),this.notification=t,this.destination=n}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new a(e))}}var a=function(){function e(t){f(this,e),this.connectable=t}return h(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),o=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).connectable=r,i}return h(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return k}});var r=n(7574),a=1,o=Promise.resolve(),s={};function u(e){return e in s&&(delete s[e],!0)}var c=function(e){var t=a++;return s[t]=!0,o.then(function(){return u(t)&&e()}),t},l=function(e){u(e)},p=n(6465),g=new(function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return h(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?i(w(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return i(w(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(l(t),e.scheduled=void 0)}}]),n}(p.o)),m=n(9796),y=function(e){d(n,e);var t=v(n);function n(e){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return f(this,n),(r=t.call(this)).source=e,r.delayTime=a,r.scheduler=o,(!(!(0,m.k)(i=a)&&i-parseFloat(i)+1>=0)||a<0)&&(r.delayTime=0),(!o||"function"!=typeof o.schedule)&&(r.scheduler=g),r}return h(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new b(e,t))}}var b=function(){function e(t,n){f(this,e),this.scheduler=t,this.delay=n}return h(e,[{key:"call",value:function(e,t){return new y(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var a=n(9105);function o(e,t,n){return function(r){return r.lift(new s(e,t,n))}}var s=function(){function e(t,n,r){f(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),u=function(e){d(n,e);var t=v(n);function n(e,r,o,s){var u;return f(this,n),(u=t.call(this,e))._tapNext=i,u._tapError=i,u._tapComplete=i,u._tapError=o||i,u._tapComplete=s||i,(0,a.m)(r)?(u._context=g(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i,u._tapError=r.error||i,u._tapComplete=r.complete||i),u}return h(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(7574),i=n(5319);function a(e,t){return new r.y(function(n){var r=new i.w,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this)}return h(n,[{key:"schedule",value:function(e){return this}}]),n}(n(5319).w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r,a=((r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;f(this,e),this.SchedulerAction=t,this.now=n}return h(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}()).now=function(){return Date.now()},r),o=function(e){d(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.now;return f(this,n),(r=t.call(this,e,function(){return n.delegate&&n.delegate!==g(r)?n.delegate.now():i()})).actions=[],r.active=!1,r.scheduled=void 0,r}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):i(w(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(a)},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(6465),i=new(n(6102).v)(r.o)},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return a}});var r=n(6465),a=new(function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(n(6102).v))(function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return h(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?i(w(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?i(w(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?i(w(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),o=a},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),a=n(377),o=n(6554),s=n(9489),u=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[o.L])return function(e){return function(t){var n=e[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}(e);if((0,s.z)(e))return(0,r.V)(e);if((0,u.t)(e))return function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.z),t}}(e);if(e&&"function"==typeof e[a.hZ])return function(e){return function(t){for(var n=e[a.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}(e);var t="You provided ".concat((0,c.K)(e)?"an invalid object":"'".concat(e,"'")," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.");throw new TypeError(t)}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},3704:function(n,r,o){"use strict";var u=o(3018),c=null;function l(){return c}var k=new u.OlP("DocumentToken"),b=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:_,token:e,providedIn:"platform"}),e}();function _(){return(0,u.LFG)(x)}var T=new u.OlP("Location Initialized"),x=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r._init(),r}return h(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return l().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){S()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){S()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(b);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=(0,u.Yz7)({factory:E,token:e,providedIn:"platform"}),e}();function S(){return!!window.history.pushState}function E(){return new x((0,u.LFG)(k))}function I(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function A(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function C(e){return e&&"?"!==e[0]?"?"+e:e}var R=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:O,token:e,providedIn:"root"}),e}();function O(e){var t=(0,u.LFG)(k).location;return new D((0,u.LFG)(b),t&&t.origin||"")}var N=new u.OlP("appBaseHref"),D=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;if(f(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,p(i)}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return I(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(R);return e.\u0275fac=function(t){return new(t||e)(u.LFG(b),u.LFG(N,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),P=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return h(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=I(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(R);return e.\u0275fac=function(t){return new(t||e)(u.LFG(b),u.LFG(N,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(){function e(t,n){var r=this;f(this,e),this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=A(Z(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return h(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+C(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Z(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+C(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(R),u.LFG(b))},e.normalizeQueryParams=C,e.joinWithSlash=I,e.stripTrailingSlash=A,e.\u0275prov=(0,u.Yz7)({factory:F,token:e,providedIn:"root"}),e}();function F(){return new L((0,u.LFG)(R),(0,u.LFG)(b))}function Z(e){return e.replace(/\/index.html$/,"")}var M={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},U=((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U),q=((q=q||{})[q.Zero=0]="Zero",q[q.One=1]="One",q[q.Two=2]="Two",q[q.Few=3]="Few",q[q.Many=4]="Many",q[q.Other=5]="Other",q),V=((V=V||{})[V.Decimal=0]="Decimal",V[V.Group=1]="Group",V[V.List=2]="List",V[V.PercentSign=3]="PercentSign",V[V.PlusSign=4]="PlusSign",V[V.MinusSign=5]="MinusSign",V[V.Exponential=6]="Exponential",V[V.SuperscriptingExponent=7]="SuperscriptingExponent",V[V.PerMille=8]="PerMille",V[V.Infinity=9]="Infinity",V[V.NaN=10]="NaN",V[V.TimeSeparator=11]="TimeSeparator",V[V.CurrencyDecimal=12]="CurrencyDecimal",V[V.CurrencyGroup=13]="CurrencyGroup",V);function j(e,t){var n=(0,u.cg1)(e),r=n[u.wAp.NumberSymbols][t];if(void 0===r){if(t===V.CurrencyDecimal)return n[u.wAp.NumberSymbols][V.Decimal];if(t===V.CurrencyGroup)return n[u.wAp.NumberSymbols][V.Group]}return r}var B=u.kL8,z=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function H(e,t,n,r,i){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],a=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=o[0],u=o[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,a){var f=i.length-n.posPre.length-n.posSuf.length,d=a.indexOf("#");n.negPre=a.substr(0,d).replace(/'/g,""),n.negSuf=a.substr(d+f).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return(0,u.cg1)(e)[u.wAp.NumberFormats][t]}(t,U.Currency),j(t,V.MinusSign));return a.minFrac=function(e){var t,n=M[e];return n&&(t=n[2]),"number"==typeof t?t:2}(r),a.maxFrac=a.minFrac,function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(e)){var c=function(e){var t,n,r,i,a,o=Math.abs(e)+"",s=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(a=o.length))t=[0],n=1;else{for(a--;"0"===o.charAt(a);)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),s=n-1,n=1),{digits:t,exponent:s,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var l=t.minInt,h=t.minFrac,f=t.maxFrac;if(a){var d=a.match(z);if(null===d)throw new Error("".concat(a," is not a valid digit info"));var v=d[1],p=d[3],g=d[5];null!=v&&(l=G(v)),null!=p&&(h=G(p)),null!=g?f=G(g):null!=p&&h>f&&(f=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var r=e.digits,i=r.length-e.integerLen,a=Math.min(Math.max(t,i),n),o=a+e.integerLen,s=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(var u=o;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=a+1),r[0]=0;for(var c=1;c<o;c++)r[c]=0}if(s>=5)if(o-1<0){for(var l=0;l>o;l--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,a);i++)r.push(0);var h=0!==a,f=t+e.integerLen,d=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),t>=10?1:0},0);d&&(r.unshift(d),e.integerLen++)}(c,h,f);var m=c.digits,y=c.integerLen,k=c.exponent,b=[];for(u=m.every(function(e){return!e});y<l;y++)m.unshift(0);for(;y<0;y++)m.unshift(0);y>0?b=m.splice(y,m.length):(b=m,m=[0]);var w=[];for(m.length>=t.lgSize&&w.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)w.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&w.unshift(m.join("")),s=w.join(j(n,r)),b.length&&(s+=j(n,i)+b.join("")),k&&(s+=j(n,V.Exponential)+"+"+k)}else s=j(n,V.Infinity);return s=e<0&&!u?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}(e,a,t,V.CurrencyGroup,V.CurrencyDecimal,i).replace("\xa4",n).replace("\xa4","").trim()}function G(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var K=function e(){f(this,e)},W=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).locale=e,r}return h(n,[{key:"getPluralCategory",value:function(e,t){switch(B(t||this.locale)(e)){case q.Zero:return"zero";case q.One:return"one";case q.Two:return"two";case q.Few:return"few";case q.Many:return"many";default:return"other"}}}]),n}(K);return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.soG))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Q=function(){function e(t,n,r,i){f(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return h(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),Y=function(){var e=function(){function e(t,n,r){f(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return h(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'. NgFor only supports binding to Iterables such as Arrays."))}}if(this._differ){var t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new Q(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new J(e,a);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,i);var u=new J(e,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},e.\u0275dir=u.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),J=function e(t,n){f(this,e),this.record=t,this.view=n},$=function(){var e=function(){function e(t,n){f(this,e),this._viewContainer=t,this._context=new X,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return h(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){ee("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){ee("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.s_b),u.Y36(u.Rgc))},e.\u0275dir=u.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),X=function e(){f(this,e),this.$implicit=null,this.ngIf=null};function ee(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,u.AaK)(t),"'."))}function te(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat((0,u.AaK)(e),"'"))}var ne=function(){function e(){f(this,e)}return h(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),re=new(function(){function e(){f(this,e)}return h(e,[{key:"createSubscription",value:function(e,t){return e.then(t,function(e){throw e})}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),ie=new ne,ae=function(){var e=function(){function e(t){f(this,e),this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return h(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})}},{key:"_selectStrategy",value:function(t){if((0,u.QGY)(t))return re;if((0,u.F4k)(t))return ie;throw te(e,t)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.sBO,16))},e.\u0275pipe=u.Yjl({name:"async",type:e,pure:!1}),e}(),oe=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";f(this,e),this._locale=t,this._defaultCurrencyCode=n}return h(e,[{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._defaultCurrencyCode,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"symbol",i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;a=a||this._locale,"boolean"==typeof r&&(r=r?"symbol":"code");var o=n||this._defaultCurrencyCode;"code"!==r&&(o="symbol"===r||"symbol-narrow"===r?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=function(e){return(0,u.cg1)(e)[u.wAp.Currencies]}(n)[e]||M[e]||[],i=r[1];return"narrow"===t&&"string"==typeof i?i:r[0]||e}(o,"symbol"===r?"wide":"narrow",a):r);try{return H(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error("".concat(e," is not a number"));return e}(t),a,o,n,i)}catch(s){throw te(e,s.message)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.soG,16),u.Y36(u.EJc,16))},e.\u0275pipe=u.Yjl({name:"currency",type:e,pure:!0}),e}(),se=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[{provide:K,useClass:W}]}),e}();function ue(e){return"server"===e}var ce=function(){var e=function e(){f(this,e)};return e.\u0275prov=(0,u.Yz7)({token:e,providedIn:"root",factory:function(){return new le((0,u.LFG)(k),window)}}),e}(),le=function(){function e(t,n){f(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return h(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=he(this.window.history)||he(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function he(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var fe,de=function(e){d(r,e);var n=v(r);function r(){return f(this,r),n.apply(this,arguments)}return h(r,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(ve=ve||document.querySelector("base"))?ve.getAttribute("href"):null;return null==t?null:function(e){(fe=fe||document.createElement("a")).setAttribute("href",e);var t=fe.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){ve=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return function(e,n){n=encodeURIComponent(n);var r,i=s(e.split(";"));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.indexOf("="),u=t(-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new r,c||(c=e)}}]),r}(function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return n}(function(){return function e(){f(this,e)}}())),ve=null,pe=new u.OlP("TRANSITION_ID"),ge=[{provide:u.ip1,useFactory:function(e,t,n){return function(){n.get(u.CZH).donePromise.then(function(){for(var n=l(),r=t.querySelectorAll('style[ng-transition="'.concat(e,'"]')),i=0;i<r.length;i++)n.remove(r[i])})}},deps:[pe,k,u.zs3],multi:!0}],me=function(){function e(){f(this,e)}return h(e,[{key:"addToWindow",value:function(e){u.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},u.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},u.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(function(e){var t=u.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?l().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,u.VLi)(new e)}}]),e}(),ye=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ke=new u.OlP("EventManagerPlugins"),be=function(){var e=function(){function e(t,n){var r=this;f(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return h(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(ke),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),we=function(){function e(t){f(this,e),this._doc=t}return h(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=l().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),_e=function(){var e=function(){function e(){f(this,e),this._stylesSet=new Set}return h(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Te=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return h(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(xe),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(xe)})}}]),n}(_e);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function xe(e){l().remove(e)}var Se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ee=/%COMP%/g;function Ie(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?Ie(e,i,n):(i=i.replace(Ee,e),n.push(i))}return n}function Ae(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var Ce=function(){var e=function(){function e(t,n,r){f(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Re(t)}return h(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case u.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Oe(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case u.ifc.ShadowDom:return new Ne(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Ie(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(be),u.LFG(Te),u.LFG(u.AFp))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Re=function(){function e(t){f(this,e),this.eventManager=t,this.data=Object.create(null)}return h(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Se[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=Se[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Se[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,n,r&u.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ae(n)):this.eventManager.addEventListener(e,t,Ae(n))}}]),e}(),Oe=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;f(this,n),(o=t.call(this,e)).component=i;var s=Ie(a+"-"+i.id,i.styles,[]);return r.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(Ee,a+"-"+i.id),o.hostAttr=function(e){return"_nghost-%COMP%".replace(Ee,e)}(a+"-"+i.id),o}return h(n,[{key:"applyToHost",value:function(e){i(w(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=i(w(n.prototype),"createElement",this).call(this,e,t);return i(w(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(Re),Ne=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;f(this,n),(o=t.call(this,e)).sharedStylesHost=r,o.hostEl=i,o.shadowRoot=i.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Ie(a.id,a.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],o.shadowRoot.appendChild(c)}return o}return h(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return i(w(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return i(w(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return i(w(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(i(w(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(Re),De=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(we);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Pe=["alt","control","meta","shift"],Le={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ze={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Me=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return h(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return l().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(Pe.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Fe.hasOwnProperty(t)&&(t=Fe[t]))}return Le[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Pe.forEach(function(r){r!=n&&Ze[r](e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(we);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Ue=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:function(){return(0,u.LFG)(qe)},token:e,providedIn:"root"}),e}(),qe=function(){var e=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._doc=e,r}return h(n,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case u.q3G.NONE:return t;case u.q3G.HTML:return(0,u.qzn)(t,"HTML")?(0,u.z3N)(t):(0,u.EiD)(this._doc,String(t)).toString();case u.q3G.STYLE:return(0,u.qzn)(t,"Style")?(0,u.z3N)(t):t;case u.q3G.SCRIPT:if((0,u.qzn)(t,"Script"))return(0,u.z3N)(t);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(t),(0,u.qzn)(t,"URL")?(0,u.z3N)(t):(0,u.mCW)(String(t));case u.q3G.RESOURCE_URL:if((0,u.qzn)(t,"ResourceURL"))return(0,u.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(e){return(0,u.JVY)(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return(0,u.L6k)(e)}},{key:"bypassSecurityTrustScript",value:function(e){return(0,u.eBb)(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return(0,u.LAX)(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return(0,u.pB0)(e)}}]),n}(Ue);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=(0,u.Yz7)({factory:function(){return function(e){return new qe(e.get(k))}((0,u.LFG)(u.gxx))},token:e,providedIn:"root"}),e}(),Ve=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){de.makeCurrent(),me.init()},multi:!0},{provide:k,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),je=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:ke,useClass:De,multi:!0,deps:[k,u.R0b,u.Lbi]},{provide:ke,useClass:Me,multi:!0,deps:[k]},[],{provide:Ce,useClass:Ce,deps:[be,Te,u.AFp]},{provide:u.FYo,useExisting:Ce},{provide:_e,useExisting:Te},{provide:Te,useClass:Te,deps:[k]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:be,useClass:be,deps:[ke,u.R0b]},{provide:function e(){f(this,e)},useClass:ye,deps:[]},[]],Be=function(){var e=function(){function e(t){if(f(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return h(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:u.AFp,useValue:t.appId},{provide:pe,useExisting:u.AFp},ge]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(e,12))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:je,imports:[se,u.hGG]}),e}();"undefined"!=typeof window&&window;var ze=o(4402),He=o(7574),Ge=o(9796),Ke=o(8002),We=o(1555);function Qe(e,t){return new He.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=(0,ze.D)(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,o++),i[s]=e},error:function(e){return n.error(e)},complete:function(){(++a===r||!c)&&(o===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()})}var Ye=function(){var e=function(){function e(t,n){f(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return h(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.Qsj),u.Y36(u.SBq))},e.\u0275dir=u.lG2({type:e}),e}(),Je=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(Ye);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t}(),$e=new u.OlP("NgValueAccessor"),Xe={provide:$e,useExisting:(0,u.Gpc)(function(){return et}),multi:!0},et=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"writeValue",value:function(e){this.setProperty("checked",e)}}]),n}(Je);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&u.NdJ("change",function(e){return t.onChange(e.target.checked)})("blur",function(){return t.onTouched()})},features:[u._Bn([Xe]),u.qOj]}),t}(),tt={provide:$e,useExisting:(0,u.Gpc)(function(){return rt}),multi:!0},nt=new u.OlP("CompositionEventMode"),rt=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r))._compositionMode=i,a._composing=!1,null==a._compositionMode&&(a._compositionMode=!function(){var e=l()?l().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}()),a}return h(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(Ye);return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(nt,8))},e.\u0275dir=u.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&u.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[u._Bn([tt]),u.qOj]}),e}();function it(e){return null==e||0===e.length}function at(e){return null!=e&&"number"==typeof e.length}var ot=new u.OlP("NgValidators"),st=new u.OlP("NgAsyncValidators"),ut=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ct=function(){function e(){f(this,e)}return h(e,null,[{key:"min",value:function(e){return function(e){return function(t){if(it(t.value)||it(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}},{key:"max",value:function(e){return function(e){return function(t){if(it(t.value)||it(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}},{key:"required",value:function(e){return function(e){return it(e.value)?{required:!0}:null}(e)}},{key:"requiredTrue",value:function(e){return function(e){return!0===e.value?null:{required:!0}}(e)}},{key:"email",value:function(e){return function(e){return it(e.value)||ut.test(e.value)?null:{email:!0}}(e)}},{key:"minLength",value:function(e){return function(e){return function(t){return it(t.value)||!at(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"maxLength",value:function(e){return function(e){return function(t){return at(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"pattern",value:function(e){return function(e){return e?("string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),function(e){if(it(e.value))return null;var r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}):lt;var t,n}(e)}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){return gt(e)}},{key:"composeAsync",value:function(e){return yt(e)}}]),e}();function lt(e){return null}function ht(e){return null!=e}function ft(e){var t=(0,u.QGY)(e)?(0,ze.D)(e):e;return(0,u.CqO)(t),t}function dt(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function vt(e,t){return t.map(function(t){return t(e)})}function pt(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function gt(e){if(!e)return null;var t=e.filter(ht);return 0==t.length?null:function(e){return dt(vt(e,t))}}function mt(e){return null!=e?gt(pt(e)):null}function yt(e){if(!e)return null;var t=e.filter(ht);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,Ge.k)(r))return Qe(r,null);if((0,We.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Qe(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var o=t.pop();return Qe(t=1===t.length&&(0,Ge.k)(t[0])?t[0]:t,null).pipe((0,Ke.U)(function(e){return o.apply(void 0,a(e))}))}return Qe(t,null)}(vt(e,t).map(ft)).pipe((0,Ke.U)(dt))}}function kt(e){return null!=e?yt(pt(e)):null}function bt(e,t){return null===e?[t]:Array.isArray(e)?[].concat(a(e),[t]):[e,t]}function wt(e){return e._rawValidators}function _t(e){return e._rawAsyncValidators}function Tt(e){return e?Array.isArray(e)?e:[e]:[]}function xt(e,t){return Array.isArray(e)?e.includes(t):e===t}function St(e,t){var n=Tt(t);return Tt(e).forEach(function(e){xt(n,e)||n.push(e)}),n}function Et(e,t){return Tt(t).filter(function(t){return!xt(e,t)})}var It=function(){var e=function(){function e(){f(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return h(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=mt(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kt(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=u.lG2({type:e}),e}(),At=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(It);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t}(),Ct=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return n}(It),Rt=function(){function e(t){f(this,e),this._cd=t}return h(e,[{key:"is",value:function(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}]),e}(),Ot=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return n}(Rt);return e.\u0275fac=function(t){return new(t||e)(u.Y36(Ct,2))},e.\u0275dir=u.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&u.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[u.qOj]}),e}(),Nt=function(){var e=function(e){d(n,e);var t=v(n);function n(e){return f(this,n),t.call(this,e)}return n}(Rt);return e.\u0275fac=function(t){return new(t||e)(u.Y36(At,10))},e.\u0275dir=u.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&u.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[u.qOj]}),e}();function Dt(e,t){Ft(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Mt(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Mt(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t)}function Pt(e,t){var n=function(){};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Zt(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(function(){}))}function Lt(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ft(e,t){var n=wt(e);null!==t.validator?e.setValidators(bt(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=_t(e);null!==t.asyncValidator?e.setAsyncValidators(bt(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};Lt(t._rawValidators,i),Lt(t._rawAsyncValidators,i)}function Zt(e,t){var n=!1;if(null!==e){if(null!==t.validator){var r=wt(e);if(Array.isArray(r)&&r.length>0){var i=r.filter(function(e){return e!==t.validator});i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){var a=_t(e);if(Array.isArray(a)&&a.length>0){var o=a.filter(function(e){return e!==t.asyncValidator});o.length!==a.length&&(n=!0,e.setAsyncValidators(o))}}}var s=function(){};return Lt(t._rawValidators,s),Lt(t._rawAsyncValidators,s),n}function Mt(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Ut(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var qt="VALID",Vt="INVALID",jt="PENDING",Bt="DISABLED";function zt(e){return(Wt(e)?e.validators:e)||null}function Ht(e){return Array.isArray(e)?mt(e):e||null}function Gt(e,t){return(Wt(t)?t.asyncValidators:e)||null}function Kt(e){return Array.isArray(e)?kt(e):e||null}function Wt(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Qt=function(){function e(t,n){f(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=Ht(this._rawValidators),this._composedAsyncValidatorFn=Kt(this._rawAsyncValidators)}return h(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return this.status===qt}},{key:"invalid",get:function(){return this.status===Vt}},{key:"pending",get:function(){return this.status==jt}},{key:"disabled",get:function(){return this.status===Bt}},{key:"enabled",get:function(){return this.status!==Bt}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=Ht(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Kt(e)}},{key:"addValidators",value:function(e){this.setValidators(St(e,this._rawValidators))}},{key:"addAsyncValidators",value:function(e){this.setAsyncValidators(St(e,this._rawAsyncValidators))}},{key:"removeValidators",value:function(e){this.setValidators(Et(e,this._rawValidators))}},{key:"removeAsyncValidators",value:function(e){this.setAsyncValidators(Et(e,this._rawAsyncValidators))}},{key:"hasValidator",value:function(e){return xt(this._rawValidators,e)}},{key:"hasAsyncValidator",value:function(e){return xt(this._rawAsyncValidators,e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status=jt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=Bt,this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=qt,this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qt||this.status===jt)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?Bt:qt}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status=jt,this._hasOwnPendingAsyncValidator=!0;var n=ft(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;var r=e;return t.forEach(function(e){r=r instanceof Jt?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof $t&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?Bt:this.errors?Vt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jt)?jt:this._anyControlsHaveStatus(Vt)?Vt:qt}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){Wt(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),Yt=function(e){d(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return f(this,n),(e=t.call(this,zt(i),Gt(a,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return h(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){Ut(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){Ut(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(Qt),Jt=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,zt(r),Gt(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return h(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Yt?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(Qt),$t=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,zt(r),Gt(i,r))).controls=e,a._initObservables(),a._setUpdateStrategy(r),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!!a.asyncValidator}),a}return h(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof Yt?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=s(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Qt),Xt=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=u.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e}(),en={provide:$e,useExisting:(0,u.Gpc)(function(){return tn}),multi:!0},tn=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}}]),n}(Je);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&u.NdJ("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[u._Bn([en]),u.qOj]}),t}(),nn=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),rn=new u.OlP("NgModelWithFormControlWarning"),an={provide:At,useExisting:(0,u.Gpc)(function(){return on})},on=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).validators=e,i.asyncValidators=r,i.submitted=!1,i._onCollectionChange=function(){return i._updateDomValue()},i.directives=[],i.form=null,i.ngSubmit=new u.vpe,i._setValidators(e),i._setAsyncValidators(r),i}return h(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}},{key:"ngOnDestroy",value:function(){this.form&&(Zt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(function(){}))}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return Dt(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){Pt(e.control||null,e,!1),Ut(this.directives,e)}},{key:"addFormGroup",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormGroup",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormArray",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,function(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach(function(t){var n=t.control,r=e.form.get(t.path);n!==r&&(Pt(n||null,t),r instanceof Yt&&(Dt(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_setUpFormContainer",value:function(e){var t=this.form.get(e.path);(function(e,t){Ft(e,t)})(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"_cleanUpFormContainer",value:function(e){if(this.form){var t=this.form.get(e.path);t&&function(e,t){return Zt(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}},{key:"_updateRegistrations",value:function(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){})}},{key:"_updateValidators",value:function(){Ft(this.form,this),this._oldForm&&Zt(this._oldForm,this)}},{key:"_checkFormPresent",value:function(){}}]),n}(At);return e.\u0275fac=function(t){return new(t||e)(u.Y36(ot,10),u.Y36(st,10))},e.\u0275dir=u.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&u.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([an]),u.qOj,u.TTD]}),e}(),sn={provide:Ct,useExisting:(0,u.Gpc)(function(){return un})},un=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this))._ngModelWarningConfig=o,s._added=!1,s.update=new u.vpe,s._ngModelWarningSent=!1,s._parent=e,s._setValidators(r),s._setAsyncValidators(i),s.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===rt?n=e:function(e){return Object.getPrototypeOf(e.constructor)===Je}(e)?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,a),s}return h(n,[{key:"isDisabled",set:function(e){}},{key:"ngOnChanges",value:function(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"path",get:function(){return function(e,t){return[].concat(a(t.path),[e])}(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(Ct);return e.\u0275fac=function(t){return new(t||e)(u.Y36(At,13),u.Y36(ot,10),u.Y36(st,10),u.Y36($e,10),u.Y36(rn,8))},e.\u0275dir=u.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([sn]),u.qOj,u.TTD]}),e._ngModelWarningSentOnce=!1,e}(),cn={provide:$e,useExisting:(0,u.Gpc)(function(){return hn}),multi:!0};function ln(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var hn=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return h(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);var n=ln(t,e);this.setProperty("value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),n}(Je);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&u.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([cn]),u.qOj]}),t}(),fn=function(){var e=function(){function e(t,n,r){f(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return h(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(ln(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(hn,9))},e.\u0275dir=u.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),dn={provide:$e,useExisting:(0,u.Gpc)(function(){return pn}),multi:!0};function vn(e,t){return null==e?"".concat(t):("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var pn=function(){var e,t=function(e){d(n,e);var t=v(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return h(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,a=0;a<i.length;a++){var o=i.item(a),s=t._getOptionValue(o.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),n}(Je);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&u.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([dn]),u.qOj]}),t}(),gn=function(){var e=function(){function e(t,n,r){f(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return h(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(vn(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(vn(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(pn,9))},e.\u0275dir=u.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),mn=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[nn]]}),e}(),yn=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:rn,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[mn]}),e}(),kn=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"group",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._reduceControls(e),i=null,a=null;return null!=n&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(n)?(i=null!=n.validators?n.validators:null,a=null!=n.asyncValidators?n.asyncValidators:null,t=null!=n.updateOn?n.updateOn:void 0):(i=null!=n.validator?n.validator:null,a=null!=n.asyncValidator?n.asyncValidator:null)),new Jt(r,{asyncValidators:a,updateOn:t,validators:i})}},{key:"control",value:function(e,t,n){return new Yt(e,t,n)}},{key:"array",value:function(e,t,n){var r=this,i=e.map(function(e){return r._createControl(e)});return new $t(i,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach(function(r){n[r]=t._createControl(e[r])}),n}},{key:"_createControl",value:function(e){return e instanceof Yt||e instanceof Jt||e instanceof $t?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:function(){return new e},token:e,providedIn:yn}),e}(),bn=o(3637),wn=o(5917),_n=o(6643),Tn=o(3282);function xn(){return(0,Tn.J)(1)(wn.of.apply(void 0,arguments))}var Sn=o(4869);function En(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,Sn.K)(r)?(t.pop(),function(e){return xn(t,e,r)}):function(e){return xn(t,e)}}var In=o(7393);function An(){return function(e){return e.lift(new Cn)}}var Cn=function(){function e(){f(this,e)}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Rn(e))}}]),e}(),Rn=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).hasPrev=!1,r}return h(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(In.L);function On(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Nn(e,t,n))}}var Nn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];f(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Dn(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Dn=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return h(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(In.L),Pn=function(){function e(t,n){f(this,e),this.compare=t,this.keySelector=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Ln(e,this.compare,this.keySelector))}}]),e}(),Ln=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return h(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(n){return this.destination.error(n)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(In.L);function Fn(e,t){return function(n){return n.lift(new Mn(e,t))}}var Zn,Mn=function(){function e(t,n){f(this,e),this.predicate=t,this.thisArg=n}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Un(e,this.predicate,this.thisArg))}}]),e}(),Un=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).predicate=r,a.thisArg=i,a.count=0,a}return h(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(In.L),qn=o(8939),Vn=(o(4671),o(4486)),jn=o(8239),Bn=o(5452),zn=o(6034),Hn=o(5601),Gn=o(3854),Kn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wn={},Qn=Qn||{},Yn=Kn||self;function Jn(){}function $n(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var er="closure_uid_"+(1e9*Math.random()>>>0),tr=0;function nr(e,t,n){return e.call.apply(e.bind,arguments)}function rr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ir(e,t,n){return(ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nr:rr).apply(null,arguments)}function ar(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function or(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sr(){this.s=this.s,this.o=this.o}var ur={};sr.prototype.s=!1,sr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,er)&&e[er]||(e[er]=++tr)}(this);delete ur[e]}},sr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var cr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},lr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function hr(e){return Array.prototype.concat.apply([],arguments)}function fr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function dr(e){return/^[\s\xa0]*$/.test(e)}var vr,pr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function gr(e,t){return-1!=e.indexOf(t)}function mr(e,t){return e<t?-1:e>t?1:0}e:{var yr=Yn.navigator;if(yr){var kr=yr.userAgent;if(kr){vr=kr;break e}}vr=""}function br(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function wr(e){var t={};for(var n in e)t[n]=e[n];return t}var _r="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_r.length;a++)n=_r[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function xr(e){return xr[" "](e),e}xr[" "]=Jn;var Sr,Er,Ir=gr(vr,"Opera"),Ar=gr(vr,"Trident")||gr(vr,"MSIE"),Cr=gr(vr,"Edge"),Rr=Cr||Ar,Or=gr(vr,"Gecko")&&!(gr(vr.toLowerCase(),"webkit")&&!gr(vr,"Edge"))&&!(gr(vr,"Trident")||gr(vr,"MSIE"))&&!gr(vr,"Edge"),Nr=gr(vr.toLowerCase(),"webkit")&&!gr(vr,"Edge");function Dr(){var e=Yn.document;return e?e.documentMode:void 0}e:{var Pr="",Lr=(Er=vr,Or?/rv:([^\);]+)(\)|;)/.exec(Er):Cr?/Edge\/([\d\.]+)/.exec(Er):Ar?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Er):Nr?/WebKit\/(\S+)/.exec(Er):Ir?/(?:Version)[ \/]?(\S+)/.exec(Er):void 0);if(Lr&&(Pr=Lr?Lr[1]:""),Ar){var Fr=Dr();if(null!=Fr&&Fr>parseFloat(Pr)){Sr=String(Fr);break e}}Sr=Pr}var Zr={};var Mr=Yn.document&&Ar&&(Dr()||parseInt(Sr,10))||void 0,Ur=function(){if(!Yn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Yn.addEventListener("test",Jn,t),Yn.removeEventListener("test",Jn,t)}catch(n){}return e}();function qr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Vr(e,t){if(qr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Or){e:{try{xr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:jr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Vr.Z.h.call(this)}}qr.prototype.h=function(){this.defaultPrevented=!0},or(Vr,qr);var jr={2:"touch",3:"pen",4:"mouse"};Vr.prototype.h=function(){Vr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Br="closure_listenable_"+(1e6*Math.random()|0),zr=0;function Hr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++zr,this.ca=this.fa=!1}function Gr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Kr(e){this.src=e,this.g={},this.h=0}function Wr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=cr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Gr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qr(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Kr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Qr(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Hr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Yr="closure_lm_"+(1e6*Math.random()|0),Jr={};function $r(e,t,n,r,i){if(r&&r.once)return ei(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)$r(e,t[a],n,r,i);return null}return n=si(n),e&&e[Br]?e.N(t,n,Xn(r)?!!r.capture:!!r,i):Xr(e,t,n,!1,r,i)}function Xr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Xn(i)?!!i.capture:!!i,s=ai(e);if(s||(e[Yr]=s=new Kr(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=ii;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ur||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ri(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ei(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ei(e,t[a],n,r,i);return null}return n=si(n),e&&e[Br]?e.O(t,n,Xn(r)?!!r.capture:!!r,i):Xr(e,t,n,!0,r,i)}function ti(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ti(e,t[a],n,r,i);else r=Xn(r)?!!r.capture:!!r,n=si(n),e&&e[Br]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Qr(a=e.g[t],n,r,i))&&(Gr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=ai(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qr(t,n,r,i)),(n=-1<e?t[e]:null)&&ni(n))}function ni(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Br])Wr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ri(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ai(t))?(Wr(n,e),0==n.h&&(n.src=null,t[Yr]=null)):Gr(e)}}}function ri(e){return e in Jr?Jr[e]:Jr[e]="on"+e}function ii(e,t){if(e.ca)e=!0;else{t=new Vr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ni(e),e=n.call(r,t)}return e}function ai(e){return(e=e[Yr])instanceof Kr?e:null}var oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function si(e){return"function"==typeof e?e:(e[oi]||(e[oi]=function(t){return e.handleEvent(t)}),e[oi])}function ui(){sr.call(this),this.i=new Kr(this),this.P=this,this.I=null}function ci(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new qr(t,e);else if(t instanceof qr)t.target=t.target||e;else{var i=t;Tr(t=new qr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=li(o,r,!0,t)&&i}if(i=li(o=t.g=e,r,!0,t)&&i,i=li(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=li(o=t.g=n[a],r,!1,t)&&i}function li(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Wr(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}or(ui,sr),ui.prototype[Br]=!0,ui.prototype.removeEventListener=function(e,t,n,r){ti(this,e,t,n,r)},ui.prototype.M=function(){if(ui.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gr(n[r]);delete t.g[e],t.h--}}this.I=null},ui.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ui.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var hi=Yn.JSON.stringify;function fi(){var e=ki,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var di,vi=new(function(){function e(t,n){f(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return h(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new pi},function(e){return e.reset()}),pi=function(){function e(){f(this,e),this.next=this.g=this.h=null}return h(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function gi(e){Yn.setTimeout(function(){throw e},0)}function mi(e,t){di||function(){var e=Yn.Promise.resolve(void 0);di=function(){e.then(bi)}}(),yi||(di(),yi=!0),ki.add(e,t)}var yi=!1,ki=new(function(){function e(){f(this,e),this.h=this.g=null}return h(e,[{key:"add",value:function(e,t){var n=vi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function bi(){for(var e;e=fi();){try{e.h.call(e.g)}catch(n){gi(n)}var t=vi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yi=!1}function wi(e,t){ui.call(this),this.h=e||1,this.g=t||Yn,this.j=ir(this.kb,this),this.l=Date.now()}function _i(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ti(e,t,n){if("function"==typeof e)n&&(e=ir(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ir(e.handleEvent,e)}return 2147483647<Number(t)?-1:Yn.setTimeout(e,t||0)}function xi(e){e.g=Ti(function(){e.g=null,e.i&&(e.i=!1,xi(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}or(wi,ui),(Zn=wi.prototype).da=!1,Zn.S=null,Zn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ci(this,"tick"),this.da&&(_i(this),this.start()))}},Zn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zn.M=function(){wi.Z.M.call(this),_i(this),delete this.g};var Si=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return h(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:xi(this)}},{key:"M",value:function(){i(w(n.prototype),"M",this).call(this),this.g&&(Yn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sr);function Ei(e){sr.call(this),this.h=e,this.g={}}or(Ei,sr);var Ii=[];function Ai(e,t,n,r){Array.isArray(n)||(n&&(Ii[0]=n.toString()),n=Ii);for(var i=0;i<n.length;i++){var a=$r(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ci(e){br(e.g,function(e,t){this.g.hasOwnProperty(t)&&ni(e)},e),e.g={}}function Ri(){this.g=!0}function Oi(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return hi(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}Ei.prototype.M=function(){Ei.Z.M.call(this),Ci(this)},Ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ri.prototype.Aa=function(){this.g=!1},Ri.prototype.info=function(){};var Ni={},Di=null;function Pi(){return Di=Di||new ui}function Li(e){qr.call(this,Ni.Ma,e)}function Fi(e){var t=Pi();ci(t,new Li(t,e))}function Zi(e,t){qr.call(this,Ni.STAT_EVENT,e),this.stat=t}function Mi(e){var t=Pi();ci(t,new Zi(t,e))}function Ui(e,t){qr.call(this,Ni.Na,e),this.size=t}function qi(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Yn.setTimeout(function(){e()},t)}Ni.Ma="serverreachability",or(Li,qr),Ni.STAT_EVENT="statevent",or(Zi,qr),Ni.Na="timingevent",or(Ui,qr);var Vi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ji={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bi(){}function zi(){}Bi.prototype.h=null;var Hi,Gi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ki(){qr.call(this,"d")}function Wi(){qr.call(this,"c")}function Qi(){}function Yi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ei(this),this.P=$i,this.W=new wi(e=Rr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ji}function Ji(){this.i=null,this.g="",this.h=!1}or(Ki,qr),or(Wi,qr),or(Qi,Bi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},Hi=new Qi;var $i=45e3,Xi={},ea={};function ta(e,t,n){e.K=1,e.v=xa(ya(t)),e.s=n,e.U=!0,na(e,null)}function na(e,t){e.F=Date.now(),oa(e),e.A=ya(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Za(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ji,e.g=Mo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Si(ir(e.Ia,e,e.g),e.O)),Ai(e.V,e.g,"readystatechange",e.gb),t=e.H?wr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Fi(1),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function ra(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ia(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=aa(e,n))==ea){4==t&&(e.o=4,Mi(14),i=!1),Oi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Xi){e.o=4,Mi(15),Oi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Oi(e.j,e.m,r,null),ha(e,r)}ra(e)&&r!=ea&&r!=Xi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ro(t),t.L=!0,Mi(11))):(Oi(e.j,e.m,n,"[Invalid Chunked Response]"),la(e),ca(e))}function aa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ea:(n=Number(t.substring(n,r)),isNaN(n)?Xi:(r+=1)+n>t.length?ea:(t=t.substr(r,n),e.C=r+n,t))}function oa(e){e.Y=Date.now()+e.P,sa(e,e.P)}function sa(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=qi(ir(e.eb,e),t)}function ua(e){e.B&&(Yn.clearTimeout(e.B),e.B=null)}function ca(e){0==e.l.G||e.I||Do(e.l,e)}function la(e){ua(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,_i(e.W),Ci(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ha(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ba(n.i,e)))if(n.I=e.N,!e.J&&Ba(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=qi(ir(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;No(n),wo(n)}Co(n),Mi(18)}if(1>=ja(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Lo(n,11)}else if((e.J||n.g==e)&&No(n),!dr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(gr(l,"spdy")||gr(l,"quic")||gr(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(za(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ta(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Zo(r,r.H?r.la:null,r.W),d.J){Ha(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(ua(v),oa(v)),r.g=d}else Ao(r);0<n.l.length&&xo(n)}else"stop"!=a[0]&&"close"!=a[0]||Lo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Lo(n,7):bo(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Fi(4)}catch(a){}}function fa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($n(e)||"string"==typeof e)lr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if($n(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if($n(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function da(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof da)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function va(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];pa(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)pa(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function pa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Zn=Yi.prototype).setTimeout=function(e){this.P=e},Zn.gb=function(e){e=e.target;var t=this.L;t&&3==po(e)?t.l():this.Ia(e)},Zn.Ia=function(e){try{if(e==this.g)e:{var t=po(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Rr||this.g&&(this.h.h||this.g.ga()||go(this.g)))){this.I||4!=t||7==n||Fi(8==n||0>=r?3:2),ua(this);var i=this.g.ba();this.N=i;t:if(ra(this)){var a=go(this.g);e="";var o=a.length,s=4==po(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){la(this),ca(this);var u="";break t}this.h.i=new Yn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dr(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Mi(12),la(this),ca(this);break e}Oi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ha(this,i)}this.U?(ia(this,t,u),Rr&&this.i&&3==t&&(Ai(this.V,this.W,"tick",this.fb),this.W.start())):(Oi(this.j,this.m,u,null),ha(this,u)),4==t&&la(this),this.i&&!this.I&&(4==t?Do(this.l,this):(this.i=!1,oa(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Mi(12)):(this.o=0,Mi(13)),la(this),ca(this)}}}catch(t){}},Zn.fb=function(){if(this.g){var e=po(this.g),t=this.g.ga();this.C<t.length&&(ua(this),ia(this,e,t),this.i&&4!=e&&oa(this))}},Zn.cancel=function(){this.I=!0,la(this)},Zn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Fi(3),Mi(17)),la(this),this.o=2,ca(this)):sa(this,this.Y-e)},(Zn=da.prototype).R=function(){va(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Zn.T=function(){return va(this),this.g.concat()},Zn.get=function(e,t){return pa(this.h,e)?this.h[e]:t},Zn.set=function(e,t){pa(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Zn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var ga=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ma(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ma){this.g=void 0!==t?t:e.g,ka(this,e.j),this.s=e.s,ba(this,e.i),wa(this,e.m),this.l=e.l,t=e.h;var n=new Da;n.i=t.i,t.g&&(n.g=new da(t.g),n.h=t.h),_a(this,n),this.o=e.o}else e&&(n=String(e).match(ga))?(this.g=!!t,ka(this,n[1]||"",!0),this.s=Sa(n[2]||""),ba(this,n[3]||"",!0),wa(this,n[4]),this.l=Sa(n[5]||"",!0),_a(this,n[6]||"",!0),this.o=Sa(n[7]||"")):(this.g=!!t,this.h=new Da(null,this.g))}function ya(e){return new ma(e)}function ka(e,t,n){e.j=n?Sa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ba(e,t,n){e.i=n?Sa(t,!0):t}function wa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _a(e,t,n){t instanceof Da?(e.h=t,function(e,t){t&&!e.j&&(Pa(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(La(this,t),Za(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Ea(t,Oa)),e.h=new Da(t,e.g))}function Ta(e,t,n){e.h.set(t,n)}function xa(e){return Ta(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ea(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ia),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ia(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ma.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ea(t,Aa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ea(t,Aa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ea(n,"/"==n.charAt(0)?Ra:Ca,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ea(n,Na)),e.join("")};var Aa=/[#\/\?@]/g,Ca=/[#\?:]/g,Ra=/[#\?]/g,Oa=/[#\?@]/g,Na=/#/g;function Da(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pa(e){e.g||(e.g=new da,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function La(e,t){Pa(e),t=Ma(e,t),pa(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,pa((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&va(e)))}function Fa(e,t){return Pa(e),t=Ma(e,t),pa(e.g.h,t)}function Za(e,t,n){La(e,t),0<n.length&&(e.i=null,e.g.set(Ma(e,t),fr(n)),e.h+=n.length)}function Ma(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ua(e){this.l=e||qa,e=Yn.PerformanceNavigationTiming?0<(e=Yn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Yn.g&&Yn.g.Ea&&Yn.g.Ea()&&Yn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Zn=Da.prototype).add=function(e,t){Pa(this),this.i=null,e=Ma(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Zn.forEach=function(e,t){Pa(this),this.g.forEach(function(n,r){lr(n,function(n){e.call(t,n,r,this)},this)},this)},Zn.T=function(){Pa(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Zn.R=function(e){Pa(this);var t=[];if("string"==typeof e)Fa(this,e)&&(t=hr(t,this.g.get(Ma(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=hr(t,e[n])}return t},Zn.set=function(e,t){return Pa(this),this.i=null,Fa(this,e=Ma(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Zn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Zn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var qa=10;function Va(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ja(e){return e.h?1:e.g?e.g.size:0}function Ba(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function za(e,t){e.g?e.g.add(t):e.h=t}function Ha(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ga(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=s(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return fr(e.i)}function Ka(){}function Wa(){this.g=new Ka}function Qa(e,t,n){var r=n||"";try{fa(e,function(e,n){var i=e;Xn(e)&&(i=hi(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ya(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ja(e){this.l=e.$b||null,this.j=e.ib||!1}function $a(e,t){ui.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Xa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ua.prototype.cancel=function(){if(this.i=Ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=s(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ka.prototype.stringify=function(e){return Yn.JSON.stringify(e,void 0)},Ka.prototype.parse=function(e){return Yn.JSON.parse(e,void 0)},or(Ja,Bi),Ja.prototype.g=function(){return new $a(this.l,this.j)},Ja.prototype.i=function(e){return function(){return e}}({}),or($a,ui);var Xa=0;function eo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function to(e){e.readyState=4,e.l=null,e.j=null,e.A=null,no(e)}function no(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Zn=$a.prototype).open=function(e,t){if(this.readyState!=Xa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,no(this)},Zn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Yn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Zn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,to(this)),this.readyState=Xa},Zn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Yn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Zn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?to(this):no(this),3==this.readyState&&eo(this)}},Zn.Ua=function(e){this.g&&(this.response=this.responseText=e,to(this))},Zn.Ta=function(e){this.g&&(this.response=e,to(this))},Zn.ha=function(){this.g&&to(this)},Zn.setRequestHeader=function(e,t){this.v.append(e,t)},Zn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Zn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($a.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ro=Yn.JSON.parse;function io(e){ui.call(this),this.headers=new da,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ao,this.K=this.L=!1}or(io,ui);var ao="",oo=/^https?$/i,so=["POST","PUT"];function uo(e){return"content-type"==e.toLowerCase()}function co(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,lo(e),fo(e)}function lo(e){e.D||(e.D=!0,ci(e,"complete"),ci(e,"error"))}function ho(e){if(e.h&&void 0!==Qn&&(!e.C[1]||4!=po(e)||2!=e.ba()))if(e.v&&4==po(e))Ti(e.Fa,0,e);else if(ci(e,"readystatechange"),4==po(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ga)[1]||null;if(!a&&Yn.self&&Yn.self.location){var o=Yn.self.location.protocol;a=o.substr(0,o.length-1)}i=!oo.test(a?a.toLowerCase():"")}t=i}if(t)ci(e,"complete"),ci(e,"success");else{e.m=6;try{var s=2<po(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",lo(e)}}finally{fo(e)}}}function fo(e,t){if(e.g){vo(e);var n=e.g,r=e.C[0]?Jn:null;e.g=null,e.C=null,t||ci(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function vo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Yn.clearTimeout(e.A),e.A=null)}function po(e){return e.g?e.g.readyState:0}function go(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ao:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function mo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return br(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Ta(e,t,n))}function yo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ko(e){this.za=0,this.l=[],this.h=new Ri,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yo("baseRetryDelayMs",5e3,e),this.$a=yo("retryDelaySeedMs",1e4,e),this.Ya=yo("forwardChannelMaxRetries",2,e),this.ra=yo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ua(e&&e.concurrentRequestLimit),this.Ca=new Wa,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function bo(e){if(_o(e),3==e.G){var t=e.V++,n=ya(e.F);Ta(n,"SID",e.J),Ta(n,"RID",t),Ta(n,"TYPE","terminate"),Eo(e,n),(t=new Yi(e,e.h,t,void 0)).K=2,t.v=xa(ya(n)),n=!1,Yn.navigator&&Yn.navigator.sendBeacon&&(n=Yn.navigator.sendBeacon(t.v.toString(),"")),!n&&Yn.Image&&((new Image).src=t.v,n=!0),n||(t.g=Mo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),oa(t)}Fo(e)}function wo(e){e.g&&(Ro(e),e.g.cancel(),e.g=null)}function _o(e){wo(e),e.u&&(Yn.clearTimeout(e.u),e.u=null),No(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Yn.clearTimeout(e.m),e.m=null)}function To(e,t){e.l.push(new(function(){return function e(t,n){f(this,e),this.h=t,this.g=n}}())(e.Za++,t)),3==e.G&&xo(e)}function xo(e){Va(e.i)||e.m||(e.m=!0,mi(e.Ha,e),e.C=0)}function So(e,t){var n;n=t?t.m:e.V++;var r=ya(e.F);Ta(r,"SID",e.J),Ta(r,"RID",n),Ta(r,"AID",e.U),Eo(e,r),e.o&&e.s&&mo(r,e.o,e.s),n=new Yi(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Io(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),za(e.i,n),ta(n,r,t)}function Eo(e,t){e.j&&fa({},function(e,n){Ta(t,n,e)})}function Io(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ir(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Qa(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ao(e){e.g||e.u||(e.Y=1,mi(e.Ga,e),e.A=0)}function Co(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=qi(ir(e.Ga,e),Po(e,e.A)),e.A++,0))}function Ro(e){null!=e.B&&(Yn.clearTimeout(e.B),e.B=null)}function Oo(e){e.g=new Yi(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ya(e.oa);Ta(t,"RID","rpc"),Ta(t,"SID",e.J),Ta(t,"CI",e.N?"0":"1"),Ta(t,"AID",e.U),Eo(e,t),Ta(t,"TYPE","xmlhttp"),e.o&&e.s&&mo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=xa(ya(t)),n.s=null,n.U=!0,na(n,e)}function No(e){null!=e.v&&(Yn.clearTimeout(e.v),e.v=null)}function Do(e,t){var n=null;if(e.g==t){No(e),Ro(e),e.g=null;var r=2}else{if(!Ba(e.i,t))return;n=t.D,Ha(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ci(r=Pi(),new Ui(r,n,t,i)),xo(e)}else Ao(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ja(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=qi(ir(e.Ha,e,t),Po(e,e.C)),e.C++,0)))}(e,t)||2==r&&Co(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Lo(e,5);break;case 4:Lo(e,10);break;case 3:Lo(e,6);break;default:Lo(e,2)}}function Po(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Lo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ir(e.jb,e);n||(n=new ma("//www.google.com/images/cleardot.gif"),Yn.location&&"http"==Yn.location.protocol||ka(n,"https"),xa(n)),function(e,t){var n=new Ri;if(Yn.Image){var r=new Image;r.onload=ar(Ya,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ar(Ya,n,r,"TestLoadImage: error",!1,t),r.onabort=ar(Ya,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ar(Ya,n,r,"TestLoadImage: timeout",!1,t),Yn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mi(2);e.G=0,e.j&&e.j.va(t),Fo(e),_o(e)}function Fo(e){e.G=0,e.I=-1,e.j&&((0!=Ga(e.i).length||0!=e.l.length)&&(e.i.i.length=0,fr(e.l),e.l.length=0),e.j.ua())}function Zo(e,t,n){var r=function(e){return e instanceof ma?ya(e):new ma(e,void 0)}(n);if(""!=r.i)t&&ba(r,t+"."+r.i),wa(r,r.m);else{var i=Yn.location;r=function(e,t,n,r){var i=new ma(null,void 0);return e&&ka(i,e),t&&ba(i,t),n&&wa(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&br(e.aa,function(e,t){Ta(r,t,e)}),n=e.sa,(t=e.D)&&n&&Ta(r,t,n),Ta(r,"VER",e.ma),Eo(e,r),r}function Mo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new io(n&&e.Ba&&!e.qa?new Ja({ib:!0}):e.qa)).L=e.H,t}function Uo(){}function qo(){if(Ar&&!(10<=Number(Mr)))throw Error("Environmental error: no available transport.")}function Vo(e,t){ui.call(this),this.g=new ko(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!dr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new zo(this)}function jo(e){Ki.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Bo(){Wi.call(this),this.status=1}function zo(e){this.g=e}(Zn=io.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hi.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Hi),this.g.onreadystatechange=ir(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void co(this,a)}e=n||"";var i=new da(this.headers);r&&fa(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=uo,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Yn.FormData&&e instanceof Yn.FormData,!(0<=cr(so,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vo(this),0<this.B&&((this.K=function(e){return Ar&&function(){return e=Zr,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=pr(String(Sr)).split("."),n=pr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=mr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||mr(0==a[2].length,0==o[2].length)||mr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ir(this.pa,this)):this.A=Ti(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){co(this,a)}},Zn.pa=function(){void 0!==Qn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},Zn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ci(this,"complete"),ci(this,"abort"),fo(this))},Zn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fo(this,!0)),io.Z.M.call(this)},Zn.Fa=function(){this.s||(this.F||this.v||this.l?ho(this):this.cb())},Zn.cb=function(){ho(this)},Zn.ba=function(){try{return 2<po(this)?this.g.status:-1}catch(Er){return-1}},Zn.ga=function(){try{return this.g?this.g.responseText:""}catch(Er){return""}},Zn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ro(t)}},Zn.Da=function(){return this.m},Zn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Zn=ko.prototype).ma=8,Zn.G=1,Zn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Zn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Yi(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Tr(n=wr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Io(this,t,r),Ta(i=ya(this.F),"RID",e),Ta(i,"CVER",22),this.D&&Ta(i,"X-HTTP-Session-Id",this.D),Eo(this,i),this.o&&n&&mo(i,this.o,n),za(this.i,t),this.Ra&&Ta(i,"TYPE","init"),this.ja?(Ta(i,"$req",r),Ta(i,"SID","null"),t.$=!0,ta(t,i,null)):ta(t,i,r),this.G=2}}else 3==this.G&&(e?So(this,e):0==this.l.length||Va(this.i)||So(this))},Zn.Ga=function(){if(this.u=null,Oo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=qi(ir(this.bb,this),e)}},Zn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Mi(10),wo(this),Oo(this))},Zn.ab=function(){null!=this.v&&(this.v=null,wo(this),Co(this),Mi(19))},Zn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Mi(2)):(this.h.info("Failed to ping google.com"),Mi(1))},(Zn=Uo.prototype).xa=function(){},Zn.wa=function(){},Zn.va=function(){},Zn.ua=function(){},Zn.Oa=function(){},qo.prototype.g=function(e,t){return new Vo(e,t)},or(Vo,ui),Vo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),mi(ir(e.hb,e,t))),Mi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Zo(e,null,e.W),xo(e)},Vo.prototype.close=function(){bo(this.g)},Vo.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,To(this.g,t)}else this.v?((t={}).__data__=hi(e),To(this.g,t)):To(this.g,e)},Vo.prototype.M=function(){this.g.j=null,delete this.j,bo(this.g),delete this.g,Vo.Z.M.call(this)},or(jo,Ki),or(Bo,Wi),or(zo,Uo),zo.prototype.xa=function(){ci(this.g,"a")},zo.prototype.wa=function(e){ci(this.g,new jo(e))},zo.prototype.va=function(e){ci(this.g,new Bo(e))},zo.prototype.ua=function(){ci(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,Vo.prototype.send=Vo.prototype.u,Vo.prototype.open=Vo.prototype.m,Vo.prototype.close=Vo.prototype.close,Vi.NO_ERROR=0,Vi.TIMEOUT=8,Vi.HTTP_ERROR=6,ji.COMPLETE="complete",zi.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",ui.prototype.listen=ui.prototype.N,io.prototype.listenOnce=io.prototype.O,io.prototype.getLastError=io.prototype.La,io.prototype.getLastErrorCode=io.prototype.Da,io.prototype.getStatus=io.prototype.ba,io.prototype.getResponseJson=io.prototype.Qa,io.prototype.getResponseText=io.prototype.ga,io.prototype.send=io.prototype.ea;var Ho=Wn.createWebChannelTransport=function(){return new qo},Go=Wn.getStatEventTarget=function(){return Pi()},Ko=Wn.ErrorCode=Vi,Wo=Wn.EventType=ji,Qo=Wn.Event=Ni,Yo=Wn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Jo=Wn.FetchXmlHttpFactory=Ja,$o=Wn.WebChannel=zi,Xo=Wn.XhrIo=io,es="@firebase/firestore",ts=function(){function e(t){f(this,e),this.uid=t}return h(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");var ns="9.1.3",rs=new Hn.Yd("@firebase/firestore");function is(){return rs.logLevel}function as(e){if(rs.logLevel<=Hn.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(us);rs.debug.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(a(i)))}}function os(e){if(rs.logLevel<=Hn.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(us);rs.error.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(a(i)))}}function ss(e){if(rs.logLevel<=Hn.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(us);rs.warn.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(a(i)))}}function us(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ns,") INTERNAL ASSERTION FAILED: ")+e;throw os(t),new Error(t)}function ls(e,t){e||cs()}function hs(e,t){return e}var fs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ds=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(m(Error)),vs=function e(){var t=this;f(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ps=function e(t,n){f(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)},gs=function(){function e(){f(this,e)}return h(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(ts.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),ms=function(){function e(t){f(this,e),this.token=t,this.changeListener=null}return h(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ys=function(){function e(t){f(this,e),this.t=t,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return h(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,a=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},o=new vs;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new vs,e.enqueueRetryable(function(){return a(n.currentUser)})};var s=function(){var t=o;e.enqueueRetryable((0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(r.currentUser);case 4:case"end":return e.stop()}},e)})))},u=function(e){as("FirebaseCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit(function(e){return u(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(as("FirebaseCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vs)}},0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(as("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ls("string"==typeof n.accessToken),new ps(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ls(null===e||"string"==typeof e),new ts(e)}}]),e}(),ks=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ts.FIRST_PARTY}return h(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),bs=function(){function e(t,n,r){f(this,e),this.h=t,this.l=n,this.m=r}return h(e,[{key:"getToken",value:function(){return Promise.resolve(new ks(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(ts.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ws=function(){function e(t,n){var r=this;f(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return h(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function _s(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ws.T=-1;var Ts=function(){function e(){f(this,e)}return h(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_s(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function xs(e,t){return e<t?-1:e>t?1:0}function Ss(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Es(e){return e+"\0"}var Is=function(){function e(t,n){if(f(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ds(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ds(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ds(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return h(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xs(this.nanoseconds,e.nanoseconds):xs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),As=function(){function e(t){f(this,e),this.timestamp=t}return h(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Is(0,0))}}]),e}();function Cs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Os(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ns=function(){function e(t,n,r){f(this,e),void 0===n?n=0:n>t.length&&cs(),void 0===r?r=t.length-n:r>t.length-n&&cs(),this.segments=t,this.offset=n,this.len=r}return h(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ds=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new ds(fs.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,a(u.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ns),Ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ls=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ps.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ds(fs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ds(fs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ds(fs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new ds(fs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ns),Fs=function(){function e(t){f(this,e),this.fields=t,t.sort(Ls.comparator)}return h(e,[{key:"covers",value:function(e){var t,n=s(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ss(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Zs=function(){function e(t){f(this,e),this.binaryString=t}return h(e,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Zs.EMPTY_BYTE_STRING=new Zs("");var Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(e){if(ls(!!e),"string"==typeof e){var t=0,n=Ms.exec(e);if(ls(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qs(e.seconds),nanos:qs(e.nanos)}}function qs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vs(e){return"string"==typeof e?Zs.fromBase64String(e):Zs.fromUint8Array(e)}function js(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bs(e){var t=e.mapValue.fields.__previous_value__;return js(t)?Bs(t):t}function zs(e){var t=Us(e.mapValue.fields.__local_write_time__.timestampValue);return new Is(t.seconds,t.nanos)}function Hs(e){return null==e}function Gs(e){return 0===e&&1/e==-1/0}function Ks(e){return"number"==typeof e&&Number.isInteger(e)&&!Gs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ws=function(){function e(t){f(this,e),this.path=t}return h(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Ds.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ds.fromString(t))}},{key:"fromName",value:function(t){return new e(Ds.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Ds.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ds(t.slice()))}}]),e}();function Qs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?js(e)?4:10:cs()}function Ys(e,t){var n,r=Qs(e);if(r!==Qs(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zs(e).isEqual(zs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Us(e.timestampValue),r=Us(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Vs(e.bytesValue).isEqual(Vs(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qs(e.geoPointValue.latitude)===qs(t.geoPointValue.latitude)&&qs(e.geoPointValue.longitude)===qs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qs(e.integerValue)===qs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qs(e.doubleValue),r=qs(t.doubleValue);return n===r?Gs(n)===Gs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ss(e.arrayValue.values||[],t.arrayValue.values||[],Ys);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cs(n)!==Cs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ys(n[i],r[i])))return!1;return!0}(e,t);default:return cs()}}function Js(e,t){return void 0!==(e.values||[]).find(function(e){return Ys(e,t)})}function $s(e,t){var n,r,i,a,o=Qs(e),s=Qs(t);if(o!==s)return xs(o,s);switch(o){case 0:return 0;case 1:return xs(e.booleanValue,t.booleanValue);case 2:return r=t,i=qs((n=e).integerValue||n.doubleValue),a=qs(r.integerValue||r.doubleValue),i<a?-1:i>a?1:i===a?0:isNaN(i)?isNaN(a)?0:-1:1;case 3:return Xs(e.timestampValue,t.timestampValue);case 4:return Xs(zs(e),zs(t));case 5:return xs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Vs(e),r=Vs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xs(n[i],r[i]);if(0!==a)return a}return xs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xs(qs(e.latitude),qs(t.latitude));return 0!==n?n:xs(qs(e.longitude),qs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=$s(n[i],r[i]);if(a)return a}return xs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=xs(r[o],a[o]);if(0!==s)return s;var u=$s(n[r[o]],i[a[o]]);if(0!==u)return u}return xs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cs()}}function Xs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xs(e,t);var n=Us(e),r=Us(t),i=xs(n.seconds,r.seconds);return 0!==i?i:xs(n.nanos,r.nanos)}function eu(e){return tu(e)}function tu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=Us(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?Vs(e.bytesValue).toBase64():"referenceValue"in e?Ws.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((r=e.geoPointValue).latitude,",").concat(r.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=s(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=tu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=s(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(tu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cs();var t,n,r}function nu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ru(e){return!!e&&"integerValue"in e}function iu(e){return!!e&&"arrayValue"in e}function au(e){return!!e&&"nullValue"in e}function ou(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function su(e){return!!e&&"mapValue"in e}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rs(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=uu(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=uu(e.arrayValue.values[r]);return n}return Object.assign({},e)}var cu=function(){function e(t){f(this,e),this.value=t}return h(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!su(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}},{key:"setAll",value:function(e){var t=this,n=Ls.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=uu(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());su(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ys(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];su(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rs(t,function(t,n){return e[t]=n});var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(uu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function lu(e){var t=[];return Rs(e.fields,function(e,n){var r=new Ls([e]);if(su(n)){var i=lu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=s(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(c){o.e(c)}finally{o.f()}}}else t.push(r)}),new Fs(t)}var hu=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return h(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=cu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=cu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,As.min(),cu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cu.empty(),2)}}]),e}(),fu=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;f(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.A=null};function du(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new fu(e,t,n,r,i,a,o)}function vu(e){var t=hs(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+eu(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return(t=e).field.canonicalString()+t.dir;var t}).join(","),Hs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Iu(t.startAt)),t.endAt&&(n+="|ub:",n+=Iu(t.endAt)),t.A=n}return t.A}function pu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Cu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(a=t.filters[r]).op||!i.field.isEqual(a.field)||!Ys(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ou(e.startAt,t.startAt)&&Ou(e.endAt,t.endAt)}function gu(e){return Ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var mu=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P($s(t,this.value)):null!==t&&Qs(this.value)===Qs(t)&&this.P($s(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cs()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new yu(e,t,r):"array-contains"===t?new _u(e,r):"in"===t?new Tu(e,r):"not-in"===t?new xu(e,r):"array-contains-any"===t?new Su(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new ku(e,n):new bu(e,n)}}]),n}(function(){return function e(){f(this,e)}}()),yu=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,i)).key=Ws.fromName(i.referenceValue),a}return h(n,[{key:"matches",value:function(e){var t=Ws.comparator(e.key,this.key);return this.P(t)}}]),n}(mu),ku=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"in",r)).keys=wu(0,r),i}return h(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(mu),bu=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,"not-in",r)).keys=wu(0,r),i}return h(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(mu);function wu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Ws.fromName(e.referenceValue)})}var _u=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return iu(t)&&Js(t.arrayValue,this.value)}}]),n}(mu),Tu=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"in",r)}return h(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Js(this.value.arrayValue,t)}}]),n}(mu),xu=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"not-in",r)}return h(n,[{key:"matches",value:function(e){if(Js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Js(this.value.arrayValue,t)}}]),n}(mu),Su=function(e){d(n,e);var t=v(n);function n(e,r){return f(this,n),t.call(this,e,"array-contains-any",r)}return h(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!iu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return Js(t.value.arrayValue,e)})}}]),n}(mu),Eu=function e(t,n){f(this,e),this.position=t,this.before=n};function Iu(e){return"".concat(e.before?"b":"a",":").concat(e.position.map(function(e){return eu(e)}).join(","))}var Au=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";f(this,e),this.field=t,this.dir=n};function Cu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ru(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ws.comparator(Ws.fromName(o.referenceValue),n.key):$s(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ou(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ys(e.position[n],t.position[n]))return!1;return!0}var Nu=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;f(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.V=null,this.S=null};function Du(e,t,n,r,i,a,o,s){return new Nu(e,t,n,r,i,a,o,s)}function Pu(e){return new Nu(e)}function Lu(e){return!Hs(e.limit)&&"F"===e.limitType}function Fu(e){return!Hs(e.limit)&&"L"===e.limitType}function Zu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Mu(e){var t,n=s(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Uu(e){return null!==e.collectionGroup}function qu(e){var t=hs(e);if(null===t.V){t.V=[];var n=Mu(t),r=Zu(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new Au(n)),t.V.push(new Au(Ls.keyField(),"asc"));else{var i,a=!1,o=s(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.V.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Au(Ls.keyField(),c))}}}return t.V}function Vu(e){var t=hs(e);if(!t.S)if("F"===t.limitType)t.S=du(t.path,t.collectionGroup,qu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=s(qu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push(new Au(a.field,"desc"===a.dir?"asc":"desc"))}}catch(c){i.e(c)}finally{i.f()}var o=t.endAt?new Eu(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Eu(t.startAt.position,!t.startAt.before):null;t.S=du(t.path,t.collectionGroup,r,t.filters,t.limit,o,u)}return t.S}function ju(e,t,n){return new Nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bu(e,t){return pu(Vu(e),Vu(t))&&e.limitType===t.limitType}function zu(e){return"".concat(vu(Vu(e)),"|lt:").concat(e.limitType)}function Hu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(eu(t.value));var t}).join(", "),"]")),Hs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t}).join(", "),"]")),e.startAt&&(t+=", startAt: "+Iu(e.startAt)),e.endAt&&(t+=", endAt: "+Iu(e.endAt)),"Target(".concat(t,")")}(Vu(e)),"; limitType=").concat(e.limitType,")")}function Gu(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ws.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=s(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&(r=t,!((n=e).startAt&&!Ru(n.startAt,qu(n),r)||n.endAt&&Ru(n.endAt,qu(n),r)));var n,r}function Ku(e){return function(t,n){var r,i=!1,a=s(qu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Wu(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(c){a.e(c)}finally{a.f()}return 0}}function Wu(e,t,n){var r,i,a,o,s=e.field.isKeyField()?Ws.comparator(t.key,n.key):(r=e.field,i=n,a=t.data.field(r),o=i.data.field(r),null!==a&&null!==o?$s(a,o):cs());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return cs()}}function Qu(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gs(t)?"-0":t}}function Yu(e){return{integerValue:""+e}}function Ju(e,t){return Ks(t)?Yu(t):Qu(e,t)}var $u=function e(){f(this,e),this._=void 0};function Xu(e,t,n){return e instanceof nc?(i=t,a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(a.fields.__previous_value__=i),{mapValue:a}):e instanceof rc?ic(e,t):e instanceof ac?oc(e,t):function(e,t){var n=tc(e,t),r=uc(n)+uc(e.C);return ru(n)&&ru(e.C)?Yu(r):Qu(e.N,r)}(e,t);var r,i,a}function ec(e,t,n){return e instanceof rc?ic(e,t):e instanceof ac?oc(e,t):n}function tc(e,t){return e instanceof sc?ru(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var nc=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}($u),rc=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return n}($u);function ic(e,t){var n,r=cc(t),i=s(e.elements);try{var a=function(){var e=n.value;r.some(function(t){return Ys(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ac=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).elements=e,r}return n}($u);function oc(e,t){var n,r=cc(t),i=s(e.elements);try{var a=function(){var e=n.value;r=r.filter(function(t){return!Ys(t,e)})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sc=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).N=e,i.C=r,i}return n}($u);function uc(e){return qs(e.integerValue||e.doubleValue)}function cc(e){return iu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lc=function e(t,n){f(this,e),this.field=t,this.transform=n},hc=function e(t,n){f(this,e),this.version=t,this.transformResults=n},fc=function(){function e(t,n){f(this,e),this.updateTime=t,this.exists=n}return h(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function dc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vc=function e(){f(this,e)};function pc(e,t,n){var r,i,a,o,s;e instanceof bc?(i=t,a=n,o=(r=e).value.clone(),s=Tc(r.fieldTransforms,i,a.transformResults),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()):e instanceof wc?function(e,t,n){if(dc(e.precondition,t)){var r=Tc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(_c(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function gc(e,t,n){var r;e instanceof bc?function(e,t,n){if(dc(e.precondition,t)){var r=e.value.clone(),i=xc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(kc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof wc?function(e,t,n){if(dc(e.precondition,t)){var r=xc(e.fieldTransforms,n,t),i=t.data;i.setAll(_c(e)),i.setAll(r),t.convertToFoundDocument(kc(t),i).setHasLocalMutations()}}(e,t,n):dc(e.precondition,r=t)&&r.convertToNoDocument(As.min())}function mc(e,t){var n,r=null,i=s(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=tc(a.transform,o||null);null!=u&&(null==r&&(r=cu.empty()),r.set(a.field,u))}}catch(c){i.e(c)}finally{i.f()}return r||null}function yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Ss(n,r,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof rc&&r instanceof rc||n instanceof ac&&r instanceof ac?Ss(n.elements,r.elements,Ys):n instanceof sc&&r instanceof sc?Ys(n.C,r.C):n instanceof nc&&r instanceof nc);var n,r}(e,t)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function kc(e){return e.isFoundDocument()?e.version:As.min()}var bc=function(e){d(n,e);var t=v(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return f(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return n}(vc),wc=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return f(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return n}(vc);function _c(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Tc(e,t,n){var r=new Map;ls(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,ec(o,s,n[i]))}return r}function xc(e,t,n){var r,i=new Map,a=s(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,c=n.data.field(o.field);i.set(o.field,Xu(u,c,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Sc,Ec,Ic=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(vc),Ac=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(vc),Cc=function e(t){f(this,e),this.count=t};function Rc(e){switch(e){default:return cs();case fs.CANCELLED:case fs.UNKNOWN:case fs.DEADLINE_EXCEEDED:case fs.RESOURCE_EXHAUSTED:case fs.INTERNAL:case fs.UNAVAILABLE:case fs.UNAUTHENTICATED:return!1;case fs.INVALID_ARGUMENT:case fs.NOT_FOUND:case fs.ALREADY_EXISTS:case fs.PERMISSION_DENIED:case fs.FAILED_PRECONDITION:case fs.ABORTED:case fs.OUT_OF_RANGE:case fs.UNIMPLEMENTED:case fs.DATA_LOSS:return!0}}function Oc(e){if(void 0===e)return os("GRPC error has no .code"),fs.UNKNOWN;switch(e){case Sc.OK:return fs.OK;case Sc.CANCELLED:return fs.CANCELLED;case Sc.UNKNOWN:return fs.UNKNOWN;case Sc.DEADLINE_EXCEEDED:return fs.DEADLINE_EXCEEDED;case Sc.RESOURCE_EXHAUSTED:return fs.RESOURCE_EXHAUSTED;case Sc.INTERNAL:return fs.INTERNAL;case Sc.UNAVAILABLE:return fs.UNAVAILABLE;case Sc.UNAUTHENTICATED:return fs.UNAUTHENTICATED;case Sc.INVALID_ARGUMENT:return fs.INVALID_ARGUMENT;case Sc.NOT_FOUND:return fs.NOT_FOUND;case Sc.ALREADY_EXISTS:return fs.ALREADY_EXISTS;case Sc.PERMISSION_DENIED:return fs.PERMISSION_DENIED;case Sc.FAILED_PRECONDITION:return fs.FAILED_PRECONDITION;case Sc.ABORTED:return fs.ABORTED;case Sc.OUT_OF_RANGE:return fs.OUT_OF_RANGE;case Sc.UNIMPLEMENTED:return fs.UNIMPLEMENTED;case Sc.DATA_LOSS:return fs.DATA_LOSS;default:return cs()}}(Ec=Sc||(Sc={}))[Ec.OK=0]="OK",Ec[Ec.CANCELLED=1]="CANCELLED",Ec[Ec.UNKNOWN=2]="UNKNOWN",Ec[Ec.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ec[Ec.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ec[Ec.NOT_FOUND=5]="NOT_FOUND",Ec[Ec.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ec[Ec.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ec[Ec.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ec[Ec.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ec[Ec.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ec[Ec.ABORTED=10]="ABORTED",Ec[Ec.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ec[Ec.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ec[Ec.INTERNAL=13]="INTERNAL",Ec[Ec.UNAVAILABLE=14]="UNAVAILABLE",Ec[Ec.DATA_LOSS=15]="DATA_LOSS";var Nc=function(){function e(t,n){f(this,e),this.comparator=t,this.root=n||Pc.EMPTY}return h(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Dc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Dc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Dc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Dc(this.root,e,this.comparator,!0)}}]),e}(),Dc=function(){function e(t,n,r,i){f(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return h(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Pc=function(){function e(t,n,r,i,a){f(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return h(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cs();var e=this.left.check();if(e!==this.right.check())throw cs();return e+(this.isRed()?0:1)}}]),e}();Pc.EMPTY=null,Pc.RED=!0,Pc.BLACK=!1,Pc.EMPTY=new(function(){function e(){f(this,e),this.size=0}return h(e,[{key:"key",get:function(){throw cs()}},{key:"value",get:function(){throw cs()}},{key:"color",get:function(){throw cs()}},{key:"left",get:function(){throw cs()}},{key:"right",get:function(){throw cs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Pc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Lc=function(){function e(t){f(this,e),this.comparator=t,this.data=new Nc(this.comparator)}return h(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fc=function(){function e(t){f(this,e),this.iter=t}return h(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Zc=new Nc(Ws.comparator);function Mc(){return Zc}var Uc=new Nc(Ws.comparator);function qc(){return Uc}var Vc=new Nc(Ws.comparator);function jc(){return Vc}var Bc=new Lc(Ws.comparator);function zc(){for(var e=Bc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hc=new Lc(xs);function Gc(){return Hc}var Kc=function(){function e(t,n,r,i,a){f(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return h(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Wc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(As.min(),r,Gc(),Mc(),zc())}}]),e}(),Wc=function(){function e(t,n,r,i,a){f(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return h(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Zs.EMPTY_BYTE_STRING,n,zc(),zc(),zc())}}]),e}(),Qc=function e(t,n,r,i){f(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i},Yc=function e(t,n){f(this,e),this.targetId=t,this.O=n},Jc=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zs.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},$c=function(){function e(){f(this,e),this.F=0,this.M=tl(),this.L=Zs.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return h(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=zc(),t=zc(),n=zc();return this.M.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cs()}}),new Wc(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=tl()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),Xc=function(){function e(t){f(this,e),this.tt=t,this.et=new Map,this.nt=Mc(),this.st=el(),this.it=new Lc(xs)}return h(e,[{key:"rt",value:function(e){var t,n=s(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,a=s(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ct",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:cs()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(function(e,r){n.ht(r)&&t(r)})}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(gu(i))if(0===n){var a=new Ws(i.path);this.at(t,a,hu.newNoDocument(a,As.min()))}else ls(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach(function(r,i){var a=t.dt(i);if(a){if(r.current&&gu(a.target)){var o=new Ws(a.target.path);null!==t.nt.get(o)||t.gt(i,o)||t.at(i,o,hu.newNoDocument(o,e))}r.K&&(n.set(i,r.W()),r.G())}});var r=zc();this.st.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Kc(e,n,this.it,this.nt,r);return this.nt=Mc(),this.st=el(),this.it=new Lc(xs),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new $c,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new Lc(xs),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||as("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new $c),this.tt.getRemoteKeysForTarget(e).forEach(function(n){t.at(e,n,null)})}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function el(){return new Nc(Ws.comparator)}function tl(){return new Nc(Ws.comparator)}var nl={asc:"ASCENDING",desc:"DESCENDING"},rl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},il=function e(t,n){f(this,e),this.databaseId=t,this.D=n};function al(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ol(e,t){return e.D?t.toBase64():t.toUint8Array()}function sl(e,t){return al(e,t.toTimestamp())}function ul(e){return ls(!!e),As.fromTimestamp((t=Us(e),new Is(t.seconds,t.nanos)));var t}function cl(e,t){return(n=e,new Ds(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function ll(e){var t=Ds.fromString(e);return ls(Pl(t)),t}function hl(e,t){return cl(e.databaseId,t.path)}function fl(e,t){var n=ll(t);if(n.get(1)!==e.databaseId.projectId)throw new ds(fs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ds(fs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ws(gl(n))}function dl(e,t){return cl(e.databaseId,t)}function vl(e){var t=ll(e);return 4===t.length?Ds.emptyPath():gl(t)}function pl(e){return new Ds(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gl(e){return ls(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ml(e,t,n){return{name:hl(e,t),fields:n.value.mapValue.fields}}function yl(e,t,n){var r=fl(e,t.name),i=ul(t.updateTime),a=new cu({mapValue:{fields:t.fields}}),o=hu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function kl(e,t){var n,r;if(t instanceof bc)n={update:ml(e,t.key,t.value)};else if(t instanceof Ic)n={delete:hl(e,t.key)};else if(t instanceof wc)n={update:ml(e,t.key,t.data),updateMask:Dl(t.fieldMask)};else{if(!(t instanceof Ac))return cs();n={verify:hl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof nc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ac)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),increment:n.C};throw cs()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:sl(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:cs()),n}function bl(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?fc.updateTime(ul(n.updateTime)):void 0!==n.exists?fc.exists(n.exists):fc.none():fc.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(ls("REQUEST_TIME"===t.setToServerValue),n=new nc):"appendMissingElements"in t?n=new rc(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new ac(t.removeAllFromArray.values||[]):"increment"in t?n=new sc(e,t.increment):cs();var r=Ls.fromServerFormat(t.fieldPath);return new lc(r,n)}(e,t)}):[];if(t.update){var a=fl(e,t.update.name),o=new cu({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=new Fs((t.updateMask.fieldPaths||[]).map(function(e){return Ls.fromServerFormat(e)}));return new wc(a,o,s,r,i)}return new bc(a,o,r,i)}if(t.delete){var u=fl(e,t.delete);return new Ic(u,r)}if(t.verify){var c=fl(e,t.verify);return new Ac(c,r)}return cs()}function wl(e,t){return{documents:[dl(e,t.path)]}}function _l(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=dl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=dl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(ou(e.value))return{unaryFilter:{field:Cl(e.field),op:"IS_NAN"}};if(au(e.value))return{unaryFilter:{field:Cl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ou(e.value))return{unaryFilter:{field:Cl(e.field),op:"IS_NOT_NAN"}};if(au(e.value))return{unaryFilter:{field:Cl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cl(e.field),op:Al(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return{field:Cl((t=e).field),direction:Il(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=(o=t.limit,e.D||Hs(o)?o:{value:o});return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=Sl(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Sl(t.endAt)),n}function Tl(e){var t=vl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ls(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=xl(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(e){return new Au(Rl((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));var u=null;n.limit&&(u=function(e){var t;return Hs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=El(n.startAt));var l=null;return n.endAt&&(l=El(n.endAt)),Du(t,i,s,o,u,"F",c,l)}function xl(e){return e?void 0!==e.unaryFilter?[Nl(e)]:void 0!==e.fieldFilter?[Ol(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return xl(e)}).reduce(function(e,t){return e.concat(t)}):cs():[]}function Sl(e){return{before:e.before,values:e.position}}function El(e){return new Eu(e.values||[],!!e.before)}function Il(e){return nl[e]}function Al(e){return rl[e]}function Cl(e){return{fieldPath:e.canonicalString()}}function Rl(e){return Ls.fromServerFormat(e.fieldPath)}function Ol(e){return mu.create(Rl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cs()}}(e.fieldFilter.op),e.fieldFilter.value)}function Nl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Rl(e.unaryFilter.field);return mu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Rl(e.unaryFilter.field);return mu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Rl(e.unaryFilter.field);return mu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Rl(e.unaryFilter.field);return mu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cs()}}function Dl(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Pl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ll(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Zl(t)),t=Fl(e.get(n),t);return Zl(t)}function Fl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Zl(e){return e+"\x01\x01"}function Ml(e){var t=e.length;if(ls(t>=2),2===t)return ls("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ds.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cs(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cs()}a=o+2}return new Ds(r)}var Ul=function e(t,n){f(this,e),this.seconds=t,this.nanoseconds=n},ql=function e(t,n,r){f(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};ql.store="owner",ql.key="owner";var Vl=function e(t,n,r){f(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};Vl.store="mutationQueues",Vl.keyPath="userId";var jl=function e(t,n,r,i,a){f(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a};jl.store="mutations",jl.keyPath="batchId",jl.userMutationsIndex="userMutationsIndex",jl.userMutationsKeyPath=["userId","batchId"];var Bl=function(){function e(){f(this,e)}return h(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Ll(t)]}},{key:"key",value:function(e,t,n){return[e,Ll(t),n]}}]),e}();Bl.store="documentMutations",Bl.PLACEHOLDER=new Bl;var zl=function e(t,n){f(this,e),this.path=t,this.readTime=n},Hl=function e(t,n){f(this,e),this.path=t,this.version=n},Gl=function e(t,n,r,i,a,o){f(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o};Gl.store="remoteDocuments",Gl.readTimeIndex="readTimeIndex",Gl.readTimeIndexPath="readTime",Gl.collectionReadTimeIndex="collectionReadTimeIndex",Gl.collectionReadTimeIndexPath=["parentPath","readTime"];var Kl=function e(t){f(this,e),this.byteSize=t};Kl.store="remoteDocumentGlobal",Kl.key="remoteDocumentGlobalKey";var Wl=function e(t,n,r,i,a,o,s){f(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s};Wl.store="targets",Wl.keyPath="targetId",Wl.queryTargetsIndexName="queryTargetsIndex",Wl.queryTargetsKeyPath=["canonicalId","targetId"];var Ql=function e(t,n,r){f(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};Ql.store="targetDocuments",Ql.keyPath=["targetId","path"],Ql.documentTargetsIndex="documentTargetsIndex",Ql.documentTargetsKeyPath=["path","targetId"];var Yl=function e(t,n,r,i){f(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Yl.key="targetGlobalKey",Yl.store="targetGlobal";var Jl=function e(t,n){f(this,e),this.collectionId=t,this.parent=n};Jl.store="collectionParents",Jl.keyPath=["collectionId","parent"];var $l=function e(t,n,r,i){f(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};$l.store="clientMetadata",$l.keyPath="clientId";var Xl=function e(t,n,r){f(this,e),this.bundleId=t,this.createTime=n,this.version=r};Xl.store="bundles",Xl.keyPath="bundleId";var eh=function e(t,n,r){f(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};eh.store="namedQueries",eh.keyPath="name";var th=[Vl.store,jl.store,Bl.store,Gl.store,Wl.store,ql.store,Yl.store,Ql.store,$l.store,Kl.store,Jl.store,Xl.store,eh.store],nh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rh=function(){function e(){f(this,e),this.onCommittedListeners=[]}return h(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),ih=function(){function e(t){var n=this;f(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return h(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=s(t);try{var a=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),ah=function(){function e(t,n){var r=this;f(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Et=new vs,this.transaction.oncomplete=function(){r.Et.resolve()},this.transaction.onabort=function(){n.error?r.Et.reject(new uh(t,n.error)):r.Et.resolve()},this.transaction.onerror=function(e){var n=dh(e.target.error);r.Et.reject(new uh(t,n))}}return h(e,[{key:"It",get:function(){return this.Et.promise}},{key:"abort",value:function(e){e&&this.Et.reject(e),this.aborted||(as("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new lh(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(a){throw new uh(n,a)}}}]),e}(),oh=function(){function e(t,n,r){f(this,e),this.name=t,this.version=n,this.At=r,12.2===e.Rt((0,Gn.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return h(e,[{key:"Dt",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return as("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new uh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new ds(fs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new ds(fs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new uh(e,n))},i.onupgradeneeded=function(e){as("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){as("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.Nt&&(t.db.onversionchange=function(e){return t.Nt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,jn.Z)(regeneratorRuntime.mark(function a(){var o,s,u,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o="readonly"===t,s=0;case 2:return++s,a.prev=3,a.delegateYield(regeneratorRuntime.mark(function t(){var a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Dt(e);case 2:return i.db=t.sent,a=ah.open(i.db,e,o?"readonly":"readwrite",n),(s=r(a).catch(function(e){return a.abort(e),ih.reject(e)}).toPromise()).catch(function(){}),t.next=7,a.It;case 7:return t.t0=s,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(u=a.t0)){a.next=8;break}return a.abrupt("return",u.v);case 8:a.next=15;break;case 10:if(a.prev=10,a.t1=a.catch(3),c="FirebaseError"!==a.t1.name&&s<3,as("SimpleDb","Transaction failed with error:",a.t1.message,"Retrying:",c),i.close(),c){a.next=15;break}return a.abrupt("return",Promise.reject(a.t1));case 15:a.next=2;break;case 17:case"end":return a.stop()}},a,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return as("SimpleDb","Removing database:",e),hh(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!(0,Gn.hl)())return!1;if(e.Pt())return!0;var t=(0,Gn.z$)(),n=e.Rt(t),r=0<n&&n<10,i=e.vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),sh=function(){function e(t){f(this,e),this.kt=t,this.$t=!1,this.Ot=null}return h(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return hh(this.kt.delete())}}]),e}(),uh=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,fs.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(ds);function ch(e){return"IndexedDbTransactionError"===e.name}var lh=function(){function e(t){f(this,e),this.store=t}return h(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(as("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(as("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hh(n)}},{key:"add",value:function(e){return as("SimpleDb","ADD",this.store.name,e,e),hh(this.store.add(e))}},{key:"get",value:function(e){var t=this;return hh(this.store.get(e)).next(function(n){return void 0===n&&(n=null),as("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return as("SimpleDb","DELETE",this.store.name,e),hh(this.store.delete(e))}},{key:"count",value:function(){return as("SimpleDb","COUNT",this.store.name),hh(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,function(e,t){r.push(t)}).next(function(){return r})}},{key:"Ut",value:function(e,t){as("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,function(e,t,n){return n.delete()})}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new ih(function(n,r){t.onerror=function(e){var t=dh(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Bt",value:function(e,t){var n=[];return new ih(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new sh(i),o=t(i.primaryKey,i.value,a);if(o instanceof ih){var s=o.catch(function(e){return a.done(),ih.reject(e)});n.push(s)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}}).next(function(){return ih.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function hh(e){return new ih(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=dh(e.target.error);n(t)}})}var fh=!1;function dh(e){var t=oh.Rt((0,Gn.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ds("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fh||(fh=!0,setTimeout(function(){throw r},0)),r}}return e}var vh=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return n}(rh);function ph(e,t){var n=hs(e);return oh.St(n.Qt,t)}var gh=function(){function e(t,n,r,i){f(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return h(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&pc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=s(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&gc(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=s(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&gc(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(As.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},zc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,function(e,t){return yc(e,t)})&&Ss(this.baseMutations,e.baseMutations,function(e,t){return yc(e,t)})}}]),e}(),mh=function(){function e(t,n,r,i){f(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return h(e,null,[{key:"from",value:function(t,n,r){ls(t.mutations.length===r.length);for(var i=jc(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),yh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:As.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:As.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Zs.EMPTY_BYTE_STRING;f(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return h(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),kh=function e(t){f(this,e),this.Wt=t};function bh(e,t){if(t.document)return yl(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Ws.fromSegments(t.noDocument.path),r=Sh(t.noDocument.readTime),i=hu.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Ws.fromSegments(t.unknownDocument.path),o=Sh(t.unknownDocument.version);return hu.newUnknownDocument(a,o)}return cs()}function wh(e,t,n){var r,i,a=_h(n),o=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s={name:hl(r=e.Wt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:al(r,i.version.toTimestamp())};return new Gl(null,null,s,t.hasCommittedMutations,a,o)}if(t.isNoDocument()){var u=t.key.path.toArray(),c=xh(t.version),l=t.hasCommittedMutations;return new Gl(null,new zl(u,c),null,l,a,o)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=xh(t.version);return new Gl(new Hl(h,f),null,null,!0,a,o)}return cs()}function _h(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Th(e){var t=new Is(e[0],e[1]);return As.fromTimestamp(t)}function xh(e){var t=e.toTimestamp();return new Ul(t.seconds,t.nanoseconds)}function Sh(e){var t=new Is(e.seconds,e.nanoseconds);return As.fromTimestamp(t)}function Eh(e,t){for(var n=(t.baseMutations||[]).map(function(t){return bl(e.Wt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var a=t.mutations.map(function(t){return bl(e.Wt,t)}),o=Is.fromMillis(t.localWriteTimeMs);return new gh(t.batchId,o,n,a)}function Ih(e){var t,n,r=Sh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Sh(e.lastLimboFreeSnapshotVersion):As.min();return void 0!==e.query.documents?(ls(1===(n=e.query).documents.length),t=Vu(Pu(vl(n.documents[0])))):t=Vu(Tl(e.query)),new yh(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Zs.fromBase64String(e.resumeToken))}function Ah(e,t){var n,r=xh(t.snapshotVersion),i=xh(t.lastLimboFreeSnapshotVersion);n=gu(t.target)?wl(e.Wt,t.target):_l(e.Wt,t.target);var a=t.resumeToken.toBase64();return new Wl(t.targetId,vu(t.target),r,a,t.sequenceNumber,i,n)}function Ch(e){var t=Tl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ju(t,t.limit,"L"):t}var Rh=function(){function e(){f(this,e)}return h(e,[{key:"getBundleMetadata",value:function(e,t){return Oh(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Sh(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Oh(e).put({bundleId:(n=t).id,createTime:xh(ul(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Nh(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:Ch(t.bundledQuery),readTime:Sh(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Nh(e).put({name:(n=t).name,readTime:xh(ul(n.readTime)),bundledQuery:n.bundledQuery});var n}}]),e}();function Oh(e){return ph(e,Xl.store)}function Nh(e){return ph(e,eh.store)}var Dh=function(){function e(){f(this,e),this.Gt=new Ph}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),ih.resolve()}},{key:"getCollectionParents",value:function(e,t){return ih.resolve(this.Gt.getEntries(t))}}]),e}(),Ph=function(){function e(){f(this,e),this.index={}}return h(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lc(Ds.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lc(Ds.comparator)).toArray()}}]),e}(),Lh=function(){function e(){f(this,e),this.zt=new Ph}return h(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.zt.add(t)});var a={collectionId:r,parent:Ll(i)};return Fh(e).put(a)}return ih.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Es(t),""],!1,!0);return Fh(e).Lt(r).next(function(e){var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ml(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n})}}]),e}();function Fh(e){return ph(e,Jl.store)}var Zh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mh=function(){function e(t,n,r){f(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return h(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Uh(e,t,n){var r=e.store(jl.store),i=e.store(Bl.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,c=r.Kt({range:o},function(e,t,n){return u++,n.delete()});a.push(c.next(function(){ls(1===u)}));var l,h=[],f=s(n.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=Bl.key(t,d.key.path,n.batchId);a.push(i.delete(v)),h.push(d.key)}}catch(p){f.e(p)}finally{f.f()}return ih.waitFor(a).next(function(){return h})}function qh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cs();t=e.noDocument}return JSON.stringify(t).length}Mh.DEFAULT_COLLECTION_PERCENTILE=10,Mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mh.DEFAULT=new Mh(41943040,Mh.DEFAULT_COLLECTION_PERCENTILE,Mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mh.DISABLED=new Mh(-1,0,0);var Vh=function(){function e(t,n,r,i){f(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return h(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).Kt({index:jl.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=zh(e),o=Bh(e);return o.add({}).next(function(u){ls("number"==typeof u);var c,l=new gh(u,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return kl(e.Wt,t)}),i=n.mutations.map(function(t){return kl(e.Wt,t)});return new jl(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,l),f=[],d=new Lc(function(e,t){return xs(e.canonicalString(),t.canonicalString())}),v=s(r);try{for(v.s();!(c=v.n()).done;){var p=c.value,g=Bl.key(i.userId,p.key.path,u);d=d.add(p.key.path.popLast()),f.push(o.put(h)),f.push(a.put(g,Bl.PLACEHOLDER))}}catch(m){v.e(m)}finally{v.f()}return d.forEach(function(t){f.push(i.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Jt[u]=l.keys()}),ih.waitFor(f).next(function(){return l})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Bh(e).get(t).next(function(e){return e?(ls(e.userId===n.userId),Eh(n.N,e)):null})}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?ih.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Bh(e).Kt({index:jl.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(ls(t.batchId>=r),a=Eh(n.N,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Bh(e).Kt({index:jl.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).Lt(jl.userMutationsIndex,n).next(function(e){return e.map(function(e){return Eh(t.N,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,n){var r=this,i=Bl.prefixForPath(this.userId,n.path),a=IDBKeyRange.lowerBound(i),o=[];return zh(e).Kt({range:a},function(i,a,s){var u=t(i,3),c=u[0],l=u[1],h=u[2],f=Ml(l);if(c===r.userId&&n.path.isEqual(f))return Bh(e).get(h).next(function(e){if(!e)throw cs();ls(e.userId===r.userId),o.push(Eh(r.N,e))});s.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,n){var r=this,i=new Lc(xs),a=[];return n.forEach(function(n){var o=Bl.prefixForPath(r.userId,n.path),s=IDBKeyRange.lowerBound(o),u=zh(e).Kt({range:s},function(e,a,o){var s=t(e,3),u=s[0],c=s[1],l=s[2],h=Ml(c);u===r.userId&&n.path.isEqual(h)?i=i.add(l):o.done()});a.push(u)}),ih.waitFor(a).next(function(){return r.Zt(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,n){var r=this,i=n.path,a=i.length+1,o=Bl.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),u=new Lc(xs);return zh(e).Kt({range:s},function(e,n,o){var s=t(e,3),c=s[0],l=s[1],h=s[2],f=Ml(l);c===r.userId&&i.isPrefixOf(f)?f.length===a&&(u=u.add(h)):o.done()}).next(function(){return r.Zt(e,u)})}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Bh(e).get(t).next(function(e){if(null===e)throw cs();ls(e.userId===n.userId),r.push(Eh(n.N,e))}))}),ih.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Uh(e.Qt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.te(t.batchId)}),ih.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return ih.resolve();var r=IDBKeyRange.lowerBound(Bl.prefixForUser(t.userId)),i=[];return zh(e).Kt({range:r},function(e,n,r){if(e[0]===t.userId){var a=Ml(e[1]);i.push(a)}else r.done()}).next(function(){ls(0===i.length)})})}},{key:"containsKey",value:function(e,t){return jh(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return Hh(e).get(this.userId).next(function(e){return e||new Vl(t.userId,-1,"")})}}],[{key:"Yt",value:function(t,n,r,i){return ls(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function jh(e,n,r){var i=Bl.prefixForPath(n,r.path),a=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return zh(e).Kt({range:o,qt:!0},function(e,r,i){var o=t(e,3),u=o[0],c=o[1];o[2];u===n&&c===a&&(s=!0),i.done()}).next(function(){return s})}function Bh(e){return ph(e,jl.store)}function zh(e){return ph(e,Bl.store)}function Hh(e){return ph(e,Vl.store)}var Gh=function(){function e(t){f(this,e),this.ne=t}return h(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),Kh=function(){function e(t,n){f(this,e),this.referenceDelegate=t,this.N=n}return h(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next(function(n){var r=new Gh(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next(function(e){return As.fromTimestamp(new Is(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next(function(){return n.re(e).next(function(r){return r.targetCount+=1,n.ce(t,r),n.oe(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Wh(e).delete(t.targetId)}).next(function(){return n.re(e)}).next(function(t){return ls(t.targetCount>0),t.targetCount-=1,n.oe(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Wh(e).Kt(function(o,s){var u=Ih(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))}).next(function(){return ih.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Wh(e).Kt(function(e,n){var r=Ih(n);t(r)})}},{key:"re",value:function(e){return Qh(e).get(Yl.key).next(function(e){return ls(null!==e),e})}},{key:"oe",value:function(e,t){return Qh(e).put(Yl.key,t)}},{key:"ae",value:function(e,t){return Wh(e).put(Ah(this.N,t))}},{key:"ce",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=vu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wh(e).Kt({range:r,index:Wl.queryTargetsIndexName},function(e,n,r){var a=Ih(n);pu(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Yh(e);return t.forEach(function(t){var o=Ll(t.path);i.push(a.put(new Ql(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))}),ih.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Yh(e);return ih.forEach(t,function(t){var a=Ll(t.path);return ih.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Yh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Yh(e),i=zc();return r.Kt({range:n,qt:!0},function(e,t,n){var r=Ml(e[1]),a=new Ws(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,n){var r=Ll(n.path),i=IDBKeyRange.bound([r],[Es(r)],!1,!0),a=0;return Yh(e).Kt({index:Ql.documentTargetsIndex,qt:!0,range:i},function(e,n,r){var i=t(e,2),o=i[0];i[1];0!==o&&(a++,r.done())}).next(function(){return a>0})}},{key:"Tt",value:function(e,t){return Wh(e).get(t).next(function(e){return e?Ih(e):null})}}]),e}();function Wh(e){return ph(e,Wl.store)}function Qh(e){return ph(e,Yl.store)}function Yh(e){return ph(e,Ql.store)}function Jh(e){return $h.apply(this,arguments)}function $h(){return($h=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fs.FAILED_PRECONDITION&&t.message===nh){e.next=2;break}throw t;case 2:as("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xh(e,n){var r=t(e,2),i=r[0],a=r[1],o=t(n,2),s=o[0],u=o[1],c=xs(i,s);return 0===c?xs(a,u):c}var ef=function(){function e(t){f(this,e),this.ue=t,this.buffer=new Lc(Xh),this.he=0}return h(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),tf=function(){function e(t,n){f(this,e),this.garbageCollector=t,this.asyncQueue=n,this.de=!1,this.we=null}return h(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(e){var t=this,n=this.de?3e5:6e4;as("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.we=null,t.de=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ch(n.t0)){n.next=12;break}as("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Jh(n.t0);case 14:return n.next=16,t._e(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),nf=function(){function e(t,n){f(this,e),this.me=t,this.params=n}return h(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ih.resolve(ws.T);var r=new ef(t);return this.me.forEachTarget(e,function(e){return r.fe(e.sequenceNumber)}).next(function(){return n.me.ye(e,function(e){return r.fe(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; disabled"),ih.resolve(Zh)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Zh):n.pe(e,t)})}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(as("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),is()<=Hn.in.DEBUG&&as("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n\tRemoved ".concat(e," documents in ")+(u-s)+"ms\nTotal Duration: ".concat(u-l,"ms")),ih.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),rf=function(){function e(t,n){f(this,e),this.db=t,this.garbageCollector=new nf(this,n)}return h(e,[{key:"ge",value:function(e){var t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Te",value:function(e){var t=0;return this.ye(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Ee(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return af(e,n)}},{key:"removeReference",value:function(e,t,n){return af(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return af(e,t)}},{key:"Ie",value:function(e,t){return r=t,i=!1,Hh(n=e).jt(function(e){return jh(n,e,r).next(function(e){return e&&(i=!0),ih.resolve(!e)})}).next(function(){return i});var n,r,i}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ee(e,function(o,s){if(s<=t){var u=n.Ie(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o),Yh(e).delete([0,Ll(o.path)])})});i.push(u)}}).next(function(){return ih.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return af(e,t)}},{key:"Ee",value:function(e,n){var r,i=Yh(e),a=ws.T;return i.Kt({index:Ql.documentTargetsIndex},function(e,i){var o=t(e,2),s=o[0],u=(o[1],i.path),c=i.sequenceNumber;0===s?(a!==ws.T&&n(new Ws(Ml(r)),a),a=c,r=u):a=ws.T}).next(function(){a!==ws.T&&n(new Ws(Ml(r)),a)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function af(e,t){return Yh(e).put((n=e.currentSequenceNumber,new Ql(0,Ll(t.path),n)));var n}var of=function(){function e(t,n){f(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return h(e,[{key:"get",value:function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){var i,a=s(r);try{for(a.s();!(i=a.n()).done;){var o=t(i.value,2),u=o[0],c=o[1];if(this.equalsFn(u,e))return c}}catch(l){a.e(l)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Rs(this.inner,function(n,r){var i,a=s(r);try{for(a.s();!(i=a.n()).done;){var o=t(i.value,2),u=o[0],c=o[1];e(u,c)}}catch(l){a.e(l)}finally{a.f()}})}},{key:"isEmpty",value:function(){return Os(this.inner)}}]),e}(),sf=function(){function e(){f(this,e),this.changes=new of(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return h(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:As.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:hu.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ih.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),uf=function(){function e(t,n){f(this,e),this.N=t,this.Ht=n}return h(e,[{key:"addEntry",value:function(e,t,n){return hf(e).put(ff(t),n)}},{key:"removeEntry",value:function(e,t){var n=hf(e),r=ff(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Ae(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return hf(e).get(ff(t)).next(function(e){return n.Re(t,e)})}},{key:"be",value:function(e,t){var n=this;return hf(e).get(ff(t)).next(function(e){return{document:n.Re(t,e),size:qh(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=Mc();return this.Pe(e,t,function(e,t){var i=n.Re(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"ve",value:function(e,t){var n=this,r=Mc(),i=new Nc(Ws.comparator);return this.Pe(e,t,function(e,t){var a=n.Re(e,t);r=r.insert(e,a),i=i.insert(e,qh(t))}).next(function(){return{documents:r,Ve:i}})}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return ih.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return hf(e).Kt({range:r},function(e,t,r){for(var o=Ws.fromSegments(e);a&&Ws.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Mt(a.path.toArray()):r.done()}).next(function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Mc(),a=t.path.length+1,o={};if(n.isEqual(As.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=_h(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Gl.collectionReadTimeIndex}return hf(e).Kt(o,function(e,n,o){if(e.length===a){var s=bh(r.N,n);t.path.isPrefixOf(s.key.path)?Gu(t,s)&&(i=i.insert(s.key,s)):o.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new cf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return lf(e).get(Kl.key).next(function(e){return ls(!!e),e})}},{key:"Ae",value:function(e,t){return lf(e).put(Kl.key,t)}},{key:"Re",value:function(e,t){if(t){var n=bh(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(As.min()))return n}return hu.newInvalidDocument(e)}}]),e}(),cf=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new of(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Lc(function(e,t){return xs(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var s=t.De.get(a);if(o.document.isValidDocument()){var u=wh(t.Se.N,o.document,t.getReadTime(a));i=i.add(a.path.popLast()),r+=qh(u)-s,n.push(t.Se.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var c=wh(t.Se.N,hu.newNoDocument(a,As.min()),t.getReadTime(a));n.push(t.Se.addEntry(e,a,c))}else n.push(t.Se.removeEntry(e,a))}),i.forEach(function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))}),n.push(this.Se.updateMetadata(e,r)),ih.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next(function(e){return n.De.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next(function(e){var t=e.documents;return e.Ve.forEach(function(e,t){n.De.set(e,t)}),t})}}]),n}(sf);function lf(e){return ph(e,Kl.store)}function hf(e){return ph(e,Gl.store)}function ff(e){return e.path.toArray()}var df=function(){function e(t){f(this,e),this.N=t}return h(e,[{key:"Ct",value:function(e,t,n,r){var i=this;ls(n<r&&n>=0&&r<=11);var a,o=new ah("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(ql.store),(a=e).createObjectStore(Vl.store,{keyPath:Vl.keyPath}),a.createObjectStore(jl.store,{keyPath:jl.keyPath,autoIncrement:!0}).createIndex(jl.userMutationsIndex,jl.userMutationsKeyPath,{unique:!0}),a.createObjectStore(Bl.store),vf(e),function(e){e.createObjectStore(Gl.store)}(e));var s=ih.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ql.store),e.deleteObjectStore(Wl.store),e.deleteObjectStore(Yl.store)}(e),vf(e)),s=s.next(function(){return function(e){var t=e.store(Yl.store),n=new Yl(0,0,As.min().toTimestamp(),0);return t.put(Yl.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(e,t){return t.store(jl.store).Lt().next(function(n){e.deleteObjectStore(jl.store),e.createObjectStore(jl.store,{keyPath:jl.keyPath,autoIncrement:!0}).createIndex(jl.userMutationsIndex,jl.userMutationsKeyPath,{unique:!0});var r=t.store(jl.store),i=n.map(function(e){return r.put(e)});return ih.waitFor(i)})}(e,o)})),s=s.next(function(){!function(e){e.createObjectStore($l.store,{keyPath:$l.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(function(){return i.Ce(o)})),n<6&&r>=6&&(s=s.next(function(){return function(e){e.createObjectStore(Kl.store)}(e),i.Ne(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.ke(e,o)})),n<9&&r>=9&&(s=s.next(function(){(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){var t=e.objectStore(Gl.store);t.createIndex(Gl.readTimeIndex,Gl.readTimeIndexPath,{unique:!1}),t.createIndex(Gl.collectionReadTimeIndex,Gl.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){(function(e){e.createObjectStore(Xl.store,{keyPath:Xl.keyPath})})(e),function(e){e.createObjectStore(eh.store,{keyPath:eh.keyPath})}(e)})),s}},{key:"Ne",value:function(e){var t=0;return e.store(Gl.store).Kt(function(e,n){t+=qh(n)}).next(function(){var n=new Kl(t);return e.store(Kl.store).put(Kl.key,n)})}},{key:"Ce",value:function(e){var t=this,n=e.store(Vl.store),r=e.store(jl.store);return n.Lt().next(function(n){return ih.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt(jl.userMutationsIndex,i).next(function(r){return ih.forEach(r,function(r){ls(r.userId===n.userId);var i=Eh(t.N,r);return Uh(e,n.userId,i).next(function(){})})})})})}},{key:"xe",value:function(e){var t=e.store(Ql.store),n=e.store(Gl.store);return e.store(Yl.store).get(Yl.key).next(function(e){var r=[];return n.Kt(function(n,i){var a=new Ds(n),o=[0,Ll(a)];r.push(t.get(o).next(function(n){return n?ih.resolve():t.put(new Ql(0,Ll(a),e.highestListenSequenceNumber))}))}).next(function(){return ih.waitFor(r)})})}},{key:"ke",value:function(e,n){e.createObjectStore(Jl.store,{keyPath:Jl.keyPath});var r=n.store(Jl.store),i=new Ph,a=function(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Ll(n)})}};return n.store(Gl.store).Kt({qt:!0},function(e,t){var n=new Ds(e);return a(n.popLast())}).next(function(){return n.store(Bl.store).Kt({qt:!0},function(e,n){var r=t(e,3),i=(r[0],r[1]),o=(r[2],Ml(i));return a(o.popLast())})})}},{key:"$e",value:function(e){var t=this,n=e.store(Wl.store);return n.Kt(function(e,r){var i=Ih(r),a=Ah(t.N,i);return n.put(a)})}}]),e}();function vf(e){e.createObjectStore(Ql.store,{keyPath:Ql.keyPath}).createIndex(Ql.documentTargetsIndex,Ql.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Wl.store,{keyPath:Wl.keyPath}).createIndex(Wl.queryTargetsIndexName,Wl.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Yl.store)}var pf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gf=function(){function e(t,n,r,i,a,o,s,u,c,l){if(f(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=s,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!e.bt())throw new ds(fs.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rf(this,i),this.We=n+"main",this.N=new kh(u),this.Ge=new oh(this.We,11,new df(this.N)),this.ze=new Kh(this.referenceDelegate,this.N),this.Ht=new Lh,this.He=new uf(this.N,this.Ht),this.Je=new Rh,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return h(e,[{key:"start",value:function(){var e=this;return this.Xe().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ds(fs.FAILED_PRECONDITION,pf);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ze.getHighestSequenceNumber(t)})}).then(function(t){e.Le=new ws(t,e.Fe)}).then(function(){e.Be=!0}).catch(function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)})}},{key:"nn",value:function(e){var t,n=this;return this.Qe=(t=(0,jn.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.Ge.xt((t=(0,jn.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Xe();case 4:case"end":return e.stop()}},e)}))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return yf(t).put(new $l(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.sn(t).next(function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable(function(){return e.Qe(!1)}))})}).next(function(){return e.rn(t)}).next(function(n){return e.isPrimary&&!n?e.on(t).next(function(){return!1}):!!n&&e.an(t).next(function(){return!0})})}).catch(function(t){if(ch(t))return as("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return as("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable(function(){return e.Qe(t)}),e.isPrimary=t})}},{key:"sn",value:function(e){var t=this;return mf(e).get(ql.key).next(function(e){return ih.resolve(t.cn(e))})}},{key:"un",value:function(e){return yf(e).delete(this.clientId)}},{key:"hn",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.ln(e.je,18e5)){t.next=6;break}return e.je=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=ph(t,$l.store);return n.Lt().next(function(t){var r=e.fn(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return ih.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.Ye){r=s(n);try{for(r.s();!(i=r.n()).done;)a=i.value,e.Ye.removeItem(e.dn(a.clientId))}catch(o){r.e(o)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Xe().then(function(){return e.hn()}).then(function(){return e.en()})})}},{key:"cn",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?ih.resolve(!0):mf(e).get(ql.key).next(function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new ds(fs.FAILED_PRECONDITION,pf);return!1}}return!(!t.networkEnabled||!t.inForeground)||yf(e).Lt().next(function(e){return void 0===t.fn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&as("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),t.next=7,e.Ge.runTransaction("shutdown","readwrite",[ql.store,$l.store],function(t){var n=new vh(t,ws.T);return e.on(n).next(function(){return e.un(n)})});case 7:e.Ge.close(),e.yn();case 9:case"end":return t.stop()}},t)}))()}},{key:"fn",value:function(e,t){var n=this;return e.filter(function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)})}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return yf(t).Lt().next(function(t){return e.fn(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return Vh.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r,i=this;return as("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",th,function(a){return r=new vh(a,i.Le?i.Le.next():ws.T),"readwrite-primary"===t?i.sn(r).next(function(e){return!!e||i.rn(r)}).next(function(t){if(!t)throw os("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.Oe.enqueueRetryable(function(){return i.Qe(!1)}),new ds(fs.FAILED_PRECONDITION,nh);return n(r)}).next(function(e){return i.an(r).next(function(){return e})}):i.Tn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})}},{key:"Tn",value:function(e){var t=this;return mf(e).get(ql.key).next(function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.cn(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ds(fs.FAILED_PRECONDITION,pf)})}},{key:"an",value:function(e){var t=new ql(this.clientId,this.allowTabSynchronization,Date.now());return mf(e).put(ql.key,t)}},{key:"on",value:function(e){var t=this,n=mf(e);return n.get(ql.key).next(function(e){return t.cn(e)?(as("IndexedDbPersistence","Releasing primary lease."),n.delete(ql.key)):ih.resolve()})}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(os("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),(0,Gn.G6)()&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return as("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(n){return os("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){os("Failed to set zombie client id.",e)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return oh.bt()}}]),e}();function mf(e){return ph(e,ql.store)}function yf(e){return ph(e,$l.store)}function kf(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bf=function e(t,n){f(this,e),this.progress=t,this.En=n},wf=function(){function e(t,n,r){f(this,e),this.He=t,this.In=n,this.Ht=r}return h(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Rn(e,t,r)})}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next(function(e){var t,r=s(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"bn",value:function(e,t){e.forEach(function(e,n){var r,i=s(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}})}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next(function(t){return n.vn(e,t).next(function(){return t})})}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.bn(t,e)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return Ws.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(e,t.path):Uu(t)?this.Sn(e,t,n):this.Dn(e,t,n);var r}},{key:"Vn",value:function(e,t){return this.An(e,new Ws(t)).next(function(e){var t=qc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=qc();return this.Ht.getCollectionParents(e,i).next(function(o){return ih.forEach(o,function(o){var s,u,c=(s=t,u=o.child(i),new Nu(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.Dn(e,c,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"Dn",value:function(e,t,n){var r,i,a=this;return this.He.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,a.In.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,a.Cn(e,i,r).next(function(e){r=e;var t,n=s(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=s(o.mutations);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=c.key,h=r.get(l);null==h&&(h=hu.newInvalidDocument(l),r=r.insert(l,h)),gc(c,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(l))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}})}).next(function(){return r.forEach(function(e,n){Gu(t,n)||(r=r.remove(e))}),r})}},{key:"Cn",value:function(e,t,n){var r,i=zc(),a=s(t);try{for(a.s();!(r=a.n()).done;){var o,u=s(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var c=o.value;c instanceof wc&&null===n.get(c.key)&&(i=i.add(c.key))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){a.e(h)}finally{a.f()}var l=n;return this.He.getEntries(e,i).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))}),l})}}]),e}(),_f=function(){function e(t,n,r,i){f(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return h(e,null,[{key:"kn",value:function(t,n){var r,i=zc(),a=zc(),o=s(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(c){o.e(c)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Tf=function(){function e(){f(this,e)}return h(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i,a=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(As.min())?this.Fn(e,t):this.On.Pn(e,r).next(function(i){var o=a.Mn(t,i);return(Lu(t)||Fu(t))&&a.Ln(t.limitType,o,r,n)?a.Fn(e,t):(is()<=Hn.in.DEBUG&&as("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Hu(t)),a.On.getDocumentsMatchingQuery(e,t,n).next(function(e){return o.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"Mn",value:function(e,t){var n=new Lc(Ku(e));return t.forEach(function(t,r){Gu(e,r)&&(n=n.add(r))}),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return is()<=Hn.in.DEBUG&&as("QueryEngine","Using full collection scan to execute query:",Hu(t)),this.On.getDocumentsMatchingQuery(e,t,As.min())}}]),e}(),xf=function(){function e(t,n,r,i){f(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new Nc(xs),this.qn=new of(function(e){return vu(e)},pu),this.Kn=As.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new wf(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return h(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Un)})}}]),e}();function Sf(e,t,n,r){return new xf(e,t,n,r)}function Ef(e,t){return If.apply(this,arguments)}function If(){return(If=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),i=r.In,a=r.Qn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.In.getAllMutationBatches(e).next(function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new wf(r.jn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)}).next(function(n){var r,i=[],o=[],u=zc(),c=s(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.batchId);var h,f=s(l.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;u=u.add(d.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){c.e(b)}finally{c.f()}var v,p=s(n);try{for(p.s();!(v=p.n()).done;){var g=v.value;o.push(g.batchId);var m,y=s(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return a.Pn(e,u).next(function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:o}})})});case 4:return o=e.sent,e.abrupt("return",(r.In=i,r.Qn=a,r.Bn.$n(r.Qn),o));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Af(e,t){var n=hs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r,i,a,o,s,u,c,l=t.batch.keys(),h=n.jn.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,a=t,o=h,s=a.batch,u=s.keys(),c=ih.resolve(),u.forEach(function(e){c=c.next(function(){return o.getEntry(i,e)}).next(function(t){var n=a.docVersions.get(e);ls(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,a),t.isValidDocument()&&o.addEntry(t,a.commitVersion))})}),c.next(function(){return r.In.removeMutationBatch(i,s)})).next(function(){return h.apply(e)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,l)})})}function Cf(e){var t=hs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.ze.getLastRemoteSnapshotVersion(e)})}function Rf(e,t){var n=hs(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var o=[];t.targetChanges.forEach(function(t,a){var s=i.get(a);if(s){o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,a).next(function(){return n.ze.addMatchingKeys(e,t.addedDocuments,a)}));var u,c,l,h=t.resumeToken;if(h.approximateByteSize()>0){var f=s.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,f),u=s,l=t,ls((c=f).resumeToken.approximateByteSize()>0),(0===u.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&o.push(n.ze.updateTargetData(e,f))}}});var s=Mc();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Of(e,a,t.documentUpdates,r,void 0).next(function(e){s=e})),!r.isEqual(As.min())){var u=n.ze.getLastRemoteSnapshotVersion(e).next(function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(u)}return ih.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.Qn.vn(e,s)}).next(function(){return s})}).then(function(e){return n.Un=i,e})}function Of(e,t,n,r,i){var a=zc();return n.forEach(function(e){return a=a.add(e)}),t.getEntries(e,a).next(function(e){var a=Mc();return n.forEach(function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(As.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):as("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),a})}function Nf(e,t){var n=hs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)})}function Df(e,t){var n=hs(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.ze.getTargetData(e,t).next(function(i){return i?(r=i,ih.resolve(r)):n.ze.allocateTargetId(e).next(function(i){return r=new yh(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function Pf(e,t,n){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=hs(t),a=i.Un.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ch(e.t1)){e.next=12;break}throw e.t1;case 12:as("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Un=i.Un.remove(n),i.qn.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Ff(e,t,n){var r=hs(e),i=As.min(),a=zc();return r.persistence.runTransaction("Execute query","readonly",function(e){return(o=r,s=e,u=Vu(t),c=hs(o),l=c.qn.get(u),void 0!==l?ih.resolve(c.Un.get(l)):c.ze.getTargetData(s,u)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:As.min(),n?a:zc())}).next(function(e){return{documents:e,Gn:a}});var o,s,u,c,l})}function Zf(e,t){var n=hs(e),r=hs(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Tt(e,t).next(function(e){return e?e.target:null})})}function Mf(e){var t=hs(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return n=t.jn,r=e,i=t.Kn,a=hs(n),o=Mc(),s=_h(i),u=hf(r),c=IDBKeyRange.lowerBound(s,!0),u.Kt({index:Gl.readTimeIndex,range:c},function(e,t){var n=bh(a.N,t);o=o.insert(n.key,n),s=t.readTime}).next(function(){return{En:o,readTime:Th(s)}});var n,r,i,a,o,s,u,c}).then(function(e){var n=e.En,r=e.readTime;return t.Kn=r,n})}function Uf(){return(Uf=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=hs(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return t=hf(e),n=As.min(),t.Kt({index:Gl.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=Th(t.readTime)),r.done()}).next(function(){return n});var t,n}).then(function(e){n.Kn=e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qf(){return(qf=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,u,c,l,h,f,d,v,p,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=hs(t),o=zc(),u=Mc(),c=jc(),l=s(r);try{for(l.s();!(h=l.n()).done;)f=h.value,d=n.zn(f.metadata.name),f.document&&(o=o.add(d)),u=u.insert(d,n.Hn(f)),c=c.insert(d,n.Jn(f.metadata.readTime))}catch(m){l.e(m)}finally{l.f()}return v=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,Df(a,(g=i,Vu(Pu(Ds.fromString("__bundle__/docs/".concat(g))))));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Of(e,v,u,As.min(),c).next(function(t){return v.apply(e),t}).next(function(t){return a.ze.removeMatchingKeysForTargetId(e,p.targetId).next(function(){return a.ze.addMatchingKeys(e,o,p.targetId)}).next(function(){return a.Qn.vn(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vf(e,t){return jf.apply(this,arguments)}function jf(){return(jf=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:zc(),e.next=3,Df(t,Vu(Ch(n.bundledQuery)));case 3:return i=e.sent,a=hs(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=ul(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var o=i.withResumeToken(Zs.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(o.targetId,o),a.ze.updateTargetData(e,o).next(function(){return a.ze.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.ze.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.Je.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Bf=function(){function e(t){f(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return h(e,[{key:"getBundleMetadata",value:function(e,t){return ih.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:ul(n.createTime)}),ih.resolve()}},{key:"getNamedQuery",value:function(e,t){return ih.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:Ch(n.bundledQuery),readTime:ul(n.readTime)}),ih.resolve();var n}}]),e}(),zf=function(){function e(){f(this,e),this.Zn=new Lc(Hf.ts),this.es=new Lc(Hf.ns)}return h(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Hf(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.rs(new Hf(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"cs",value:function(e){var t=this,n=new Ws(new Ds([])),r=new Hf(n,e),i=new Hf(n,e+1),a=[];return this.es.forEachInRange([r,i],function(e){t.rs(e),a.push(e.key)}),a}},{key:"us",value:function(){var e=this;this.Zn.forEach(function(t){return e.rs(t)})}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Ws(new Ds([])),n=new Hf(t,e),r=new Hf(t,e+1),i=zc();return this.es.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new Hf(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Hf=function(){function e(t,n){f(this,e),this.key=t,this.ls=n}return h(e,null,[{key:"ts",value:function(e,t){return Ws.comparator(e.key,t.key)||xs(e.ls,t.ls)}},{key:"ns",value:function(e,t){return xs(e.ls,t.ls)||Ws.comparator(e.key,t.key)}}]),e}(),Gf=function(){function e(t,n){f(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new Lc(Hf.ts)}return h(e,[{key:"checkEmpty",value:function(e){return ih.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++;var a=new gh(i,t,n,r);this.In.push(a);var o,u=s(r);try{for(u.s();!(o=u.n()).done;){var c=o.value;this.ds=this.ds.add(new Hf(c.key,i)),this.Ht.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return ih.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ih.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this._s(t+1),r=n<0?0:n;return ih.resolve(this.In.length>r?this.In[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ih.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return ih.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Hf(t,0),i=new Hf(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],function(e){var t=n.ws(e.ls);a.push(t)}),ih.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lc(xs);return t.forEach(function(e){var t=new Hf(e,0),i=new Hf(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],function(e){r=r.add(e.ls)})}),ih.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ws.isDocumentKey(i)||(i=i.child(""));var a=new Hf(new Ws(i),0),o=new Lc(xs);return this.ds.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},a),ih.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ws(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ls(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return ih.forEach(t.mutations,function(i){var a=new Hf(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.ds=r})}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Hf(t,0),r=this.ds.firstAfterOrEqual(n);return ih.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return ih.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),Kf=function(){function e(t,n){f(this,e),this.Ht=t,this.ps=n,this.docs=new Nc(Ws.comparator),this.size=0}return h(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ih.resolve(n?n.document.clone():hu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Mc();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():hu.newInvalidDocument(e))}),ih.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Mc(),i=new Ws(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Gu(t,c)&&(r=r.insert(c.key,c.clone()))}return ih.resolve(r)}},{key:"Ts",value:function(e,t){return ih.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Wf(this)}},{key:"getSize",value:function(e){return ih.resolve(this.size)}}]),e}(),Wf=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).Se=e,r}return h(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)}),ih.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}(sf),Qf=function(){function e(t){f(this,e),this.persistence=t,this.Es=new of(function(e){return vu(e)},pu),this.lastRemoteSnapshotVersion=As.min(),this.highestTargetId=0,this.Is=0,this.As=new zf,this.targetCount=0,this.Rs=Gh.se()}return h(e,[{key:"forEachTarget",value:function(e,t){return this.Es.forEach(function(e,n){return t(n)}),ih.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ih.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ih.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),ih.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),ih.resolve()}},{key:"ae",value:function(e){this.Es.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Gh(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,ih.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),ih.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,ih.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Es.forEach(function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Es.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),ih.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return ih.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Es.get(t)||null;return ih.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),ih.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),ih.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),ih.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return ih.resolve(n)}},{key:"containsKey",value:function(e,t){return ih.resolve(this.As.containsKey(t))}}]),e}(),Yf=function(){function e(t,n){var r=this;f(this,e),this.bs={},this.Le=new ws(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Qf(this),this.Ht=new Dh,this.He=new Kf(this.Ht,function(e){return r.referenceDelegate.Ps(e)}),this.N=new kh(n),this.Je=new Bf(this.N)}return h(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Gf(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;as("MemoryPersistence","Starting transaction:",e);var i=new Jf(this.Le.next());return this.referenceDelegate.vs(),n(i).next(function(e){return r.referenceDelegate.Vs(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ss",value:function(e,t){return ih.or(Object.values(this.bs).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),Jf=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(rh),$f=function(){function e(t){f(this,e),this.persistence=t,this.Ds=new zf,this.Cs=null}return h(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw cs()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),ih.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),ih.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),ih.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach(function(e){return n.xs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.xs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ih.forEach(this.xs,function(r){var i=Ws.fromPath(r);return t.ks(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Cs=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next(function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())})}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return ih.or([function(){return ih.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function Xf(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ed(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function td(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var nd=function(){function e(t,n,r,i){f(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ds(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(os("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),rd=function(){function e(t,n,r){f(this,e),this.targetId=t,this.state=n,this.error=r}return h(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ds(i.error.code,i.error.message))),a?new e(t,i.state,r):(os("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),id=function(){function e(t,n){f(this,e),this.clientId=t,this.activeTargetIds=n}return h(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ks(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(os("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ad=function(){function e(t,n){f(this,e),this.clientId=t,this.onlineState=n}return h(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(os("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),od=function(){function e(){f(this,e),this.activeTargetIds=Gc()}return h(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sd=function(){function e(t,n,r,i,a){f(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Nc(xs),this.started=!1,this.Ks=[];var o,s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=Xf(this.persistenceKey,this.Ls),this.Qs="firestore_sequence_number_".concat(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new od),this.Ws=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Hs="firestore_online_state_".concat(this.persistenceKey),this.Js=(o=this.persistenceKey,"firestore_bundle_loaded_".concat(o)),this.window.addEventListener("storage",this.Bs)}return h(e,[{key:"start",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.pn();case 2:n=t.sent,r=s(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((a=i.value)!==e.Ls){t.next=10;break}return t.abrupt("continue",12);case 10:(o=e.getItem(Xf(e.persistenceKey,a)))&&(u=id.$s(a,o))&&(e.qs=e.qs.insert(u.clientId,u));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.Ys(),(c=e.storage.getItem(e.Hs))&&(l=e.Xs(c))&&e.Zs(l),h=s(e.Ks);try{for(h.s();!(f=h.n()).done;)d=f.value,e.Us(d)}catch(v){h.e(v)}finally{h.f()}e.Ks=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(td(this.persistenceKey,e));if(n){var r=rd.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(td(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.ni(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return as("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){as("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){as("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(as("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,jn.Z)(regeneratorRuntime.mark(function e(){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Ws.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ci(r,null));case 6:if(!(i=t.ui(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ci(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.hi(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.li(a));case 16:e.next=39;break;case 18:if(!t.zs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.fi(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.di(o));case 23:e.next=39;break;case 25:if(n.key!==t.Hs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Zs(s));case 30:e.next=39;break;case 32:if(n.key!==t.Qs){e.next=37;break}(u=function(e){var t=ws.T;if(null!=e)try{var n=JSON.parse(e);ls("number"==typeof n),t=n}catch(n){os("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue))!==ws.T&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Js){e.next=39;break}return e.abrupt("return",t.syncEngine.wi());case 39:e.next=42;break;case 41:t.Ks.push(n);case 42:case"end":return e.stop()}},e)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new nd(this.currentUser,e,t,n),i=ed(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=ed(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}},{key:"ii",value:function(e,t,n){var r=td(this.persistenceKey,e),i=new rd(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ai(e);return id.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return nd.$s(new ts(void 0!==n[2]?n[2]:null),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return rd.$s(r,t)}},{key:"Xs",value:function(e){return ad.$s(e)}},{key:"li",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine._i(e.batchId,e.state,e.error));case 2:as("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ci",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),o=[],s=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||s.push(e)}),this.syncEngine.gi(o,s).then(function(){n.qs=r})}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=Gc();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ud=function(){function e(){f(this,e),this.yi=new od,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return h(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new od,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),cd=function(){function e(){f(this,e)}return h(e,[{key:"Ti",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ld=function(){function e(){var t=this;f(this,e),this.Ei=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return h(e,[{key:"Ti",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){as("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ri",value:function(){as("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fd=function(){function e(t){f(this,e),this.vi=t.vi,this.Vi=t.Vi}return h(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),dd=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return h(n,[{key:"qi",value:function(e,t,n,r){return new Promise(function(i,a){var o=new Xo;o.listenOnce(Wo.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Ko.NO_ERROR:var t=o.getResponseJson();as("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ko.TIMEOUT:as("Connection",'RPC "'+e+'" timed out'),a(new ds(fs.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:var n=o.getStatus();if(as("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(fs).indexOf(c)>=0?c:fs.UNKNOWN);a(new ds(s,r.message))}else a(new ds(fs.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ds(fs.UNAVAILABLE,"Connection failed."));break;default:cs()}}finally{as("Connection",'RPC "'+e+'" completed.')}var u,c});var s=JSON.stringify(r);o.send(t,"POST",s,n,15)})}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Ho(),i=Go(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Jo({})),this.Ui(a.initMessageHeaders,t),(0,Gn.uI)()||(0,Gn.b$)()||(0,Gn.d)()||(0,Gn.w1)()||(0,Gn.Mn)()||(0,Gn.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");as("Connection","Creating WebChannel: "+o,a);var s=r.createWebChannel(o,a),u=!1,c=!1,l=new fd({vi:function(e){c?as("Connection","Not sending because WebChannel is closed:",e):(u||(as("Connection","Opening WebChannel transport."),s.open(),u=!0),as("Connection","WebChannel sending:",e),s.send(e))},Vi:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(t){setTimeout(function(){throw t},0)}})};return h(s,$o.EventType.OPEN,function(){c||as("Connection","WebChannel transport opened.")}),h(s,$o.EventType.CLOSE,function(){c||(c=!0,as("Connection","WebChannel transport closed"),l.$i())}),h(s,$o.EventType.ERROR,function(e){c||(c=!0,ss("Connection","WebChannel transport errored:",e),l.$i(new ds(fs.UNAVAILABLE,"The operation could not be completed")))}),h(s,$o.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];ls(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){as("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Sc[e];if(void 0!==t)return Oc(t)}(a),u=i.message;void 0===o&&(o=fs.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),c=!0,l.$i(new ds(o,u)),s.close()}else as("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,Qo.STAT_EVENT,function(e){e.stat===Yo.PROXY?as("Connection","Detected buffering proxy"):e.stat===Yo.NOPROXY&&as("Connection","Detected no buffering proxy")}),setTimeout(function(){l.ki()},0),l}}]),n}(function(){function e(t){f(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return h(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);as("RestConnection","Sending: ",i,n);var a={};return this.Ui(a,r),this.qi(e,i,a,n).then(function(e){return as("RestConnection","Received: ",e),e},function(t){throw ss("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t})}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){return"".concat(this.Fi,"/v1/").concat(t,":").concat(hd[e])}}]),e}());function vd(){return"undefined"!=typeof window?window:null}function pd(){return"undefined"!=typeof document?document:null}function gd(e){return new il(e,!0)}var md=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;f(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return h(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&as("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,function(){return t.Ji=Date.now(),e()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),yd=function(){function e(t,n,r,i,a,o){f(this,e),this.Oe=t,this.er=r,this.nr=i,this.credentialsProvider=a,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new md(t,n)}return h(e,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ar(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var e=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return e.dr()}))}},{key:"wr",value:function(e){this._r(),this.stream.send(e)}},{key:"dr",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cr()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(e,t){var n=this;return(0,jn.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===fs.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===fs.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,r.next=8,n.listener.Ci(t);case 8:case"end":return r.stop()}},r)}))()}},{key:"mr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then(function(t){e.sr===n&&e.yr(t)},function(n){t(function(){var t=new ds(fs.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)})})}},{key:"yr",value:function(e){var t=this,n=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(function(){n(function(){return t.state=2,t.listener.Si()})}),this.stream.Ci(function(e){n(function(){return t.pr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})}},{key:"ur",value:function(){var e=this;this.state=4,this.rr.Xi((0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"pr",value:function(e){return as("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(3,e)}},{key:"gr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget(function(){return t.sr===e?n():(as("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),kd=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,o)).N=a,s}return h(n,[{key:"Tr",value:function(e){return this.nr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.rr.reset();var t=function(e,t){var n,r;if("targetChange"in t){var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:cs(),a=t.targetChange.targetIds||[],o=function(e,t){return e.D?(ls(void 0===t||"string"==typeof t),Zs.fromBase64String(t||"")):(ls(void 0===t||t instanceof Uint8Array),Zs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,u=s&&function(e){var t=void 0===e.code?fs.UNKNOWN:Oc(e.code);return new ds(t,e.message||"")}(s);n=new Jc(i,a,o,u||null)}else if("documentChange"in t){var c=t.documentChange,l=fl(e,c.document.name),h=ul(c.document.updateTime),f=new cu({mapValue:{fields:c.document.fields}}),d=hu.newFoundDocument(l,h,f);n=new Qc(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){var v=t.documentDelete,p=fl(e,v.document),g=v.readTime?ul(v.readTime):As.min(),m=hu.newNoDocument(p,g);n=new Qc([],v.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){var y=t.documentRemove,k=fl(e,y.document);n=new Qc([],y.removedTargetIds||[],k,null)}else{if(!("filter"in t))return cs();var b=t.filter,w=new Cc(b.count||0);n=new Yc(b.targetId,w)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return As.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?As.min():t.readTime?ul(t.readTime):As.min()}(e);return this.listener.Er(t,n)}},{key:"Ir",value:function(e){var t,n,r,i,a={};a.database=pl(this.N),a.addTarget=(t=this.N,i=(n=e).target,(r=gu(i)?{documents:wl(t,i)}:{query:_l(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=ol(t,n.resumeToken):n.snapshotVersion.compareTo(As.min())>0&&(r.readTime=al(t,n.snapshotVersion.toTimestamp())),r);var o=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(a.labels=o),this.wr(a)}},{key:"Ar",value:function(e){var t={};t.database=pl(this.N),t.removeTarget=e,this.wr(t)}}]),n}(yd),bd=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,o)).N=a,s.Rr=!1,s}return h(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,i(w(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Tr",value:function(e){return this.nr.ji("Write",e)}},{key:"onMessage",value:function(e){if(ls(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(ls(void 0!==t),e.map(function(e){return function(e,t){var n=ul(e.updateTime?e.updateTime:t);return n.isEqual(As.min())&&(n=ul(t)),new hc(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=ul(e.commitTime);return this.listener.vr(n,t)}return ls(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var e={};e.database=pl(this.N),this.wr(e)}},{key:"Pr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return kl(t.N,e)})};this.wr(n)}}]),n}(yd),wd=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).credentials=e,a.nr=r,a.N=i,a.Dr=!1,a}return h(n,[{key:"Cr",value:function(){if(this.Dr)throw new ds(fs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Li(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===fs.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new ds(fs.UNKNOWN,e.toString())})}},{key:"Ki",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Ki(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===fs.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new ds(fs.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return function e(){f(this,e)}}()),_d=function(){function e(t,n){f(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return h(e,[{key:"Or",value:function(){var e=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.kr=null,e.Mr("Backend didn't respond within 10 seconds."),e.Fr("Offline"),Promise.resolve()}))}},{key:"Lr",value:function(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Fr("Offline")))}},{key:"set",value:function(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}},{key:"Fr",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Mr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(os(t),this.$r=!1):as("OnlineStateTracker",t)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),e}(),Td=function e(t,n,r,i,a){f(this,e);var o=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=a,this.Qr.Ti(function(e){r.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Pd(o),!e.t0){e.next=5;break}return as("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=hs(t)).Kr.add(4),e.next=4,Ed(n);case 4:return n.Wr.set("Unknown"),n.Kr.delete(4),e.next=8,xd(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(o);case 5:case"end":return e.stop()}},e)})))}),this.Wr=new _d(r,i)};function xd(e){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pd(t)){e.next=18;break}n=s(t.jr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function Ed(e){return Id.apply(this,arguments)}function Id(){return(Id=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s(t.jr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Ad(e,t){var n=hs(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Dd(n)?Nd(n):sv(n).cr()&&Rd(n,t))}function Cd(e,t){var n=hs(e),r=sv(n);n.qr.delete(t),r.cr()&&Od(n,t),0===n.qr.size&&(r.cr()?r.lr():Pd(n)&&n.Wr.set("Unknown"))}function Rd(e,t){e.Gr.Y(t.targetId),sv(e).Ir(t)}function Od(e,t){e.Gr.Y(t),sv(e).Ar(t)}function Nd(e){e.Gr=new Xc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qr.get(t)||null}}),sv(e).start(),e.Wr.Or()}function Dd(e){return Pd(e)&&!sv(e).ar()&&e.qr.size>0}function Pd(e){return 0===hs(e).Kr.size}function Ld(e){e.Gr=void 0}function Fd(e){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.qr.forEach(function(e,n){Rd(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Md(e,t){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ld(t),Dd(t)?(t.Wr.Lr(n),Nd(t)):t.Wr.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qd(e,t,n){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Wr.set("Online"),!(n instanceof Jc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(a=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=s(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qr.delete(o),t.Gr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),as("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,jd(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Qc?t.Gr.rt(n):n instanceof Yc?t.Gr.ft(n):t.Gr.ct(n),r.isEqual(As.min())){e.next=29;break}return e.prev=14,e.next=17,Cf(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Gr._t(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.qr.get(t);if(n){e.qr.set(t,n.withResumeToken(Zs.EMPTY_BYTE_STRING,n.snapshotVersion)),Od(e,t);var r=new yh(n.target,t,1,n.sequenceNumber);Rd(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),as("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,jd(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function jd(e,t,n){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ch(n)){e.next=2;break}throw n;case 2:return t.Kr.add(1),e.next=5,Ed(t);case 5:t.Wr.set("Offline"),r||(r=function(){return Cf(t.localStore)}),t.asyncQueue.enqueueRetryable((0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return as("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Kr.delete(1),e.next=6,xd(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zd(e,t){return t().catch(function(n){return jd(e,n,t)})}function Hd(e){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=hs(t),r=uv(n),i=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!Kd(n)){e.next=19;break}return e.prev=3,e.next=6,Nf(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Ur.length&&r.lr(),e.abrupt("break",19);case 10:i=a.batchId,Wd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,jd(n,e.t0);case 17:e.next=2;break;case 19:Qd(n)&&Yd(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function Kd(e){return Pd(e)&&e.Ur.length<10}function Wd(e,t){e.Ur.push(t);var n=uv(e);n.cr()&&n.br&&n.Pr(t.mutations)}function Qd(e){return Pd(e)&&!uv(e).ar()&&e.Ur.length>0}function Yd(e){uv(e).start()}function Jd(e){return $d.apply(this,arguments)}function $d(){return($d=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:uv(t).Sr();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xd(e){return ev.apply(this,arguments)}function ev(){return(ev=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=uv(t),r=s(t.Ur);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Pr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return(nv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Ur.shift(),a=mh.from(i,n,r),e.next=3,zd(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Hd(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return(iv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&uv(t).br,!e.t0){e.next=4;break}return e.next=4,(r=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rc(i=n.code)||i===fs.ABORTED){e.next=7;break}return r=t.Ur.shift(),uv(t).hr(),e.next=5,zd(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Hd(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:Qd(t)&&Yd(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function av(e,t){return ov.apply(this,arguments)}function ov(){return(ov=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hs(t),!n){e.next=7;break}return r.Kr.delete(2),e.next=5,xd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Kr.add(2),e.next=12,Ed(r);case 12:r.Wr.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sv(e){return e.zr||(e.zr=(t=e.datastore,n=e.asyncQueue,r={Si:Fd.bind(null,e),Ci:Md.bind(null,e),Er:qd.bind(null,e)},(i=hs(t)).Cr(),new kd(n,i.nr,i.credentials,i.N,r)),e.jr.push(function(){var t=(0,jn.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zr.hr(),Dd(e)?Nd(e):e.Wr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zr.stop();case 6:Ld(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.zr;var t,n,r,i}function uv(e){return e.Hr||(e.Hr=(t=e.datastore,n=e.asyncQueue,r={Si:Jd.bind(null,e),Ci:rv.bind(null,e),Vr:Xd.bind(null,e),vr:tv.bind(null,e)},(i=hs(t)).Cr(),new bd(n,i.nr,i.credentials,i.N,r)),e.jr.push(function(){var t=(0,jn.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Hr.hr(),t.next=4,Hd(e);case 4:t.next=9;break;case 6:return t.next=8,e.Hr.stop();case 8:e.Ur.length>0&&(as("RemoteStore","Stopping write stream with ".concat(e.Ur.length," pending writes")),e.Ur=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Hr;var t,n,r,i}var cv=function(){function e(t,n,r,i,a){f(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return h(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(fs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function lv(e,t){if(os("AsyncQueue","".concat(t,": ").concat(e)),ch(e))return new ds(fs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var hv=function(){function e(t){f(this,e),this.comparator=t?function(e,n){return t(e,n)||Ws.comparator(e.key,n.key)}:function(e,t){return Ws.comparator(e.key,t.key)},this.keyedMap=qc(),this.sortedSet=new Nc(this.comparator)}return h(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),fv=function(){function e(){f(this,e),this.Jr=new Nc(Ws.comparator)}return h(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):cs():this.Jr=this.Jr.insert(t,e)}},{key:"Yr",value:function(){var e=[];return this.Jr.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),dv=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return h(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach(function(e){a.push({type:0,doc:e})}),new e(t,n,hv.emptySet(n),a,r,i,!0,!1)}}]),e}(),vv=function e(){f(this,e),this.Xr=void 0,this.listeners=[]},pv=function e(){f(this,e),this.queries=new of(function(e){return zu(e)},Bu),this.onlineState="Unknown",this.Zr=new Set};function gv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hs(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new vv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xr=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=lv(e.t0,"Initialization of query '".concat(Hu(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.eo(r.onlineState),o.Xr&&n.no(o.Xr)&&_v(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function yv(e,t){return kv.apply(this,arguments)}function kv(){return(kv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hs(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bv(e,t){var n,r=hs(e),i=!1,a=s(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=r.queries.get(o.query);if(u){var c,l=s(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.no(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Xr=o}}}catch(h){a.e(h)}finally{a.f()}i&&_v(r)}function wv(e,t,n){var r=hs(e),i=r.queries.get(t);if(i){var a,o=s(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function _v(e){e.Zr.forEach(function(e){e.next()})}var Tv=function(){function e(t,n,r){f(this,e),this.query=t,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return h(e,[{key:"no",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=s(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new dv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.io?this.oo(e)&&(this.so.next(e),a=!0):this.ao(e,this.onlineState)&&(this.co(e),a=!0),this.ro=e,a}},{key:"onError",value:function(e){this.so.error(e)}},{key:"eo",value:function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}},{key:"ao",value:function(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"oo",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(e){e=dv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}]),e}(),xv=function(){function e(t,n){f(this,e),this.payload=t,this.byteLength=n}return h(e,[{key:"ho",value:function(){return"metadata"in this.payload}}]),e}(),Sv=function(){function e(t){f(this,e),this.N=t}return h(e,[{key:"zn",value:function(e){return fl(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?yl(this.N,e.document,!1):hu.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return ul(e)}}]),e}(),Ev=function(){function e(t,n,r){f(this,e),this.lo=t,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=Iv(t)}return h(e,[{key:"fo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"wo",value:function(e){var t,n=new Map,r=new Sv(this.N),i=s(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.zn(a.metadata.name),c=s(a.metadata.queries);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=(n.get(l)||zc()).add(u);n.set(l,h)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return qf.apply(this,arguments)}(e.localStore,new Sv(e.N),e.documents,e.lo.id);case 2:n=t.sent,r=e.wo(e.documents),i=s(e.queries),t.prev=5,i.s();case 7:if((a=i.n()).done){t.next=13;break}return o=a.value,t.next=11,Vf(e.localStore,o,r.get(o.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",new bf(Object.assign({},e.progress),n)));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function Iv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Av=function e(t){f(this,e),this.key=t},Cv=function e(t){f(this,e),this.key=t},Rv=function(){function e(t,n){f(this,e),this.query=t,this._o=n,this.mo=null,this.current=!1,this.yo=zc(),this.mutatedKeys=zc(),this.po=Ku(t),this.To=new hv(this.po)}return h(e,[{key:"Eo",get:function(){return this._o}},{key:"Io",value:function(e,t){var n=this,r=t?t.Ao:new fv,i=t?t.To:this.To,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Lu(this.query)&&i.size===this.query.limit?i.last():null,c=Fu(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Gu(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),v=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(u||c)&&(s=!0)),v&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),Lu(this.query)||Fu(this.query))for(;o.size>this.query.limit;){var l=Lu(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{To:o,Ao:r,Ln:s,mutatedKeys:a}}},{key:"Ro",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;var a=e.Ao.Yr();a.sort(function(e,t){return n=e.type,i=t.type,(a=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cs()}})(n)-a(i)||r.po(e.doc,t.doc);var n,i,a}),this.bo(n);var o=t?this.Po():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==a.length||u?{snapshot:new dv(this.query,e.To,i,a,e.mutatedKeys,0===s,u,!1),vo:o}:{vo:o}}},{key:"eo",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new fv,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}},{key:"bo",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._o=t._o.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t._o=t._o.delete(e)}),this.current=e.current)}},{key:"Po",value:function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=zc(),this.To.forEach(function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))});var n=[];return t.forEach(function(t){e.yo.has(t)||n.push(new Cv(t))}),this.yo.forEach(function(e){t.has(e)||n.push(new Av(e))}),n}},{key:"So",value:function(e){this._o=e.Gn,this.yo=zc();var t=this.Io(e.documents);return this.applyChanges(t,!0)}},{key:"Do",value:function(){return dv.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}]),e}(),Ov=function e(t,n,r){f(this,e),this.query=t,this.targetId=n,this.view=r},Nv=function e(t){f(this,e),this.key=t,this.Co=!1},Dv=function(){function e(t,n,r,i,a,o){f(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.No={},this.xo=new of(function(e){return zu(e)},Bu),this.ko=new Map,this.$o=new Set,this.Oo=new Nc(Ws.comparator),this.Fo=new Map,this.Mo=new zf,this.Lo={},this.Bo=new Map,this.Uo=Gh.ie(),this.onlineState="Unknown",this.qo=void 0}return h(e,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),e}();function Pv(e,t){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xp(t),!(o=r.xo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Do(),e.next=15;break;case 6:return e.next=8,Df(r.localStore,Vu(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Fv(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&Ad(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fv(e,t,n,r){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ko=function(e,n,r){return(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Io(r),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,Ff(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Io(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(tp(t,n.targetId,s.vo),s.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,Ff(t.localStore,n,!0);case 3:return a=e.sent,o=new Rv(n,a.Gn),s=o.Io(a.documents),u=Wc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),tp(t,r,c.vo),l=new Ov(n,r,o),e.abrupt("return",(t.xo.set(n,l),t.ko.has(r)?t.ko.get(r).push(n):t.ko.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mv(e,t){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hs(t),i=r.xo.get(n),!((a=r.ko.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ko.set(i.targetId,a.filter(function(e){return!Bu(e,n)})),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Pf(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Cd(r.remoteStore,i.targetId),Xv(r,i.targetId)}).catch(Jh);case 9:e.next=14;break;case 11:return Xv(r,i.targetId),e.next=14,Pf(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qv(){return(qv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sp(t),e.prev=1,e.next=4,function(e,t){var n,r=hs(e),i=Is.now(),a=t.reduce(function(e,t){return e.add(t.key)},zc());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Qn.Pn(e,a).next(function(a){n=a;var o,u=[],c=s(t);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=mc(l,n.get(l.key));null!=h&&u.push(new wc(l.key,h,lu(h.value.mapValue),fc.exists(!0)))}}catch(f){c.e(f)}finally{c.f()}return r.In.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new Nc(xs)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ip(i,a.changes);case 9:return e.next=11,Hd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=lv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Vv(e,t){return jv.apply(this,arguments)}function jv(){return(jv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),e.prev=1,e.next=4,Rf(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.Fo.get(t);n&&(ls(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Co=!0:e.modifiedDocuments.size>0?ls(n.Co):e.removedDocuments.size>0&&(ls(n.Co),n.Co=!1))}),e.next=8,ip(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Jh(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Bv(e,t,n){var r=hs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.xo.forEach(function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=hs(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,a=s(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.eo(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}}),r&&_v(n)}(r.eventManager,t),i.length&&r.No.Er(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function zv(e,t,n){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=hs(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Fo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Nc(Ws.comparator)).insert(o,hu.newNoDocument(o,As.min())),u=zc().add(o),c=new Kc(As.min(),new Map,new Lc(xs),s,u),e.next=9,Vv(i,c);case 9:i.Oo=i.Oo.remove(o),i.Fo.delete(n),rp(i),e.next=16;break;case 14:return e.next=16,Pf(i.localStore,n,!1).then(function(){return Xv(i,n,r)}).catch(Jh);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gv(e,t){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),i=n.batch.batchId,e.prev=1,e.next=4,Af(r.localStore,n);case 4:return a=e.sent,$v(r,i,null),Jv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ip(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Jh(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Wv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=hs(t),e.prev=1,e.next=4,function(e,t){var n=hs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.In.lookupMutationBatch(e,t).next(function(t){return ls(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,r)})})}(i.localStore,n);case 4:return a=e.sent,$v(i,n,r),Jv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ip(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Jh(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Yv(){return(Yv=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pd((r=hs(t)).remoteStore)||as("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=hs(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.In.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Bo.get(i)||[]).push(n),r.Bo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=lv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function Jv(e,t){(e.Bo.get(t)||[]).forEach(function(e){e.resolve()}),e.Bo.delete(t)}function $v(e,t,n){var r=hs(e),i=r.Lo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function Xv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=s(e.ko.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.xo.delete(a),n&&e.No.jo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(function(t){e.Mo.containsKey(t)||ep(e,t)})}function ep(e,t){e.$o.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(Cd(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),rp(e))}function tp(e,t,n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Av?(e.Mo.addReference(a.key,t),np(e,a)):a instanceof Cv?(as("SyncEngine","Document no longer in limbo: "+a.key),e.Mo.removeReference(a.key,t),e.Mo.containsKey(a.key)||ep(e,a.key)):cs()}}catch(o){i.e(o)}finally{i.f()}}function np(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(as("SyncEngine","New document in limbo: "+n),e.$o.add(r),rp(e))}function rp(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.$o.values().next().value;e.$o.delete(t);var n=new Ws(Ds.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Nv(n)),e.Oo=e.Oo.insert(n,r),Ad(e.remoteStore,new yh(Vu(Pu(n.path)),r,2,ws.T))}}function ip(e,t,n){return ap.apply(this,arguments)}function ap(){return(ap=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=hs(t),a=[],o=[],u=[],e.t0=i.xo.isEmpty(),e.t0){e.next=9;break}return i.xo.forEach(function(e,t){u.push(i.Ko(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=_f.kn(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(u);case 6:return i.No.Er(a),e.next=9,(c=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return ih.forEach(n,function(t){return ih.forEach(t.Nn,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return ih.forEach(t.xn,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ch(e.t0)){e.next=10;break}throw e.t0;case 10:as("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=s(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(c=r.Un.get(u),l=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),r.Un=r.Un.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return c.apply(this,arguments)})(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function op(e,t){return sp.apply(this,arguments)}function sp(){return(sp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=hs(t)).currentUser.isEqual(n)){e.next=12;break}return as("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ef(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,(a=r).Bo.forEach(function(e){e.forEach(function(e){e.reject(new ds(fs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=12,ip(r,i.Wn);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function up(e,t){var n=hs(e),r=n.Fo.get(t);if(r&&r.Co)return zc().add(r.key);var i=zc(),a=n.ko.get(t);if(!a)return i;var o,u=s(a);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=n.xo.get(c);i=i.unionWith(l.view.Eo)}}catch(h){u.e(h)}finally{u.f()}return i}function cp(e,t){return lp.apply(this,arguments)}function lp(){return(lp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),e.next=3,Ff(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.So(i),e.abrupt("return",(r.isPrimaryClient&&tp(r,n.targetId,a.vo),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hp(e){return fp.apply(this,arguments)}function fp(){return(fp=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=hs(t),e.abrupt("return",Mf(n.localStore).then(function(e){return ip(n,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dp(e,t,n,r){return vp.apply(this,arguments)}function vp(){return(vp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=hs(t),e.next=3,function(e,t){var n=hs(e),r=hs(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Xt(e,t).next(function(t){return t?n.Qn.Pn(e,t):ih.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Hd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?($v(a,n,i||null),Jv(a,n),s=n,hs(hs(a.localStore).In).te(s)):cs();case 11:return e.next=13,ip(a,o);case 13:e.next=16;break;case 15:as("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pp(){return(pp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,u,c,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(xp(r=hs(t)),Sp(r),!0!==n||!0===r.qo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,gp(r,i.toArray());case 5:return a=e.sent,r.qo=!0,e.next=9,av(r.remoteStore,!0);case 9:o=s(a);try{for(o.s();!(u=o.n()).done;)c=u.value,Ad(r.remoteStore,c)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.qo){e.next=25;break}return l=[],h=Promise.resolve(),r.ko.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):h=h.then(function(){return Xv(r,t),Pf(r.localStore,t,!0)}),Cd(r.remoteStore,t)}),e.next=19,h;case 19:return e.next=21,gp(r,l);case 21:return function(e){var t=hs(e);t.Fo.forEach(function(e,n){Cd(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new Nc(Ws.comparator)}(r),r.qo=!1,e.next=25,av(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c,l,h,f,d,v,p,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=hs(t),a=[],o=[],u=s(n),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=45;break}if(l=c.value,h=void 0,!(f=i.ko.get(l))||0===f.length){e.next=34;break}return e.next=11,Df(i.localStore,Vu(f[0]));case 11:h=e.sent,d=s(f),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,g=i.xo.get(p),e.next=20,cp(i,g);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Zf(i.localStore,l);case 36:return y=e.sent,e.next=39,Df(i.localStore,y);case 39:return h=e.sent,e.next=42,Fv(i,yp(y),l,!1);case 42:a.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.No.Er(o),a));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function yp(e){return Du(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function kp(e){var t=hs(e);return hs(hs(t.localStore).persistence).pn()}function bp(e,t,n,r){return wp.apply(this,arguments)}function wp(){return(wp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=hs(t)).qo){e.next=5;break}as("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.ko.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Mf(a.localStore);case 11:return o=e.sent,s=Kc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,ip(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Pf(a.localStore,n,!0);case 18:return Xv(a,n,i),e.abrupt("break",21);case 20:cs();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _p(e,t,n){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=xp(t)).qo){e.next=45;break}a=s(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ko.has(u)){e.next=10;break}return as("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Zf(i.localStore,u);case 12:return c=e.sent,e.next=15,Df(i.localStore,c);case 15:return l=e.sent,e.next=18,Fv(i,yp(c),l.targetId,!1);case 18:Ad(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:h=s(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ko.has(t),!e.t0){e.next=5;break}return e.next=5,Pf(i.localStore,t,!1).then(function(){Cd(i.remoteStore,t),Xv(i,t)}).catch(Jh);case 5:case"end":return e.stop()}},e)}),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function xp(e){var t=hs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=up.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zv.bind(null,t),t.No.Er=bv.bind(null,t.eventManager),t.No.jo=wv.bind(null,t.eventManager),t}function Sp(e){var t=hs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wv.bind(null,t),t}var Ep=function(){function e(){f(this,e),this.synchronizeTabs=!1}return h(e,[{key:"initialize",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.N=gd(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.zo(e),t.localStore=t.Ho(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"zo",value:function(e){return null}},{key:"Ho",value:function(e){return Sf(this.persistence,new Tf,e.initialUser,this.N)}},{key:"Go",value:function(e){return new Yf($f.Ns,this.N)}},{key:"Wo",value:function(e){return new ud}},{key:"terminate",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Ip=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Jo=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return h(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,jn.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(w(n.prototype),"initialize",t).call(r,e);case 2:return a.next=4,function(e){return Uf.apply(this,arguments)}(r.localStore);case 4:return a.next=6,r.Jo.initialize(r,e);case 6:return a.next=8,Sp(r.Jo.syncEngine);case 8:return a.next=10,Hd(r.Jo.remoteStore);case 10:return a.next=12,r.persistence.nn(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 12:case"end":return a.stop()}},a)}))()}},{key:"Ho",value:function(e){return Sf(this.persistence,new Tf,e.initialUser,this.N)}},{key:"zo",value:function(e){return new tf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"Go",value:function(e){var t=kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mh.withCacheSize(this.cacheSizeBytes):Mh.DEFAULT;return new gf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vd(),pd(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(e){return new ud}}]),n}(Ep),Ap=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r,!1)).Jo=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return h(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,jn.Z)(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(w(n.prototype),"initialize",t).call(r,e);case 2:if(o=r.Jo.syncEngine,a.t0=r.sharedClientState instanceof sd,!a.t0){a.next=8;break}return r.sharedClientState.syncEngine={_i:dp.bind(null,o),mi:bp.bind(null,o),gi:_p.bind(null,o),pn:kp.bind(null,o),wi:hp.bind(null,o)},a.next=8,r.sharedClientState.start();case 8:return a.next=10,r.persistence.nn(function(){var e=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return pp.apply(this,arguments)}(r.Jo.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):t||r.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return a.stop()}},a)}))()}},{key:"Wo",value:function(e){var t=vd();if(!sd.bt(t))throw new ds(fs.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Ip),Cp=function(){function e(){f(this,e)}return h(e,[{key:"initialize",value:function(e,t){var n=this;return(0,jn.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return Bv(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=op.bind(null,n.syncEngine),r.next=12,av(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new pv}},{key:"createDatastore",value:function(e){var t=gd(e.databaseInfo.databaseId),n=new dd(e.databaseInfo);return new wd(e.credentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Bv(o.syncEngine,e,0)},a=ld.bt()?new ld:new cd,new Td(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new Dv(n,r,i,a,o,s),u&&(c.qo=!0),c;var n,r,i,a,o,s,u,c}},{key:"terminate",value:function(){return(e=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=hs(t),as("RemoteStore","RemoteStore shutting down."),n.Kr.add(5),e.next=5,Ed(n);case 5:n.Qr.shutdown(),n.Wr.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function Rp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,jn.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Op=function(){function e(t){f(this,e),this.observer=t,this.muted=!1}return h(e,[{key:"next",value:function(e){this.observer.next&&this.Yo(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Np=function(){function e(t,n){var r=this;f(this,e),this.Zo=t,this.N=n,this.metadata=new vs,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(function(e){e&&e.ho()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return h(e,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"Qo",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.ea());case 3:case"end":return t.stop()}},t)}))()}},{key:"ea",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.na();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.ta.decode(n),i=Number(r),isNaN(i)&&e.sa("length string (".concat(r,") is not valid number")),t.next=9,e.ia(i);case 9:return a=t.sent,t.abrupt("return",new xv(JSON.parse(a),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"ra",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"na",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ra()<0,!t.t0){t.next=5;break}return t.next=4,e.oa();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.ra())<0&&e.sa("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"ia",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.oa();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.sa("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.ta.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"sa",value:function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"oa",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Zo.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Dp=function(){function e(t){f(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return h(e,[{key:"lookup",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new ds(fs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),i=pl(r.N)+"/documents",a={documents:n.map(function(e){return hl(r.N,e)})},e.next=5,r.Ki("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){ls(!!t.found);var n=fl(e,t.found.name),r=ul(t.found.updateTime),i=new cu({mapValue:{fields:t.found.fields}});return hu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ls(!!t.missing),ls(!!t.readTime);var n=fl(e,t.missing),r=ul(t.readTime);return hu.newNoDocument(n,r)}(e,t):cs()}(r.N,e);s.set(t.key.toString(),t)}),u=[],e.abrupt("return",(n.forEach(function(e){var t=s.get(e.toString());ls(!!t),u.push(t)}),u));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=Ws.fromPath(n);e.mutations.push(new Ac(r,e.precondition(r)))}),t.next=7,(r=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=hs(t),i=pl(r.N)+"/documents",a={writes:n.map(function(e){return kl(r.N,e)})},e.next=3,r.Li("Commit",i,a);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cs();t=As.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ds(fs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?fc.updateTime(t):fc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(As.min()))throw new ds(fs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fc.updateTime(t)}return fc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Pp=function(){function e(t,n,r,i){f(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new md(this.asyncQueue,"transaction_retry")}return h(e,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var e=this;this.rr.Xi((0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Dp(e.datastore),(r=e.ua(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.ha(t)})})}).catch(function(t){e.ha(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"ua",value:function(e){try{var t=this.updateFunction(e);return!Hs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}},{key:"ha",value:function(e){var t=this;this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(function(){return t.ca(),Promise.resolve()})):this.deferred.reject(e)}},{key:"la",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Rc(t)}return!1}}]),e}(),Lp=function(){function e(t,n,r){f(this,e);var i,a=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ts.UNAUTHENTICATED,this.clientId=Ts.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return as("FirestoreClient","Received user=",t.uid),e.next=3,a.credentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}))}return h(e,[{key:"getConfiguration",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ds(fs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,jn.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.credentials.shutdown(),t.resolve(),n.next=17;break;case 13:n.prev=13,n.t2=n.catch(0),r=lv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 17:case"end":return n.stop()}},n,null,[[0,13]])}))),t.promise}}]),e}();function Fp(e,t){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),as("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ef(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,qp(t);case 3:return r=e.sent,as("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return(t=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=hs(t)).asyncQueue.verifyOperationInProgress(),as("RemoteStore","RemoteStore received new credentials"),i=Pd(r),r.Kr.add(3),e.next=6,Ed(r);case 6:return i&&r.Wr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Kr.delete(3),e.next=12,xd(r);case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})(n.remoteStore,e);var t}),t.onlineComponents=n;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qp(e){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return as("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Fp(t,new Ep);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jp(e){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,jn.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return as("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Mp(t,new Cp);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zp(e){return qp(e).then(function(e){return e.persistence})}function Hp(e){return qp(e).then(function(e){return e.localStore})}function Gp(e){return jp(e).then(function(e){return e.remoteStore})}function Kp(e){return jp(e).then(function(e){return e.syncEngine})}function Wp(e){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jp(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Pv.bind(null,n.syncEngine),r.onUnlisten=Mv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new vs;return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Op({next:function(a){t.enqueueAndForget(function(){return yv(e,o)});var s=a.docs.has(n);!s&&a.fromCache?i.reject(new ds(fs.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new ds(fs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Tv(Pu(n.path),a,{includeMetadataChanges:!0,uo:!0});return gv(e,o)},i.next=3,Wp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function Jp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new vs;return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Op({next:function(n){t.enqueueAndForget(function(){return yv(e,o)}),n.fromCache&&"server"===r.source?i.reject(new ds(fs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Tv(n,a,{includeMetadataChanges:!0,uo:!0});return gv(e,o)},i.next=3,Wp(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var $p=function e(t,n,r,i,a,o,s,u){f(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},Xp=function(){function e(t,n){f(this,e),this.projectId=t,this.database=n||"(default)"}return h(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),eg=new Map;function tg(e,t,n){if(!n)throw new ds(fs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ng(e,t,n,r){if(!0===t&&!0===r)throw new ds(fs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function rg(e){if(!Ws.isDocumentKey(e))throw new ds(fs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ig(e){if(Ws.isDocumentKey(e))throw new ds(fs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ag(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":cs()}function og(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ds(fs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ag(e);throw new ds(fs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function sg(e,t){if(t<=0)throw new ds(fs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ug=function(){function e(t){var n;if(f(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ds(fs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ds(fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ng("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return h(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),cg=function(){function e(t,n){f(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ug({}),this._settingsFrozen=!1,t instanceof Xp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ds(fs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xp(e.options.projectId)}(t))}return h(e,[{key:"app",get:function(){if(!this._app)throw new ds(fs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ds(fs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ug(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new gs;switch(e.type){case"gapi":var t=e.client;return ls(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new bs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ds(fs.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=eg.get(e))&&(as("ComponentProvider","Removing Datastore"),eg.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}(),lg=function(){function e(t,n,r){f(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return h(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new fg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),hg=function(){function e(t,n,r){f(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return h(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),fg=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r,Pu(i)))._path=i,a.type="collection",a}return h(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new lg(this.firestore,null,new Ws(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(hg);function dg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Gn.m9)(e),tg("collection","path",t),e instanceof cg){var a=Ds.fromString.apply(Ds,[t].concat(r));return ig(a),new fg(e,null,a)}if(!(e instanceof lg||e instanceof fg))throw new ds(fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ds.fromString.apply(Ds,[t].concat(r)));return ig(o),new fg(e.firestore,null,o)}function vg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Gn.m9)(e),1===arguments.length&&(t=Ts.I()),tg("doc","path",t),e instanceof cg){var a=Ds.fromString.apply(Ds,[t].concat(r));return rg(a),new lg(e,null,new Ws(a))}if(!(e instanceof lg||e instanceof fg))throw new ds(fs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ds.fromString.apply(Ds,[t].concat(r)));return rg(o),new lg(e.firestore,e instanceof fg?e.converter:null,new Ws(o))}function pg(e,t){return e=(0,Gn.m9)(e),t=(0,Gn.m9)(t),(e instanceof lg||e instanceof fg)&&(t instanceof lg||t instanceof fg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gg(e,t){return e=(0,Gn.m9)(e),t=(0,Gn.m9)(t),e instanceof hg&&t instanceof hg&&e.firestore===t.firestore&&Bu(e._query,t._query)&&e.converter===t.converter}var mg=function(){function e(){var t=this;f(this,e),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new md(this,"async_queue_retry"),this.Ta=function(){var e=pd();e&&as("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.tr()};var n=pd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ta)}return h(e,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ea(),this.Ia(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.wa){this.wa=!0,this.ya=e||!1;var t=pd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ea(),this.wa)return new Promise(function(){});var n=new vs;return this.Ia(function(){return t.wa&&t.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.da.push(e),t.Aa()})}},{key:"Aa",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.da.length){t.next=14;break}return t.prev=1,t.next=4,e.da[0]();case 4:e.da.shift(),e.rr.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),ch(t.t0)){t.next=12;break}throw t.t0;case 12:as("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.da.length>0&&e.rr.Xi(function(){return e.Aa()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"Ia",value:function(e){var t=this,n=this.fa.then(function(){return t.ga=!0,e().catch(function(e){throw t.ma=e,t.ga=!1,os("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r}).then(function(e){return t.ga=!1,e})});return this.fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ea(),this.pa.indexOf(e)>-1&&(t=0);var i=cv.createAndSchedule(this,e,t,n,function(e){return r.Ra(e)});return this._a.push(i),i}},{key:"Ea",value:function(){this.ma&&cs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var e=this;return(0,jn.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.fa,t.next=3,n;case 3:if(n!==e.fa){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Pa",value:function(e){var t,n=s(this._a);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"va",value:function(e){var t=this;return this.ba().then(function(){t._a.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=s(t._a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ba()})}},{key:"Va",value:function(e){this.pa.push(e)}},{key:"Ra",value:function(e){var t=this._a.indexOf(e);this._a.splice(t,1)}}]),e}();function yg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var kg=function(){function e(){f(this,e),this._progressObserver={},this._taskCompletionResolver=new vs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return h(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),bg=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new mg,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return h(n,[{key:"_terminate",value:function(){return this._firestoreClient||_g(this),this._firestoreClient.terminate()}}]),n}(cg);function wg(e){return e._firestoreClient||_g(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _g(e){var t,n,r,i=e._freezeSettings(),a=(n=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new $p(e._databaseId,n,e._persistenceKey,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));e._firestoreClient=new Lp(e._credentials,e._queue,a)}function Tg(e,t,n){var r=new vs;return e.asyncQueue.enqueue((0,jn.Z)(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Fp(e,n);case 3:return i.next=5,Mp(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),"FirebaseError"===(a=i.t0).name?a.code===fs.FAILED_PRECONDITION||a.code===fs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function xg(e){if(e._initialized||e._terminated)throw new ds(fs.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sg=function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ds(fs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ls(n)}return h(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Eg=function(){function e(t){f(this,e),this._byteString=t}return h(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Zs.fromBase64String(t))}catch(n){throw new ds(fs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}},{key:"fromUint8Array",value:function(t){return new e(Zs.fromUint8Array(t))}}]),e}(),Ig=function e(t){f(this,e),this._methodName=t},Ag=function(){function e(t,n){if(f(this,e),!isFinite(t)||t<-90||t>90)throw new ds(fs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ds(fs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return h(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xs(this._lat,e._lat)||xs(this._long,e._long)}}]),e}(),Cg=/^__.*__$/,Rg=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}]),e}(),Og=function(){function e(t,n,r){f(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return h(e,[{key:"toMutation",value:function(e,t){return new wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ng(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cs()}}var Dg=function(){function e(t,n,r,i,a,o){f(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Sa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return h(e,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}},{key:"$a",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}},{key:"Oa",value:function(e){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(e){return Xg(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"Sa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ka(this.path.get(e))}},{key:"ka",value:function(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Ng(this.Da)&&Cg.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}]),e}(),Pg=function(){function e(t,n,r){f(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||gd(t)}return h(e,[{key:"Ba",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Dg({Da:e,methodName:t,La:n,path:Ls.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Lg(e){var t=e._freezeSettings(),n=gd(e._databaseId);return new Pg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ba(a.merge||a.mergeFields?2:0,t,n,i);Qg("Data must be an object, but it was:",o,r);var u,c,l=Kg(r,o);if(a.merge)u=new Fs(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){var h,f=[],d=s(a.mergeFields);try{for(d.s();!(h=d.n()).done;){var v=h.value,p=Yg(t,v,n);if(!o.contains(p))throw new ds(fs.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));em(f,p)||f.push(p)}}catch(g){d.e(g)}finally{d.f()}u=new Fs(f),c=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,c=o.fieldTransforms;return new Rg(new cu(l),u,c)}var Zg=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Da)throw e.Fa(1===e.Da?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ig);function Mg(e,t,n){return new Dg({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Ug=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"_toFieldTransform",value:function(e){return new lc(e.path,new nc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ig),qg=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).Ua=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Mg(this,e,!0),n=this.Ua.map(function(e){return Gg(e,t)}),r=new rc(n);return new lc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig),Vg=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).Ua=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=Mg(this,e,!0),n=this.Ua.map(function(e){return Gg(e,t)}),r=new ac(n);return new lc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig),jg=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).qa=r,i}return h(n,[{key:"_toFieldTransform",value:function(e){var t=new sc(e.N,Ju(e.N,this.qa));return new lc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig);function Bg(e,t,n,r){var i=e.Ba(1,t,n);Qg("Data must be an object, but it was:",i,r);var a=[],o=cu.empty();Rs(r,function(e,r){var s=$g(t,e,n);r=(0,Gn.m9)(r);var u=i.$a(s);if(r instanceof Zg)a.push(s);else{var c=Gg(r,u);null!=c&&(a.push(s),o.set(s,c))}});var s=new Fs(a);return new Og(o,s,i.fieldTransforms)}function zg(e,t,n,r,i,a){var o=e.Ba(1,t,n),s=[Yg(t,r,n)],u=[i];if(a.length%2!=0)throw new ds(fs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Yg(t,a[c])),u.push(a[c+1]);for(var l=[],h=cu.empty(),f=s.length-1;f>=0;--f)if(!em(l,s[f])){var d=s[f],v=u[f];v=(0,Gn.m9)(v);var p=o.$a(d);if(v instanceof Zg)l.push(d);else{var g=Gg(v,p);null!=g&&(l.push(d),h.set(d,g))}}var m=new Fs(l);return new Og(h,m,o.fieldTransforms)}function Hg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gg(n,e.Ba(r?4:3,t))}function Gg(e,t){if(Wg(e=(0,Gn.m9)(e)))return Qg("Unsupported field value:",t,e),Kg(e,t);if(e instanceof Ig)return function(e,t){if(!Ng(t.Da))throw t.Fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=s(e);try{for(a.s();!(n=a.n()).done;){var o=Gg(n.value,t.Oa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,Gn.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ju(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Is.fromDate(e);return{timestampValue:al(t.N,n)}}if(e instanceof Is){var r=new Is(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:al(t.N,r)}}if(e instanceof Ag)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Eg)return{bytesValue:ol(t.N,e._byteString)};if(e instanceof lg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:cl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa("Unsupported field value: ".concat(ag(e)))}(e,t)}function Kg(e,t){var n={};return Os(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rs(e,function(e,r){var i=Gg(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Wg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Is||e instanceof Ag||e instanceof Eg||e instanceof lg||e instanceof Ig)}function Qg(e,t,n){if(!Wg(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=ag(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}var i}function Yg(e,t,n){if((t=(0,Gn.m9)(t))instanceof Sg)return t._internalPath;if("string"==typeof t)return $g(e,t);throw Xg("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Jg=new RegExp("[~\\*/\\[\\]]");function $g(e,t,n){if(t.search(Jg)>=0)throw Xg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return y(Sg,a(t.split(".")))._internalPath}catch(r){throw Xg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Xg(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ds(fs.INVALID_ARGUMENT,s+e+u)}function em(e,t){return e.some(function(e){return e.isEqual(t)})}var tm=function(){function e(t,n,r,i,a){f(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return h(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new lg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new nm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(rm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),nm=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){return i(w(n.prototype),"data",this).call(this)}}]),n}(tm);function rm(e,t){return"string"==typeof t?$g(e,t):t instanceof Sg?t._internalPath:t._delegate._internalPath}var im=function(){function e(t,n){f(this,e),this.hasPendingWrites=t,this.fromCache=n}return h(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),am=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o,s){var u;return f(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return h(n,[{key:"exists",value:function(){return i(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new om(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(rm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(tm),om=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(w(n.prototype),"data",this).call(this,e)}}]),n}(am),sm=function(){function e(t,n,r,i){f(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new im(i.hasPendingWrites,i.fromCache),this.query=r}return h(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new om(n._firestore,n._userDataWriter,r.key,r,new im(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ds(fs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new om(e._firestore,e._userDataWriter,t.doc.key,t.doc,new im(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new om(e._firestore,e._userDataWriter,t.doc.key,t.doc,new im(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:um(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function um(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cs()}}function cm(e,t){return e instanceof am&&t instanceof am?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sm&&t instanceof sm&&e._firestore===t._firestore&&gg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function lm(e){if(Fu(e)&&0===e.explicitOrderBy.length)throw new ds(fs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hm=function e(){f(this,e)};function fm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var dm=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).Ka=e,a.ja=r,a.Qa=i,a.type="where",a}return h(n,[{key:"_apply",value:function(e){var t,n,r,i=Lg(e.firestore),a=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ds(fs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){bm(o,a);var c,l=[],h=s(o);try{for(h.s();!(c=h.n()).done;){var f=c.value;l.push(km(r,e,f))}}catch(v){h.e(v)}finally{h.f()}u={arrayValue:{values:l}}}else u=km(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||bm(o,a),u=Hg(n,"where",o,"in"===a||"not-in"===a);var d=mu.create(i,a,u);return function(e,t){if(t.v()){var n=Mu(e);if(null!==n&&!n.isEqual(t.field))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Zu(e);null!==r&&wm(0,t.field,r)}var i=function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(v){r.e(v)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new ds(fs.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,i,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new hg(e.firestore,e.converter,(t=e._query,n=a,r=t.filters.concat([n]),new Nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(hm),vm=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).Ka=e,i.Wa=r,i.type="orderBy",i}return h(n,[{key:"_apply",value:function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new ds(fs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ds(fs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Au(t,n);return function(e,t){if(null===Zu(e)){var n=Mu(e);null!==n&&wm(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new hg(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Nu(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(hm),pm=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ga=r,a.za=i,a}return h(n,[{key:"_apply",value:function(e){return new hg(e.firestore,e.converter,ju(e._query,this.Ga,this.za))}}]),n}(hm),gm=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return h(n,[{key:"_apply",value:function(e){var t,n,r=ym(e,this.type,this.Ha,this.Ja);return new hg(e.firestore,e.converter,(n=r,new Nu((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))}}]),n}(hm),mm=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return h(n,[{key:"_apply",value:function(e){var t,n,r=ym(e,this.type,this.Ha,this.Ja);return new hg(e.firestore,e.converter,(n=r,new Nu((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))}}]),n}(hm);function ym(e,t,n,r){if(n[0]=(0,Gn.m9)(n[0]),n[0]instanceof tm)return function(e,t,n,r,i){if(!r)throw new ds(fs.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=s(qu(e));try{for(u.s();!(a=u.n()).done;){var c=a.value;if(c.field.isKeyField())o.push(nu(t,r.key));else{var l=r.data.field(c.field);if(js(l))throw new ds(fs.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var h=c.field.canonicalString();throw new ds(fs.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new Eu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Lg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ds(fs.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new ds(fs.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Uu(e)&&-1!==c.indexOf("/"))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ds.fromString(c));if(!Ws.isDocumentKey(l))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Ws(l);s.push(nu(t,h))}else{var f=Hg(n,r,c);s.push(f)}}return new Eu(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function km(e,t,n){if("string"==typeof(n=(0,Gn.m9)(n))){if(""===n)throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uu(t)&&-1!==n.indexOf("/"))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ds.fromString(n));if(!Ws.isDocumentKey(r))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return nu(e,new Ws(r))}if(n instanceof lg)return nu(e,n._key);throw new ds(fs.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ag(n),"."))}function bm(e,t){if(!Array.isArray(e)||0===e.length)throw new ds(fs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ds(fs.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function wm(e,t,n){if(!n.isEqual(t))throw new ds(fs.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _m=function(){function e(){f(this,e)}return h(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rs(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Ag(qs(e.latitude),qs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Us(e);return new Is(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ds.fromString(e);ls(Pl(n));var r=new Xp(n.get(1),n.get(3)),i=new Ws(n.popFirst(5));return r.isEqual(t)||os("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Tm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xm=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Eg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lg(this.firestore,null,t)}}]),n}(_m),Sm=function(){function e(t,n){f(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lg(t)}return h(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Em(e,this._firestore),i=Tm(r.converter,t,n),a=Fg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,fc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Em(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Gn.m9)(t))||t instanceof Sg?zg(this._dataReader,"WriteBatch.update",i._key,t,n,o):Bg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,fc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Em(e,this._firestore);return this._mutations=this._mutations.concat(new Ic(t._key,fc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ds(fs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Em(e,t){if((e=(0,Gn.m9)(e)).firestore!==t)throw new ds(fs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Im=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Eg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lg(this.firestore,null,t)}}]),n}(_m);function Am(e,t,n){e=og(e,lg);var r=og(e.firestore,bg),i=Tm(e.converter,t,n);return Om(r,[Fg(Lg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fc.none())])}function Cm(e,t,n){e=og(e,lg);for(var r=og(e.firestore,bg),i=Lg(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Om(r,[("string"==typeof(t=(0,Gn.m9)(t))||t instanceof Sg?zg(i,"updateDoc",e._key,t,n,o):Bg(i,"updateDoc",e._key,t)).toMutation(e._key,fc.exists(!0))])}function Rm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=(0,Gn.m9)(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||yg(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(yg(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof lg)l=og(e.firestore,bg),h=Pu(e._key.path),c={next:function(t){n[u]&&n[u](Nm(l,e,t))},error:n[u+1],complete:n[u+2]};else{var v=og(e,hg);l=og(v.firestore,bg),h=v._query;var p=new Im(l);c={next:function(e){n[u]&&n[u](new sm(l,p,v,e))},error:n[u+1],complete:n[u+2]},lm(e._query)}return function(e,t,n,r){var i=new Op(r),a=new Tv(t,i,n);return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gv,t.next=3,Wp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.Xo(),e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=yv,t.next=3,Wp(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(wg(l),h,f,c)}function Om(e,t){return n=wg(e),r=t,i=new vs,n.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n){return qv.apply(this,arguments)},e.next=3,Kp(n);case 3:return e.t1=e.sent,e.t2=r,e.t3=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}},e)}))),i.promise;var n,r,i}function Nm(e,t,n){var r=n.docs.get(t._key),i=new Im(e);return new am(e,i,t._key,r,new im(n.hasPendingWrites,n.fromCache),t.converter)}var Dm=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r))._firestore=e,i}return h(n,[{key:"get",value:function(e){var t=this,r=Em(e,this._firestore),a=new Im(this._firestore);return i(w(n.prototype),"get",this).call(this,e).then(function(e){return new am(t._firestore,a,r._key,e._document,new im(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){f(this,e),this._firestore=t,this._transaction=n,this._dataReader=Lg(t)}return h(e,[{key:"get",value:function(e){var t=this,n=Em(e,this._firestore),r=new xm(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return cs();var i=e[0];if(i.isFoundDocument())return new tm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new tm(t._firestore,r,n._key,null,n.converter);throw cs()})}},{key:"set",value:function(e,t,n){var r=Em(e,this._firestore),i=Tm(r.converter,t,n),a=Fg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Em(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=(0,Gn.m9)(t))||t instanceof Sg?zg(this._dataReader,"Transaction.update",i._key,t,n,o):Bg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Em(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Pm(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ds("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Lm(){if("undefined"==typeof Uint8Array)throw new ds("unimplemented","Uint8Arrays are not available in this environment.")}function Fm(){if("undefined"==typeof atob)throw new ds("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(e){ns=e})(Bn.SDK_VERSION),(0,Bn._registerComponent)(new zn.wA("firestore",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=new bg(r,new ys(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),i._setSettings(n),i},"PUBLIC")),(0,Bn.registerVersion)(es,"3.1.1",void 0),(0,Bn.registerVersion)(es,"3.1.1","esm2017");var Zm=function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"toBase64",value:function(){return Fm(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Lm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Fm(),new e(Eg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Lm(),new e(Eg.fromUint8Array(t))}}]),e}();function Mm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Um=function(){function e(){f(this,e)}return h(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){xg(e=og(e,bg));var n=wg(e),r=e._freezeSettings(),i=new Cp;return Tg(n,i,new Ip(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){xg(e=og(e,bg));var t=wg(e),n=e._freezeSettings(),r=new Cp;return Tg(t,r,new Ap(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ds(fs.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new vs;return e._queue.enqueueAndForgetEvenWhileRestricted((0,jn.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(oh.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,oh.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(kf(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),qm=function(){function e(t,n,r){var i=this;f(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Xp||(this._appCompat=t)}return h(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ss("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=og(e,cg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ss("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=ts.MOCK_USER;else{o=(0,Gn.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new ds(fs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ts(u)}e._credentials=new ms(new ps(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zp(e);case 2:return n=t.sent,t.next=5,Gp(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),i=void 0,(i=hs(r)).Kr.delete(0),xd(i)));case 7:case"end":return t.stop()}var i},t)})))}(wg(e=og(e,bg)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,jn.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zp(e);case 2:return n=t.sent,t.next=5,Gp(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=hs(t)).Kr.add(0),e.next=4,Ed(n);case 4:n.Wr.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(wg(e=og(e,bg)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&ng("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return t=wg(e=og(e,bg)),n=new vs,t.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){return Yv.apply(this,arguments)},e.next=3,Kp(t);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e)}))),n.promise;var t,n}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Op(t);return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wp(e);case 2:return r=t.sent,i=n,hs(r).Zr.add(i),t.abrupt("return",void i.next());case 6:case"end":return t.stop()}},t)}))),function(){n.Xo(),e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wp(e);case 2:return r=t.sent,i=n,t.abrupt("return",void hs(r).Zr.delete(i));case 5:case"end":return t.stop()}},t)})))}}(wg(e=og(e,bg)),yg(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ds("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ey(this,dg(this._delegate,e))}catch(t){throw Gm(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Hm(this,vg(this._delegate,e))}catch(t){throw Gm(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Jm(this,function(e,t){if(e=og(e,cg),tg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ds(fs.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new hg(e,null,(n=t,new Nu(Ds.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw Gm(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t){return function(e,t){var n=new vs;return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,jp(e).then(function(e){return e.datastore});case 2:i=r.sent,new Pp(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}},r)}))),n.promise}(wg(e),function(n){return t(new Dm(e,n))})}(this._delegate,function(n){return e(new jm(t,n))})}},{key:"batch",value:function(){var e=this;return wg(this._delegate),new Bm(new Sm(this._delegate,function(t){return Om(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=wg(e=og(e,bg)),r=new kg;return function(e,t,n,r){var i,a,o,s=(i=n,a=gd(t),o=function(e,t){if(e instanceof Uint8Array)return Rp(e,t);if(e instanceof ArrayBuffer)return Rp(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new Np(o,a));e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=hs(e);(r=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=hs(e),r=ul(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Je.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith((c=i,{taskState:"Success",documentsLoaded:c.totalDocuments,bytesLoaded:c.totalBytes,totalDocuments:c.totalDocuments,totalBytes:c.totalBytes})));case 10:return r._updateProgress(Iv(i)),a=new Ev(i,t.localStore,n.N),e.next=14,n.Qo();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.fo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Qo();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,ip(t,u.En,void 0);case 30:return e.next=32,function(e,t){var n=hs(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Je.saveBundleMetadata(e,t)})}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),ss("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}},e,null,[[0,35]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(){i.sharedClientState.notifyBundleLoaded()})},t.next=3,Kp(e);case 3:t.t1=t.sent,t.t2=s,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=hs(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Je.getNamedQuery(e,t)})},n.next=3,Hp(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(wg(e=og(e,bg)),t).then(function(t){return t?new hg(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new Jm(t,e):null})}}]),e}(),Vm=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this)).firestore=e,r}return h(n,[{key:"convertBytes",value:function(e){return new Zm(new Eg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Hm.forKey(t,this.firestore,null)}}]),n}(_m),jm=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Vm(t)}return h(e,[{key:"get",value:function(e){var t=this,n=ty(e);return this._delegate.get(n).then(function(e){return new Qm(t._firestore,new am(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=ty(e);return n?(Pm("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=ty(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=ty(e);return this._delegate.delete(t),this}}]),e}(),Bm=function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"set",value:function(e,t,n){var r=ty(e);return n?(Pm("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=ty(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=ty(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),zm=function(){function e(t,n,r){f(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return h(e,[{key:"fromFirestore",value:function(e,t){var n=new om(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ym(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Vm(t),n),i.set(n,a)),a}}]),e}();zm.INSTANCES=new WeakMap;var Hm=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Vm(t)}return h(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ey(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ey(this.firestore,dg(this._delegate,e))}catch(t){throw Gm(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,Gn.m9)(e))instanceof lg&&pg(this._delegate,e)}},{key:"set",value:function(e,t){t=Pm("DocumentReference.set",t);try{return t?Am(this._delegate,e,t):Am(this._delegate,e)}catch(n){throw Gm(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Cm(this._delegate,e):Cm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Gm(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Om(og(e.firestore,bg),[new Ic(e._key,fc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Km(n),a=Wm(n,function(t){return new Qm(e.firestore,new am(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Rm(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=og(e,lg);var t=og(e.firestore,bg),n=wg(t),r=new Im(t);return function(e,t){var n=new vs;return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=hs(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Qn.An(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ds(fs.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=lv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Hp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new am(t,r,e._key,n,new im(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=og(e,lg);var t=og(e.firestore,bg);return Yp(wg(t),e._key,{source:"server"}).then(function(n){return Nm(t,e,n)})}(this._delegate):function(e){e=og(e,lg);var t=og(e.firestore,bg);return Yp(wg(t),e._key).then(function(n){return Nm(t,e,n)})}(this._delegate)).then(function(e){return new Qm(t.firestore,new am(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?zm.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new ds("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new lg(n._delegate,r,new Ws(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new lg(n._delegate,r,t))}}]),e}();function Gm(e,t,n){return e.message=e.message.replace(t,n),e}function Km(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!Mm(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Wm(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Mm(e[0])?e[0]:Mm(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Qm=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"ref",get:function(){return new Hm(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return cm(this._delegate,e._delegate)}}]),e}(),Ym=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cs()}(void 0!==t),t}}]),n}(Qm),Jm=function(){function e(t,n){f(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Vm(t)}return h(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,fm(this._delegate,function(e,t,n){var r=t,i=rm("where",e);return new dm(i,r,n)}(t,n,r)))}catch(i){throw Gm(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,fm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=rm("orderBy",e);return new vm(r,n)}(t,n)))}catch(r){throw Gm(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,fm(this._delegate,function(e){return sg("limit",e),new pm("limit",e,"F")}(t)))}catch(n){throw Gm(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,fm(this._delegate,function(e){return sg("limitToLast",e),new pm("limitToLast",e,"L")}(t)))}catch(n){throw Gm(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,fm(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gm("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw Gm(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,fm(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gm("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw Gm(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,fm(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mm("endBefore",t,!0)}).apply(void 0,arguments)))}catch(t){throw Gm(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,fm(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mm("endAt",t,!1)}).apply(void 0,arguments)))}catch(t){throw Gm(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return gg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=og(e,hg);var t=og(e.firestore,bg),n=wg(t),r=new Im(t);return function(e,t){var n=new vs;return e.asyncQueue.enqueueAndForget((0,jn.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,a,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ff(t,n,!0);case 3:i=e.sent,a=new Rv(n,i.Gn),o=a.Io(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=lv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,Hp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new sm(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=og(e,hg);var t=og(e.firestore,bg),n=wg(t),r=new Im(t);return Jp(n,e._query,{source:"server"}).then(function(n){return new sm(t,r,e,n)})}(this._delegate):function(e){e=og(e,hg);var t=og(e.firestore,bg),n=wg(t),r=new Im(t);return lm(e._query),Jp(n,e._query).then(function(n){return new sm(t,r,e,n)})}(this._delegate)).then(function(e){return new Xm(t.firestore,new sm(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Km(n),a=Wm(n,function(t){return new Xm(e.firestore,new sm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Rm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?zm.getInstance(this.firestore,t):null))}}]),e}(),$m=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ym(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Xm=function(){function e(t,n){f(this,e),this._firestore=t,this._delegate=n}return h(e,[{key:"query",get:function(){return new Jm(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new Ym(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new $m(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new Ym(n._firestore,r))})}},{key:"isEqual",value:function(e){return cm(this._delegate,e._delegate)}}]),e}(),ey=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return h(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Hm(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Hm(this.firestore,void 0===e?vg(this._delegate):vg(this._delegate,e))}catch(t){throw Gm(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=og(e.firestore,bg),r=vg(e),i=Tm(e.converter,t);return Om(n,[Fg(Lg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fc.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new Hm(t.firestore,e)})}},{key:"isEqual",value:function(e){return pg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?zm.getInstance(this.firestore,e):null))}}]),n}(Jm);function ty(e){return og(e,lg)}var ny={Firestore:qm,GeoPoint:Ag,Timestamp:Is,Blob:Zm,Transaction:jm,WriteBatch:Bm,DocumentReference:Hm,DocumentSnapshot:Qm,Query:Jm,QueryDocumentSnapshot:Ym,QuerySnapshot:Xm,CollectionReference:ey,FieldPath:function(){function e(){f(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=y(Sg,n)}return h(e,[{key:"isEqual",value:function(e){return(e=(0,Gn.m9)(e))instanceof Sg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ls.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){f(this,e),this._delegate=t}return h(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Ug("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Zg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qg("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vg("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new jg("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){rs.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new zn.wA("firestore-compat",function(e){return function(e,t){return new qm(e,t,new Um)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},ny)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.4")}(Vn.Z);var ry=o(9765),iy=o(6682),ay=o(309),oy=o(5345);function sy(e,t){return"function"==typeof t?function(n){return n.pipe(sy(function(n,r){return(0,ze.D)(e(n,r)).pipe((0,Ke.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new uy(e))}}var uy=function(){function e(t){f(this,e),this.project=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new cy(e,this.project))}}]),e}(),cy=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return h(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new oy.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,oy.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;(!e||e.closed)&&i(w(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&i(w(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(oy.Ds),ly=o(7771),hy=o(5319),fy=o(7971),dy=o(8858),vy=function(e){d(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return f(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return h(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}i(w(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new py(this._getNow(),e)),this._trimBufferThenGetEvents()),i(w(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new fy.N;if(this.isStopped||this.hasError?t=hy.w.EMPTY:(this.observers.push(e),t=new dy.W(this,e)),i&&e.add(e=new ay.ht(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(var s=0;s<a&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||ly.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r}}]),n}(ry.xQ),py=function e(t,n){f(this,e),this.time=t,this.value=n};function gy(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,u=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new vy(i,o,u),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}var my=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),yy=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),ky=o(9193);function by(e){return function(t){return 0===e?(0,ky.c)():t.lift(new wy(e))}}var wy=function(){function e(t){if(f(this,e),this.total=t,this.total<0)throw new yy}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new _y(e,this.total))}}]),e}(),_y=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(In.L);function Ty(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new xy(e))}}var xy=function(){function e(t){f(this,e),this.defaultValue=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Sy(e,this.defaultValue))}}]),e}(),Sy=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return h(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(In.L);function Ey(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cy;return function(t){return t.lift(new Iy(e))}}var Iy=function(){function e(t){f(this,e),this.errorFactory=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Ay(e,this.errorFactory))}}]),e}(),Ay=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return h(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(In.L);function Cy(){return new my}var Ry=o(4487);function Oy(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Fn(function(t,n){return e(t,n,r)}):Ry.y,by(1),n?Ty(t):Ey(function(){return new my}))}}function Ny(e,t){return t?sy(function(){return e},t):sy(function(){return e})}var Dy=o(3101);o(2329);var Py=new Map,Ly={activated:!1,tokenObservers:[]},Fy={initialized:!1,enabled:!1};function Zy(e){return Py.get(e)||Ly}function My(e,t){Py.set(e,t)}function Uy(){return Fy}var qy=function(){function e(t,n,r,i,a){if(f(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return h(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,jn.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new Gn.BH,n.next=5,function(e){return new Promise(function(t){setTimeout(t,e)})}(t.getNextRun(e));case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new Gn.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),Vy=new Gn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function jy(e){if(!Zy(e).activated)throw Vy.create("use-before-activation",{appName:e.name})}function By(e,t){return zy.apply(this,arguments)}function zy(){return(zy=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.body,a={"Content-Type":"application/json"},(o=n.getImmediate({optional:!0}))&&(a["X-Firebase-Client"]=o.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(i),headers:a},e.prev=4,e.next=7,fetch(r,s);case 7:u=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),Vy.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 13:if(200===u.status){e.next=15;break}throw Vy.create("fetch-status-error",{httpStatus:u.status});case 15:return e.prev=15,e.next=18,u.json();case 18:c=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),Vy.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 24:if((l=c.ttl.match(/^([\d.]+)(s)$/))&&l[2]&&!isNaN(Number(l[1]))){e.next=27;break}throw Vy.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(c.ttl)});case 27:return h=1e3*Number(l[1]),f=Date.now(),e.abrupt("return",{token:c.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f});case 29:case"end":return e.stop()}},e,null,[[4,10],[15,21]])}))).apply(this,arguments)}function Hy(e,t){var n=e.options,r=n.projectId,i=n.appId,a=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(a),body:{debug_token:t}}}var Gy="firebase-app-check-store",Ky=null;function Wy(){return Ky||(Ky=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(Vy.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Gy,{keyPath:"compositeKey"})}}}catch(n){t(Vy.create("storage-open",{originalErrorMessage:n.message}))}}))}function Qy(){return(Qy=(0,jn.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wy();case 2:return r=e.sent.transaction(Gy,"readwrite"),i=r.objectStore(Gy).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(Vy.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Yy=new Hn.Yd("@firebase/app-check");function Jy(e,t){return(0,Gn.hl)()?function(e,t){return function(e,t){return Qy.apply(this,arguments)}(function(e){return"".concat(e.options.appId,"-").concat(e.name)}(e),t)}(e,t).catch(function(e){Yy.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function $y(){return Uy().enabled}function Xy(){return ek.apply(this,arguments)}function ek(){return(ek=(0,jn.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Uy()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tk={error:"UNKNOWN_ERROR"};function nk(e){return Gn.US.encodeString(JSON.stringify(e),!1)}function rk(e){return ik.apply(this,arguments)}function ik(){return(ik=(0,jn.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,u,c,l=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],jy(r=t.app),i=Zy(r),s=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(u=e.sent)&&sk(u)&&(s=u,My(r,Object.assign(Object.assign({},i),{token:s})),ok(r,{token:s.token}));case 10:if(n||!s||!sk(s)){e.next=12;break}return e.abrupt("return",{token:s.token});case 12:if(!$y()){e.next=28;break}return e.t0=By,e.t1=Hy,e.t2=r,e.next=18,Xy();case 18:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5=t.platformLoggerProvider,e.next=23,(0,e.t0)(e.t4,e.t5);case 23:return c=e.sent,e.next=26,Jy(r,c);case 26:return My(r,Object.assign(Object.assign({},i),{token:c})),e.abrupt("return",{token:c.token});case 28:return e.prev=28,e.next=31,i.provider.getToken();case 31:s=e.sent,e.next=37;break;case 34:e.prev=34,e.t6=e.catch(28),Yy.error(e.t6),a=e.t6;case 37:if(!s){e.next=44;break}return o={token:s.token},My(r,Object.assign(Object.assign({},i),{token:s})),e.next=42,Jy(r,s);case 42:e.next=45;break;case 44:o=uk(a);case 45:return ok(r,o),e.abrupt("return",o);case 47:case"end":return e.stop()}},e,null,[[28,34]])}))).apply(this,arguments)}function ak(e,t){var n=Zy(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),My(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function ok(e,t){var n,r=s(Zy(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(a){}}}catch(o){r.e(o)}finally{r.f()}}function sk(e){return e.expireTimeMillis-Date.now()>0}function uk(e){return{token:nk(tk),error:e}}var ck=function(){function e(t,n){f(this,e),this.app=t,this.platformLoggerProvider=n}return h(e,[{key:"_delete",value:function(){var e,t=s(Zy(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;ak(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}(),lk="app-check-internal";(0,Bn._registerComponent)(new zn.wA("app-check",function(e){return function(e,t){return new ck(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(lk).initialize()})),(0,Bn._registerComponent)(new zn.wA(lk,function(e){return function(e){return{getToken:function(t){return rk(e,t)},addTokenListener:function(t){return function(e,t,n,r){var i=e.app,o=Zy(i),s={next:n,error:void 0,type:"INTERNAL"},u=Object.assign(Object.assign({},o),{tokenObservers:[].concat(a(o.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(e){var t=e.app;return new qy((0,jn.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Zy(t).token){n.next=6;break}return n.next=3,rk(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,rk(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=Zy(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),o.token&&sk(o.token)){var l=o.token;Promise.resolve().then(function(){return n({token:l.token})}).catch(function(){})}else null==o.token&&o.cachedTokenPromise.then(function(e){e&&sk(e)&&n({token:e.token})}).catch(function(){});My(i,u)}(e,0,t)},removeTokenListener:function(t){return ak(e.app,t)}}}(e.getProvider("app-check").getImmediate())},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bn.registerVersion)("@firebase/app-check","0.4.2");var hk=function e(){return f(this,e),(0,_n.vb)("app-check")};"undefined"!=typeof window&&window;var fk=o(7841),dk=new u.OlP("angularfire2.auth.use-emulator"),vk=new u.OlP("angularfire2.auth.settings"),pk=new u.OlP("angularfire2.auth.tenant-id"),gk=new u.OlP("angularfire2.auth.langugage-code"),mk=new u.OlP("angularfire2.auth.use-device-language"),yk=new u.OlP("angularfire.auth.persistence"),kk=function(e,n,r,i,o,s,u,c){return(0,qn.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=n.runOutsideAngular(function(){return e.auth()});if(r&&l.useEmulator.apply(l,a(r)),i&&(l.tenantId=i),l.languageCode=o,s&&l.useDeviceLanguage(),u)for(var h=0,f=Object.entries(u);h<f.length;h++){var d=t(f[h],2),v=d[0],p=d[1];l.settings[v]=p}return c&&l.setPersistence(c),l},[r,i,o,s,u,c])},bk=function(){var e=function e(t,n,r,i,a,s,u,c,l,h,d,v){f(this,e);var p=new ry.xQ,g=(0,wn.of)(void 0).pipe((0,ay.QV)(a.outsideAngular),sy(function(){return i.runOutsideAngular(function(){return Promise.resolve().then(o.bind(o,4671))})}),(0,Ke.U)(function(){return(0,qn.on)(t,i,n)}),(0,Ke.U)(function(e){return kk(e,i,s,c,l,h,u,d)}),gy({bufferSize:1,refCount:!1}));if(ue(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wn.of)(null);else{g.pipe(Oy()).subscribe();var m=g.pipe(sy(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),_n.iC,gy({bufferSize:1,refCount:!1})),y=g.pipe(sy(function(e){return new He.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=g.pipe(sy(function(e){return new He.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=m.pipe(Ny(y),(0,Dy.R)(a.outsideAngular),(0,ay.QV)(a.insideAngular)),this.user=m.pipe(Ny(k),(0,Dy.R)(a.outsideAngular),(0,ay.QV)(a.insideAngular)),this.idToken=this.user.pipe(sy(function(e){return e?(0,ze.D)(e.getIdToken()):(0,wn.of)(null)})),this.idTokenResult=this.user.pipe(sy(function(e){return e?(0,ze.D)(e.getIdTokenResult()):(0,wn.of)(null)})),this.credential=(0,iy.T)(m,p,this.authState.pipe(Fn(function(e){return!e}))).pipe((0,Ke.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,Dy.R)(a.outsideAngular),(0,ay.QV)(a.insideAngular))}return(0,qn.pX)(this,g,i,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return p.next(e)})}}})};return e.\u0275fac=function(t){return new(t||e)(u.LFG(qn.Dh),u.LFG(qn.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(dk,8),u.LFG(vk,8),u.LFG(pk,8),u.LFG(gk,8),u.LFG(mk,8),u.LFG(yk,8),u.LFG(hk,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),wk=function(){var e=function e(){f(this,e),fk.Z.registerVersion("angularfire",_n.q4.full,"auth-compat")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[bk]}),e}();function _k(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn.z;return new He.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function Tk(e,t){return _k(e,t).pipe((0,Ke.U)(function(e){return{payload:e,type:"query"}}))}function xk(e,n){return Tk(e,n).pipe(En(void 0),An(),(0,Ke.U)(function(e){var n=t(e,2),r=n[0],i=n[1],a=i.payload.docChanges(),o=a.map(function(e){return{type:e.type,payload:e}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var n=a.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==r?void 0:r.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(e.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||o.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),o}))}function Sk(e,t,n){return xk(e,n).pipe(On(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return Ek(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return Ek(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Ek(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new Pn(void 0,void 0))},(0,Ke.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function Ek(e,t,n){for(var r=e.slice(),i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return r.splice.apply(r,[t,n].concat(a)),r}function Ik(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}var Ak=function(){function n(e,t,r){f(this,n),this.ref=e,this.query=t,this.afs=r}return h(n,[{key:"stateChanges",value:function(e){var n=xk(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ke.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),n.pipe(En(void 0),An(),Fn(function(e){var n=t(e,2),r=n[0];return n[1].length>0||!r}),(0,Ke.U)(function(e){var n=t(e,2);n[0];return n[1]}),_n.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(On(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=Ik(e);return Sk(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Tk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(Object.assign({},n.data()),e({},t.idField,n.id)):n.data()})}),_n.iC)}},{key:"get",value:function(e){return(0,ze.D)(this.query.get(e)).pipe(_n.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new Ck(this.ref.doc(e),this.afs)}}]),n}(),Ck=function(){function n(e,t){f(this,n),this.ref=e,this.afs=t}return h(n,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=Lk(this.ref.collection(e),t),r=n.ref,i=n.query;return new Ak(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return function(e,n){return _k(e,n).pipe(En(void 0),An(),(0,Ke.U)(function(e){var n=t(e,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_n.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,Ke.U)(function(n){var r=n.payload;return t.idField?Object.assign(Object.assign({},r.data()),e({},t.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,ze.D)(this.ref.get(e)).pipe(_n.iC)}}]),n}(),Rk=function(){function t(e,n){f(this,t),this.query=e,this.afs=n}return h(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?xk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Fn(function(e){return e.length>0}),_n.iC):xk(this.query,this.afs.schedulers.outsideAngular).pipe(_n.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(On(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=Ik(e);return Sk(this.query,t,this.afs.schedulers.outsideAngular).pipe(_n.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Tk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(e({},t.idField,n.id),n.data()):n.data()})}),_n.iC)}},{key:"get",value:function(e){return(0,ze.D)(this.query.get(e)).pipe(_n.iC)}}]),t}(),Ok=new u.OlP("angularfire2.enableFirestorePersistence"),Nk=new u.OlP("angularfire2.firestore.persistenceSettings"),Dk=new u.OlP("angularfire2.firestore.settings"),Pk=new u.OlP("angularfire2.firestore.use-emulator");function Lk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var Fk=function(){var e=function(){function e(n,r,i,o,s,u,c,l,h,d,v,p,g,m,y,k,b){var w;f(this,e),this.schedulers=c;var _=(0,qn.on)(n,u,r),T=h;d&&kk(_,u,v,g,m,y,p,k),w=t((0,qn.cc)("".concat(_.name,".firestore"),"AngularFirestore",_.name,function(){var e=u.runOutsideAngular(function(){return _.firestore()});if(o&&e.settings(o),T&&e.useEmulator.apply(e,a(T)),i&&!ue(s)){return[e,u.runOutsideAngular(function(){try{return(0,ze.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,wn.of)(!1)}})]}return[e,(0,wn.of)(!1)]},[o,T,i]),2),this.firestore=w[0],this.persistenceEnabled$=w[1]}return h(e,[{key:"collection",value:function(e,t){var n=Lk("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,a=this.schedulers.ngZone.run(function(){return r});return new Ak(a,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new Rk(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new Ck(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(qn.Dh),u.LFG(qn.xv,8),u.LFG(Ok,8),u.LFG(Dk,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_n.HU),u.LFG(Nk,8),u.LFG(Pk,8),u.LFG(bk,8),u.LFG(dk,8),u.LFG(vk,8),u.LFG(pk,8),u.LFG(gk,8),u.LFG(mk,8),u.LFG(yk,8),u.LFG(hk,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),Zk=function(){var e=function(){function e(t){f(this,e),this.firestore=t}return h(e,[{key:"getLaboratorios",value:function(){return this.firestore.collection("laboratorios",function(e){return e.orderBy("nombre")}).valueChanges({idField:"id"})}},{key:"getCategorias",value:function(){return this.firestore.collection("categoria",function(e){return e.orderBy("descripcion")}).valueChanges({idField:"id"})}},{key:"getProductos",value:function(){return this.firestore.collection("productos",function(e){return e.orderBy("generico")}).valueChanges({idField:"id"})}},{key:"getComprasCabecera",value:function(){return this.firestore.collection("compras-cabecera").valueChanges()}},{key:"getCompras",value:function(){return this.firestore.collection("compras",function(e){return e.orderBy("orden","desc")}).valueChanges({idField:"id"})}},{key:"getVentasCabecera",value:function(){return this.firestore.collection("ventas-cabecera").valueChanges()}},{key:"getVentas",value:function(){return this.firestore.collection("ventas",function(e){return e.orderBy("orden","desc")}).valueChanges({idField:"id"})}},{key:"getComprasProducto",value:function(e){return this.firestore.collection("compras",function(t){return t.where("id","==",e).orderBy("fecha","desc")}).snapshotChanges()}},{key:"getVentasProducto",value:function(e){return this.firestore.collection("ventas",function(t){return t.where("id","==",e).orderBy("fecha","desc")}).snapshotChanges()}},{key:"getProducto",value:function(e){return this.firestore.collection("productos").doc(e).valueChanges({idField:"id"})}},{key:"saveProducto",value:function(e){this.firestore.collection("productos").add(e)}},{key:"saveCompraCabecera",value:function(e){this.firestore.collection("compras-cabecera").add(e)}},{key:"saveCompra",value:function(e){this.firestore.collection("compras").add(e)}},{key:"saveVentaCabecera",value:function(e){this.firestore.collection("ventas-cabecera").add(e)}},{key:"saveVenta",value:function(e){this.firestore.collection("ventas").add(e)}},{key:"saveCategoria",value:function(e){this.firestore.collection("categoria").add(e)}},{key:"saveLaboratorio",value:function(e){this.firestore.collection("laboratorios").add(e)}},{key:"updateProducto",value:function(e,t){this.firestore.collection("productos").doc(e).update(t)}},{key:"deleteProducto",value:function(e){this.firestore.collection("productos").doc(e).delete()}},{key:"deleteCompra",value:function(e){this.firestore.collection("compras").doc(e).delete()}},{key:"deleteVenta",value:function(e){this.firestore.collection("ventas").doc(e).delete()}},{key:"deleteCategoria",value:function(e){this.firestore.collection("categoria").doc(e).delete()}},{key:"deleteLaboratorio",value:function(e){this.firestore.collection("laboratorios").doc(e).delete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(Fk))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Mk=function e(){f(this,e)},Uk="*";function qk(e,t){return{type:7,name:e,definitions:t,options:{}}}function Vk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function jk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function Bk(e){return{type:6,styles:e,offset:null}}function zk(e,t,n){return{type:0,name:e,styles:t,options:n}}function Hk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:e,animation:t,options:n}}function Gk(e){Promise.resolve(null).then(e)}var Kk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;f(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;Gk(function(){return e._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this._started=!1}},{key:"setPosition",value:function(e){this._position=this.totalTime?e*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),Wk=function(){function e(t){var n=this;f(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,i=0,a=0,o=this.players.length;0==o?Gk(function(){return n._onFinish()}):this.players.forEach(function(e){e.onDone(function(){++r==o&&n._onFinish()}),e.onDestroy(function(){++i==o&&n._onDestroy()}),e.onStart(function(){++a==o&&n._onStart()})}),this.totalTime=this.players.reduce(function(e,t){return Math.max(e,t.totalTime)},0)}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(e){return e.init()})}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(e){return e.play()})}},{key:"pause",value:function(){this.players.forEach(function(e){return e.pause()})}},{key:"restart",value:function(){this.players.forEach(function(e){return e.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(e){return e.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(e){return e.destroy()}),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(e){return e.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach(function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}},{key:"getPosition",value:function(){var e=this.players.reduce(function(e,t){return null===e||t.totalTime>e.totalTime?t:e},null);return null!=e?e.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(e){e.beforeDestroy&&e.beforeDestroy()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),Qk=["toast-component",""];function Yk(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().remove()}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA(),u.qZA()}}function Jk(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){var n=u.oxw(2);u.xp6(1),u.hij("[",n.duplicatesCount+1,"]")}}function $k(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,Jk,2,1,"ng-container",4),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.titleClass),u.uIk("aria-label",n.title),u.xp6(1),u.hij(" ",n.title," "),u.xp6(1),u.Q6J("ngIf",n.duplicatesCount)}}function Xk(e,t){if(1&e&&u._UZ(0,"div",7),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.Q6J("innerHTML",n.message,u.oJD)}}function eb(e,t){if(1&e&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.uIk("aria-label",n.message),u.xp6(1),u.hij(" ",n.message," ")}}function tb(e,t){if(1&e&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Udp("width",n.width+"%")}}function nb(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){return u.CHM(n),u.oxw().remove()}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA(),u.qZA()}}function rb(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){var n=u.oxw(2);u.xp6(1),u.hij("[",n.duplicatesCount+1,"]")}}function ib(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,rb,2,1,"ng-container",4),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.titleClass),u.uIk("aria-label",n.title),u.xp6(1),u.hij(" ",n.title," "),u.xp6(1),u.Q6J("ngIf",n.duplicatesCount)}}function ab(e,t){if(1&e&&u._UZ(0,"div",7),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.Q6J("innerHTML",n.message,u.oJD)}}function ob(e,t){if(1&e&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&e){var n=u.oxw();u.Tol(n.options.messageClass),u.uIk("aria-label",n.message),u.xp6(1),u.hij(" ",n.message," ")}}function sb(e,t){if(1&e&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Udp("width",n.width+"%")}}var ub=function(){function e(t,n,r,i,a,o){var s=this;f(this,e),this.toastId=t,this.config=n,this.message=r,this.title=i,this.toastType=a,this.toastRef=o,this._onTap=new ry.xQ,this._onAction=new ry.xQ,this.toastRef.afterClosed().subscribe(function(){s._onAction.complete(),s._onTap.complete()})}return h(e,[{key:"triggerTap",value:function(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}},{key:"onTap",value:function(){return this._onTap.asObservable()}},{key:"triggerAction",value:function(e){this._onAction.next(e)}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),cb={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},lb=new u.OlP("ToastConfig"),hb=function(){function e(t,n){f(this,e),this.component=t,this.injector=n}return h(e,[{key:"attach",value:function(e,t){return this._attachedHost=e,e.attach(this,t)}},{key:"detach",value:function(){var e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}}]),e}(),fb=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this))._hostDomElement=e,a._componentFactoryResolver=r,a._appRef=i,a}return h(n,[{key:"attachComponentPortal",value:function(e,t){var n,r=this,i=this._componentFactoryResolver.resolveComponentFactory(e.component);return n=i.create(e.injector),this._appRef.attachView(n.hostView),this.setDisposeFn(function(){r._appRef.detachView(n.hostView),n.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(n),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(n)),n}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),n}(function(){function e(){f(this,e)}return h(e,[{key:"attach",value:function(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}},{key:"detach",value:function(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}}]),e}()),db=function(){var e=function(){function e(t){f(this,e),this._document=t}return h(e,[{key:"ngOnDestroy",value:function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var e=this._document.createElement("div");e.classList.add("overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(k))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(k))},token:e,providedIn:"root"}),e}(),vb=function(){function e(t){f(this,e),this._portalHost=t}return h(e,[{key:"attach",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._portalHost.attach(e,t)}},{key:"detach",value:function(){return this._portalHost.detach()}}]),e}(),pb=function(){var e=function(){function e(t,n,r,i){f(this,e),this._overlayContainer=t,this._componentFactoryResolver=n,this._appRef=r,this._document=i,this._paneElements=new Map}return h(e,[{key:"create",value:function(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}},{key:"getPaneElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}},{key:"_createPaneElement",value:function(e,t){var n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}},{key:"_createPortalHost",value:function(e){return new fb(e,this._componentFactoryResolver,this._appRef)}},{key:"_createOverlayRef",value:function(e){return new vb(this._createPortalHost(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(db),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(k))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(db),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(k))},token:e,providedIn:"root"}),e}(),gb=function(){function e(t){f(this,e),this._overlayRef=t,this.duplicatesCount=0,this._afterClosed=new ry.xQ,this._activate=new ry.xQ,this._manualClose=new ry.xQ,this._resetTimeout=new ry.xQ,this._countDuplicate=new ry.xQ}return h(e,[{key:"manualClose",value:function(){this._manualClose.next(),this._manualClose.complete()}},{key:"manualClosed",value:function(){return this._manualClose.asObservable()}},{key:"timeoutReset",value:function(){return this._resetTimeout.asObservable()}},{key:"countDuplicate",value:function(){return this._countDuplicate.asObservable()}},{key:"close",value:function(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}},{key:"afterClosed",value:function(){return this._afterClosed.asObservable()}},{key:"isInactive",value:function(){return this._activate.isStopped}},{key:"activate",value:function(){this._activate.next(),this._activate.complete()}},{key:"afterActivate",value:function(){return this._activate.asObservable()}},{key:"onDuplicate",value:function(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}]),e}(),mb=function(){function e(t,n){f(this,e),this._toastPackage=t,this._parentInjector=n}return h(e,[{key:"get",value:function(e,t,n){return e===ub?this._toastPackage:this._parentInjector.get(e,t,n)}}]),e}(),yb=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.overlay=n,this._injector=r,this.sanitizer=i,this.ngZone=a,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}return h(e,[{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this._preBuildNotification(r,e,t,this.applyConfig(n))}},{key:"success",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,t,this.applyConfig(n))}},{key:"error",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,t,this.applyConfig(n))}},{key:"info",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,t,this.applyConfig(n))}},{key:"warning",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,t,this.applyConfig(n))}},{key:"clear",value:function(e){var t,n=s(this.toasts);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(void 0!==e){if(r.toastId===e)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}}catch(i){n.e(i)}finally{n.f()}}},{key:"remove",value:function(e){var t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){var n=this.toasts[this.currentlyActive].toastRef;n.isInactive()||(this.currentlyActive=this.currentlyActive+1,n.activate())}return!0}},{key:"findDuplicate",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=this.toastrConfig.includeTitleDuplicates,o=s(this.toasts);try{for(o.s();!(e=o.n()).done;){var u=e.value,c=a&&u.title===t;if((!a||c)&&u.message===n)return u.toastRef.onDuplicate(r,i),u}}catch(l){o.e(l)}finally{o.f()}return null}},{key:"applyConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.toastrConfig),e)}},{key:"_findToast",value:function(e){for(var t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}},{key:"_preBuildNotification",value:function(e,t,n,r){var i=this;return r.onActivateTick?this.ngZone.run(function(){return i._buildNotification(e,t,n,r)}):this._buildNotification(e,t,n,r)}},{key:"_buildNotification",value:function(e,t,n,r){if(!r.toastComponent)throw new Error("toastComponent required");var i=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&null!==i)return i;this.previousToastMessage=t;var a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));var o=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;var s=t;t&&r.enableHtml&&(s=this.sanitizer.sanitize(u.q3G.HTML,t));var c=new gb(o),l=new ub(this.index,r,s,n,e,c),h=new mb(l,this._injector),f=new hb(r.toastComponent,h),d=o.attach(f,this.toastrConfig.newestOnTop);c.componentInstance=d.instance;var v={toastId:this.index,title:n||"",message:t||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:d};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(function(){v.toastRef.activate()})),this.toasts.push(v),v}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(lb),u.LFG(pb),u.LFG(u.zs3),u.LFG(Ue),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(lb),u.LFG(pb),u.LFG(u.gxx),u.LFG(Ue),u.LFG(u.R0b))},token:e,providedIn:"root"}),e}(),kb=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.toastrService=t,this.toastPackage=n,this.ngZone=r,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses="".concat(n.toastType," ").concat(n.config.toastClass),this.sub=n.toastRef.afterActivate().subscribe(function(){i.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(function(){i.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(function(){i.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(function(e){i.duplicatesCount=e})}return h(e,[{key:"displayStyle",get:function(){if("inactive"===this.state.value)return"none"}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}},{key:"activateToast",value:function(){var e=this;this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(function(){return e.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10))}},{key:"updateProgress",value:function(){if(0!==this.width&&100!==this.width&&this.options.timeOut){var e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(function(){return e.remove()},this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10)}},{key:"remove",value:function(){var e=this;"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(function(){return e.toastrService.remove(e.toastPackage.toastId)},+this.toastPackage.config.easeTime))}},{key:"tapToast",value:function(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}},{key:"stickAround",value:function(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}},{key:"delayedHideToast",value:function(){var e=this;!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(function(){return e.remove()},this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(function(){return e.updateProgress()},10))}},{key:"outsideTimeout",value:function(e,t){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.timeout=setTimeout(function(){return n.runInsideAngular(e)},t)}):this.timeout=setTimeout(function(){return e()},t)}},{key:"outsideInterval",value:function(e,t){var n=this;this.ngZone?this.ngZone.runOutsideAngular(function(){return n.intervalId=setInterval(function(){return n.runInsideAngular(e)},t)}):this.intervalId=setInterval(function(){return e()},t)}},{key:"runInsideAngular",value:function(e){this.ngZone?this.ngZone.run(function(){return e()}):e()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(yb),u.Y36(ub),u.Y36(u.R0b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(u.d8E("@flyInOut",t.state),u.Tol(t.toastClasses),u.Udp("display",t.displayStyle))},attrs:Qk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(u.YNc(0,Yk,3,0,"button",0),u.YNc(1,$k,3,5,"div",1),u.YNc(2,Xk,1,3,"div",2),u.YNc(3,eb,2,4,"div",3),u.YNc(4,tb,2,2,"div",4)),2&e&&(u.Q6J("ngIf",t.options.closeButton),u.xp6(1),u.Q6J("ngIf",t.title),u.xp6(1),u.Q6J("ngIf",t.message&&t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.message&&!t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.options.progressBar))},directives:[$],encapsulation:2,data:{animation:[qk("flyInOut",[zk("inactive",Bk({opacity:0})),zk("active",Bk({opacity:1})),zk("removed",Bk({opacity:0})),Hk("inactive => active",Vk("{{ easeTime }}ms {{ easing }}")),Hk("active => removed",Vk("{{ easeTime }}ms {{ easing }}"))])]}}),e}(),bb=Object.assign(Object.assign({},cb),{toastComponent:kb}),wb=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[{provide:lb,useValue:{default:bb,config:t}}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[se]]}),e}(),_b=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.toastrService=t,this.toastPackage=n,this.appRef=r,this.width=-1,this.toastClasses="",this.state="inactive",this.message=n.message,this.title=n.title,this.options=n.config,this.originalTimeout=n.config.timeOut,this.toastClasses="".concat(n.toastType," ").concat(n.config.toastClass),this.sub=n.toastRef.afterActivate().subscribe(function(){i.activateToast()}),this.sub1=n.toastRef.manualClosed().subscribe(function(){i.remove()}),this.sub2=n.toastRef.timeoutReset().subscribe(function(){i.resetTimeout()}),this.sub3=n.toastRef.countDuplicate().subscribe(function(e){i.duplicatesCount=e})}return h(e,[{key:"displayStyle",get:function(){if("inactive"===this.state)return"none"}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}},{key:"activateToast",value:function(){var e=this;this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(function(){e.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10))),this.options.onActivateTick&&this.appRef.tick()}},{key:"updateProgress",value:function(){if(0!==this.width&&100!==this.width&&this.options.timeOut){var e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(function(){return e.remove()},this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10))}},{key:"remove",value:function(){var e=this;"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(function(){return e.toastrService.remove(e.toastPackage.toastId)}))}},{key:"tapToast",value:function(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}},{key:"stickAround",value:function(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}},{key:"delayedHideToast",value:function(){var e=this;!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(function(){return e.remove()},this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(function(){return e.updateProgress()},10)))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(yb),u.Y36(ub),u.Y36(u.z2F))},e.\u0275cmp=u.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(u.Tol(t.toastClasses),u.Udp("display",t.displayStyle))},attrs:Qk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(u.YNc(0,nb,3,0,"button",0),u.YNc(1,ib,3,5,"div",1),u.YNc(2,ab,1,3,"div",2),u.YNc(3,ob,2,4,"div",3),u.YNc(4,sb,2,2,"div",4)),2&e&&(u.Q6J("ngIf",t.options.closeButton),u.xp6(1),u.Q6J("ngIf",t.title),u.xp6(1),u.Q6J("ngIf",t.message&&t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.message&&!t.options.enableHtml),u.xp6(1),u.Q6J("ngIf",t.options.progressBar))},directives:[$],encapsulation:2}),e}();function Tb(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u.TgZ(6,"button",19),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().deleteCategoria(e.id)}),u._uU(7,"Eliminar"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.index,i=t.$implicit;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.descripcion)}}function xb(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u.TgZ(6,"button",19),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().deleteLaboratorio(e.id)}),u._uU(7,"Eliminar"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.index,i=t.$implicit;u.xp6(2),u.Oqu(r+1),u.xp6(2),u.Oqu(i.nombre)}}Object.assign(Object.assign({},cb),{toastComponent:_b});var Sb=function(){var e=function(){function e(t,n,r){f(this,e),this._inventario=t,this.formBuilder=n,this.toastr=r,this.labelAccion="Agregar categor\xeda",this.labelLaboratorio="Agregar laboratorio",this.categoriaForm=this.formBuilder.group({descripcion:["",ct.required]}),this.laboratorioForm=this.formBuilder.group({nombre:["",ct.required]}),this.categorias=t.getCategorias(),this.laboratorios=t.getLaboratorios()}return h(e,[{key:"ngOnInit",value:function(){}},{key:"saveCategoria",value:function(){this.categoriaForm.invalid?this.toastr.error("Todos los campos son requeridos","Ha ocurrido un error"):(this._inventario.saveCategoria(this.categoriaForm.value),this.toastr.success("Categor\xeda guardada correctamente","Operaci\xf3n exitosa"),this.categoriaForm.reset())}},{key:"deleteCategoria",value:function(e){this._inventario.deleteCategoria(e),this.toastr.success("Categoria eliminada","Operaci\xf3n exitosa")}},{key:"saveLaboratorio",value:function(){this.laboratorioForm.invalid?this.toastr.error("Todos los campos son requeridos","Ha ocurrido un error"):(this._inventario.saveLaboratorio(this.laboratorioForm.value),this.toastr.success("Laboratorio guardado correctamente","Operaci\xf3n exitosa"),this.laboratorioForm.reset())}},{key:"deleteLaboratorio",value:function(e){this._inventario.deleteLaboratorio(e),this.toastr.success("Laboratorio eliminado","Operaci\xf3n exitosa")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(kn),u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-parametricas"]],decls:57,vars:10,consts:[[1,"row"],[1,"card","col-md-6"],[1,"card-body"],[1,"card"],["autocomplete","off",3,"formGroup"],[1,"form-group","col-sm-12"],["for","descripcion"],["type","text","id","descripcion","oninput","this.value = this.value.toUpperCase()","formControlName","descripcion",1,"form-control"],[1,"col-sm-2"],["type","button",1,"btn","btn-success","btn-sm","saveButton",3,"click"],[1,"table-responsive","mt-2"],[1,"table"],[1,"thead"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],[1,"card","col-sm-6"],["for","nombre"],["type","text","id","nombre","oninput","this.value = this.value.toUpperCase()","formControlName","nombre",1,"form-control"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1"),u._uU(4,"Categorias"),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"div",2),u.TgZ(7,"form",4),u.TgZ(8,"div",0),u.TgZ(9,"div",5),u.TgZ(10,"label",6),u._uU(11),u.qZA(),u._UZ(12,"input",7),u.qZA(),u.TgZ(13,"div",8),u.TgZ(14,"button",9),u.NdJ("click",function(){return t.saveCategoria()}),u._uU(15,"Guardar"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",10),u.TgZ(17,"table",11),u.TgZ(18,"thead",12),u.TgZ(19,"tr"),u.TgZ(20,"th",13),u._uU(21,"#"),u.qZA(),u.TgZ(22,"th",13),u._uU(23,"CATEGORIA"),u.qZA(),u.TgZ(24,"th",13),u._uU(25,"OPCIONES"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"tbody",14),u.YNc(27,Tb,8,2,"tr",15),u.ALo(28,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div",16),u.TgZ(30,"div",2),u.TgZ(31,"h1"),u._uU(32,"Laboratorios"),u.qZA(),u.TgZ(33,"div",3),u.TgZ(34,"div",2),u.TgZ(35,"form",4),u.TgZ(36,"div",0),u.TgZ(37,"div",5),u.TgZ(38,"label",17),u._uU(39),u.qZA(),u._UZ(40,"input",18),u.qZA(),u.TgZ(41,"div",8),u.TgZ(42,"button",9),u.NdJ("click",function(){return t.saveLaboratorio()}),u._uU(43,"Guardar"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"div",10),u.TgZ(45,"table",11),u.TgZ(46,"thead",12),u.TgZ(47,"tr"),u.TgZ(48,"th",13),u._uU(49,"#"),u.qZA(),u.TgZ(50,"th",13),u._uU(51,"LABORATORIO"),u.qZA(),u.TgZ(52,"th",13),u._uU(53,"OPCIONES"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(54,"tbody",14),u.YNc(55,xb,8,2,"tr",15),u.ALo(56,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("formGroup",t.categoriaForm),u.xp6(4),u.Oqu(t.labelAccion),u.xp6(16),u.Q6J("ngForOf",u.lcZ(28,6,t.categorias)),u.xp6(8),u.Q6J("formGroup",t.laboratorioForm),u.xp6(4),u.Oqu(t.labelLaboratorio),u.xp6(16),u.Q6J("ngForOf",u.lcZ(56,8,t.laboratorios)))},directives:[Xt,Nt,on,rt,Ot,un,Y],pipes:[ae],styles:[""]}),e}(),Eb=function(){var e=function(){function e(t){f(this,e),this.afa=t}return h(e,[{key:"signInWithEmail",value:function(e,t){return this.afa.signInWithEmailAndPassword(e,t)}},{key:"saveLocalData",value:function(e,t){localStorage.setItem(e,t)}},{key:"getLocalData",value:function(e){return localStorage.getItem(e)}},{key:"clearLocalStorage",value:function(){localStorage.clear()}},{key:"getStatus",value:function(){return localStorage.getItem("status")}},{key:"saveStatus",value:function(e){localStorage.setItem("status",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(bk))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ib=function(){var e=function(){function e(t){f(this,e),this.af=t}return h(e,[{key:"getUsuarioPorEmail",value:function(e){return this.af.collection("usuarios",function(t){return t.where("email","==",e)}).valueChanges({idField:"id"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(Fk))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ab=function(e){d(n,e);var t=v(n);function n(e){var r;return f(this,n),(r=t.call(this))._value=e,r}return h(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=i(w(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fy.N;return this._value}},{key:"next",value:function(e){i(w(n.prototype),"next",this).call(this,this._value=e)}}]),n}(ry.xQ),Cb=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(In.L),Rb=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this)).parent=e,a.outerValue=r,a.outerIndex=i,a.index=0,a}return h(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(In.L),Ob=o(7444);function Nb(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Rb(e,n,r);if(!i.closed)return t instanceof He.y?t.subscribe(i):(0,Ob.s)(t)(i)}var Db=o(6693),Pb={},Lb=function(){function e(t){f(this,e),this.resultSelector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Fb(e,this.resultSelector))}}]),e}(),Fb=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return h(n,[{key:"_next",value:function(e){this.values.push(Pb),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(Nb(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===Pb?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Cb);function Zb(e){return new He.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,ze.D)(n):(0,ky.c)()).subscribe(t)})}var Mb=o(2441);function Ub(e){return function(t){var n=new qb(e),r=t.lift(n);return n.caught=r}}var qb=function(){function e(t){f(this,e),this.selector=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Vb(e,this.selector,this.caught))}}]),e}(),Vb=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return h(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(o){return void i(w(n.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new oy.IY(this);this.add(r);var a=(0,oy.ft)(t,r);a!==r&&this.add(a)}}}]),n}(oy.Ds),jb=o(9773);function Bb(e,t){return(0,jb.zg)(e,t,1)}function zb(e){return function(t){return 0===e?(0,ky.c)():t.lift(new Hb(e))}}var Hb=function(){function e(t){if(f(this,e),this.total=t,this.total<0)throw new yy}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Gb(e,this.total))}}]),e}(),Gb=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return h(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(In.L),Kb=o(3342),Wb=o(1307),Qb=function(){function e(t){f(this,e),this.callback=t}return h(e,[{key:"call",value:function(e,t){return t.subscribe(new Yb(e,this.callback))}}]),e}(),Yb=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).add(new hy.w(r)),i}return n}(In.L),Jb=function e(t,n){f(this,e),this.id=t,this.url=n},$b=function(e){d(n,e);var t=v(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return h(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Jb),Xb=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return h(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Jb),ew=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).reason=i,a}return h(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Jb),tw=function(e){d(n,e);var t=v(n);function n(e,r,i){var a;return f(this,n),(a=t.call(this,e,r)).error=i,a}return h(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Jb),nw=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Jb),rw=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Jb),iw=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o){var s;return f(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return h(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Jb),aw=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Jb),ow=function(e){d(n,e);var t=v(n);function n(e,r,i,a){var o;return f(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return h(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Jb),sw=function(){function e(t){f(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),uw=function(){function e(t){f(this,e),this.route=t}return h(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),cw=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),lw=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),hw=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),fw=function(){function e(t){f(this,e),this.snapshot=t}return h(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),dw=function(){function e(t,n,r){f(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return h(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),vw="primary",pw=function(){function e(t){f(this,e),this.params=t||{}}return h(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function gw(e){return new pw(e)}var mw="ngNavigationCancelingError";function yw(e){var t=Error("NavigationCancelingError: "+e);return t[mw]=!0,t}function kw(e,t,n){var r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=e[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function bw(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!ww(e[n=r[a]],t[n]))return!1;return!0}function ww(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=a(e).sort(),r=a(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function _w(e){return Array.prototype.concat.apply([],e)}function Tw(e){return e.length>0?e[e.length-1]:null}function xw(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Sw(e){return(0,u.CqO)(e)?e:(0,u.QGY)(e)?(0,ze.D)(Promise.resolve(e)):(0,wn.of)(e)}var Ew={exact:function e(t,n,r){if(!Lw(t.segments,n.segments)||!Ow(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:Cw},Iw={exact:function(e,t){return bw(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return ww(e[n],t[n])})},ignored:function(){return!0}};function Aw(e,t,n){return Ew[n.paths](e.root,t.root,n.matrixParams)&&Iw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Cw(e,t,n){return Rw(e,t,t.segments,n)}function Rw(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!(!Lw(i,n)||t.hasChildren()||!Ow(i,n,r))}if(e.segments.length===n.length){if(!Lw(e.segments,n)||!Ow(e.segments,n,r))return!1;for(var a in t.children)if(!e.children[a]||!Cw(e.children[a],t.children[a],r))return!1;return!0}var o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(Lw(e.segments,o)&&Ow(e.segments,o,r)&&e.children[vw])&&Rw(e.children[vw],t,s,r)}function Ow(e,t,n){return t.every(function(t,r){return Iw[n](e[r].parameters,t.parameters)})}var Nw=function(){function e(t,n,r){f(this,e),this.root=t,this.queryParams=n,this.fragment=r}return h(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=gw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Mw.serialize(this)}}]),e}(),Dw=function(){function e(t,n){var r=this;f(this,e),this.segments=t,this.children=n,this.parent=null,xw(n,function(e,t){return e.parent=r})}return h(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Uw(this)}}]),e}(),Pw=function(){function e(t,n){f(this,e),this.path=t,this.parameters=n}return h(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=gw(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Gw(this)}}]),e}();function Lw(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var Fw=function e(){f(this,e)},Zw=function(){function e(){f(this,e)}return h(e,[{key:"parse",value:function(e){var t=new Jw(e);return new Nw(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){return"".concat("/".concat(qw(e.root,!0)),function(e){var t=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(jw(t),"=").concat(jw(e))}).join("&"):"".concat(jw(t),"=").concat(jw(n))}).filter(function(e){return!!e});return t.length?"?".concat(t.join("&")):""}(e.queryParams)).concat("string"==typeof e.fragment?"#".concat(function(e){return encodeURI(e)}(e.fragment)):"")}}]),e}(),Mw=new Zw;function Uw(e){return e.segments.map(function(e){return Gw(e)}).join("/")}function qw(e,t){if(!e.hasChildren())return Uw(e);if(t){var n=e.children[vw]?qw(e.children[vw],!1):"",r=[];return xw(e.children,function(e,t){t!==vw&&r.push("".concat(t,":").concat(qw(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return xw(e.children,function(e,r){r===vw&&(n=n.concat(t(e,r)))}),xw(e.children,function(e,r){r!==vw&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return n===vw?[qw(e.children[vw],!1)]:["".concat(n,":").concat(qw(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children[vw]?"".concat(Uw(e),"/").concat(i[0]):"".concat(Uw(e),"/(").concat(i.join("//"),")")}function Vw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jw(e){return Vw(e).replace(/%3B/gi,";")}function Bw(e){return Vw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zw(e){return decodeURIComponent(e)}function Hw(e){return zw(e.replace(/\+/g,"%20"))}function Gw(e){return"".concat(Bw(e.path)).concat(function(e){return Object.keys(e).map(function(t){return";".concat(Bw(t),"=").concat(Bw(e[t]))}).join("")}(e.parameters))}var Kw=/^[^\/()?;=#]+/;function Ww(e){var t=e.match(Kw);return t?t[0]:""}var Qw=/^[^=?&#]+/,Yw=/^[^?&#]+/,Jw=function(){function e(t){f(this,e),this.url=t,this.remaining=t}return h(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dw([],{}):new Dw([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[vw]=new Dw(e,t)),n}},{key:"parseSegment",value:function(){var e=Ww(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Pw(zw(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Ww(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Ww(this.remaining);r&&(n=r,this.capture(n))}e[zw(t)]=zw(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Qw);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Yw);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Hw(t),a=Hw(n);if(e.hasOwnProperty(i)){var o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(a)}else e[i]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Ww(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=vw);var a=this.parseChildren();t[i]=1===Object.keys(a).length?a[vw]:new Dw([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),$w=function(){function e(t){f(this,e),this._root=t}return h(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Xw(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Xw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=e_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return e_(e,this._root).map(function(e){return e.value})}}]),e}();function Xw(e,t){if(e===t.value)return t;var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=Xw(e,i);if(a)return a}}catch(o){r.e(o)}finally{r.f()}return null}function e_(e,t){if(e===t.value)return[t];var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=e_(e,n.value);if(i.length)return i.unshift(t),i}}catch(a){r.e(a)}finally{r.f()}return[]}var t_=function(){function e(t,n){f(this,e),this.value=t,this.children=n}return h(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function n_(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var r_=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,e)).snapshot=r,c_(g(i),e),i}return h(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}($w);function i_(e,t){var n=function(e,t){var n=new s_([],{},{},"",{},vw,t,null,e.root,-1,{});return new u_("",new t_(n,[]))}(e,t),r=new Ab([new Pw("",{})]),i=new Ab({}),a=new Ab({}),o=new Ab({}),s=new Ab(""),u=new a_(r,i,o,s,a,vw,t,n.root);return u.snapshot=n.root,new r_(new t_(u,[]),n)}var a_=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return h(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ke.U)(function(e){return gw(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ke.U)(function(e){return gw(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function o_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var s_=function(){function e(t,n,r,i,a,o,s,u,c,l,h){f(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return h(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=gw(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=gw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),u_=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this,r)).url=e,c_(g(i),r),i}return h(n,[{key:"toString",value:function(){return l_(this._root)}}]),n}($w);function c_(e,t){t.value._routerState=e,t.children.forEach(function(t){return c_(e,t)})}function l_(e){var t=e.children.length>0?" { ".concat(e.children.map(l_).join(", ")," } "):"";return"".concat(e.value).concat(t)}function h_(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,bw(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),bw(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!bw(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),bw(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function f_(e,t){return bw(e.params,t.params)&&function(e,t){return Lw(e,t)&&e.every(function(e,n){return bw(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||f_(e.parent,t.parent))}function d_(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=s(n.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.shouldReuseRoute(t.value,a.value.snapshot))return d_(e,t,a)}}catch(o){i.e(o)}finally{i.f()}return d_(e,t)})}(e,t,n);return new t_(r,i)}if(e.shouldAttach(t.value)){var a=e.retrieve(t.value);if(null!==a){var o=a.route;return v_(t,o),o}}var u=function(e){return new a_(new Ab(e.url),new Ab(e.params),new Ab(e.queryParams),new Ab(e.fragment),new Ab(e.data),e.outlet,e.component,e)}(t.value),c=t.children.map(function(t){return d_(e,t)});return new t_(u,c)}function v_(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)v_(e.children[n],t.children[n])}function p_(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function g_(e){return"object"==typeof e&&null!=e&&e.outlets}function m_(e,t,n,r,i){var a={};return r&&xw(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new Nw(n.root===e?t:y_(n.root,e,t),a,i)}function y_(e,t,n){var r={};return xw(e.children,function(e,i){r[i]=e===t?n:y_(e,t,n)}),new Dw(e.segments,r)}var k_=function(){function e(t,n,r){if(f(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&p_(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(g_);if(i&&i!==Tw(r))throw new Error("{outlets:{}} has to be the last command")}return h(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),b_=function e(t,n,r){f(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function w_(e,t,n){if(e||(e=new Dw([],{})),0===e.segments.length&&e.hasChildren())return __(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],s=n[r];if(g_(s))break;var u="".concat(s),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!E_(u,c,o))return a;r+=2}else{if(!E_(u,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new Dw(e.segments.slice(0,r.pathIndex),{});return a.children[vw]=new Dw(e.segments.slice(r.pathIndex),e.children),__(a,0,i)}return r.match&&0===i.length?new Dw(e.segments,{}):r.match&&!e.hasChildren()?T_(e,t,n):r.match?__(e,0,i):T_(e,t,n)}function __(t,n,r){if(0===r.length)return new Dw(t.segments,{});var i=function(t){return g_(t[0])?t[0].outlets:e({},vw,t)}(r),a={};return xw(i,function(e,r){"string"==typeof e&&(e=[e]),null!==e&&(a[r]=w_(t.children[r],n,e))}),xw(t.children,function(e,t){void 0===i[t]&&(a[t]=e)}),new Dw(t.segments,a)}function T_(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(g_(a)){var o=x_(a.outlets);return new Dw(r,o)}if(0===i&&p_(n[0]))r.push(new Pw(e.segments[t].path,S_(n[0]))),i++;else{var s=g_(a)?a.outlets[vw]:"".concat(a),u=i<n.length-1?n[i+1]:null;s&&u&&p_(u)?(r.push(new Pw(s,S_(u))),i+=2):(r.push(new Pw(s,{})),i++)}}return new Dw(r,{})}function x_(e){var t={};return xw(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=T_(new Dw([],{}),0,e))}),t}function S_(e){var t={};return xw(e,function(e,n){return t[n]="".concat(e)}),t}function E_(e,t,n){return e==n.path&&bw(t,n.parameters)}var I_=function(){function e(t,n,r,i){f(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return h(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),h_(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=n_(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),xw(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=n_(e),a=0,o=Object.keys(i);a<o.length;a++){var s=o[a];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=n_(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new fw(e.value.snapshot))}),e.children.length&&this.forwardEvent(new lw(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(h_(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),A_(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=c,o.outlet&&o.outlet.activateWith(r,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function A_(e){h_(e.value),e.children.forEach(A_)}var C_=function e(t,n){f(this,e),this.routes=t,this.module=n};function R_(e){return"function"==typeof e}function O_(e){return e instanceof Nw}var N_=Symbol("INITIAL_VALUE");function D_(){return sy(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,Sn.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,Ge.k)(t[0])&&(t=t[0]),(0,Db.n)(t,i).lift(new Lb(r))}(e.map(function(e){return e.pipe(by(1),En(N_))})).pipe(On(function(e,t){var n=!1;return t.reduce(function(e,r,i){return e!==N_?e:(r===N_&&(n=!0),n||!1!==r&&i!==t.length-1&&!O_(r)?e:r)},e)},N_),Fn(function(e){return e!==N_}),(0,Ke.U)(function(e){return O_(e)?e:!0===e}),by(1))})}var P_=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&u._UZ(0,"router-outlet")},directives:function(){return[NT]},encapsulation:2}),e}();function L_(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];F_(r,Z_(t,r))}}function F_(e,t){e.children&&L_(e.children,t)}function Z_(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function M_(e){var t=e.children&&e.children.map(M_),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==vw&&(n.component=P_),n}function U_(e){return e.outlet||vw}function q_(e,t){var n=e.filter(function(e){return U_(e)===t});return n.push.apply(n,a(e.filter(function(e){return U_(e)!==t}))),n}var V_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function j_(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},V_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||kw)(n,e,t);if(!i)return Object.assign({},V_);var a={};xw(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function B_(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return z_(e,t,n)&&U_(n)!==vw})}(e,n,r)){var a=new Dw(t,function(e,t,n,r){var i={};i[vw]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var a,o=s(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(""===u.path&&U_(u)!==vw){var c=new Dw([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,i[U_(u)]=c}}}catch(l){o.e(l)}finally{o.f()}return i}(e,t,r,new Dw(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return z_(e,t,n)})}(e,n,r)){var o=new Dw(e.segments,function(e,t,n,r,i,a){var o,u={},c=s(r);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(z_(e,n,l)&&!i[U_(l)]){var h=new Dw([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===a?e.segments.length:t.length,u[U_(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var u=new Dw(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function z_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function H_(e,t,n,r){return!!(U_(e)===r||r!==vw&&z_(t,n,e))&&("**"===e.path||j_(t,e,n).matched)}function G_(e,t,n){return 0===t.length&&!e.children[n]}var K_=function e(t){f(this,e),this.segmentGroup=t||null},W_=function e(t){f(this,e),this.urlTree=t};function Q_(e){return new He.y(function(t){return t.error(new K_(e))})}function Y_(e){return new He.y(function(t){return t.error(new W_(e))})}function J_(e){return new He.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var $_=function(){function t(e,n,r,i,a){f(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}return h(t,[{key:"apply",value:function(){var e=this,t=B_(this.urlTree.root,[],[],this.config).segmentGroup,n=new Dw(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,vw).pipe((0,Ke.U)(function(t){return e.createUrlTree(X_(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Ub(function(t){if(t instanceof W_)return e.allowRedirects=!1,e.match(t.urlTree);throw t instanceof K_?e.noMatchError(t):t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,vw).pipe((0,Ke.U)(function(n){return t.createUrlTree(X_(n),e.queryParams,e.fragment)})).pipe(Ub(function(e){throw e instanceof K_?t.noMatchError(e):e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,n,r){var i=t.segments.length>0?new Dw([],e({},vw,t)):t;return new Nw(i,n,r)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Ke.U)(function(e){return new Dw([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var s=o[a];"primary"===s?i.unshift(s):i.push(s)}return(0,ze.D)(i).pipe(Bb(function(i){var a=n.children[i],o=q_(t,i);return r.expandSegmentGroup(e,o,a,i).pipe((0,Ke.U)(function(e){return{segment:e,outlet:i}}))}),On(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Fn(function(t,n){return e(t,n,r)}):Ry.y,zb(1),n?Ty(t):Ey(function(){return new my}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return(0,ze.D)(n).pipe(Bb(function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,i,a).pipe(Ub(function(e){if(e instanceof K_)return(0,wn.of)(null);throw e}))}),Oy(function(e){return!!e}),Ub(function(e,n){if(e instanceof my||"EmptyError"===e.name){if(G_(t,r,i))return(0,wn.of)(new Dw([],{}));throw new K_(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return H_(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Q_(t):Q_(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Y_(a):this.lineralizeSegments(n,a).pipe((0,jb.zg)(function(n){var a=new Dw(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,s=j_(t,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Q_(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Y_(f):this.lineralizeSegments(r,f).pipe((0,jb.zg)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,wn.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Ke.U)(function(e){return n._loadedConfig=e,new Dw(r,{})})):(0,wn.of)(new Dw(r,{}));var o=j_(t,n,r),s=o.matched,u=o.consumedSegments,c=o.lastChild;if(!s)return Q_(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,jb.zg)(function(e){var r=e.module,o=e.routes,s=B_(t,u,l,o),c=s.segmentGroup,h=s.slicedSegments,f=new Dw(c.segments,c.children);if(0===h.length&&f.hasChildren())return a.expandChildren(r,o,f).pipe((0,Ke.U)(function(e){return new Dw(u,e)}));if(0===o.length&&0===h.length)return(0,wn.of)(new Dw(u,{}));var d=U_(n)===i;return a.expandSegment(r,f,o,h,d?vw:i,!0).pipe((0,Ke.U)(function(e){return new Dw(u.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,wn.of)(new C_(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,wn.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,jb.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,Ke.U)(function(e){return t._loadedConfig=e,e})):function(e){return new He.y(function(t){return t.error(yw("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):(0,wn.of)(new C_([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,wn.of)(!0);var a=i.map(function(r){var i,a=e.get(r);if(function(e){return e&&R_(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!R_(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return Sw(i)});return(0,wn.of)(a).pipe(D_(),(0,Kb.b)(function(e){if(O_(e)){var t=yw('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,Ke.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,wn.of)(n);if(r.numberOfChildren>1||!r.children[vw])return J_(e.redirectTo);r=r.children[vw]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new Nw(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return xw(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return xw(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new Dw(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=s(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.path===e.path)return t.splice(r),a;r++}}catch(o){i.e(o)}finally{i.f()}return e}}]),t}();function X_(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=X_(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children[vw]){var t=e.children[vw];return new Dw(e.segments.concat(t.segments),t.children)}return e}(new Dw(e.segments,t))}var eT=function e(t){f(this,e),this.path=t,this.route=this.path[this.path.length-1]},tT=function e(t,n){f(this,e),this.component=t,this.route=n};function nT(e,t,n){var r=e._root;return iT(r,t?t._root:null,n,[r.value])}function rT(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function iT(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=n_(t);return e.children.forEach(function(e){(function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Lw(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Lw(e.url,t.url)||!bw(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!f_(e,t)||!bw(e.queryParams,t.queryParams);case"paramsChange":default:return!f_(e,t)}}(o,a,a.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new eT(r)):(a.data=o.data,a._resolvedData=o._resolvedData),iT(e,t,a.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new tT(s.outlet.component,o))}else o&&aT(t,s,i),i.canActivateChecks.push(new eT(r)),iT(e,null,a.component?s?s.children:null:n,r,i)})(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),xw(a,function(e,t){return aT(e,n.getContext(t),i)}),i}function aT(e,t,n){var r=n_(e),i=e.value;xw(r,function(e,r){aT(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new tT(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var oT=function e(){f(this,e)};function sT(e){return new He.y(function(t){return t.error(e)})}var uT=function(){function e(t,n,r,i,a,o){f(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return h(e,[{key:"recognize",value:function(){var e=B_(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,vw);if(null===t)return null;var n=new s_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vw,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new t_(n,t),i=new u_(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=o_(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var o=i[r],s=t.children[o],u=q_(e,o),c=this.processSegmentGroup(u,s,o);if(null===c)return null;n.push.apply(n,a(c))}var l=cT(n);return function(e){e.sort(function(e,t){return e.value.outlet===vw?-1:t.value.outlet===vw?1:e.value.outlet.localeCompare(t.value.outlet)})}(l),l}},{key:"processSegment",value:function(e,t,n,r){var i,a=s(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=this.processSegmentAgainstRoute(o,t,n,r);if(null!==u)return u}}catch(c){a.e(c)}finally{a.f()}return G_(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!H_(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var s=n.length>0?Tw(n).parameters:{};i=new s_(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fT(e),U_(e),e.component,e,lT(t),hT(t)+n.length,dT(e))}else{var u=j_(t,e,n);if(!u.matched)return null;a=u.consumedSegments,o=n.slice(u.lastChild),i=new s_(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fT(e),U_(e),e.component,e,lT(t),hT(t)+a.length,dT(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=B_(t,a,o,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new t_(i,d)]}if(0===c.length&&0===f.length)return[new t_(i,[])];var v=U_(e)===r,p=this.processSegment(c,h,f,v?vw:r);return null===p?null:[new t_(i,p)]}}]),e}();function cT(e){var t,n=[],r=new Set,i=s(e);try{var o=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var o=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==o?((e=o.children).push.apply(e,a(i.children)),r.add(o)):n.push(i)};for(i.s();!(t=i.n()).done;)o()}catch(f){i.e(f)}finally{i.f()}var u,c=s(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=cT(l.children);n.push(new t_(l.value,h))}}catch(f){c.e(f)}finally{c.f()}return n.filter(function(e){return!r.has(e)})}function lT(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function hT(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function fT(e){return e.data||{}}function dT(e){return e.resolve||{}}function vT(e){return sy(function(t){var n=e(t);return n?(0,ze.D)(n).pipe((0,Ke.U)(function(){return t})):(0,wn.of)(t)})}var pT=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(function(){function e(){f(this,e)}return h(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),gT=new u.OlP("ROUTES"),mT=function(){function e(t,n,r,i){f(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return h(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,Ke.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new C_(_w(i.injector.get(gT,void 0,u.XFs.Self|u.XFs.Optional)).map(M_),i)}),Ub(function(e){throw t._loader$=void 0,e}));return t._loader$=new Mb.c(r,function(){return new ry.xQ}).pipe((0,Wb.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,ze.D)(this.loader.load(e)):Sw(e()).pipe((0,jb.zg)(function(e){return e instanceof u.YKP?(0,wn.of)(e):(0,ze.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),yT=function e(){f(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new kT,this.attachRef=null},kT=function(){function e(){f(this,e),this.contexts=new Map}return h(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new yT,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),bT=function(){function e(){f(this,e)}return h(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function wT(e){throw e}function _T(e,t,n){return t.parse("/")}function TT(e,t){return(0,wn.of)(null)}var xT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ST={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ET=function(){var e=function(){function e(t,n,r,i,a,o,s,c){var l=this;f(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ry.xQ,this.errorHandler=wT,this.malformedUriErrorHandler=_T,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:TT,afterPreactivation:TT},this.urlHandlingStrategy=new bT,this.routeReuseStrategy=new pT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(u.h0i),this.console=a.get(u.c2e);var h=a.get(u.R0b);this.isNgZoneEnabled=h instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Nw(new Dw([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mT(o,s,function(e){return l.triggerEvent(new sw(e))},function(e){return l.triggerEvent(new uw(e))}),this.routerState=i_(this.currentUrlTree,this.rootComponentType),this.transitions=new Ab({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return h(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Fn(function(e){return 0!==e.id}),(0,Ke.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),sy(function(e){var r=!1,i=!1;return(0,wn.of)(e).pipe((0,Kb.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),sy(function(e){var r=t.browserUrlTree.toString(),a=!t.navigated||e.extractedUrl.toString()!==r||r!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||a)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return IT(e.source)&&(t.browserUrlTree=e.extractedUrl),(0,wn.of)(e).pipe(sy(function(e){var r=t.transitions.getValue();return n.next(new $b(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?ky.E:Promise.resolve(e)}),function(e,t,n,r){return sy(function(i){return function(e,t,n,r,i){return new $_(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,Ke.U)(function(e){return Object.assign(Object.assign({},i),{urlAfterRedirects:e})}))})}(t.ngModule.injector,t.configLoader,t.urlSerializer,t.config),(0,Kb.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,a,o){return(0,jb.zg)(function(r){return function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var s=new uT(e,t,n,r,a,o).recognize();return null===s?sT(new oT):(0,wn.of)(s)}catch(i){return sT(i)}}(e,n,r.urlAfterRedirects,(s=r.urlAfterRedirects,t.serializeUrl(s)),a,o).pipe((0,Ke.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var s})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Kb.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new nw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(a&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var o=e.id,s=e.extractedUrl,u=e.source,c=e.restoredState,l=e.extras,h=new $b(o,t.serializeUrl(s),u,c);n.next(h);var f=i_(s,t.rootComponentType).snapshot;return(0,wn.of)(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:s,extras:Object.assign(Object.assign({},l),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),ky.E}),vT(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,Kb.b)(function(e){var n=new rw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,Ke.U)(function(e){return Object.assign(Object.assign({},e),{guards:nT(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,jb.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?(0,wn.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,ze.D)(e).pipe((0,jb.zg)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,wn.of)(!0);var o=a.map(function(a){var o,s=rT(a,t,i);if(function(e){return e&&R_(e.canDeactivate)}(s))o=Sw(s.canDeactivate(e,t,n,r));else{if(!R_(s))throw new Error("Invalid CanDeactivate guard");o=Sw(s(e,t,n,r))}return o.pipe(Oy())});return(0,wn.of)(o).pipe(D_())}(e.component,e.route,n,t,r)}),Oy(function(e){return!0!==e},!0))}(s,r,i,e).pipe((0,jb.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,ze.D)(t).pipe(Bb(function(t){return xn(function(e,t){return null!==e&&t&&t(new cw(e)),(0,wn.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new hw(e)),(0,wn.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Zb(function(){var i=t.guards.map(function(i){var a,o=rT(i,t.node,n);if(function(e){return e&&R_(e.canActivateChild)}(o))a=Sw(o.canActivateChild(r,e));else{if(!R_(o))throw new Error("Invalid CanActivateChild guard");a=Sw(o(r,e))}return a.pipe(Oy())});return(0,wn.of)(i).pipe(D_())})});return(0,wn.of)(i).pipe(D_())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wn.of)(!0);var i=r.map(function(r){return Zb(function(){var i,a=rT(r,t,n);if(function(e){return e&&R_(e.canActivate)}(a))i=Sw(a.canActivate(t,e));else{if(!R_(a))throw new Error("Invalid CanActivate guard");i=Sw(a(t,e))}return i.pipe(Oy())})});return(0,wn.of)(i).pipe(D_())}(e,t.route,n))}),Oy(function(e){return!0!==e},!0))}(r,o,e,t):(0,wn.of)(n)}),(0,Ke.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Kb.b)(function(e){if(O_(e.guardsResult)){var n=yw('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new iw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),Fn(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),vT(function(e){if(e.guards.canActivateChecks.length)return(0,wn.of)(e).pipe((0,Kb.b)(function(e){var n=new aw(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),sy(function(e){var n=!1;return(0,wn.of)(e).pipe(function(e,t){return(0,jb.zg)(function(n){var r=n.targetSnapshot,i=n.guards.canActivateChecks;if(!i.length)return(0,wn.of)(n);var a=0;return(0,ze.D)(i).pipe(Bb(function(n){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,wn.of)({});var a={};return(0,ze.D)(i).pipe((0,jb.zg)(function(i){return function(e,t,n,r){var i=rT(e,t,r);return Sw(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Kb.b)(function(e){a[i]=e}))}),zb(1),(0,jb.zg)(function(){return Object.keys(a).length===i.length?(0,wn.of)(a):ky.E}))}(e._resolve,e,t,r).pipe((0,Ke.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),o_(e,n).resolve),null}))}(n.route,r,e,t)}),(0,Kb.b)(function(){return a++}),zb(1),(0,jb.zg)(function(e){return a===i.length?(0,wn.of)(n):ky.E}))})}(t.paramsInheritanceStrategy,t.ngModule.injector),(0,Kb.b)({next:function(){return n=!0},complete:function(){n||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Kb.b)(function(e){var n=new ow(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),vT(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,u=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!u})}),(0,Ke.U)(function(e){var n=function(e,t,n){var r=d_(e,t._root,n?n._root:void 0);return new r_(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Kb.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),function(e,t,n){return(0,Ke.U)(function(r){return new I_(t,r.targetRouterState,r.currentRouterState,n).activate(e),r})}(t.rootContexts,t.routeReuseStrategy,function(e){return t.triggerEvent(e)}),(0,Kb.b)({next:function(){r=!0},complete:function(){r=!0}}),function(e){return function(t){return t.lift(new Qb(e))}}(function(){var n;if(!r&&!i){var a="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,a)):t.cancelNavigationTransition(e,a)}(null===(n=t.currentNavigation)||void 0===n?void 0:n.id)===e.id&&(t.currentNavigation=null)}),Ub(function(r){if(i=!0,function(e){return e&&e[mw]}(r)){var a=O_(r.url);a||(t.navigated=!0,t.restoreHistory(e,!0));var o=new ew(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(o),a?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree),i={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||IT(e.source)};t.scheduleNavigation(n,"imperative",null,i,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var s=new tw(e.id,t.serializeUrl(e.extractedUrl),r);n.next(s);try{e.resolve(t.errorHandler(r))}catch(o){e.reject(o)}}return ky.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,delete o.\u0275routerPageId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){L_(e),this.config=e.map(M_),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.queryParamsHandling,s=t.preserveFragment,u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return m_(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new k_(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return xw(r.outlets,function(e,t){o[t]="string"==typeof e?e.split("/"):e}),[].concat(a(e),[{outlets:o}])}if(r.segmentPath)return[].concat(a(e),[r.segmentPath])}return"string"!=typeof r?[].concat(a(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(a(e),[r])},[]);return new k_(n,t,r)}(n);if(o.toRoot())return m_(t.root,new Dw([],{}),t,r,i);var s=function(e,t,n){if(e.isAbsolute)return new b_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new b_(r,r===t.root,0)}var i=p_(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new b_(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),u=s.processChildren?__(s.segmentGroup,s.index,o.commands):w_(s.segmentGroup,s.index,o.commands);return m_(s.segmentGroup,u,t,r,i)}(u,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=O_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},xT):!1===t?Object.assign({},ST):t,O_(e))return Aw(this.currentUrlTree,e,n);var r=this.parseUrl(e);return Aw(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Xb(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ".concat(t))})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var a,o;if(this.disposed)return Promise.resolve(!1);var s,u,c,l=this.getTransition(),h=IT(t)&&l&&!IT(l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(s=i.resolve,u=i.reject,c=i.promise):c=new Promise(function(e,t){s=e,u=t});var d,v=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):d=0,this.setTransition({id:v,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:s,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new ew(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.DyG),u.LFG(Fw),u.LFG(kT),u.LFG(L),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function IT(e){return"imperative"!==e}var AT=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new ry.xQ,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return h(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:RT(this.skipLocationChange),replaceUrl:RT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:RT(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(ET),u.Y36(a_),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},e.\u0275dir=u.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&u.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),e}(),CT=function(){var e=function(){function e(t,n,r){var i=this;f(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new ry.xQ,this.subscription=t.events.subscribe(function(e){e instanceof Xb&&i.updateTargetUrlAndHref()})}return h(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i||"string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:RT(this.skipLocationChange),replaceUrl:RT(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:RT(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(ET),u.Y36(a_),u.Y36(R))},e.\u0275dir=u.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&u.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(u.Ikx("href",t.href,u.LSH),u.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[u.TTD]}),e}();function RT(e){return""===e||!!e}var OT=function(){var e=function(){function e(t,n,r,i,a,o){var s=this;f(this,e),this.router=t,this.element=n,this.renderer=r,this.cdr=i,this.link=a,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(function(e){e instanceof Xb&&s.update()})}return h(e,[{key:"ngAfterContentInit",value:function(){var e=this;(0,wn.of)(this.links.changes,this.linksWithHrefs.changes,(0,wn.of)(null)).pipe((0,Tn.J)()).subscribe(function(t){e.update(),e.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var e,t=this;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();var n=[].concat(a(this.links.toArray()),a(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(e){return!!e}).map(function(e){return e.onChanges});this.linkInputChangesSubscription=(0,ze.D)(n).pipe((0,Tn.J)()).subscribe(function(e){t.isActive!==t.isLinkActive(t.router)(e)&&t.update()})}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(function(e){return!!e})}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}},{key:"update",value:function(){var e=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.cdr.markForCheck(),e.classes.forEach(function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(e){var t=function(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(n){return e.isActive(n.urlTree,t)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(ET),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(AT,8),u.Y36(CT,8))},e.\u0275dir=u.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;(1&e&&(u.Suo(n,AT,5),u.Suo(n,CT,5)),2&e)&&(u.iGM(r=u.CRH())&&(t.links=r),u.iGM(r=u.CRH())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[u.TTD]}),e}(),NT=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=i||vw,t.onChildOutletCreated(this.name,this)}return h(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new DT(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(kT),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},e.\u0275dir=u.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),DT=function(){function e(t,n,r){f(this,e),this.route=t,this.childContexts=n,this.parent=r}return h(e,[{key:"get",value:function(e,t){return e===a_?this.route:e===kT?this.childContexts:this.parent.get(e,t)}}]),e}(),PT=function e(){f(this,e)},LT=function(){function e(){f(this,e)}return h(e,[{key:"preload",value:function(e,t){return(0,wn.of)(null)}}]),e}(),FT=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new mT(n,r,function(e){return t.triggerEvent(new sw(e))},function(e){return t.triggerEvent(new uw(e))})}return h(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Fn(function(e){return e instanceof Xb}),Bb(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(u.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=s(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var o=a._loadedConfig;r.push(this.processRoutes(o.module,o.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(e,a)):a.children&&r.push(this.processRoutes(e,a.children))}}catch(u){i.e(u)}finally{i.f()}return(0,ze.D)(r).pipe((0,Tn.J)(),(0,Ke.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,wn.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,jb.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(ET),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(PT))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ZT=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return h(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof $b?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xb&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof dw&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new dw(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(ET),u.LFG(ce),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),MT=new u.OlP("ROUTER_CONFIGURATION"),UT=new u.OlP("ROUTER_FORROOT_GUARD"),qT=[L,{provide:Fw,useClass:Zw},{provide:ET,useFactory:function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new ET(null,e,t,n,r,i,a,_w(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(s,l),s.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Fw,kT,L,u.zs3,u.v3s,u.Sil,gT,MT,[function(){return function e(){f(this,e)}}(),new u.FiY],[function(){return function e(){f(this,e)}}(),new u.FiY]]},kT,{provide:a_,useFactory:function(e){return e.routerState.root},deps:[ET]},{provide:u.v3s,useClass:u.EAV},FT,LT,function(){function e(){f(this,e)}return h(e,[{key:"preload",value:function(e,t){return t().pipe(Ub(function(){return(0,wn.of)(null)}))}}]),e}(),{provide:MT,useValue:{enableTracing:!1}}];function VT(){return new u.PXZ("Router",ET)}var jT=function(){var e=function(){function e(t,n){f(this,e)}return h(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[qT,GT(t),{provide:UT,useFactory:HT,deps:[[ET,new u.FiY,new u.tp0]]},{provide:MT,useValue:n||{}},{provide:R,useFactory:zT,deps:[b,[new u.tBr(N),new u.FiY],MT]},{provide:ZT,useFactory:BT,deps:[ET,ce,MT]},{provide:PT,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:LT},{provide:u.PXZ,multi:!0,useFactory:VT},[KT,{provide:u.ip1,multi:!0,useFactory:WT,deps:[KT]},{provide:YT,useFactory:QT,deps:[KT]},{provide:u.tb,multi:!0,useExisting:YT}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[GT(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(UT,8),u.LFG(ET,8))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}();function BT(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new ZT(e,t,n)}function zT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new P(e,t):new D(e,t)}function HT(e){return"guarded"}function GT(e){return[{provide:u.deG,multi:!0,useValue:e},{provide:gT,multi:!0,useValue:e}]}var KT=function(){var e=function(){function e(t){f(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ry.xQ}return h(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(T,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(ET),i=e.injector.get(MT);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,wn.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(MT),n=this.injector.get(FT),r=this.injector.get(ZT),i=this.injector.get(ET),a=this.injector.get(u.z2F);e===a.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.zs3))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function WT(e){return e.appInitializer.bind(e)}function QT(e){return e.bootstrapListener.bind(e)}var YT=new u.OlP("Router Initializer");function JT(e,t){1&e&&u._UZ(0,"span",14)}var $T=function(){var e=function(){function e(t,n,r,i,a){f(this,e),this.fb=t,this._auth=n,this._usuario=r,this.toastr=i,this.router=a,this.entrando=!1,this.loginForm=this.fb.group({email:["",ct.required],pass:["",ct.required]})}return h(e,[{key:"ngOnInit",value:function(){}},{key:"login",value:function(){var e=this;if(this.entrando=!0,this.loginForm.invalid)return this.toastr.error("Ingrese sus credenciales","Ha ocurrido un error"),void(this.entrando=!1);this._auth.signInWithEmail(this.loginForm.value.email,this.loginForm.value.pass).then(function(t){t.user.getIdTokenResult().then(function(t){e._usuario.getUsuarioPorEmail(e.loginForm.value.email).subscribe(function(t){t.length>0?(e._auth.saveLocalData("email",e.loginForm.value.email),e._auth.saveLocalData("names",t[0].nombres),e._auth.saveLocalData("lastnames",t[0].apellidos),e._auth.saveLocalData("administrador",t[0].admin),e.router.navigateByUrl("/inicio")):(e.toastr.error("Verifique las credenciales ingresadas","Acceso denegado"),e.entrando=!1)})}),e.entrando=!1}).catch(function(t){e.toastr.error("Verifique las credenciales ingresadas","Acceso denegado"),e.entrando=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(kn),u.Y36(Eb),u.Y36(Ib),u.Y36(yb),u.Y36(ET))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"login-row"],[1,"card","col-sm-6","login-card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","email",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","id","email","formControlName","email",1,"form-control"],["for","pass",1,"col-sm-4","col-form-label"],["type","password","id","pass","formControlName","pass",1,"form-control"],[1,"col-sm-4"],["type","submit",1,"btn","btn-light"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"b"),u._uU(4,"FARMACIA MIHZELLA"),u.qZA(),u.qZA(),u.TgZ(5,"div",3),u.TgZ(6,"form",4),u.NdJ("ngSubmit",function(){return t.login()}),u.TgZ(7,"div",5),u.TgZ(8,"label",6),u._uU(9,"Correo electr\xf3nico"),u.qZA(),u.TgZ(10,"div",7),u._UZ(11,"input",8),u.qZA(),u.qZA(),u.TgZ(12,"div",5),u.TgZ(13,"label",9),u._uU(14,"Contrase\xf1a"),u.qZA(),u.TgZ(15,"div",7),u._UZ(16,"input",10),u.qZA(),u.qZA(),u.TgZ(17,"div",5),u._UZ(18,"div",11),u.TgZ(19,"div",7),u.TgZ(20,"button",12),u.YNc(21,JT,1,0,"span",13),u._uU(22," ENTRAR "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(6),u.Q6J("formGroup",t.loginForm),u.xp6(15),u.Q6J("ngIf",t.entrando))},directives:[Xt,Nt,on,rt,Ot,un,$],styles:[""]}),e}(),XT=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"getTodayString",value:function(){var e=new Date;return String(e.getDate()).padStart(2,"0")+"/"+String(e.getMonth()+1).padStart(2,"0")+"/"+e.getFullYear()}},{key:"getTodayTimestamp",value:function(){return Is.fromDate(new Date)}},{key:"getDateFromTimestamp",value:function(e){var t=e.toDate(),n=t.getDate(),r=t.getMonth()+1,i=t.getFullYear(),a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return o<10&&(o="0".concat(o)),s<10&&(s="0".concat(s)),r<10?"".concat(n,"/0").concat(r,"/").concat(i," ").concat(a,":").concat(o,":").concat(s):"".concat(n,"/").concat(r,"/").concat(i," ").concat(a,":").concat(o,":").concat(s)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function ex(e,t){if(1&e&&(u.TgZ(0,"option",30),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.s9C("value",n.id),u.xp6(1),u.lnq("",n.codigo," - ",n.comercial," | ",n.generico,"")}}function tx(e,t){1&e&&u._UZ(0,"span",31)}function nx(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.qZA()),2&e){var n=t.$implicit;u.xp6(2),u.Oqu(n.fecha),u.xp6(2),u.Oqu(n.descripcion),u.xp6(2),u.Oqu(n.entrada),u.xp6(2),u.Oqu(n.salida),u.xp6(2),u.Oqu(n.saldo)}}var rx=function(){var e=function(){function e(t,n,r,i){f(this,e),this._inventario=t,this._utils=n,this.fb=r,this.toastr=i,this.kardex=[],this.producto={},this.buscando=!1,this.kardexForm=this.fb.group({producto:["",ct.required]}),this.productos=t.getProductos()}return h(e,[{key:"ngOnInit",value:function(){}},{key:"generarKardex",value:function(){var e=this;if(this.kardex=[],this.buscando=!0,this.kardexForm.invalid)return this.toastr.error("Para generar el kardex debe seleccionar un producto","Error"),void(this.buscando=!1);this.getProducto(),this.getCompras(),this.getVentas(),setTimeout(function(){e.kardex.sort(function(e,t){return e.timest-t.timest}),setTimeout(function(){for(var t=0,n=0;n<e.kardex.length;n++)e.kardex[n].saldo=t+e.kardex[n].entrada-e.kardex[n].salida,t=e.kardex[n].saldo;e.buscando=!1},300)},400)}},{key:"getProducto",value:function(){var e=this;this._inventario.getProducto(this.kardexForm.value.producto).subscribe(function(t){e.producto={codigo:t.codigo,categoria:t.categoria,comercial:t.comercial,generico:t.generico,laboratorio:t.laboratorio,presentacion:t.presentacion,contenido:t.contenido}})}},{key:"getCompras",value:function(){var e=this;this._inventario.getComprasProducto(this.kardexForm.value.producto).subscribe(function(t){t.map(function(t){if("added"==t.type){var n=t.payload.doc.data();e.kardex.push({timest:n.fecha,fecha:e._utils.getDateFromTimestamp(n.fecha),descripcion:n.saldo?"Saldo":"Compra",entrada:n.cantidad,salida:0,saldo:0})}})})}},{key:"getVentas",value:function(){var e=this;this._inventario.getVentasProducto(this.kardexForm.value.producto).subscribe(function(t){t.map(function(t){if("added"==t.type){var n=t.payload.doc.data();e.kardex.push({timest:n.fecha,fecha:e._utils.getDateFromTimestamp(n.fecha),descripcion:"Venta",entrada:0,salida:n.cantidad,saldo:0})}})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(XT),u.Y36(kn),u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-kardex"]],decls:70,vars:13,consts:[[1,"row","col-sm-12"],[1,"card","col-sm-6","kardex","mt-2"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","producto",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12","text-center"],["type","button","id","generar","data-toggle","modal","data-target","#kardexModal",1,"btn","btn-success","mt-4",3,"click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["id","kardexModal","tabindex","-1","aria-labelledby","kardexModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","kardexModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],[1,"card"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"badge","badge-dark"],[1,"col-sm-6"],[1,"badge","badge-info"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"form",3),u.TgZ(4,"div",4),u.TgZ(5,"label",5),u._uU(6,"Producto"),u.qZA(),u.TgZ(7,"select",6),u.TgZ(8,"option",7),u._uU(9,"Seleccione..."),u.qZA(),u.YNc(10,ex,2,4,"option",8),u.ALo(11,"async"),u.qZA(),u.qZA(),u.TgZ(12,"div",9),u.TgZ(13,"button",10),u.NdJ("click",function(){return t.generarKardex()}),u.YNc(14,tx,1,0,"span",11),u._uU(15," Generar Kardex "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",12),u.TgZ(17,"div",13),u.TgZ(18,"div",14),u.TgZ(19,"div",15),u.TgZ(20,"h5",16),u._uU(21,"KARDEX DEL PRODUCTO"),u.qZA(),u.TgZ(22,"button",17,18),u.TgZ(24,"span",19),u._uU(25,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"div",20),u.TgZ(27,"div",2),u.TgZ(28,"div",21),u.TgZ(29,"div",22),u._uU(30," Codigo: "),u.qZA(),u.TgZ(31,"div",23),u._uU(32),u.qZA(),u.TgZ(33,"div",24),u.TgZ(34,"span",25),u._uU(35),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"div",21),u.TgZ(37,"div",22),u._uU(38," Nombre gen\xe9rico: "),u.qZA(),u.TgZ(39,"div",26),u._uU(40),u.qZA(),u.qZA(),u.TgZ(41,"div",21),u.TgZ(42,"div",22),u._uU(43," Nombre comercial: "),u.qZA(),u.TgZ(44,"div",26),u._uU(45),u.qZA(),u.qZA(),u.TgZ(46,"div",21),u.TgZ(47,"div",22),u._uU(48," Presentaci\xf3n: "),u.qZA(),u.TgZ(49,"div",23),u._uU(50),u.qZA(),u.TgZ(51,"div",24),u.TgZ(52,"span",27),u._uU(53),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(54,"div",20),u.TgZ(55,"div",2),u.TgZ(56,"table",28),u.TgZ(57,"thead"),u.TgZ(58,"tr"),u.TgZ(59,"th"),u._uU(60,"Fecha"),u.qZA(),u.TgZ(61,"th"),u._uU(62,"Descripci\xf3n"),u.qZA(),u.TgZ(63,"th"),u._uU(64,"Entrada"),u.qZA(),u.TgZ(65,"th"),u._uU(66,"Salida"),u.qZA(),u.TgZ(67,"th"),u._uU(68,"Saldo"),u.qZA(),u.qZA(),u.qZA(),u.YNc(69,nx,11,5,"tr",29),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("formGroup",t.kardexForm),u.xp6(7),u.Q6J("ngForOf",u.lcZ(11,11,t.productos)),u.xp6(4),u.Q6J("ngIf",t.buscando),u.xp6(18),u.hij(" ",t.producto.codigo," "),u.xp6(3),u.Oqu(t.producto.categoria),u.xp6(5),u.hij(" ",t.producto.generico," "),u.xp6(5),u.hij(" ",t.producto.comercial," "),u.xp6(5),u.AsE(" ",t.producto.presentacion," (",t.producto.contenido,") "),u.xp6(3),u.hij("Laboratorio ",t.producto.laboratorio,""),u.xp6(16),u.Q6J("ngForOf",t.kardex))},directives:[Xt,Nt,on,hn,Ot,un,fn,gn,Y,$],pipes:[ae],styles:[""]}),e}(),ix=["closeButtonForm"];function ax(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var n=u.oxw().$implicit;u.xp6(1),u.hij("",n.precio," Bs.")}}function ox(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"span",44),u._uU(11),u.qZA(),u.qZA(),u.TgZ(12,"td"),u.YNc(13,ax,2,1,"span",45),u.qZA(),u.TgZ(14,"td"),u.TgZ(15,"button",46),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().openModal(e.id)}),u._uU(16,"Detalles"),u.qZA(),u.TgZ(17,"button",47),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().deleteProducto(e.id)}),u._uU(18,"Eliminar"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(2),u.Oqu(r.codigo),u.xp6(2),u.Oqu(r.generico),u.xp6(2),u.Oqu(r.comercial),u.xp6(2),u.Oqu(r.laboratorio),u.xp6(3),u.Oqu(r.categoria),u.xp6(2),u.Q6J("ngIf",r.precio)}}function sx(e,t){if(1&e&&(u.TgZ(0,"option",48),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.s9C("value",n.nombre),u.xp6(1),u.Oqu(n.nombre)}}function ux(e,t){if(1&e&&(u.TgZ(0,"option",48),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.s9C("value",n.descripcion),u.xp6(1),u.Oqu(n.descripcion)}}var cx=["closeButtonForm"];function lx(e,t){1&e&&(u.TgZ(0,"td"),u.TgZ(1,"span",43),u._uU(2,"SALDO"),u.qZA(),u.qZA())}function hx(e,t){1&e&&(u.TgZ(0,"td"),u.TgZ(1,"span",44),u._uU(2,"COMPRA"),u.qZA(),u.qZA())}function fx(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.YNc(5,lx,3,0,"td",40),u.YNc(6,hx,3,0,"td",40),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA(),u.TgZ(13,"td"),u.TgZ(14,"span",41),u._uU(15),u.qZA(),u.qZA(),u.TgZ(16,"td"),u._uU(17),u.qZA(),u.TgZ(18,"td"),u._uU(19),u.qZA(),u.TgZ(20,"td"),u._uU(21),u.qZA(),u.TgZ(22,"td"),u._uU(23),u.qZA(),u.TgZ(24,"td"),u.TgZ(25,"button",42),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().deleteCompra(e.id)}),u._uU(26,"Eliminar"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,i=u.oxw();u.xp6(2),u.Oqu(r.orden),u.xp6(2),u.Oqu(i.getFecha(r.fecha)),u.xp6(1),u.Q6J("ngIf",1==r.saldo),u.xp6(1),u.Q6J("ngIf",0==r.saldo),u.xp6(2),u.Oqu(r.codigo),u.xp6(2),u.Oqu(r.generico),u.xp6(2),u.Oqu(r.laboratorio),u.xp6(3),u.Oqu(r.categoria),u.xp6(2),u.hij("",r.costo," Bs."),u.xp6(2),u.hij("",r.precio," Bs."),u.xp6(2),u.Oqu(r.cantidad),u.xp6(2),u.hij("",r.total," Bs.")}}function dx(e,t){if(1&e&&(u.TgZ(0,"option",45),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.s9C("value",n.id),u.xp6(1),u.HOy("",n.codigo," - ",n.comercial," | ",n.generico," (",n.laboratorio,")")}}function vx(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.ALo(11,"currency"),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.ALo(14,"currency"),u.qZA(),u.TgZ(15,"td"),u._uU(16),u.qZA(),u.TgZ(17,"td"),u._uU(18),u.ALo(19,"currency"),u.qZA(),u.TgZ(20,"td"),u.TgZ(21,"button",42),u.NdJ("click",function(){var e=u.CHM(n).index;return u.oxw().quitarProducto(e)}),u._UZ(22,"i",46),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(2),u.Oqu(r.codigo),u.xp6(2),u.Oqu(r.comercial),u.xp6(2),u.Oqu(r.generico),u.xp6(2),u.Oqu(r.laboratorio),u.xp6(2),u.Oqu(u.lcZ(11,8,r.costo)),u.xp6(3),u.Oqu(u.lcZ(14,10,r.precio)),u.xp6(3),u.Oqu(r.cantidad),u.xp6(2),u.Oqu(u.lcZ(19,12,r.total))}}function px(e,t){1&e&&(u.TgZ(0,"div",47),u.TgZ(1,"span",48),u._uU(2,"Loading..."),u.qZA(),u.qZA())}function gx(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"button",49),u._uU(2,"Cancelar"),u.qZA(),u.TgZ(3,"button",50),u.NdJ("click",function(){return u.CHM(n),u.oxw().guardarCompras()}),u._uU(4,"Guardar"),u.qZA(),u.qZA()}}var mx=["closeButtonForm"];function yx(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.qZA(),u.TgZ(11,"td"),u.TgZ(12,"span",36),u._uU(13),u.qZA(),u.qZA(),u.TgZ(14,"td"),u._uU(15),u.qZA(),u.TgZ(16,"td"),u._uU(17),u.qZA(),u.TgZ(18,"td"),u._uU(19),u.qZA(),u.TgZ(20,"td"),u.TgZ(21,"button",37),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw().deleteVenta(e.id)}),u._uU(22,"Eliminar"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit,i=u.oxw();u.xp6(2),u.Oqu(r.orden),u.xp6(2),u.Oqu(i.getFecha(r.fecha)),u.xp6(2),u.Oqu(r.codigo),u.xp6(2),u.Oqu(r.generico),u.xp6(2),u.Oqu(r.laboratorio),u.xp6(3),u.Oqu(r.categoria),u.xp6(2),u.Oqu(r.precio),u.xp6(2),u.Oqu(r.cantidad),u.xp6(2),u.hij("",r.total," Bs.")}}function kx(e,t){if(1&e&&(u.TgZ(0,"option",38),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.s9C("value",n.id),u.xp6(1),u.HOy("",n.codigo," - ",n.comercial," | ",n.generico," (",n.laboratorio,")")}}function bx(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u._uU(10),u.ALo(11,"currency"),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.qZA(),u.TgZ(14,"td"),u._uU(15),u.ALo(16,"currency"),u.qZA(),u.TgZ(17,"td"),u.TgZ(18,"button",37),u.NdJ("click",function(){var e=u.CHM(n).index;return u.oxw().quitarProducto(e)}),u._UZ(19,"i",39),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.$implicit;u.xp6(2),u.Oqu(r.codigo),u.xp6(2),u.Oqu(r.comercial),u.xp6(2),u.Oqu(r.generico),u.xp6(2),u.Oqu(r.laboratorio),u.xp6(2),u.Oqu(u.lcZ(11,7,r.precio)),u.xp6(3),u.Oqu(r.cantidad),u.xp6(2),u.Oqu(u.lcZ(16,9,r.total))}}function wx(e,t){1&e&&(u.TgZ(0,"div",40),u.TgZ(1,"span",41),u._uU(2,"Loading..."),u.qZA(),u.qZA())}function _x(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"button",42),u._uU(2,"Cancelar"),u.qZA(),u.TgZ(3,"button",43),u.NdJ("click",function(){return u.CHM(n),u.oxw().guardarCompras()}),u._uU(4,"Guardar"),u.qZA(),u.qZA()}}function Tx(e,t){if(1&e&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"span",5),u._uU(11),u.qZA(),u.qZA(),u.TgZ(12,"td"),u._uU(13),u.qZA(),u.qZA()),2&e){var n=t.$implicit;u.xp6(2),u.Oqu(n.codigo),u.xp6(2),u.Oqu(n.generico),u.xp6(2),u.Oqu(n.comercial),u.xp6(2),u.Oqu(n.laboratorio),u.xp6(3),u.Oqu(n.categoria),u.xp6(2),u.Oqu(n.stock)}}var xx=[{path:"login",component:$T},{path:"inicio",component:function(){var e=function(){function e(t){f(this,e),this._auth=t}return h(e,[{key:"ngOnInit",value:function(){this.saveStatus()}},{key:"saveStatus",value:function(){this._auth.saveStatus("refresh")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Eb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-inicio"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"text-center","col-sm-12"],[1,"col-sm-12","text-center"],["src","assets/images/logo_farmacia.png","alt","Farmacia Mihzella Salud"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"h4",2),u._uU(3,"Bienvenido al Sistema Web de Inventario"),u.qZA(),u.TgZ(4,"div",3),u._UZ(5,"img",4),u.qZA(),u.qZA(),u.qZA())},styles:[""]}),e}()},{path:"productos",component:function(){var e=function(){function e(t,n,r){f(this,e),this._inventario=t,this.formBuilder=n,this.toastr=r,this.edicion=!1,this.idEdicion="",this.productoForm=this.formBuilder.group({codigo:["",ct.required],generico:["",ct.required],comercial:["",ct.required],laboratorio:["",ct.required],categoria:["",ct.required],composicion:["",ct.required],contenido:["",ct.required],presentacion:["",ct.required],cliente:["",ct.required]}),this.productos=t.getProductos(),this.laboratorios=t.getLaboratorios(),this.categorias=t.getCategorias()}return h(e,[{key:"ngOnInit",value:function(){}},{key:"newModal",value:function(){this.productoForm.reset(),document.getElementById("codigo").removeAttribute("readonly")}},{key:"openModal",value:function(e){var t=this;this.edicion=!0,this.idEdicion=e;var n=this._inventario.getProducto(e);setTimeout(function(){n.forEach(function(e){t.producto=e,document.getElementById("codigo").setAttribute("readonly","true"),null!=t.producto&&(t.productoForm=t.formBuilder.group({codigo:[t.producto.codigo,ct.required],generico:[t.producto.generico,ct.required],comercial:[t.producto.comercial,ct.required],laboratorio:[t.producto.laboratorio,ct.required],categoria:[t.producto.categoria,ct.required],composicion:[t.producto.composicion,ct.required],contenido:[t.producto.contenido,ct.required],presentacion:[t.producto.contenido,ct.required],cliente:[t.producto.cliente,ct.required]}))})},500)}},{key:"saveProducto",value:function(){this.productoForm.invalid?this.toastr.error("Todos los campos son requeridos","Ha ocurrido un error"):this.edicion?(this._inventario.updateProducto(this.idEdicion,this.productoForm.value),this.toastr.success("Producto modificado correctamente","Operaci\xf3n exitosa"),this.productoForm.reset(),this.edicion=!1,this.idEdicion="",this.producto=null,document.getElementById("codigo").removeAttribute("readonly"),this.closeButtonForm.nativeElement.click()):(this._inventario.saveProducto(this.productoForm.value),this.toastr.success("Producto guardado correctamente","Operaci\xf3n exitosa"),this.productoForm.reset(),this.edicion=!1,this.idEdicion="",this.producto=null,document.getElementById("codigo").removeAttribute("readonly"),this.closeButtonForm.nativeElement.click())}},{key:"deleteProducto",value:function(e){this._inventario.deleteProducto(e),this.toastr.success("Producto eliminado correctamente","Operaci\xf3n exitosa")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(kn),u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-productos"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(ix,5),2&e)&&(u.iGM(n=u.CRH())&&(t.closeButtonForm=n.first))},decls:91,vars:10,consts:[["type","button","data-toggle","modal","data-target","#productoModal",1,"btn","btn-sm","btn-success","mb-1",3,"click"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","productoModal","tabindex","-1","aria-labelledby","productoModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],[1,"row"],[1,"form-group","col-sm-6"],["for","codigo"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","codigo",1,"form-control"],[1,"form-group"],["for","generico"],["type","text","id","nombre","oninput","this.value = this.value.toUpperCase()","formControlName","generico",1,"form-control"],["for","comercial"],["type","text","id","descripcion","oninput","this.value = this.value.toUpperCase()","formControlName","comercial",1,"form-control"],[1,"card","mt-1"],["for","laboratorio"],["id","laboratorio","formControlName","laboratorio",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","categoria"],["id","codigo","formControlName","categoria",1,"form-control"],["for","composicion"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","composicion",1,"form-control"],["for","contenido"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","contenido",1,"form-control"],["for","presentacion"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","presentacion",1,"form-control"],["for","cliente"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","cliente",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],[1,"badge","badge-dark"],[4,"ngIf"],["type","button","data-toggle","modal","data-target","#productoModal",1,"btn","btn-sm","btn-warning",3,"click"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Listado de Productos"),u.qZA(),u.TgZ(2,"button",0),u.NdJ("click",function(){return t.newModal()}),u._uU(3,"Nuevo"),u.qZA(),u.TgZ(4,"table",1),u.TgZ(5,"thead",2),u.TgZ(6,"tr"),u.TgZ(7,"th",3),u._uU(8,"CODIGO"),u.qZA(),u.TgZ(9,"th",3),u._uU(10,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(11,"th",3),u._uU(12,"NOMBRE COMERCIAL"),u.qZA(),u.TgZ(13,"th",3),u._uU(14,"LABORATORIO"),u.qZA(),u.TgZ(15,"th",3),u._uU(16,"CATEGORIA"),u.qZA(),u.TgZ(17,"th",3),u._uU(18,"COSTO"),u.qZA(),u.TgZ(19,"th",3),u._uU(20,"OPCIONES"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"tbody",4),u.YNc(22,ox,19,6,"tr",5),u.ALo(23,"async"),u.qZA(),u.qZA(),u.TgZ(24,"div",6),u.TgZ(25,"div",7),u.TgZ(26,"div",8),u.TgZ(27,"div",9),u.TgZ(28,"h5",10),u._uU(29,"Registrar producto"),u.qZA(),u.TgZ(30,"button",11,12),u.TgZ(32,"span",13),u._uU(33,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"form",14),u.NdJ("ngSubmit",function(){return t.saveProducto()}),u.TgZ(35,"div",15),u.TgZ(36,"div",16),u.TgZ(37,"div",17),u.TgZ(38,"div",18),u.TgZ(39,"div",19),u.TgZ(40,"label",20),u._uU(41,"Codigo"),u.qZA(),u._UZ(42,"input",21),u.qZA(),u.qZA(),u.TgZ(43,"div",22),u.TgZ(44,"label",23),u._uU(45,"Nombre gen\xe9rico"),u.qZA(),u._UZ(46,"input",24),u.qZA(),u.TgZ(47,"div",22),u.TgZ(48,"label",25),u._uU(49,"Nombre comercial"),u.qZA(),u._UZ(50,"input",26),u.qZA(),u.qZA(),u.qZA(),u.TgZ(51,"div",27),u.TgZ(52,"div",17),u.TgZ(53,"div",18),u.TgZ(54,"div",19),u.TgZ(55,"label",28),u._uU(56,"Laboratorio"),u.qZA(),u.TgZ(57,"select",29),u.YNc(58,sx,2,2,"option",30),u.ALo(59,"async"),u.qZA(),u.qZA(),u.TgZ(60,"div",19),u.TgZ(61,"label",31),u._uU(62,"Categor\xeda"),u.qZA(),u.TgZ(63,"select",32),u.YNc(64,ux,2,2,"option",30),u.ALo(65,"async"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(66,"div",27),u.TgZ(67,"div",17),u.TgZ(68,"div",18),u.TgZ(69,"div",19),u.TgZ(70,"label",33),u._uU(71,"Composici\xf3n"),u.qZA(),u._UZ(72,"input",34),u.qZA(),u.TgZ(73,"div",19),u.TgZ(74,"label",35),u._uU(75,"Contenido"),u.qZA(),u._UZ(76,"input",36),u.qZA(),u.qZA(),u.TgZ(77,"div",18),u.TgZ(78,"div",19),u.TgZ(79,"label",37),u._uU(80,"Presentaci\xf3n"),u.qZA(),u._UZ(81,"input",38),u.qZA(),u.TgZ(82,"div",19),u.TgZ(83,"label",39),u._uU(84,"Presentaci\xf3n al cliente"),u.qZA(),u._UZ(85,"input",40),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(86,"div",41),u.TgZ(87,"button",42),u._uU(88,"Cancelar"),u.qZA(),u.TgZ(89,"button",43),u._uU(90,"Guardar"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(22),u.Q6J("ngForOf",u.lcZ(23,4,t.productos)),u.xp6(12),u.Q6J("formGroup",t.productoForm),u.xp6(24),u.Q6J("ngForOf",u.lcZ(59,6,t.laboratorios)),u.xp6(6),u.Q6J("ngForOf",u.lcZ(65,8,t.categorias)))},directives:[Y,Xt,Nt,on,rt,Ot,un,hn,$,fn,gn],pipes:[ae],styles:[""]}),e}()},{path:"usuarios",component:function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-usuario"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e}()},{path:"compras",component:function(){var e=function(){function e(t,n,r,i){f(this,e),this._inventario=t,this._utils=n,this.fb=r,this.toastr=i,this.nuevasCompras=[],this.productoSeleccionado="",this.correlativo="OC-1",this.saving=!1,this.productoForm=this.fb.group({}),this.compraForm=this.fb.group({id:["",ct.required],costo:["",ct.required],cantidad:["",ct.required],precio:["",ct.required],saldo:!1}),this.compras=t.getCompras(),this.productos=t.getProductos(),this.comprasCabecera=t.getComprasCabecera()}return h(e,[{key:"ngOnInit",value:function(){}},{key:"seleccionarProducto",value:function(e){this.productoSeleccionado=null==e?void 0:e.target.value}},{key:"agregar",value:function(){var e=this;if(this.compraForm.invalid)this.toastr.error("Debe completar todos los campos","Ocurri\xf3 un error");else{var t=this._inventario.getProducto(this.compraForm.value.id),n=!0;t.forEach(function(t){if(n){var r={};r.id=t.id,r.codigo=t.codigo,r.comercial=t.comercial,r.generico=t.generico,r.laboratorio=t.laboratorio,r.categoria=t.categoria,r.costo=e.compraForm.value.costo,r.cantidad=e.compraForm.value.cantidad,r.precio=e.compraForm.value.precio,r.total=Math.round(e.compraForm.value.costo*e.compraForm.value.cantidad*100)/100,r.fecha=e._utils.getTodayTimestamp(),r.saldo=!0===e.compraForm.value.saldo,e.nuevasCompras.push(r),e.compraForm.reset(),n=!1}})}}},{key:"guardarCompras",value:function(){var e=this;this.saving=!0,this._inventario.saveCompraCabecera({orden:this.correlativo}),this.generateOrdenCompra(),setTimeout(function(){e.nuevasCompras.forEach(function(t){t.orden=e.correlativo,e._inventario.saveCompra(t),e.productoForm.value.precio=t.precio,e._inventario.updateProducto(t.id,e.productoForm.value)}),setTimeout(function(){e.nuevasCompras=[],e.toastr.success("Registros almacenados correctamente","Operaci\xf3n exitosa"),e.closeButtonForm.nativeElement.click(),e.saving=!1},800)},500)}},{key:"generateOrdenCompra",value:function(){var e=this;this.comprasCabecera.forEach(function(t){e.correlativo="OC-"+t.length})}},{key:"quitarProducto",value:function(e){this.nuevasCompras.splice(e,1)}},{key:"getFecha",value:function(e){return this._utils.getDateFromTimestamp(e)}},{key:"deleteCompra",value:function(e){this._inventario.deleteCompra(e),this.toastr.success("Compra eliminada correctamente","Operaci\xf3n exitosa")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(XT),u.Y36(kn),u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-compras"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(cx,5),2&e)&&(u.iGM(n=u.CRH())&&(t.closeButtonForm=n.first))},decls:107,vars:10,consts:[["type","button","data-toggle","modal","data-target","#compraModal",1,"btn","btn-sm","btn-success","mb-1"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","compraModal","tabindex","-1","aria-labelledby","compraModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","id",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],[1,"form-group","col-md-3"],["for","costo"],["type","number","id","costo","formControlName","costo",1,"form-control"],["for","cantidad"],["type","number","id","cantidad","formControlName","cantidad",1,"form-control"],["for","precio"],["type","number","id","precio","formControlName","precio",1,"form-control"],["type","button","id","agregar",1,"btn","btn-success","mt-4",3,"click"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","saldo","formControlName","saldo",1,"form-check-input"],["for","saldo",1,"form-check-label"],[1,"modal-footer"],["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-dark"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[3,"value"],[1,"fas","fa-trash"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","ml-2",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Listado de Compras"),u.qZA(),u.TgZ(2,"button",0),u._uU(3,"Nueva compra"),u.qZA(),u.TgZ(4,"table",1),u.TgZ(5,"thead",2),u.TgZ(6,"tr"),u.TgZ(7,"th",3),u._uU(8,"COMPRA"),u.qZA(),u.TgZ(9,"th",3),u._uU(10,"FECHA"),u.qZA(),u.TgZ(11,"th",3),u._uU(12,"TIPO"),u.qZA(),u.TgZ(13,"th",3),u._uU(14,"CODIGO"),u.qZA(),u.TgZ(15,"th",3),u._uU(16,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(17,"th",3),u._uU(18,"LABORATORIO"),u.qZA(),u.TgZ(19,"th",3),u._uU(20,"CATEGORIA"),u.qZA(),u.TgZ(21,"th",3),u._uU(22,"COSTO"),u.qZA(),u.TgZ(23,"th",3),u._uU(24,"PRECIO"),u.qZA(),u.TgZ(25,"th",3),u._uU(26,"CANTIDAD"),u.qZA(),u.TgZ(27,"th",3),u._uU(28,"TOTAL"),u.qZA(),u.TgZ(29,"th",3),u._uU(30,"OPCIONES"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"tbody",4),u.YNc(32,fx,27,12,"tr",5),u.ALo(33,"async"),u.qZA(),u.qZA(),u.TgZ(34,"div",6),u.TgZ(35,"div",7),u.TgZ(36,"div",8),u.TgZ(37,"div",9),u.TgZ(38,"h5",10),u._uU(39,"Registrar nueva compra"),u.qZA(),u.TgZ(40,"button",11,12),u.TgZ(42,"span",13),u._uU(43,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"form",14),u.TgZ(45,"div",15),u.TgZ(46,"div",16),u.TgZ(47,"div",17),u.TgZ(48,"form",18),u.TgZ(49,"div",19),u.TgZ(50,"div",20),u.TgZ(51,"label",21),u._uU(52,"Producto"),u.qZA(),u.TgZ(53,"select",22),u.TgZ(54,"option",23),u._uU(55,"Seleccione..."),u.qZA(),u.YNc(56,dx,2,5,"option",24),u.ALo(57,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(58,"div",25),u.TgZ(59,"div",26),u.TgZ(60,"label",27),u._uU(61,"Costo compra"),u.qZA(),u._UZ(62,"input",28),u.qZA(),u.TgZ(63,"div",26),u.TgZ(64,"label",29),u._uU(65,"Cantidad"),u.qZA(),u._UZ(66,"input",30),u.qZA(),u.TgZ(67,"div",26),u.TgZ(68,"label",31),u._uU(69,"Precio venta"),u.qZA(),u._UZ(70,"input",32),u.qZA(),u.TgZ(71,"div",26),u.TgZ(72,"button",33),u.NdJ("click",function(){return t.agregar()}),u._uU(73,"Agregar"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(74,"div",34),u.TgZ(75,"div",35),u._UZ(76,"input",36),u.TgZ(77,"label",37),u._uU(78," Es saldo "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(79,"div",16),u.TgZ(80,"div",17),u.TgZ(81,"table",1),u.TgZ(82,"thead",2),u.TgZ(83,"tr"),u.TgZ(84,"th",3),u._uU(85,"CODIGO DE PRODUCTO"),u.qZA(),u.TgZ(86,"th",3),u._uU(87,"NOMBRE COMERCIAL"),u.qZA(),u.TgZ(88,"th",3),u._uU(89,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(90,"th",3),u._uU(91,"LABORATORIO"),u.qZA(),u.TgZ(92,"th",3),u._uU(93,"COSTO"),u.qZA(),u.TgZ(94,"th",3),u._uU(95,"PRECIO"),u.qZA(),u.TgZ(96,"th",3),u._uU(97,"CANTIDAD"),u.qZA(),u.TgZ(98,"th",3),u._uU(99,"TOTAL"),u.qZA(),u.TgZ(100,"th",3),u._uU(101,"QUITAR"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(102,"tbody"),u.YNc(103,vx,23,14,"tr",5),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(104,"div",38),u.YNc(105,px,3,0,"div",39),u.YNc(106,gx,5,0,"div",40),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(32),u.Q6J("ngForOf",u.lcZ(33,6,t.compras)),u.xp6(16),u.Q6J("formGroup",t.compraForm),u.xp6(8),u.Q6J("ngForOf",u.lcZ(57,8,t.productos)),u.xp6(47),u.Q6J("ngForOf",t.nuevasCompras),u.xp6(2),u.Q6J("ngIf",1==t.saving),u.xp6(1),u.Q6J("ngIf",0==t.saving))},directives:[Y,Xt,Nt,on,hn,Ot,un,fn,gn,tn,rt,et,$],pipes:[ae,oe],styles:[""]}),e}()},{path:"ventas",component:function(){var e=function(){function e(t,n,r,i){f(this,e),this._inventario=t,this._utils=n,this.fb=r,this.toastr=i,this.nuevasVentas=[],this.correlativo="OV-1",this.saving=!1,this.precioVenta=0,this.ventaForm=this.fb.group({id:["",ct.required],cantidad:["",ct.required]}),this.ventas=t.getVentas(),this.productos=t.getProductos(),this.ventasCabecera=t.getVentasCabecera()}return h(e,[{key:"ngOnInit",value:function(){}},{key:"seleccionarProducto",value:function(e){var t=this,n=null==e?void 0:e.target.value;console.log(n);var r=this._inventario.getProducto(n),i=!0;r.forEach(function(e){i&&(t.precioVenta=e.precio,i=!1)})}},{key:"agregar",value:function(){var e=this;if(this.ventaForm.invalid)this.toastr.error("Debe completar todos los campos","Ocurri\xf3 un error");else{var t=this._inventario.getProducto(this.ventaForm.value.id),n=!0;t.forEach(function(t){if(n){var r={};r.codigo=t.codigo,r.id=t.id,r.comercial=t.comercial,r.generico=t.generico,r.laboratorio=t.laboratorio,r.categoria=t.categoria,r.precio=e.precioVenta,r.cantidad=e.ventaForm.value.cantidad,r.total=Math.round(e.precioVenta*e.ventaForm.value.cantidad*100)/100,r.fecha=e._utils.getTodayTimestamp(),e.nuevasVentas.push(r),e.ventaForm.reset(),e.precioVenta=0,n=!1}})}}},{key:"guardarCompras",value:function(){var e=this;this.saving=!0,this._inventario.saveVentaCabecera({orden:this.correlativo}),this.generateOrdenCompra(),setTimeout(function(){e.nuevasVentas.forEach(function(t){t.orden=e.correlativo,e._inventario.saveVenta(t)}),setTimeout(function(){e.nuevasVentas=[],e.toastr.success("Registros almacenados correctamente","Venta exitosa"),e.closeButtonForm.nativeElement.click(),e.saving=!1},800)},500)}},{key:"generateOrdenCompra",value:function(){var e=this;this.ventasCabecera.forEach(function(t){e.correlativo="OV-"+t.length})}},{key:"quitarProducto",value:function(e){console.log(e),this.nuevasVentas.splice(e,1)}},{key:"getFecha",value:function(e){return this._utils.getDateFromTimestamp(e)}},{key:"deleteVenta",value:function(e){this._inventario.deleteVenta(e),this.toastr.success("Venta eliminada correctamente","Operaci\xf3n exitosa")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(XT),u.Y36(kn),u.Y36(yb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-ventas"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(mx,5),2&e)&&(u.iGM(n=u.CRH())&&(t.closeButtonForm=n.first))},decls:92,vars:11,consts:[["type","button","data-toggle","modal","data-target","#ventaModal",1,"btn","btn-sm","btn-success","mb-1"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","ventaModal","tabindex","-1","aria-labelledby","ventaModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","id",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],[1,"form-group","col-md-5"],["for","precio"],["type","number","id","precio","readonly","",1,"form-control",3,"value"],["for","cantidad"],["type","number","id","cantidad","formControlName","cantidad",1,"form-control"],[1,"form-group","col-md-2"],["type","button","id","agregar",1,"btn","btn-success","mt-4",3,"click"],[1,"modal-footer"],["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-dark"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[3,"value"],[1,"fas","fa-trash"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","ml-2",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Listado de Ventas"),u.qZA(),u.TgZ(2,"button",0),u._uU(3,"Nueva venta"),u.qZA(),u.TgZ(4,"table",1),u.TgZ(5,"thead",2),u.TgZ(6,"tr"),u.TgZ(7,"th",3),u._uU(8,"VENTA"),u.qZA(),u.TgZ(9,"th",3),u._uU(10,"FECHA"),u.qZA(),u.TgZ(11,"th",3),u._uU(12,"CODIGO"),u.qZA(),u.TgZ(13,"th",3),u._uU(14,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(15,"th",3),u._uU(16,"LABORATORIO"),u.qZA(),u.TgZ(17,"th",3),u._uU(18,"CATEGORIA"),u.qZA(),u.TgZ(19,"th",3),u._uU(20,"PRECIO (Bs)"),u.qZA(),u.TgZ(21,"th",3),u._uU(22,"CANTIDAD"),u.qZA(),u.TgZ(23,"th",3),u._uU(24,"TOTAL"),u.qZA(),u.TgZ(25,"th",3),u._uU(26,"OPCIONES"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"tbody",4),u.YNc(28,yx,23,9,"tr",5),u.ALo(29,"async"),u.qZA(),u.qZA(),u.TgZ(30,"div",6),u.TgZ(31,"div",7),u.TgZ(32,"div",8),u.TgZ(33,"div",9),u.TgZ(34,"h5",10),u._uU(35,"Registrar nueva venta"),u.qZA(),u.TgZ(36,"button",11,12),u.TgZ(38,"span",13),u._uU(39,"\xd7"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(40,"form",14),u.TgZ(41,"div",15),u.TgZ(42,"div",16),u.TgZ(43,"div",17),u.TgZ(44,"form",18),u.TgZ(45,"div",19),u.TgZ(46,"div",20),u.TgZ(47,"label",21),u._uU(48,"Producto"),u.qZA(),u.TgZ(49,"select",22),u.NdJ("change",function(e){return t.seleccionarProducto(e)}),u.TgZ(50,"option",23),u._uU(51,"Seleccione..."),u.qZA(),u.YNc(52,kx,2,5,"option",24),u.ALo(53,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(54,"div",25),u.TgZ(55,"div",26),u.TgZ(56,"label",27),u._uU(57,"Precio"),u.qZA(),u._UZ(58,"input",28),u.qZA(),u.TgZ(59,"div",26),u.TgZ(60,"label",29),u._uU(61,"Cantidad"),u.qZA(),u._UZ(62,"input",30),u.qZA(),u.TgZ(63,"div",31),u.TgZ(64,"button",32),u.NdJ("click",function(){return t.agregar()}),u._uU(65,"Agregar"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(66,"div",16),u.TgZ(67,"div",17),u.TgZ(68,"table",1),u.TgZ(69,"thead",2),u.TgZ(70,"tr"),u.TgZ(71,"th",3),u._uU(72,"CODIGO DE PRODUCTO"),u.qZA(),u.TgZ(73,"th",3),u._uU(74,"NOMBRE COMERCIAL"),u.qZA(),u.TgZ(75,"th",3),u._uU(76,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(77,"th",3),u._uU(78,"LABORATORIO"),u.qZA(),u.TgZ(79,"th",3),u._uU(80,"COSTO"),u.qZA(),u.TgZ(81,"th",3),u._uU(82,"CANTIDAD"),u.qZA(),u.TgZ(83,"th",3),u._uU(84,"TOTAL"),u.qZA(),u.TgZ(85,"th",3),u._uU(86,"QUITAR"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(87,"tbody"),u.YNc(88,bx,20,11,"tr",5),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(89,"div",33),u.YNc(90,wx,3,0,"div",34),u.YNc(91,_x,5,0,"div",35),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(28),u.Q6J("ngForOf",u.lcZ(29,7,t.ventas)),u.xp6(16),u.Q6J("formGroup",t.ventaForm),u.xp6(8),u.Q6J("ngForOf",u.lcZ(53,9,t.productos)),u.xp6(6),u.s9C("value",t.precioVenta),u.xp6(30),u.Q6J("ngForOf",t.nuevasVentas),u.xp6(2),u.Q6J("ngIf",1==t.saving),u.xp6(1),u.Q6J("ngIf",0==t.saving))},directives:[Y,Xt,Nt,on,hn,Ot,un,fn,gn,tn,rt,$],pipes:[ae,oe],styles:[""]}),e}()},{path:"inventario",component:function(){var e=function(){function e(t,n){f(this,e),this._inventario=t,this._auth=n,this.inventario=[],this.sumatoriaCompras=0,this.sumatoriaVentas=0,this.productos=t.getProductos(),this.compras=t.getCompras(),this.ventas=t.getVentas(),this.calcularInventario()}return h(e,[{key:"ngOnInit",value:function(){"refresh"===this._auth.getStatus()&&(window.location.reload(),this._auth.saveStatus("inv-ready"))}},{key:"ngOnDestroy",value:function(){this._auth.saveStatus("refresh")}},{key:"calcularInventario",value:function(){var e=this;this.productos.forEach(function(t){for(var n=0;n<t.length;n++)e.sumatorias(t[n])})}},{key:"sumatorias",value:function(e){var t=this;this.sumatoriaCompras=0,this.sumatoriaVentas=0;var n=0,r=0;this.compras.forEach(function(t){for(var r=0;r<t.length;r++)t[r].codigo===e.codigo&&(n+=t[r].cantidad)}),this.ventas.forEach(function(t){for(var n=0;n<t.length;n++)t[n].codigo===e.codigo&&(r+=t[n].cantidad)}),setTimeout(function(){var i={};i.codigo=e.codigo,i.generico=e.generico,i.comercial=e.comercial,i.laboratorio=e.laboratorio,i.categoria=e.categoria,i.stock=n-r,t.inventario.push(i)},1e3)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Zk),u.Y36(Eb))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-inventario"]],decls:19,vars:1,consts:[[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],[1,"badge","badge-dark"]],template:function(e,t){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Inventario de Productos"),u.qZA(),u.TgZ(2,"table",0),u.TgZ(3,"thead",1),u.TgZ(4,"tr"),u.TgZ(5,"th",2),u._uU(6,"CODIGO"),u.qZA(),u.TgZ(7,"th",2),u._uU(8,"NOMBRE GEN\xc9RICO"),u.qZA(),u.TgZ(9,"th",2),u._uU(10,"NOMBRE COMERCIAL"),u.qZA(),u.TgZ(11,"th",2),u._uU(12,"LABORATORIO"),u.qZA(),u.TgZ(13,"th",2),u._uU(14,"CATEGORIA"),u.qZA(),u.TgZ(15,"th",2),u._uU(16,"STOCK"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"tbody",3),u.YNc(18,Tx,14,6,"tr",4),u.qZA(),u.qZA()),2&e&&(u.xp6(18),u.Q6J("ngForOf",t.inventario))},directives:[Y],styles:[""]}),e}()},{path:"kardex",component:rx},{path:"parametricas",component:Sb},{path:"**",pathMatch:"full",redirectTo:"login"}],Sx=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[jT.forRoot(xx)],jT]}),e}(),Ex=function(){var e=function(){function e(t,n){f(this,e),this._auth=t,this.router=n,this.usuario="",this.email="",this.usuario=t.getLocalData("names")+" "+t.getLocalData("lastnames"),this.email=t.getLocalData("email")}return h(e,[{key:"ngOnInit",value:function(){}},{key:"logout",value:function(){this._auth.clearLocalStorage(),this.router.navigateByUrl("/login")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(Eb),u.Y36(ET))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-header"]],decls:45,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bar-color"],["href","#",1,"navbar-brand"],["src","assets/images/salud_icono.png",1,"icono-logo"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],["routerLinkActive","active",1,"nav-item"],["routerLink","/inicio",1,"nav-link"],[1,"fas","fa-home"],[1,"sr-only"],["routerLinkActive","active",1,"nav-item","ml-3"],["routerLink","/productos",1,"nav-link"],[1,"fas","fa-first-aid"],["routerLink","/compras",1,"nav-link"],[1,"fas","fa-shopping-bag"],["routerLink","/ventas",1,"nav-link"],[1,"fas","fa-money-check-alt"],["routerLink","/inventario",1,"nav-link"],[1,"fas","fa-book-medical"],["routerLink","/kardex",1,"nav-link"],[1,"fas","fa-book"],["routerLink","/parametricas",1,"nav-link"],[1,"fas","fa-box"],[1,"navbar-text"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-user"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"nav",0),u.TgZ(1,"a",1),u._UZ(2,"img",2),u.qZA(),u.TgZ(3,"button",3),u._UZ(4,"span",4),u.qZA(),u.TgZ(5,"div",5),u.TgZ(6,"ul",6),u.TgZ(7,"li",7),u.TgZ(8,"a",8),u._UZ(9,"i",9),u._uU(10," Inicio "),u.TgZ(11,"span",10),u._uU(12,"(current)"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"li",11),u.TgZ(14,"a",12),u._UZ(15,"i",13),u._uU(16," Productos"),u.qZA(),u.qZA(),u.TgZ(17,"li",11),u.TgZ(18,"a",14),u._UZ(19,"i",15),u._uU(20," Compras"),u.qZA(),u.qZA(),u.TgZ(21,"li",11),u.TgZ(22,"a",16),u._UZ(23,"i",17),u._uU(24," Ventas"),u.qZA(),u.qZA(),u.TgZ(25,"li",11),u.TgZ(26,"a",18),u._UZ(27,"i",19),u._uU(28," Inventario"),u.qZA(),u.qZA(),u.TgZ(29,"li",11),u.TgZ(30,"a",20),u._UZ(31,"i",21),u._uU(32," Kardex"),u.qZA(),u.qZA(),u.TgZ(33,"li",11),u.TgZ(34,"a",22),u._UZ(35,"i",23),u._uU(36," Parametricas"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"span",24),u.TgZ(38,"li",25),u.TgZ(39,"a",26),u._UZ(40,"i",27),u._uU(41),u.qZA(),u.TgZ(42,"div",28),u.TgZ(43,"button",29),u.NdJ("click",function(){return t.logout()}),u._uU(44,"Cerrar sesi\xf3n"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(41),u.hij(" ",t.email," "))},directives:[OT,CT],styles:[""]}),e}(),Ix=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"bg-dark","text-center","text-lg-start","ftr"],[1,"text-center","p-3","text-muted"],["href","https://www.muvlin.com","target","blank",1,"text-light"]],template:function(e,t){1&e&&(u.TgZ(0,"footer",0),u.TgZ(1,"div",1),u._uU(2," \xa9 2021 Derechos reservados "),u.TgZ(3,"a",2),u._uU(4,"MUVLIN"),u.qZA(),u.qZA(),u.qZA())},styles:[""]}),e}();function Ax(e,t){1&e&&(u.ynx(0),u._UZ(1,"router-outlet"),u.BQk())}function Cx(e,t){1&e&&(u.ynx(0),u._UZ(1,"app-header"),u.TgZ(2,"div",1),u._UZ(3,"router-outlet"),u.qZA(),u._UZ(4,"app-footer"),u.BQk())}var Rx=function(){var e=function e(t){f(this,e),this.router=t,this.title="appinventario-frontend"};return e.\u0275fac=function(t){return new(t||e)(u.Y36(ET))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container-fluid"]],template:function(e,t){1&e&&(u.YNc(0,Ax,2,0,"ng-container",0),u.YNc(1,Cx,5,0,"ng-container",0)),2&e&&(u.Q6J("ngIf","/login"==t.router.url),u.xp6(1),u.Q6J("ngIf","/login"!=t.router.url))},directives:[$,NT,Ex,Ix],styles:[""]}),e}();function Ox(){return"undefined"!=typeof window&&void 0!==window.document}function Nx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dx(e){switch(e.length){case 0:return new Kk;case 1:return e[0];default:return new Wk(e)}}function Px(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=[],s=[],u=-1,c=null;if(r.forEach(function(e){var n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach(function(n){var r=n,s=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),s){case"!":s=i[n];break;case Uk:s=a[n];break;default:s=t.normalizeStyleValue(n,r,s,o)}l[r]=s}),r||s.push(l),c=l,u=n}),o.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(o.join(l)))}return s}function Lx(e,t,n,r){switch(t){case"start":e.onStart(function(){return r(n&&Fx(n,"start",e))});break;case"done":e.onDone(function(){return r(n&&Fx(n,"done",e))});break;case"destroy":e.onDestroy(function(){return r(n&&Fx(n,"destroy",e))})}}function Fx(e,t,n){var r=n.totalTime,i=Zx(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),a=e._data;return null!=a&&(i._data=a),i}function Zx(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:a,disabled:!!o}}function Mx(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function Ux(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var qx=function(e,t){return!1},Vx=function(e,t){return!1},jx=function(e,t,n){return[]},Bx=Nx();(Bx||"undefined"!=typeof Element)&&(qx=Ox()?function(e,t){for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:function(e,t){return e.contains(t)},Vx=function(){if(Bx||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:Vx}(),jx=function(e,t,n){var r=[];if(n)for(var i=e.querySelectorAll(t),a=0;a<i.length;a++)r.push(i[a]);else{var o=e.querySelector(t);o&&r.push(o)}return r});var zx=null,Hx=!1;function Gx(e){zx||(zx=("undefined"!=typeof document?document.body:null)||{},Hx=!!zx.style&&"WebkitAppearance"in zx.style);var t=!0;return zx.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in zx.style)&&Hx&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in zx.style)),t}var Kx=Vx,Wx=qx,Qx=jx;function Yx(e){var t={};return Object.keys(e).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}var Jx=function(){var e=function(){function e(){f(this,e)}return h(e,[{key:"validateStyleProperty",value:function(e){return Gx(e)}},{key:"matchesElement",value:function(e,t){return Kx(e,t)}},{key:"containsElement",value:function(e,t){return Wx(e,t)}},{key:"query",value:function(e,t,n){return Qx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,i){return new Kk(n,r)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),$x=function(){var e=function e(){f(this,e)};return e.NOOP=new Jx,e}(),Xx="ng-enter",eS="ng-leave",tS="ng-trigger",nS=".ng-trigger",rS="ng-animating",iS=".ng-animating";function aS(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:oS(parseFloat(t[1]),t[2])}function oS(e,t){switch(t){case"s":return 1e3*e;default:return e}}function sS(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,a="";if("string"==typeof e){var o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=oS(parseFloat(o[1]),o[2]);var s=o[3];null!=s&&(i=oS(parseFloat(s),o[4]));var u=o[5];u&&(a=u)}else r=e;if(!n){var c=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:i,easing:a}}(e,t,n)}function uS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function cS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else uS(e,n);return n}function lS(e,t,n){return n?t+":"+n+";":""}function hS(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=lS(0,r,e.style.getPropertyValue(r))}for(var i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=lS(0,wS(i),e.style[i]));e.setAttribute("style",t)}function fS(e,t,n){e.style&&(Object.keys(t).forEach(function(r){var i=bS(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),Nx()&&hS(e))}function dS(e,t){e.style&&(Object.keys(t).forEach(function(t){var n=bS(t);e.style[n]=""}),Nx()&&hS(e))}function vS(e){return Array.isArray(e)?1==e.length?e[0]:jk(e):e}var pS=new RegExp("{{\\s*(.+?)\\s*}}","g");function gS(e){var t=[];if("string"==typeof e){for(var n;n=pS.exec(e);)t.push(n[1]);pS.lastIndex=0}return t}function mS(e,t,n){var r=e.toString(),i=r.replace(pS,function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()});return i==r?e:i}function yS(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var kS=/-+([a-z0-9])/g;function bS(e){return e.replace(kS,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()})}function wS(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _S(e,t){return 0===e||0===t}function TS(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],a=[];if(r.forEach(function(e){i.hasOwnProperty(e)||a.push(e),i[e]=n[e]}),a.length)for(var o=function(){var n=t[s];a.forEach(function(t){n[t]=SS(e,t)})},s=1;s<t.length;s++)o()}return t}function xS(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function SS(e,t){return window.getComputedStyle(e)[t]}function ES(e,t){var n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var a=i[1],o=i[2],s=i[3];t.push(CS(a,s)),"<"==o[0]&&("*"!=a||"*"!=s)&&t.push(CS(s,a))}(e,n,t)}):n.push(e),n}var IS=new Set(["true","1"]),AS=new Set(["false","0"]);function CS(e,t){var n=IS.has(e)||AS.has(e),r=IS.has(t)||AS.has(t);return function(i,a){var o="*"==e||e==i,s="*"==t||t==a;return!o&&n&&"boolean"==typeof i&&(o=i?IS.has(e):AS.has(e)),!s&&r&&"boolean"==typeof a&&(s=a?IS.has(t):AS.has(t)),o&&s}}var RS=new RegExp("s*:selfs*,?","g");function OS(e,t,n){return new NS(e).build(t,n)}var NS=function(){function e(t){f(this,e),this._driver=t}return h(e,[{key:"build",value:function(e,t){var n=new DS(t);return this._resetContextStyleTimingState(n),xS(this,vS(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,a=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(e){s.name=e,a.push(n.visitState(s,t))}),s.name=u}else if(1==e.type){var c=n.visitTransition(e,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:o,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,a=r||{};if(n.styles.forEach(function(e){if(PS(e)){var t=e;Object.keys(t).forEach(function(e){gS(t[e]).forEach(function(e){a.hasOwnProperty(e)||i.add(e)})})}}),i.size){var o=yS(i.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(o.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n=xS(this,vS(e.animation),t);return{type:1,matchers:ES(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:LS(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map(function(e){return xS(n,e,t)}),options:LS(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,i=0,a=e.steps.map(function(e){t.currentTime=r;var a=xS(n,e,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:a,options:LS(e.options)}}},{key:"visitAnimate",value:function(e,t){var n=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return FS(sS(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some(function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)})){var i=FS(0,0,"");return i.dynamic=!0,i.strValue=r,i}return FS((n=n||sS(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;var r,i=e.styles?e.styles:Bk({});if(5==i.type)r=this.visitKeyframes(i,t);else{var a=e.styles,o=!1;if(!a){o=!0;var s={};n.easing&&(s.easing=n.easing),a=Bk(s)}t.currentTime+=n.duration+n.delay;var u=this.visitStyle(a,t);u.isEmptyStep=o,r=u}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach(function(e){"string"==typeof e?e==Uk?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)}):n.push(e.styles);var r=!1,i=null;return n.forEach(function(e){if(PS(e)){var t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(var a in t)if(t[a].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(function(e){"string"!=typeof e&&Object.keys(e).forEach(function(r){if(n._driver.validateStyleProperty(r)){var o=t.collectedStyles[t.currentQuerySelector],s=o[r],u=!0;s&&(a!=i&&a>=s.startTime&&i<=s.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(s.startTime,'ms" and "').concat(s.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(a,'ms" and "').concat(i,'ms"')),u=!1),a=s.startTime),u&&(o[r]={startTime:a,endTime:i}),t.options&&function(e,t,n){var r=t.params||{},i=gS(e);i.length&&i.forEach(function(e){r.hasOwnProperty(e)||n.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})}(e[r],t.options,t.errors)}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,a=[],o=!1,s=!1,u=0,c=e.steps.map(function(e){var r=n._makeStyleAst(e,t),c=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach(function(e){if(PS(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}});else if(PS(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,o=o||l<u,u=l,a.push(l),r});s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&t.errors.push("Please ensure that all keyframe offsets are in order");var l=e.steps.length,h=0;i>0&&i<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=t.currentTime,v=t.currentAnimateTimings,p=v.duration;return c.forEach(function(e,i){var o=h>0?i==f?1:h*i:a[i],s=o*p;t.currentTime=d+v.delay+s,v.duration=s,n._validateStyleAst(e,t),e.offset=o,r.styles.push(e)}),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:xS(this,vS(e.animation),t),options:LS(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:LS(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:LS(e.options)}}},{key:"visitQuery",value:function(e,n){var r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;var a=t(function(e){var t=!!e.split(/\s*,\s*/).find(function(e){return":self"==e});return t&&(e=e.replace(RS,"")),[e=e.replace(/@\*/g,nS).replace(/@\w+/g,function(e){return nS+"-"+e.substr(1)}).replace(/:animating/g,iS),t]}(e.selector),2),o=a[0],s=a[1];n.currentQuerySelector=r.length?r+" "+o:o,Mx(n.collectedStyles,n.currentQuerySelector,{});var u=xS(this,vS(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:e.selector,options:LS(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:sS(e.timings,t.errors,!0);return{type:12,animation:xS(this,vS(e.animation),t),timings:n,options:null}}}]),e}(),DS=function e(t){f(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function PS(e){return!Array.isArray(e)&&"object"==typeof e}function LS(e){return e?(e=uS(e)).params&&(e.params=function(e){return e?uS(e):null}(e.params)):e={},e}function FS(e,t,n){return{duration:e,delay:t,easing:n}}function ZS(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:o,subTimeline:s}}var MS=function(){function e(){f(this,e),this._map=new Map}return h(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,a(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),US=new RegExp(":enter","g"),qS=new RegExp(":leave","g");function VS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new jS).buildKeyframes(e,t,n,r,i,a,o,s,u,c)}var jS=function(){function e(){f(this,e)}return h(e,[{key:"buildKeyframes",value:function(e,t,n,r,i,a,o,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new MS;var l=new zS(e,t,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([a],null,l.errors,s),xS(this,n,l);var h=l.timelines.filter(function(e){return e.containsAnimation()});if(h.length&&Object.keys(o).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([o],null,l.errors,s)}return h.length?h.map(function(e){return e.buildKeyframes()}):[ZS(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);i!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?aS(n.duration):null,a=null!=n.delay?aS(n.delay):null;return 0!==i&&e.forEach(function(e){var n=t.appendInstructionToTimeline(e,i,a);r=Math.max(r,n.duration+n.delay)}),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),xS(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,i=t,a=e.options;if(a&&(a.params||a.delay)&&((i=t.createSubContext(a)).transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=BS);var o=aS(a.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(function(e){return xS(n,e,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,a=e.options&&e.options.delay?aS(e.options.delay):0;e.steps.forEach(function(o){var s=t.createSubContext(e.options);a&&s.delayNextStep(a),xS(n,o,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)}),t.transformIntoNewTimeline(i),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return sS(t.params?mS(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(function(e){a.forwardTime((e.offset||0)*i),a.setStyles(e.styles,e.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+i),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?aS(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=BS);var o=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,r);a&&s.delayNextStep(a),r===t.element&&(u=s.currentTimeline),xS(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,a=Math.abs(i.duration),o=a*(t.currentQueryTotal-1),s=a*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=o-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;xS(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),e}(),BS={},zS=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new HS(this._driver,n,0),s.push(this.currentTimeline)}return h(e,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=aS(r.duration)),null!=r.delay&&(i.delay=aS(r.delay));var a=r.params;if(a){var o=i.params;o||(o=this.options.params={}),Object.keys(a).forEach(function(e){(!t||!o.hasOwnProperty(e))&&(o[e]=mS(a[e],o,n.errors))})}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach(function(e){n[e]=t[e]})}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,a=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(t),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=BS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new GS(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,i,o){var s=[];if(r&&s.push(this.element),e.length>0){e=(e=e.replace(US,"."+this._enterClassName)).replace(qS,"."+this._leaveClassName);var u=this._driver.query(this.element,e,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,a(u))}return!i&&0==s.length&&o.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),s}}]),e}(),HS=function(){function e(t,n,r,i){f(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return h(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(function(e){t._backFill[e]=t._globalTimelineStyles[e]||Uk,t._currentKeyframe[e]=Uk}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var i=this;t&&(this._previousKeyframe.easing=t);var a=r&&r.params||{},o=function(e,t){var n,r={};return e.forEach(function(e){"*"===e?(n=n||Object.keys(t)).forEach(function(e){r[e]=Uk}):cS(e,!1,r)}),r}(e,this._globalTimelineStyles);Object.keys(o).forEach(function(e){var t=mS(o[e],a,n);i._pendingStyles[e]=t,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:Uk),i._updateStyle(e,t)})}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){e._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])}))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach(function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach(function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)})}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(a,o){var s=cS(a,!0);Object.keys(s).forEach(function(e){var r=s[e];"!"==r?t.add(e):r==Uk&&n.add(e)}),r||(s.offset=o/e.duration),i.push(s)});var a=t.size?yS(t.values()):[],o=n.size?yS(n.values()):[];if(r){var s=i[0],u=uS(s);s.offset=0,u.offset=1,i=[s,u]}return ZS(this.element,i,a,o,this.duration,this.startTime,this.easing,!1)}}]),e}(),GS=function(e){d(n,e);var t=v(n);function n(e,r,i,a,o,s){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return f(this,n),(u=t.call(this,e,r,s.delay)).keyframes=i,u.preStyleProps=a,u.postStyleProps=o,u._stretchStartingKeyframe=c,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return h(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var a=[],o=r+n,s=n/o,u=cS(e[0],!1);u.offset=0,a.push(u);var c=cS(e[0],!1);c.offset=KS(s),a.push(c);for(var l=e.length-1,h=1;h<=l;h++){var f=cS(e[h],!1);f.offset=KS((n+f.offset*r)/o),a.push(f)}r=o,n=0,i="",e=a}return ZS(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(HS);function KS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var WS=function e(){f(this,e)},QS=function(e){d(n,e);var t=v(n);function n(){return f(this,n),t.apply(this,arguments)}return h(n,[{key:"normalizePropertyName",value:function(e,t){return bS(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var i="",a=n.toString().trim();if(YS[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return a+i}}]),n}(WS),YS=function(e){var t={};return e.forEach(function(e){return t[e]=!0}),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function JS(e,t,n,r,i,a,o,s,u,c,l,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:a,toState:r,toStyles:o,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var $S={},XS=function(){function e(t,n,r){f(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return h(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,i){return e.some(function(e){return e(t,n,r,i)})}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],a=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):a}},{key:"build",value:function(e,t,n,r,i,a,o,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||$S,f=this.buildStyles(n,o&&o.params||$S,l),d=s&&s.params||$S,v=this.buildStyles(r,d,l),p=new Set,g=new Map,m=new Map,y="void"===r,k={params:Object.assign(Object.assign({},h),d)},b=c?[]:VS(e,t,this.ast.animation,i,a,f,v,k,u,l),w=0;if(b.forEach(function(e){w=Math.max(e.duration+e.delay,w)}),l.length)return JS(t,this._triggerName,n,r,y,f,v,[],[],g,m,w,l);b.forEach(function(e){var n=e.element,r=Mx(g,n,{});e.preStyleProps.forEach(function(e){return r[e]=!0});var i=Mx(m,n,{});e.postStyleProps.forEach(function(e){return i[e]=!0}),n!==t&&p.add(n)});var _=yS(p.values());return JS(t,this._triggerName,n,r,y,f,v,b,_,g,m,w)}}]),e}(),eE=function(){function e(t,n,r){f(this,e),this.styles=t,this.defaultParams=n,this.normalizer=r}return h(e,[{key:"buildStyles",value:function(e,t){var n=this,r={},i=uS(this.defaultParams);return Object.keys(e).forEach(function(t){var n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(function(e){if("string"!=typeof e){var a=e;Object.keys(a).forEach(function(e){var o=a[e];o.length>1&&(o=mS(o,i,t));var s=n.normalizer.normalizePropertyName(e,t);o=n.normalizer.normalizeStyleValue(e,s,o,t),r[s]=o})}}),r}}]),e}(),tE=function(){function e(t,n,r){var i=this;f(this,e),this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(function(e){i.states[e.name]=new eE(e.style,e.options&&e.options.params||{},r)}),nE(this.states,"true","1"),nE(this.states,"false","0"),n.transitions.forEach(function(e){i.transitionFactories.push(new XS(t,e,i.states))}),this.fallbackTransition=function(e,t,n){return new XS(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},t)}(t,this.states)}return h(e,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find(function(i){return i.match(e,t,n,r)})||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}]),e}();function nE(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var rE=new MS,iE=function(){function e(t,n,r){f(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return h(e,[{key:"register",value:function(e,t){var n=[],r=OS(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,i=Px(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],o=this._animations[e],s=new Map;if(o?(n=VS(this._driver,t,o,Xx,eS,{},{},i,rE,a)).forEach(function(e){var t=Mx(s,e.element,{});e.postStyleProps.forEach(function(e){return t[e]=null})}):(a.push("The requested animation doesn't exist or has already been destroyed"),n=[]),a.length)throw new Error("Unable to create the animation due to the following errors: ".concat(a.join("\n")));s.forEach(function(e,t){Object.keys(e).forEach(function(n){e[n]=r._driver.computeStyle(t,n,Uk)})});var u=Dx(n.map(function(e){var t=s.get(e.element);return r._buildPlayer(e,{},t)}));return this._playersById[e]=u,u.onDestroy(function(){return r.destroy(e)}),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var i=Zx(t,"","","");return Lx(this._getPlayer(e),n,i,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),aE="ng-animate-queued",oE="ng-animate-disabled",sE=".ng-animate-disabled",uE=[],cE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},lE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hE="__ng_removed",fE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";f(this,e),this.namespaceId=n;var r=t&&t.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(r?t.value:t),r){var i=uS(t);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}return h(e,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach(function(e){null==n[e]&&(n[e]=t[e])})}}}]),e}(),dE="void",vE=new fE(dE),pE=function(){function e(t,n,r){f(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,TE(n,this._hostClassName)}return h(e,[{key:"listen",value:function(e,t,n,r){var i=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if(!function(e){return"start"==e||"done"==e}(n))throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var a=Mx(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};a.push(o);var s=Mx(this._engine.statesByElement,e,{});return s.hasOwnProperty(t)||(TE(e,tS),TE(e,tS+"-"+t),s[t]=vE),function(){i._engine.afterFlush(function(){var e=a.indexOf(o);e>=0&&a.splice(e,1),i._triggers[t]||delete s[t]})}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=this._getTrigger(t),o=new mE(this.id,t,e),s=this._engine.statesByElement.get(e);s||(TE(e,tS),TE(e,tS+"-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],c=new fE(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[t]=c,u||(u=vE),c.value===dE||u.value!==c.value){var l=Mx(this._engine.playersByElement,e,[]);l.forEach(function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()});var h=a.matchTransition(u.value,c.value,e,c.params),f=!1;if(!h){if(!i)return;h=a.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:c,player:o,isFallbackTransition:f}),f||(TE(e,aE),o.onStart(function(){xE(e,aE)})),o.onDone(function(){var t=r.players.indexOf(o);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var i=n.indexOf(o);i>=0&&n.splice(i,1)}}),this.players.push(o),l.push(o),o}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(!t.hasOwnProperty(a)||e[a]!==t[a])return!1}return!0}(u.params,c.params)){var d=[],v=a.matchStyles(u.value,u.params,d),p=a.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){dS(e,v),fS(e,p)})}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach(function(t,n){delete t[e]}),this._elementListeners.forEach(function(n,r){t._elementListeners.set(r,n.filter(function(t){return t.name!=e}))})}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach(function(e){return e.destroy()}),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this,r=this._engine.driver.query(e,nS,!0);r.forEach(function(e){if(!e[hE]){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach(function(n){return n.triggerLeaveAnimation(e,t,!1,!0)}):n.clearElementCache(e)}}),this._engine.afterFlushAnimationsDone(function(){return r.forEach(function(e){return n.clearElementCache(e)})})}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var i=this,a=this._engine.statesByElement.get(e);if(a){var o=[];if(Object.keys(a).forEach(function(t){if(i._triggers[t]){var n=i.trigger(e,t,dE,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Dx(o).onDone(function(){return i._engine.processLeaveNode(e)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){var i=new Set;n.forEach(function(n){var a=n.name;if(!i.has(a)){i.add(a);var o=t._triggers[a].fallbackTransition,s=r[a]||vE,u=new fE(dE),c=new mE(t.id,a,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:a,transition:o,fromState:s,toState:u,player:c,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else for(var o=e;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{var s=e[hE];(!s||s===cE)&&(r.afterFlush(function(){return n.clearElementCache(e)}),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}}},{key:"insertNode",value:function(e,t){TE(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var a=r.element,o=t._elementListeners.get(a);o&&o.forEach(function(t){if(t.name==r.triggerName){var n=Zx(a,r.triggerName,r.fromState.value,r.toState.value);n._data=e,Lx(r.player,t.phase,n,t.callback)}}),i.markedForDestroy?t._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1})}},{key:"destroy",value:function(e){this.players.forEach(function(e){return e.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(function(t){return t.element===e})||t}}]),e}(),gE=function(){function e(t,n,r){f(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return h(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e}},{key:"createNamespace",value:function(e,t){var n=new pE(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(t)})}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var a=n[r[i]].namespaceId;if(a){var o=this._fetchNamespace(a);o&&t.add(o)}}return t}},{key:"trigger",value:function(e,t,n,r){if(yE(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(yE(t)){var i=t[hE];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){var o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),TE(e,oE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xE(e,oE))}},{key:"removeNode",value:function(e,t,n,r){if(yE(t)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t[hE]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,i){return yE(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,nS,!0);n.forEach(function(e){return t.destroyActiveAnimationsForElement(e)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,iS,!0)).forEach(function(e){return t.finishActiveQueriedAnimationOnElement(e)})}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach(function(e){e.queued?e.markedForDestroy=!0:e.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach(function(e){return e.finish()})}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise(function(t){if(e.players.length)return Dx(e.players).onDone(function(){return t()});t()})}},{key:"processLeaveNode",value:function(e){var t=this,n=e[hE];if(n&&n.setForRemoval){if(e[hE]=cE,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,sE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,sE,!0).forEach(function(e){t.markElementAsDisabled(e,!1)})}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)TE(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(var a=0;a<i.length;a++)i[a]()}}else for(var o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(e){return e()}),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?Dx(n).onDone(function(){s.forEach(function(e){return e()})}):s.forEach(function(e){return e()})}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new MS,i=[],o=new Map,s=[],u=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(function(e){h.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)h.add(t[r])});var f=this.bodyNode,d=Array.from(this.statesByElement.keys()),v=wE(d,this.collectedEnterElements),p=new Map,g=0;v.forEach(function(e,t){var n=Xx+g++;p.set(t,n),e.forEach(function(e){return TE(e,n)})});for(var m=[],y=new Set,k=new Set,b=0;b<this.collectedLeaveElements.length;b++){var w=this.collectedLeaveElements[b],_=w[hE];_&&_.setForRemoval&&(m.push(w),y.add(w),_.hasAnimation?this.driver.query(w,".ng-star-inserted",!0).forEach(function(e){return y.add(e)}):k.add(w))}var T=new Map,x=wE(d,Array.from(y));x.forEach(function(e,t){var n=eS+g++;T.set(t,n),e.forEach(function(e){return TE(e,n)})}),e.push(function(){v.forEach(function(e,t){var n=p.get(t);e.forEach(function(e){return xE(e,n)})}),x.forEach(function(e,t){var n=T.get(t);e.forEach(function(e){return xE(e,n)})}),m.forEach(function(e){n.processLeaveNode(e)})});for(var S=[],E=[],I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(t).forEach(function(e){var t=e.player,a=e.element;if(S.push(t),n.collectedEnterElements.length){var o=a[hE];if(o&&o.setForMove)return void t.destroy()}var h=!f||!n.driver.containsElement(f,a),d=T.get(a),v=p.get(a),g=n._buildInstruction(e,r,v,d,h);if(g.errors&&g.errors.length)E.push(g);else{if(h)return t.onStart(function(){return dS(a,g.fromStyles)}),t.onDestroy(function(){return fS(a,g.toStyles)}),void i.push(t);if(e.isFallbackTransition)return t.onStart(function(){return dS(a,g.fromStyles)}),t.onDestroy(function(){return fS(a,g.toStyles)}),void i.push(t);g.timelines.forEach(function(e){return e.stretchStartingKeyframe=!0}),r.append(a,g.timelines),s.push({instruction:g,player:t,element:a}),g.queriedElements.forEach(function(e){return Mx(u,e,[]).push(t)}),g.preStyleProps.forEach(function(e,t){var n=Object.keys(e);if(n.length){var r=c.get(t);r||c.set(t,r=new Set),n.forEach(function(e){return r.add(e)})}}),g.postStyleProps.forEach(function(e,t){var n=Object.keys(e),r=l.get(t);r||l.set(t,r=new Set),n.forEach(function(e){return r.add(e)})})}});if(E.length){var A=[];E.forEach(function(e){A.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach(function(e){return A.push("- ".concat(e,"\n"))})}),S.forEach(function(e){return e.destroy()}),this.reportError(A)}var C=new Map,R=new Map;s.forEach(function(e){var t=e.element;r.has(t)&&(R.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,C))}),i.forEach(function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(function(e){Mx(C,t,[]).push(e),e.destroy()})});var O=m.filter(function(e){return IE(e,c,l)}),N=new Map;bE(N,this.driver,k,l,Uk).forEach(function(e){IE(e,c,l)&&O.push(e)});var D=new Map;v.forEach(function(e,t){bE(D,n.driver,new Set(e),c,"!")}),O.forEach(function(e){var t=N.get(e),n=D.get(e);N.set(e,Object.assign(Object.assign({},t),n))});var P=[],L=[],F={};s.forEach(function(e){var t=e.element,a=e.player,s=e.instruction;if(r.has(t)){if(h.has(t))return a.onDestroy(function(){return fS(t,s.toStyles)}),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=F;if(R.size>1){for(var c=t,l=[];c=c.parentNode;){var f=R.get(c);if(f){u=f;break}l.push(c)}l.forEach(function(e){return R.set(e,u)})}var d=n._buildAnimation(a.namespaceId,s,C,o,D,N);if(a.setRealPlayer(d),u===F)P.push(a);else{var v=n.playersByElement.get(u);v&&v.length&&(a.parentPlayer=Dx(v)),i.push(a)}}else dS(t,s.fromStyles),a.onDestroy(function(){return fS(t,s.toStyles)}),L.push(a),h.has(t)&&i.push(a)}),L.forEach(function(e){var t=o.get(e.element);if(t&&t.length){var n=Dx(t);e.setRealPlayer(n)}}),i.forEach(function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(var Z=0;Z<m.length;Z++){var M=m[Z],U=M[hE];if(xE(M,eS),!U||!U.hasAnimation){var q=[];if(u.size){var V=u.get(M);V&&V.length&&q.push.apply(q,a(V));for(var j=this.driver.query(M,iS,!0),B=0;B<j.length;B++){var z=u.get(j[B]);z&&z.length&&q.push.apply(q,a(z))}}var H=q.filter(function(e){return!e.destroyed});H.length?SE(this,M,H):this.processLeaveNode(M)}}return m.length=0,P.forEach(function(e){n.players.push(e),e.onDone(function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)}),e.play()}),P}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t[hE];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,i){var a=[];if(t){var o=this.playersByQueriedElement.get(e);o&&(a=o)}else{var s=this.playersByElement.get(e);if(s){var u=!i||i==dE;s.forEach(function(e){e.queued||!u&&e.triggerName!=r||a.push(e)})}}return(n||r)&&(a=a.filter(function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)})),a}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r,i=this,a=t.element,o=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName,c=s(t.timelines);try{var l=function(){var e=r.value.element,s=e!==a,c=Mx(n,e,[]);i._getPreviousPlayers(e,s,o,u,t.toState).forEach(function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),c.push(e)})};for(c.s();!(r=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}dS(a,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,i,a){var o=this,s=t.triggerName,u=t.element,c=[],l=new Set,h=new Set,f=t.timelines.map(function(t){var f=t.element;l.add(f);var d=f[hE];if(d&&d.removedBeforeQueried)return new Kk(t.duration,t.delay);var v=f!==u,p=function(e){var t=[];return EE(e,t),t}((n.get(f)||uE).map(function(e){return e.getRealPlayer()})).filter(function(e){return!!e.element&&e.element===f}),g=i.get(f),m=a.get(f),y=Px(0,o._normalizer,0,t.keyframes,g,m),k=o._buildPlayer(t,y,p);if(t.subTimeline&&r&&h.add(f),v){var b=new mE(e,s,f);b.setRealPlayer(k),c.push(b)}return k});c.forEach(function(e){Mx(o.playersByQueriedElement,e.element,[]).push(e),e.onDone(function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&delete e[t]}return r}(o.playersByQueriedElement,e.element,e)})}),l.forEach(function(e){return TE(e,rS)});var d=Dx(f);return d.onDestroy(function(){l.forEach(function(e){return xE(e,rS)}),fS(u,t.toStyles)}),h.forEach(function(e){Mx(r,e,[]).push(d)}),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Kk(e.duration,e.delay)}}]),e}(),mE=function(){function e(t,n,r){f(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new Kk,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return h(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(function(n){t._queuedCallbacks[n].forEach(function(t){return Lx(e,n,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart(function(){return n.triggerCallback("start")}),e.onDone(function(){return t.finish()}),e.onDestroy(function(){return t.destroy()})}},{key:"_queueEvent",value:function(e,t){Mx(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function yE(e){return e&&1===e.nodeType}function kE(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function bE(e,t,n,r,i){var a=[];n.forEach(function(e){return a.push(kE(e))});var o=[];r.forEach(function(n,r){var a={};n.forEach(function(e){var n=a[e]=t.computeStyle(r,e,i);(!n||0==n.length)&&(r[hE]=lE,o.push(r))}),e.set(r,a)});var s=0;return n.forEach(function(e){return kE(e,a[s++])}),o}function wE(e,t){var n=new Map;if(e.forEach(function(e){return n.set(e,[])}),0==t.length)return n;var r=new Set(t),i=new Map;function a(e){if(!e)return 1;var t=i.get(e);if(t)return t;var o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:a(o),i.set(e,t),t}return t.forEach(function(e){var t=a(e);1!==t&&n.get(t).push(e)}),n}var _E="$$classes";function TE(e,t){if(e.classList)e.classList.add(t);else{var n=e[_E];n||(n=e[_E]={}),n[t]=!0}}function xE(e,t){if(e.classList)e.classList.remove(t);else{var n=e[_E];n&&delete n[t]}}function SE(e,t,n){Dx(n).onDone(function(){return e.processLeaveNode(t)})}function EE(e,t){for(var n=0;n<e.length;n++){var r=e[n];r instanceof Wk?EE(r.players,t):t.push(r)}}function IE(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach(function(e){return i.add(e)}):t.set(e,r),n.delete(e),!0}var AE=function(){function e(t,n,r){var i=this;f(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new gE(t,n,r),this._timelineEngine=new iE(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return i.onRemovalComplete(e,t)}}return h(e,[{key:"registerTrigger",value:function(e,t,n,r,i){var a=e+"-"+r,o=this._triggerCache[a];if(!o){var s=[],u=OS(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));o=function(e,t,n){return new tE(e,t,n)}(r,u,this._normalizer),this._triggerCache[a]=o}this._transitionEngine.registerTrigger(t,r,o)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,n,r,i){if("@"==r.charAt(0)){var a=t(Ux(r),2),o=a[0],s=a[1];this._timelineEngine.command(o,n,s,i)}else this._transitionEngine.trigger(e,n,r,i)}},{key:"listen",value:function(e,n,r,i,a){if("@"==r.charAt(0)){var o=t(Ux(r),2),s=o[0],u=o[1];return this._timelineEngine.listen(s,n,u,a)}return this._transitionEngine.listen(e,n,r,i,a)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),e}();function CE(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=OE(t[0]),t.length>1&&(r=OE(t[t.length-1]))):t&&(n=OE(t)),n||r?new RE(e,n,r):null}var RE=function(){var e=function(){function e(t,n,r){f(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}return h(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&fS(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(fS(this._element,this._initialStyles),this._endStyles&&(fS(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(dS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(dS(this._element,this._endStyles),this._endStyles=null),fS(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function OE(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];NE(i)&&((t=t||{})[i]=e[i])}return t}function NE(e){return"display"===e||"position"===e}var DE="animation",PE="animationend",LE=function(){function e(t,n,r,i,a,o,s){var u=this;f(this,e),this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=a,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return h(e,[{key:"apply",value:function(){(function(e,t){var n=VE(e,"").trim();n.length&&(function(e,t){for(var n=0,r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t="".concat(n,", ").concat(t)),qE(e,"",t)})(this._element,"".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name)),UE(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){FE(this._element,this._name,"paused")}},{key:"resume",value:function(){FE(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=ZE(this._element,this._name);this._position=e*this._duration,qE(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),UE(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){var n=VE(e,"").split(","),r=ME(n,t);r>=0&&(n.splice(r,1),qE(e,"",n.join(",")))}(this._element,this._name))}}]),e}();function FE(e,t,n){qE(e,"PlayState",n,ZE(e,t))}function ZE(e,t){var n=VE(e,"");return n.indexOf(",")>0?ME(n.split(","),t):ME([n],t)}function ME(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function UE(e,t,n){n?e.removeEventListener(PE,t):e.addEventListener(PE,t)}function qE(e,t,n,r){var i=DE+t;if(null!=r){var a=e.style[i];if(a.length){var o=a.split(",");o[r]=n,n=o.join(",")}}e.style[i]=n}function VE(e,t){return e.style[DE+t]||""}var jE=function(){function e(t,n,r,i,a,o,s,u){f(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+a,this._buildStyler()}return h(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new LE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return e.finish()})}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:SS(e.element,r))})}this.currentSnapshot=t}}]),e}(),BE=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this)).element=e,i._startingStyles={},i.__initialized=!1,i._styles=Yx(r),i}return h(n,[{key:"init",value:function(){var e=this;this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),i(w(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),i(w(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;!this._startingStyles||(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,i(w(n.prototype),"destroy",this).call(this))}}]),n}(Kk),zE=function(){function e(){f(this,e),this._count=0}return h(e,[{key:"validateStyleProperty",value:function(e){return Gx(e)}},{key:"matchesElement",value:function(e,t){return Kx(e,t)}},{key:"containsElement",value:function(e,t){return Wx(e,t)}},{key:"query",value:function(e,t,n){return Qx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map(function(e){return Yx(e)});var r="@keyframes ".concat(t," {\n"),i="";n.forEach(function(e){i=" ";var t=parseFloat(e.offset);r+="".concat(i).concat(100*t,"% {\n"),i+=" ",Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(t,": ").concat(n,";\n"))}}),r+="".concat(i,"}\n")}),r+="}\n";var a=document.createElement("style");return a.textContent=r,a}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=a.filter(function(e){return e instanceof jE}),s={};_S(n,r)&&o.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return s[e]=t[e]})});var u=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach(function(e){Object.keys(e).forEach(function(n){"offset"==n||"easing"==n||(t[n]=e[n])})}),t}(t=TS(e,t,s));if(0==n)return new BE(e,u);var c="gen_css_kf_"+this._count++,l=this.buildKeyframeElement(e,c,t);(function(e){var t,n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(l);var h=CE(e,t),f=new jE(e,t,c,n,r,i,u,h);return f.onDestroy(function(){return function(e){e.parentNode.removeChild(e)}(l)}),f}}]),e}(),HE=function(){function e(t,n,r,i){f(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return h(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",function(){return e._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(e){return e()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:SS(e.element,n))}),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(function(e){return e()}),t.length=0}}]),e}(),GE=function(){function e(){f(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(KE().toString()),this._cssKeyframesDriver=new zE}return h(e,[{key:"validateStyleProperty",value:function(e){return Gx(e)}},{key:"matchesElement",value:function(e,t){return Kx(e,t)}},{key:"containsElement",value:function(e,t){return Wx(e,t)}},{key:"query",value:function(e,t,n){return Qx(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6?arguments[6]:void 0;if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,a);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=a.filter(function(e){return e instanceof HE});_S(n,r)&&c.forEach(function(e){var t=e.currentSnapshot;Object.keys(t).forEach(function(e){return u[e]=t[e]})});var l=CE(e,t=TS(e,t=t.map(function(e){return cS(e,!1)}),u));return new HE(e,t,s,l)}}]),e}();function KE(){return Ox()&&Element.prototype.animate||{}}var WE=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._nextAnimationId=0,i._renderer=e.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}}),i}return h(n,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?jk(e):e;return JE(this._renderer,null,t,"register",[n]),new QE(t,this._renderer)}}]),n}(Mk);return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.FYo),u.LFG(k))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),QE=function(e){d(n,e);var t=v(n);function n(e,r){var i;return f(this,n),(i=t.call(this))._id=e,i._renderer=r,i}return h(n,[{key:"create",value:function(e,t){return new YE(this._id,e,t||{},this._renderer)}}]),n}(function(){return function e(){f(this,e)}}()),YE=function(){function e(t,n,r,i){f(this,e),this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return h(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return JE(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset"),this._started=!1}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}]),e}();function JE(e,t,n,r,i){return e.setProperty(t,"@@".concat(n,":").concat(r),i)}var $E="@.disabled",XE=function(){var e=function(){function e(t,n,r){f(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return h(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new eI("",r,this.engine),this._rendererCache.set(r,i)),i}var a=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);return t.data.animation.forEach(function t(r){Array.isArray(r)?r.forEach(t):n.engine.registerTrigger(a,o,e,r.name,r)}),new tI(this,o,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then(function(){e._microtaskId++})}},{key:"scheduleListenerCallback",value:function(e,n,r){var i=this;e>=0&&e<this._microtaskId?this._zone.run(function(){return n(r)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(e){var n=t(e,2);(0,n[0])(n[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.FYo),u.LFG(AE),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),eI=function(){function e(t,n,r){f(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return h(e,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&t==$E?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}}]),e}(),tI=function(e){d(r,e);var n=v(r);function r(e,t,i,a){var o;return f(this,r),(o=n.call(this,t,i,a)).factory=e,o.namespaceId=t,o}return h(r,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$E?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,n,r){var i=this;if("@"==n.charAt(0)){var a,o=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),s=n.substr(1),u="";return"@"!=s.charAt(0)&&(s=(a=t(function(e){var t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s),2))[0],u=a[1]),this.engine.listen(this.namespaceId,o,s,u,function(e){i.factory.scheduleListenerCallback(e._data||-1,r,e)})}return this.delegate.listen(e,n,r)}}]),r}(eI),nI=function(){var e=function(e){d(n,e);var t=v(n);function n(e,r,i){return f(this,n),t.call(this,e.body,r,i)}return h(n,[{key:"ngOnDestroy",value:function(){this.flush()}}]),n}(AE);return e.\u0275fac=function(t){return new(t||e)(u.LFG(k),u.LFG($x),u.LFG(WS))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),rI=new u.OlP("AnimationModuleType"),iI=[{provide:Mk,useClass:WE},{provide:WS,useFactory:function(){return new QS}},{provide:AE,useClass:nI},{provide:u.FYo,useFactory:function(e,t,n){return new XE(e,t,n)},deps:[Ce,AE,u.R0b]}],aI=[{provide:$x,useFactory:function(){return"function"==typeof KE()?new GE:new zE}},{provide:rI,useValue:"BrowserAnimations"}].concat(iI),oI=[{provide:$x,useClass:Jx},{provide:rI,useValue:"NoopAnimations"}].concat(iI),sI=function(){var e=function(){function e(){f(this,e)}return h(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:t.disableAnimations?oI:aI}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:aI,imports:[Be]}),e}(),uI={apiKey:"AIzaSyAkI6dae6Ln360lcQiSmIhH5rGkvavkQWM",authDomain:"appinventario-muvlin.firebaseapp.com",projectId:"appinventario-muvlin",storageBucket:"appinventario-muvlin.appspot.com",messagingSenderId:"1061489762380",appId:"1:1061489762380:web:55c864ca7a05815cb714e9",measurementId:"G-8G56N8R3E7"},cI=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e,bootstrap:[Rx]}),e.\u0275inj=u.cJS({providers:[{provide:R,useClass:P}],imports:[[Be,Sx,yn,se,qn.hO.initializeApp(uI),wk,sI,wb.forRoot()]]}),e}();(0,u.G48)(),Ve().bootstrapModule(cI).catch(function(e){return console.error(e)})},4762:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}u((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,{_T:function(){return r},mG:function(){return i},Jh:function(){return a},XA:function(){return o},CR:function(){return s},ev:function(){return u}})},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=3704)}])}();