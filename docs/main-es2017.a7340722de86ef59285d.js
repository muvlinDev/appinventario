(self.webpackChunkappinventario_frontend=self.webpackChunkappinventario_frontend||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return rn},tb:function(){return Fu},AFp:function(){return Nu},ip1:function(){return xu},CZH:function(){return Ou},hGG:function(){return xc},z2F:function(){return _c},sBO:function(){return Ra},Sil:function(){return Gu},_Vd:function(){return ra},EJc:function(){return Uu},SBq:function(){return aa},qLn:function(){return Ir},vpe:function(){return lu},gxx:function(){return ls},tBr:function(){return An},XFs:function(){return D},OlP:function(){return nn},zs3:function(){return Is},ZZ4:function(){return Ca},aQg:function(){return ka},soG:function(){return Mu},YKP:function(){return Ba},v3s:function(){return wc},h0i:function(){return ja},PXZ:function(){return pc},R0b:function(){return Qu},FiY:function(){return kn},Lbi:function(){return Lu},g9A:function(){return Pu},Qsj:function(){return la},FYo:function(){return ca},JOm:function(){return kr},Tiy:function(){return da},q3G:function(){return mr},tp0:function(){return xn},EAV:function(){return Sc},Rgc:function(){return Ma},dDg:function(){return rc},DyG:function(){return sn},q4F:function(){return pa},GfV:function(){return fa},s_b:function(){return za},ifc:function(){return M},eFA:function(){return gc},G48:function(){return hc},Gpc:function(){return g},X6Q:function(){return lc},_c5:function(){return Ac},VLi:function(){return oc},c2e:function(){return Zu},zSh:function(){return ds},wAp:function(){return jo},vHH:function(){return v},EiD:function(){return pr},mCW:function(){return Jn},qzn:function(){return Vn},JVY:function(){return Bn},pB0:function(){return Gn},eBb:function(){return zn},L6k:function(){return $n},LAX:function(){return Hn},cg1:function(){return Uo},Tjo:function(){return Cc},kL8:function(){return qo},yhl:function(){return jn},dqk:function(){return j},sIi:function(){return Ls},CqO:function(){return to},QGY:function(){return Xs},F4k:function(){return eo},RDi:function(){return Ce},AaK:function(){return d},z3N:function(){return qn},qOj:function(){return As},TTD:function(){return _e},_Bn:function(){return Xo},xp6:function(){return fi},uIk:function(){return Us},Tol:function(){return yo},ekj:function(){return mo},Suo:function(){return Su},Xpm:function(){return X},lG2:function(){return oe},Yz7:function(){return E},cJS:function(){return S},oAB:function(){return re},Yjl:function(){return ae},Y36:function(){return $s},_UZ:function(){return Ws},BQk:function(){return Ys},ynx:function(){return Qs},qZA:function(){return Ks},TgZ:function(){return Gs},EpF:function(){return Js},n5z:function(){return Yt},Ikx:function(){return Po},LFG:function(){return Tn},$8M:function(){return Xt},NdJ:function(){return no},CRH:function(){return Iu},oxw:function(){return so},ALo:function(){return au},lcZ:function(){return uu},Q6J:function(){return zs},s9C:function(){return oo},iGM:function(){return Tu},CHM:function(){return $e},oJD:function(){return yr},LSH:function(){return vr},kYT:function(){return ie},Udp:function(){return go},d8E:function(){return Lo},YNc:function(){return Bs},_uU:function(){return ko},Oqu:function(){return xo},hij:function(){return Oo},AsE:function(){return No},lnq:function(){return Do},HOy:function(){return Ro},Gf:function(){return Eu}});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441);var u=n(1307);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function b(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function w(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${b(e)} found${n}`)}function T(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function E(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function S(e){return{providers:e.providers||[],imports:e.imports||[]}}function I(e){return C(e,k)||C(e,O)}function C(e,t){return e.hasOwnProperty(t)?e[t]:null}function A(e){return e&&(e.hasOwnProperty(x)||e.hasOwnProperty(N))?e[x]:null}const k=l({"\u0275prov":l}),x=l({"\u0275inj":l}),O=l({ngInjectableDef:l}),N=l({ngInjectorDef:l});var D=(()=>((D=D||{})[D.Default=0]="Default",D[D.Host=1]="Host",D[D.Self=2]="Self",D[D.SkipSelf=4]="SkipSelf",D[D.Optional=8]="Optional",D))();let R;function P(e){const t=R;return R=e,t}function L(e,t,n){const r=I(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&D.Optional?null:void 0!==t?t:void w(d(e),"Injector")}function F(e){return{toString:e}.toString()}var Z=(()=>((Z=Z||{})[Z.OnPush=0]="OnPush",Z[Z.Default=1]="Default",Z))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const U="undefined"!=typeof globalThis&&globalThis,q="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=U||"undefined"!=typeof global&&global||q||V,B={},$=[],z=l({"\u0275cmp":l}),H=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),W=l({"\u0275loc":l}),Q=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let J=0;function X(e){return F(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Z.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||$,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||M.Emulated,id:"c",styles:e.styles||$,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=J++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ue(e)||function(e){return e[H]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return F(()=>{const t={type:e.type,bootstrap:e.bootstrap||$,declarations:e.declarations||$,imports:e.imports||$,exports:e.exports||$,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return F(()=>{const n=ce(e,!0);n.declarations=t.declarations||$,n.imports=t.imports||$,n.exports=t.exports||$})}function se(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ue(e){return e[z]||null}function ce(e,t){const n=e[K]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}function le(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function fe(e){return 2==(2&e.flags)}function pe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e){return 0!=(512&e[2])}function ye(e,t){return e.hasOwnProperty(Q)?e[Q]:null}class ve{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function _e(){return be}function be(e){return e.type.prototype.ngOnChanges&&(e.setInput=Te),we}function we(){const e=Se(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Te(e,t,n,r){const i=Se(e)||function(e,t){return e[Ee]=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new ve(u&&u.currentValue,t,o===B),e[r]=t}_e.ngInherit=!0;const Ee="__ngSimpleChanges__";function Se(e){return e[Ee]||null}let Ie;function Ce(e){Ie=e}function Ae(){return void 0!==Ie?Ie:"undefined"!=typeof document?document:void 0}function ke(e){return!!e.listen}const xe={createRenderer:(e,t)=>Ae()};function Oe(e){for(;Array.isArray(e);)e=e[0];return e}function Ne(e,t){return Oe(t[e])}function De(e,t){return Oe(t[e.index])}function Re(e,t){return e.data[t]}function Pe(e,t){const n=t[e];return le(n)?n:n[0]}function Le(e){return 4==(4&e[2])}function Fe(e){return 128==(128&e[2])}function Ze(e,t){return null==t?null:e[t]}function Me(e){e[18]=0}function Ue(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const qe={lFrame:lt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return qe.bindingsEnabled}function je(){return qe.lFrame.lView}function Be(){return qe.lFrame.tView}function $e(e){return qe.lFrame.contextLView=e,e[8]}function ze(){let e=He();for(;null!==e&&64===e.type;)e=e.parent;return e}function He(){return qe.lFrame.currentTNode}function Ge(e,t){const n=qe.lFrame;n.currentTNode=e,n.isParent=t}function Ke(){return qe.lFrame.isParent}function We(){qe.lFrame.isParent=!1}function Qe(){return qe.isInCheckNoChangesMode}function Ye(e){qe.isInCheckNoChangesMode=e}function Je(){return qe.lFrame.bindingIndex}function Xe(){return qe.lFrame.bindingIndex++}function et(e){const t=qe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function tt(e,t){const n=qe.lFrame;n.bindingIndex=n.bindingRootIndex=e,nt(t)}function nt(e){qe.lFrame.currentDirectiveIndex=e}function rt(e){const t=qe.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function it(){return qe.lFrame.currentQueryIndex}function st(e){qe.lFrame.currentQueryIndex=e}function ot(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function at(e,t,n){if(n&D.SkipSelf){let r=t,i=e;for(;!(r=r.parent,null!==r||n&D.Host||(r=ot(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}const r=qe.lFrame=ct();return r.currentTNode=t,r.lView=e,!0}function ut(e){const t=ct(),n=e[1];qe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ct(){const e=qe.lFrame,t=null===e?null:e.child;return null===t?lt(e):t}function lt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ht(){const e=qe.lFrame;return qe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const dt=ht;function ft(){const e=ht();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function pt(){return qe.lFrame.selectedIndex}function gt(e){qe.lFrame.selectedIndex=e}function mt(){const e=qe.lFrame;return Re(e.tView,e.selectedIndex)}function yt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function vt(e,t,n){wt(e,t,3,n)}function _t(e,t,n,r){(3&e[2])===n&&wt(e,t,n,r)}function bt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function wt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(Tt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Tt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class Et{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function St(e,t,n){const r=ke(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Ct(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function It(e){return 3===e||4===e||6===e}function Ct(e){return 64===e.charCodeAt(0)}function At(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||kt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function kt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function xt(e){return-1!==e}function Ot(e){return 32767&e}function Nt(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Dt=!0;function Rt(e){const t=Dt;return Dt=e,t}let Pt=0;function Lt(e,t){const n=Zt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ft(r.data,e),Ft(t,null),Ft(r.blueprint,null));const i=Mt(e,t),s=e.injectorIndex;if(xt(i)){const e=Ot(i),n=Nt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Ft(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Zt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Mt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ut(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Pt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function qt(e,t,n){if(n&D.Optional)return e;w(t,"NodeInjector")}function Vt(e,t,n,r){if(n&D.Optional&&void 0===r&&(r=null),0==(n&(D.Self|D.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&D.Optional):L(t,r,n&D.Optional)}finally{P(s)}}return qt(r,t,n)}function jt(e,t,n,r=D.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:$t:t}(n);if("function"==typeof s){if(!at(t,e,r))return r&D.Host?qt(i,n,r):Vt(t,n,r,i);try{const e=s(r);if(null!=e||r&D.Optional)return e;w(n)}finally{dt()}}else if("number"==typeof s){let i=null,o=Zt(e,t),a=-1,u=r&D.Host?t[16][6]:null;for((-1===o||r&D.SkipSelf)&&(a=-1===o?Mt(e,t):t[o+8],-1!==a&&Wt(r,!1)?(i=t[1],o=Ot(a),t=Nt(a,t)):o=-1);-1!==o;){const e=t[1];if(Kt(s,o,e.data)){const e=zt(o,t,n,i,r,u);if(e!==Bt)return e}a=t[o+8],-1!==a&&Wt(r,t[1].data[o+8]===u)&&Kt(s,o,t)?(i=e,o=Ot(a),t=Nt(a,t)):o=-1}}}return Vt(t,n,r,i)}const Bt={};function $t(){return new Qt(ze(),je())}function zt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=Ht(a,o,n,null==r?fe(a)&&Dt:r!=o&&0!=(3&a.type),i&D.Host&&s===a);return null!==u?Gt(t,o,u,a):Bt}function Ht(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&ge(e)&&e.type===n)return u}return null}function Gt(e,t,n,r){let i=e[n];const s=t.data;if(function(e){return e instanceof Et}(i)){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(b(s[n]));const a=Rt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;at(e,r,D.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=be(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&P(u),Rt(a),o.resolving=!1,dt()}}return i}function Kt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Wt(e,t){return!(e&D.Self||e&D.Host&&t)}class Qt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return jt(this._tNode,this._lView,e,void 0,t)}}function Yt(e){return F(()=>{const t=e.prototype.constructor,n=t[Q]||Jt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Q]||Jt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Jt(e){return y(e)?()=>{const t=Jt(m(e));return t&&t()}:ye(e)}function Xt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(It(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(ze(),e)}const en="__parameters__";function tn(e,t,n){return F(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(en)?e[en]:Object.defineProperty(e,en,{value:[]})[en];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class nn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=E({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rn=new nn("AnalyzeForEntryComponents"),sn=Function;function on(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),on(r,t)):t!==e&&t.push(r)}return t}function an(e,t){e.forEach(e=>Array.isArray(e)?an(e,t):t(e))}function un(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function cn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ln(e,t,n){let r=dn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function hn(e,t){const n=dn(e,t);if(n>=0)return e[1|n]}function dn(e,t){return function(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const fn={},pn="__NG_DI_FLAG__",gn="ngTempTokenPath",mn=/\n/gm,yn="__source",vn=l({provide:String,useValue:l});let _n;function bn(e){const t=_n;return _n=e,t}function wn(e,t=D.Default){if(void 0===_n)throw new Error("inject() must be called from an injection context");return null===_n?L(e,void 0,t):_n.get(e,t&D.Optional?null:void 0,t)}function Tn(e,t=D.Default){return(R||wn)(m(e),t)}function En(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=D.Default;for(let t=0;t<r.length;t++){const i=r[t],s=In(i);"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(Tn(e,n))}else t.push(Tn(r))}return t}function Sn(e,t){return e[pn]=t,e.prototype[pn]=t,e}function In(e){return e[pn]}function Cn(e,t,n,r){const i=e[gn];throw t[yn]&&i.unshift(t[yn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(mn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[gn]=null,e}const An=Sn(tn("Inject",e=>({token:e})),-1),kn=Sn(tn("Optional"),8),xn=Sn(tn("SkipSelf"),4);let On,Nn;function Dn(e){var t;return(null===(t=function(){if(void 0===On&&(On=null,j.trustedTypes))try{On=j.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return On}())||void 0===t?void 0:t.createHTML(e))||e}function Rn(e){var t;return(null===(t=function(){if(void 0===Nn&&(Nn=null,j.trustedTypes))try{Nn=j.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return Nn}())||void 0===t?void 0:t.createHTML(e))||e}class Pn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ln extends Pn{getTypeName(){return"HTML"}}class Fn extends Pn{getTypeName(){return"Style"}}class Zn extends Pn{getTypeName(){return"Script"}}class Mn extends Pn{getTypeName(){return"URL"}}class Un extends Pn{getTypeName(){return"ResourceURL"}}function qn(e){return e instanceof Pn?e.changingThisBreaksApplicationSecurity:e}function Vn(e,t){const n=jn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function jn(e){return e instanceof Pn&&e.getTypeName()||null}function Bn(e){return new Ln(e)}function $n(e){return new Fn(e)}function zn(e){return new Zn(e)}function Hn(e){return new Mn(e)}function Gn(e){return new Un(e)}class Kn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Wn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Dn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;("xmlns:ns1"===n||0===n.indexOf("ns1:"))&&e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(e){return(e=String(e)).match(Qn)||e.match(Yn)?e:"unsafe:"+e}function Xn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function er(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const tr=Xn("area,br,col,hr,img,wbr"),nr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rr=Xn("rp,rt"),ir=er(tr,er(nr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),er(rr,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),er(rr,nr)),sr=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),or=Xn("srcset"),ar=er(sr,or,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Xn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ir.hasOwnProperty(t))return this.sanitizedSomething=!0,!ur.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!ar.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;sr[s]&&(o=Jn(o)),or[s]&&(r=o,o=(r=String(r)).split(",").map(e=>Jn(e.trim())).join(", ")),this.buf.push(" ",t,'="',dr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ir.hasOwnProperty(t)&&!tr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function dr(e){return e.replace(/&/g,"&amp;").replace(lr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function pr(e,t){let n=null;try{fr=fr||function(e){const t=new Wn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(e){return!1}}()?new Kn(t):t}(e);let r=t?String(t):"";n=fr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==s);return Dn((new cr).sanitizeChildren(gr(n)||n))}finally{if(n){const e=gr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function gr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var mr=(()=>((mr=mr||{})[mr.NONE=0]="NONE",mr[mr.HTML=1]="HTML",mr[mr.STYLE=2]="STYLE",mr[mr.SCRIPT=3]="SCRIPT",mr[mr.URL=4]="URL",mr[mr.RESOURCE_URL=5]="RESOURCE_URL",mr))();function yr(e){const t=_r();return t?Rn(t.sanitize(mr.HTML,e)||""):Vn(e,"HTML")?Rn(qn(e)):pr(Ae(),_(e))}function vr(e){const t=_r();return t?t.sanitize(mr.URL,e)||"":Vn(e,"URL")?qn(e):Jn(_(e))}function _r(){const e=je();return e&&e[12]}const br="__ngContext__";function wr(e,t){e[br]=t}function Tr(e){const t=function(e){return e[br]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Er(e){return e.ngOriginalError}function Sr(e,...t){e.error(...t)}class Ir{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=(i=e)&&i.ngErrorLogger||Sr;var i;r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?e.ngDebugContext||this._findContext(Er(e)):null}_findOriginalError(e){let t=e&&Er(e);for(;t&&Er(t);)t=Er(t);return t||null}}const Cr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Ar(e){return e instanceof Function?e():e}var kr=(()=>((kr=kr||{})[kr.Important=1]="Important",kr[kr.DashCase=2]="DashCase",kr))();function xr(e,t){return undefined(e,t)}function Or(e){const t=e[3];return he(t)?t[3]:t}function Nr(e){return Rr(e[13])}function Dr(e){return Rr(e[4])}function Rr(e){for(;null!==e&&!he(e);)e=e[4];return e}function Pr(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:le(r)&&(o=!0,r=r[0]);const a=Oe(r);0===e&&null!==n?null==i?jr(t,n,a):Vr(t,n,a,i||null,!0):1===e&&null!==n?Vr(t,n,a,i||null,!0):2===e?function(e,t,n){const r=$r(e,t);r&&function(e,t,n,r){ke(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Oe(n)&&Pr(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];Yr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Lr(e,t,n){return ke(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Fr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ue(i,-1)),n.splice(r,1)}function Zr(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Fr(i,r),t>0&&(e[n-1][4]=r[4]);const s=cn(e,10+t);!function(e,t){Yr(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Mr(e,t){if(!(256&t[2])){const n=t[11];ke(n)&&n.destroyNode&&Yr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Ur(e[1],e);for(;t;){let n=null;if(le(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)le(t)&&Ur(t[1],t),t=t[3];null===t&&(t=e),le(t)&&Ur(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ur(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Et)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Oe(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)r[e]();t[7]=null}}(e,t),1===t[1].type&&ke(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Fr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function qr(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===M.None||t===M.Emulated)return null}return De(r,n)}(e,t.parent,n)}function Vr(e,t,n,r,i){ke(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function jr(e,t,n){ke(e)?e.appendChild(t,n):t.appendChild(n)}function Br(e,t,n,r,i){null!==r?Vr(e,t,n,r,i):jr(e,t,n)}function $r(e,t){return ke(e)?e.parentNode(t):t.parentNode}let zr=function(e,t,n){return 40&e.type?De(e,n):null};function Hr(e,t,n,r){const i=qr(e,r,t),s=t[11],o=function(e,t,n){return zr(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Br(s,i,n[a],o,!1);else Br(s,i,n,o,!1)}function Gr(e,t){if(null!==t){const n=t.type;if(3&n)return De(t,e);if(4&n)return Wr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Gr(e,n);{const n=e[t.index];return he(n)?Wr(-1,n):Oe(n)}}if(32&n)return xr(t,e)()||Oe(e[t.index]);{const n=Kr(e,t);return null!==n?Array.isArray(n)?n[0]:Gr(Or(e[16]),n):Gr(e,t.next)}}return null}function Kr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Wr(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Gr(e,r)}return t[7]}function Qr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&wr(Oe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Qr(e,t,n.child,r,i,s,!1),Pr(t,e,i,a,s);else if(32&u){const o=xr(n,r);let u;for(;u=o();)Pr(t,e,i,u,s);Pr(t,e,i,a,s)}else 16&u?Jr(e,t,r,n,i,s):Pr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Yr(e,t,n,r,i,s){Qr(n,r,e.firstChild,t,i,s,!1)}function Jr(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pr(t,e,i,a[u],s);else Qr(e,t,a,o[3],i,s,!0)}function Xr(e,t,n){ke(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ei(e,t,n){ke(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ti(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const ni="ng-template";function ri(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==ti(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ii(e){return 4===e.type&&e.value!==ni}function si(e,t,n){return t===(4!==e.type||n?e.value:ni)}function oi(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(It(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!si(e,u,n)||""===u&&1===t.length){if(ai(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!ri(e.attrs,c,n)){if(ai(r))return!1;o=!0}continue}const l=ui(8&r?"class":u,i,ii(e),n);if(-1===l){if(ai(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ti(t,c,0)||2&r&&c!==e){if(ai(r))return!1;o=!0}}}}else{if(!o&&!ai(r)&&!ai(u))return!1;if(o&&ai(u))continue;o=!1,r=u|1&r}}return ai(r)||o}function ai(e){return 0==(1&e)}function ui(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ci(e,t,n=!1){for(let r=0;r<t.length;r++)if(oi(e,t[r],n))return!0;return!1}function li(e,t){return e?":not("+t.trim()+")":t}function hi(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ai(o)&&(t+=li(s,i),i=""),r=o,s=s||!ai(r);n++}return""!==i&&(t+=li(s,i)),t}const di={};function fi(e){pi(Be(),je(),pt()+e,Qe())}function pi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&vt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&_t(t,r,0,n)}gt(n)}function gi(e,t){return e<<17|t<<2}function mi(e){return e>>17&32767}function yi(e){return 2|e}function vi(e){return(131068&e)>>2}function _i(e,t){return-131069&e|t<<2}function bi(e){return 1|e}function wi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];st(i),n.contentQueries(2,t[s],s)}}}function Ti(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Me(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Ei(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=He(),o=Ke(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),qe.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=qe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ge(s,!0),s}function Si(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ii(e,t,n){ut(t);try{const r=e.viewQuery;null!==r&&ns(1,r,n);const i=e.template;null!==i&&ki(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&wi(e,t),e.staticViewQueries&&ns(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Yi(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,ft()}}function Ci(e,t,n,r){const i=t[2];if(256==(256&i))return;ut(t);const s=Qe();try{Me(t),function(e){qe.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&ki(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&vt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&_t(t,n,0,null),bt(t,0)}if(function(e){for(let t=Nr(e);null!==t;t=Dr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ue(r,1),n[2]|=1024}}}(t),function(e){for(let t=Nr(e);null!==t;t=Dr(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Fe(n)&&Ci(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&wi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&vt(t,n)}else{const n=e.contentHooks;null!==n&&_t(t,n,1),bt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)gt(~r);else{const i=r,s=n[++e],o=n[++e];tt(s,i),o(2,t[i])}}}finally{gt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Wi(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&ns(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&vt(t,n)}else{const n=e.viewHooks;null!==n&&_t(t,n,2),bt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ue(t[3],-1))}finally{ft()}}function Ai(e,t,n,r){const i=t[10],s=!Qe(),o=Le(t);try{s&&!o&&i.begin&&i.begin(),o&&Ii(e,t,r),Ci(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function ki(e,t,n,r,i){const s=pt(),o=2&r;try{gt(-1),o&&t.length>20&&pi(e,t,20,Qe()),n(r,i)}finally{gt(s)}}function xi(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Oi(e,t,n){!Ve()||(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Lt(n,t),wr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&$i(t,n,r);const u=Gt(t,e,a,n);wr(u,t),null!==o&&Hi(0,a-i,u,r,0,o),s&&(Pe(n.index,t)[8]=u)}}(e,t,n,De(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qe.lFrame.currentDirectiveIndex;try{gt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];nt(n),(null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs)&&Ui(r,i)}}finally{gt(-1),nt(o)}}(e,t,n))}function Ni(e,t,n=De){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Di(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ri(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ri(e,t,n,r,i,s,o,a,u,c){const l=20+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:di);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Pi(e,t,n,r){const i=is(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&ss(e).push(r,i.length-1))}function Li(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Fi(e,t,n,r,i,s,o,a){const u=De(t,n);let c,l=t.inputs;!a&&null!=l&&(c=l[r])?(as(e,n,c,r,i),fe(t)&&function(e,t){const n=Pe(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,ke(s)?s.setProperty(u,r,i):Ct(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Zi(e,t,n,r){let i=!1;if(Ve()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ci(n,o.selectors,!1)&&(i||(i=[]),Ut(Lt(n,t),e,o.type),ge(o)?(qi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,ji(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=Si(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=At(n.mergedAttrs,c.hostAttrs),Bi(e,n,t,u,c),Vi(u,c,o),null!==c.contentQueries&&(n.flags|=8),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),!a&&(l.ngOnChanges||l.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||ii(t)?null:Gi(n,i);s.push(c),o=Li(n,u,o),a=Li(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=At(n.mergedAttrs,n.attrs),i}function Mi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ui(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function qi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Vi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function ji(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Bi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ye(i.type)),o=new Et(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Mi(e,t,0,r,Si(e,n,i.hostVars,di),i)}function $i(e,t,n){const r=De(t,e),i=Di(n),s=e[10],o=Ji(e,Ti(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function zi(e,t,n,r,i,s){const o=De(e,t);!function(e,t,n,r,i,s,o){if(null==s)ke(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);ke(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}function Hi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Gi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ki(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Wi(e,t){const n=Pe(t,e);if(Fe(n)){const e=n[1];80&n[2]?Ci(e,n,e.template,n[8]):n[5]>0&&Qi(n)}}function Qi(e){for(let n=Nr(e);null!==n;n=Dr(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ci(e,t,e.template,t[8])}else t[5]>0&&Qi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Pe(t[n],e);Fe(r)&&r[5]>0&&Qi(r)}}function Yi(e,t){const n=Pe(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Ii(r,n,n[8])}function Ji(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Xi(e){for(;e;){e[2]|=64;const t=Or(e);if(me(e)&&!t)return e;e=t}return null}function es(e,t,n){const r=t[10];r.begin&&r.begin();try{Ci(e,t,e.template,n)}catch(i){throw os(t,i),i}finally{r.end&&r.end()}}function ts(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Tr(n),i=r[1];Ai(i,r,i.template,n)}}(e[8])}function ns(e,t,n){st(0),t(e,n)}const rs=(()=>Promise.resolve(null))();function is(e){return e[7]||(e[7]=[])}function ss(e){return e.cleanup||(e.cleanup=[])}function os(e,t){const n=e[9],r=n?n.get(Ir,null):null;r&&r.handleError(t)}function as(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function us(e,t,n){const r=Ne(t,e);!function(e,t,n){ke(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function cs(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const ls=new nn("INJECTOR",-1);class hs{get(e,t=fn){if(t===fn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const ds=new nn("Set Injector scope."),fs={},ps={};let gs;function ms(){return void 0===gs&&(gs=new hs),gs}function ys(e,t=null,n=null,r){return new vs(e,n,t||ms(),r)}class vs{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&an(t,n=>this.processProvider(n,e,t)),an([e],e=>this.processInjectorType(e,[],i)),this.records.set(ls,ws(void 0,this));const s=this.records.get(ds);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=fn,n=D.Default){this.assertNotDestroyed();const r=bn(this),i=P(void 0);try{if(!(n&D.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof nn)&&I(e);t=n&&this.injectableDefInScope(n)?ws(_s(e),fs):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&D.Self?ms():this.parent).get(e,t=n&D.Optional&&t===fn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[gn]=o[gn]||[]).unshift(d(e)),r)throw o;return Cn(o,e,"R3InjectorError",this.source)}throw o}finally{P(i),bn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=A(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=A(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{an(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];an(r,e=>this.processProvider(e,n,r||$))}}this.injectorDefTypes.add(s);const a=ye(s)||(()=>new s);this.records.set(s,ws(a,fs));const u=r.providers;if(null!=u&&!o){const t=e;an(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Es(e=m(e))?e:m(e&&e.provide);const i=Ts(s=e)?ws(void 0,s.useValue):ws(bs(s),fs);var s;if(Es(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ws(void 0,fs,!0),t.factory=()=>En(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){return t.value===fs&&(t.value=ps,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function _s(e){const t=I(e),n=null!==t?t.factory:ye(e);if(null!==n)return n;if(e instanceof nn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[k]||e[O]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function bs(e,t,n){let r;if(Es(e)){const t=m(e);return ye(t)||_s(t)}if(Ts(e))r=()=>m(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...En(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Tn(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ye(t)||_s(t);r=()=>new t(...En(e.deps))}return r}function ws(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ts(e){return null!==e&&"object"==typeof e&&vn in e}function Es(e){return"function"==typeof e}const Ss=function(e,t,n){return function(e,t=null,n=null,r){const i=ys(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let Is=(()=>{class e{static create(e,t){return Array.isArray(e)?Ss(e,t,""):Ss(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=fn,e.NULL=new hs,e.\u0275prov=E({token:e,providedIn:"any",factory:()=>Tn(ls)}),e.__NG_ELEMENT_ID__=-1,e})();function Cs(e,t){yt(Tr(e)[1],ze())}function As(e){let t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=ks(e.inputs),t.declaredInputs=ks(e.declaredInputs),t.outputs=ks(e.outputs);const n=i.hostBindings;n&&Ns(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&xs(e,s),o&&Os(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===As&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=At(i.hostAttrs,n=At(n,i.hostAttrs))}}(r)}function ks(e){return e===B?{}:e===$?[]:e}function xs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Os(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Ns(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Ds=null;function Rs(){if(!Ds){const e=j.Symbol;if(e&&e.iterator)Ds=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ds=n)}}}return Ds}class Ps{constructor(e){this.wrapped=e}static wrap(e){return new Ps(e)}static unwrap(e){return Ps.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ps}}function Ls(e){return!!Fs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Rs()in e)}function Fs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Zs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ms(e,t,n,r){const i=Zs(e,t,n);return Zs(e,t+1,r)||i}function Us(e,t,n,r){const i=je();return Zs(i,Xe(),t)&&(Be(),zi(mt(),i,e,t,n,r)),Us}function qs(e,t,n,r){return Zs(e,Xe(),n)?t+_(n)+r:di}function Vs(e,t,n,r,i,s,o,a){const u=function(e,t,n,r,i){const s=Ms(e,t,n,r);return Zs(e,t+2,i)||s}(e,Je(),n,i,o);return et(3),u?t+_(n)+r+_(i)+s+_(o)+a:di}function js(e,t,n,r,i,s,o,a,u,c){const l=function(e,t,n,r,i,s){const o=Ms(e,t,n,r);return Ms(e,t+2,i,s)||o}(e,Je(),n,i,o,u);return et(4),l?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c:di}function Bs(e,t,n,r,i,s,o,a){const u=je(),c=Be(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=Ei(t,e,4,o||null,Ze(c,a));Zi(t,n,l,Ze(c,u)),yt(t,l);const h=l.tViews=Ri(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];Ge(h,!1);const d=u[11].createComment("");Hr(c,u,d,h),wr(d,u),Ji(u,u[l]=Ki(d,u,d,h)),pe(h)&&Oi(c,u,h),null!=o&&Ni(u,h,a)}function $s(e,t=D.Default){const n=je();return null===n?Tn(e,t):jt(ze(),n,m(e),t)}function zs(e,t,n){const r=je();return Zs(r,Xe(),t)&&Fi(Be(),mt(),r,e,t,r[11],n,!1),zs}function Hs(e,t,n,r,i){const s=i?"class":"style";as(e,n,t.inputs[s],s,r)}function Gs(e,t,n,r){const i=je(),s=Be(),o=20+e,a=i[11],u=i[o]=Lr(a,t,qe.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=Ei(t,e,2,i,Ze(a,s));return Zi(t,n,u,Ze(a,o)),null!==u.attrs&&cs(u,u.attrs,!1),null!==u.mergedAttrs&&cs(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];Ge(c,!0);const l=c.mergedAttrs;null!==l&&St(a,u,l);const h=c.classes;null!==h&&ei(a,u,h);const d=c.styles;null!==d&&Xr(a,u,d),64!=(64&c.flags)&&Hr(s,i,u,c),0===qe.lFrame.elementDepthCount&&wr(u,i),qe.lFrame.elementDepthCount++,pe(c)&&(Oi(s,i,c),xi(s,c,i)),null!==r&&Ni(i,c)}function Ks(){let e=ze();Ke()?We():(e=e.parent,Ge(e,!1));const t=e;qe.lFrame.elementDepthCount--;const n=Be();n.firstCreatePass&&(yt(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Hs(n,t,je(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Hs(n,t,je(),t.stylesWithoutHost,!1)}function Ws(e,t,n,r){Gs(e,t,n,r),Ks()}function Qs(e,t,n){const r=je(),i=Be(),s=e+20,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Ze(s,r),a=Ei(t,e,8,"ng-container",o);return null!==o&&cs(a,o,!0),Zi(t,n,a,Ze(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];Ge(o,!0);const a=r[s]=r[11].createComment("");Hr(i,r,a,o),wr(a,r),pe(o)&&(Oi(i,r,o),xi(i,o,r)),null!=n&&Ni(r,o)}function Ys(){let e=ze();const t=Be();Ke()?We():(e=e.parent,Ge(e,!1)),t.firstCreatePass&&(yt(t,e),de(e)&&t.queries.elementEnd(e))}function Js(){return je()}function Xs(e){return!!e&&"function"==typeof e.then}function eo(e){return!!e&&"function"==typeof e.subscribe}const to=eo;function no(e,t,n,r){const i=je(),s=Be(),o=ze();return function(e,t,n,r,i,s,o,a){const u=pe(r),c=e.firstCreatePass&&ss(e),l=t[8],h=is(t);let d=!0;if(3&r.type||a){const f=De(r,t),p=a?a(f):f,g=h.length,m=a?e=>a(Oe(e[r.index])):r.index;if(ke(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=io(r,t,l,s,!1);const e=n.listen(p,i,s);h.push(s,e),c&&c.push(i,m,g,g+1)}}else s=io(r,t,l,s,!0),p.addEventListener(i,s,o),h.push(s),c&&c.push(i,m,g,o)}else s=io(r,t,l,s,!1);const f=r.outputs;let p;if(d&&null!==f&&(p=f[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=h.length;h.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),no}function ro(e,t,n,r){try{return!1!==n(r)}catch(i){return os(e,i),!1}}function io(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Pe(e.index,t):t;0==(32&t[2])&&Xi(o);let a=ro(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=ro(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function so(e=1){return function(e){return(qe.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,qe.lFrame.contextLView))[8]}(e)}function oo(e,t,n){return ao(e,"",t,"",n),oo}function ao(e,t,n,r,i){const s=je(),o=qs(s,t,n,r);return o!==di&&Fi(Be(),mt(),s,e,o,s[11],i,!1),ao}function uo(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?mi(s):vi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];co(e[a],t)&&(u=!0,e[a+1]=r?bi(n):yi(n)),a=r?mi(n):vi(n)}u&&(e[n+1]=r?yi(s):bi(s))}function co(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&dn(e,t)>=0}const lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ho(e){return e.substring(lo.key,lo.keyEnd)}function fo(e,t){const n=lo.textEnd;return n===t?-1:(t=lo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,lo.key=t,n),po(e,t,n))}function po(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function go(e,t,n){return _o(e,t,n,!1),go}function mo(e,t){return _o(e,t,null,!0),mo}function yo(e){!function(e,t,n,r){const i=Be(),s=et(2);i.firstUpdatePass&&wo(i,null,s,r);const o=je();if(n!==di&&Zs(o,s,n)){const a=i.data[pt()];if(Ao(a,r)&&!bo(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=f(e,n||"")),Hs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===di&&(i=$);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&So(e,t,n,r,g,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return $;const r=[],i=qn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}(ln,vo,e,!0)}function vo(e,t){for(let n=function(e){return function(e){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=e.length}(e),fo(e,po(e,0,lo.textEnd))}(t);n>=0;n=fo(t,n))ln(e,ho(t),!0)}function _o(e,t,n,r){const i=je(),s=Be(),o=et(2);s.firstUpdatePass&&wo(s,e,o,r),t!==di&&Zs(i,o,t)&&So(s,s.data[pt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(qn(e)))),e}(t,n),r,o)}function bo(e,t){return t>=e.expandoStartIndex}function wo(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[pt()],o=bo(e,n);Ao(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=rt(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Eo(n=To(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=To(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==vi(r))return e[mi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=To(null,e,t,n[1],r),n=Eo(n,t.attrs,r),function(e,t,n,r){e[mi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Eo(r,e[s].hostAttrs,n);return Eo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=mi(o),u=vi(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||dn(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=mi(e[a+1]);e[r+1]=gi(t,a),0!==t&&(e[t+1]=_i(e[t+1],r)),e[a+1]=function(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=gi(a,0),0!==a&&(e[a+1]=_i(e[a+1],r)),a=r;else e[r+1]=gi(u,0),0===a?a=r:e[u+1]=_i(e[u+1],r),u=r;l&&(e[r+1]=yi(e[r+1])),uo(e,c,r,!0),uo(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&dn(s,t)>=0&&(n[r+1]=bi(n[r+1]))}(t,c,e,r,s),o=gi(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function To(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Eo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Eo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ln(e,o,!!n||t[++s]))}return void 0===e?null:e}function So(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];Co(function(e){return 1==(1&e)}(c)?Io(u,t,n,i,vi(c),o):void 0)||(Co(s)||function(e){return 2==(2&e)}(c)&&(s=Io(u,null,n,i,a,o)),function(e,t,n,r,i){const s=ke(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:kr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=kr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ne(pt(),n),i,s))}function Io(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===di&&(l=c?$:void 0);let h=c?hn(l,r):u===r?l:void 0;if(s&&!Co(h)&&(h=hn(t,r)),Co(h)&&(a=h,o))return a;const d=e[i+1];i=o?mi(d):vi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=hn(e,r))}return a}function Co(e){return void 0!==e}function Ao(e,t){return 0!=(e.flags&(t?16:32))}function ko(e,t=""){const n=je(),r=Be(),i=e+20,s=r.firstCreatePass?Ei(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return ke(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Hr(r,n,o,s),Ge(s,!1)}function xo(e){return Oo("",e,""),xo}function Oo(e,t,n){const r=je(),i=qs(r,e,t,n);return i!==di&&us(r,pt(),i),Oo}function No(e,t,n,r,i){const s=je(),o=function(e,t,n,r,i,s){const o=Ms(e,Je(),n,i);return et(2),o?t+_(n)+r+_(i)+s:di}(s,e,t,n,r,i);return o!==di&&us(s,pt(),o),No}function Do(e,t,n,r,i,s,o){const a=je(),u=Vs(a,e,t,n,r,i,s,o);return u!==di&&us(a,pt(),u),Do}function Ro(e,t,n,r,i,s,o,a,u){const c=je(),l=js(c,e,t,n,r,i,s,o,a,u);return l!==di&&us(c,pt(),l),Ro}function Po(e,t,n){const r=je();return Zs(r,Xe(),t)&&Fi(Be(),mt(),r,e,t,r[11],n,!0),Po}function Lo(e,t,n){const r=je();if(Zs(r,Xe(),t)){const i=Be(),s=mt();Fi(i,s,r,e,t,function(e,t,n){return(null===e||ge(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}(rt(i.data),s,r),n,!0)}return Lo}const Fo=void 0;var Zo=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Mo={};function Uo(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Vo(t);if(n)return n;const r=t.split("-")[0];if(n=Vo(r),n)return n;if("en"===r)return Zo;throw new Error(`Missing locale data for the locale "${e}".`)}function qo(e){return Uo(e)[jo.PluralCase]}function Vo(e){return e in Mo||(Mo[e]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[e]),Mo[e]}var jo=(()=>((jo=jo||{})[jo.LocaleId=0]="LocaleId",jo[jo.DayPeriodsFormat=1]="DayPeriodsFormat",jo[jo.DayPeriodsStandalone=2]="DayPeriodsStandalone",jo[jo.DaysFormat=3]="DaysFormat",jo[jo.DaysStandalone=4]="DaysStandalone",jo[jo.MonthsFormat=5]="MonthsFormat",jo[jo.MonthsStandalone=6]="MonthsStandalone",jo[jo.Eras=7]="Eras",jo[jo.FirstDayOfWeek=8]="FirstDayOfWeek",jo[jo.WeekendRange=9]="WeekendRange",jo[jo.DateFormat=10]="DateFormat",jo[jo.TimeFormat=11]="TimeFormat",jo[jo.DateTimeFormat=12]="DateTimeFormat",jo[jo.NumberSymbols=13]="NumberSymbols",jo[jo.NumberFormats=14]="NumberFormats",jo[jo.CurrencyCode=15]="CurrencyCode",jo[jo.CurrencySymbol=16]="CurrencySymbol",jo[jo.CurrencyName=17]="CurrencyName",jo[jo.Currencies=18]="Currencies",jo[jo.Directionality=19]="Directionality",jo[jo.PluralCase=20]="PluralCase",jo[jo.ExtraData=21]="ExtraData",jo))();const Bo="en-US";let $o=Bo;function zo(e){T(e,"Expected localeId to be defined"),"string"==typeof e&&($o=e.toLowerCase().replace(/_/g,"-"))}function Ho(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)Ho(e[s],t,n,r,i);else{const s=Be(),o=je();let a=Es(e)?e:m(e.provide),u=bs(e);const c=ze(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Es(e)||!e.multi){const r=new Et(u,i,$s),f=Wo(a,t,i?l:l+d,h);-1===f?(Ut(Lt(c,o),s,a),Go(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Wo(a,t,l+d,h),p=Wo(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Ut(Lt(c,o),s,a);const l=function(e,t,n,r,i){const s=new Et(e,n,$s);return s.multi=[],s.index=t,s.componentProviders=0,Ko(s,i,r&&!n),s}(i?Yo:Qo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Go(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Go(s,e,f>-1?f:p,Ko(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Go(e,t,n,r){const i=Es(t);if(i||function(e){return!!e.useClass}(t)){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Ko(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Wo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Qo(e,t,n,r){return Jo(this.multi,[])}function Yo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Gt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Jo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Jo(i,s);return s}function Jo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Xo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Be();if(r.firstCreatePass){const i=ge(e);Ho(n,r.data,r.blueprint,i,!0),Ho(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class ea{}const ta="ngComponent";class na{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t[ta]=e,t}(e)}}let ra=(()=>{class e{}return e.NULL=new na,e})();function ia(...e){}function sa(e,t){return new aa(De(e,t))}const oa=function(){return sa(ze(),je())};let aa=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=oa,e})();function ua(e){return e instanceof aa?e.nativeElement:e}class ca{}let la=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ha(),e})();const ha=function(){const e=je(),t=Pe(ze().index,e);return function(e){return e[11]}(le(t)?t:e)};let da=(()=>{class e{}return e.\u0275prov=E({token:e,providedIn:"root",factory:()=>null}),e})();class fa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const pa=new fa("12.2.11");class ga{constructor(){}supports(e){return Ls(e)}create(e){return new ya(e)}}const ma=(e,t)=>t;class ya{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ma}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<wa(n,r,i)?t:n,o=wa(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ls(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Rs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new va(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ba),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ba),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class va{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _a{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ba{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new _a,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wa(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Ta{constructor(){}supports(e){return e instanceof Map||Fs(e)}create(){return new Ea}}class Ea{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Fs(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Sa(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Sa{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ia(){return new Ca([new ga])}let Ca=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ia()),deps:[[e,new xn,new kn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(e){return e.name||typeof e}(e)}'`)}}return e.\u0275prov=E({token:e,providedIn:"root",factory:Ia}),e})();function Aa(){return new ka([new Ta])}let ka=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Aa()),deps:[[e,new xn,new kn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=E({token:e,providedIn:"root",factory:Aa}),e})();function xa(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Oe(s)),he(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&xa(t[1],t,n,r)}const o=n.type;if(8&o)xa(e,t,n.child,r);else if(32&o){const e=xr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Kr(t,n);if(Array.isArray(e))r.push(...e);else{const n=Or(t[16]);xa(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Oa{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return xa(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Zr(e,n),cn(t,n))}this._attachedToViewContainer=!1}Mr(this._lView[1],this._lView)}onDestroy(e){Pi(this._lView[1],this._lView,null,e)}markForCheck(){Xi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){es(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ye(!0);try{es(e,t,n)}finally{Ye(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Yr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Na extends Oa{constructor(e){super(e),this._view=e}detectChanges(){ts(this._view)}checkNoChanges(){!function(e){Ye(!0);try{ts(e)}finally{Ye(!1)}}(this._view)}get context(){return null}}const Da=function(e){return function(e,t,n){if(fe(e)&&!n){const n=Pe(e.index,t);return new Oa(n,n)}return 47&e.type?new Oa(t[16],t):null}(ze(),je(),16==(16&e))};let Ra=(()=>{class e{}return e.__NG_ELEMENT_ID__=Da,e})();const Pa=[new Ta],La=new Ca([new ga]),Fa=new ka(Pa),Za=function(){return Va(ze(),je())};let Ma=(()=>{class e{}return e.__NG_ELEMENT_ID__=Za,e})();const Ua=Ma,qa=class extends Ua{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Ti(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ii(t,n,e),new Oa(n)}};function Va(e,t){return 4&e.type?new qa(t,e,sa(e,t)):null}class ja{}class Ba{}const $a=function(){return Qa(ze(),je())};let za=(()=>{class e{}return e.__NG_ELEMENT_ID__=$a,e})();const Ha=za,Ga=class extends Ha{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Qt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Mt(this._hostTNode,this._hostLView);if(xt(e)){const t=Nt(e,this._hostLView),n=Ot(e);return new Qt(t[1].data[n+8],t)}return new Qt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Ka(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(ja,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Ga(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],un(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=Wr(i,s),a=n[11],u=$r(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Yr(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),un(Wa(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Ka(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Zr(this._lContainer,t);n&&(cn(Wa(this._lContainer),t),Mr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Zr(this._lContainer,t);return n&&null!=cn(Wa(this._lContainer),t)?new Oa(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Ka(e){return e[8]}function Wa(e){return e[8]||(e[8]=[])}function Qa(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=Oe(r);else{const n=t[11];i=n.createComment("");const r=De(e,t);Vr(n,$r(n,r),i,function(e,t){return ke(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Ki(r,t,i,e),Ji(t,n)}return new Ga(n,e,t)}const Ya={};class Ja extends ra{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ue(e);return new tu(t,this.ngModule)}}function Xa(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const eu=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Cr});class tu extends ea{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(hi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Xa(this.componentDef.inputs)}get outputs(){return Xa(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ya,i);return s!==Ya||r===Ya?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(ca,xe),o=i.get(da,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(ke(e))return e.selectRootElement(t,n===M.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Lr(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h=function(e,t){return{components:[],scheduler:e||Cr,clean:rs,playerHandler:t||null,flags:0}}(),d=Ri(0,null,null,1,0,null,null,null,null,null),f=Ti(null,d,h,l,null,null,s,a,o,i);let p,g;ut(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Ei(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(cs(a,u,!0),null!==e&&(St(i,e,u),null!==a.classes&&ei(i,e,a.classes),null!==a.styles&&Xr(i,e,a.styles)));const c=r.createRenderer(e,t),l=Ti(n,Di(t),null,t.onPush?64:16,n[20],a,r,c,s||null,null);return o.firstCreatePass&&(Ut(Lt(a,n),o,t.type),qi(o,a),ji(a,n.length,1)),Ji(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)St(a,c,["ng-version",pa.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ai(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&St(a,c,e),t&&t.length>0&&ei(a,c,t.join(" "))}if(g=Re(d,20),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=ze();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Bi(e,r,t,Si(e,t,1,null),n));const i=Gt(t,e,r.directiveStart,r);wr(i,t);const s=De(r,t);return s&&wr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=ze();t.contentQueries(1,o,e.directiveStart)}const a=ze();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(gt(a.index),Mi(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ui(t,o)),o}(e,this.componentDef,f,h,[Cs]),Ii(d,f,null)}finally{ft()}return new nu(this.componentType,p,sa(g,f),f,g)}}class nu extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Na(r),this.componentType=e}get injector(){return new Qt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ru=new Map;class iu extends ja{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ja(this);const n=ce(e),r=e[W]||null;r&&zo(r),this._bootstrapComponents=Ar(n.bootstrap),this._r3Injector=ys(e,t,[{provide:ja,useValue:this},{provide:ra,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Is.THROW_IF_NOT_FOUND,n=D.Default){return e===Is||e===ja||e===ls?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class su extends Ba{constructor(e){super(),this.moduleType=e,null!==ce(e)&&function(e){const t=new Set;!function e(n){const r=ce(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,ru.get(i),n),ru.set(i,n));const s=Ar(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new iu(this.moduleType,e)}}function ou(e,t,n,r,i,s){const o=t+n;return Zs(e,o,i)?function(e,t,n){return e[t]=n}(e,o+1,s?r.call(s,i):r(i)):function(e,t){const n=e[t];return n===di?void 0:n}(e,o+1)}function au(e,t){const n=Be();let r;const i=e+20;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ye(r.type)),o=P($s);try{const e=Rt(!1),t=s();return Rt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,je(),i,t),t}finally{P(o)}}function uu(e,t,n){const r=e+20,i=je(),s=function(e,t){return e[t]}(i,r);return function(e,t){Ps.isWrapped(t)&&(t=Ps.unwrap(t),e[Je()]=di);return t}(i,function(e,t){return e[1].data[t].pure}(i,r)?ou(i,function(){const e=qe.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),t,s.transform,n,s):s.transform(n))}function cu(e){return t=>{setTimeout(e,void 0,t)}}const lu=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=cu(u),a&&(a=cu(a)),c&&(c=cu(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function hu(){return this._results[Rs()]()}class du{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Rs(),n=du.prototype;n[t]||(n[t]=hu)}get changes(){return this._changes||(this._changes=new lu)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=on(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class fu{constructor(e){this.queryList=e,this.matches=null}clone(){return new fu(this.queryList)}setDirty(){this.queryList.setDirty()}}class pu{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new pu(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ku(e,t).matches&&this.queries[t].setDirty()}}class gu{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class mu{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new mu(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class yu{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new yu(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,vu(t,i)),this.matchTNodeWithReadOption(e,t,Ht(t,e,i,!1,!1))}else n===Ma?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ht(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===aa||r===za||r===Ma&&4&t.type)this.addMatch(t.index,-2);else{const n=Ht(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function vu(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function _u(e,t,n,r){return-1===n?function(e,t){return 11&e.type?sa(e,t):4&e.type?Va(e,t):null}(t,e):-2===n?function(e,t,n){return n===aa?sa(t,e):n===Ma?Va(t,e):n===za?Qa(t,e):void 0}(e,t,r):Gt(e,e[1],n,t)}function bu(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:_u(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function wu(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=bu(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&wu(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];wu(n[1],n,i,r)}}}}}return r}function Tu(e){const t=je(),n=Be(),r=it();st(r+1);const i=ku(n,r);if(e.dirty&&Le(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?wu(n,t,r,[]):bu(n,t,i,r);e.reset(s,ua),e.notifyOnChanges()}return!0}return!1}function Eu(e,t,n){const r=Be();r.firstCreatePass&&(Au(r,new gu(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Cu(r,je(),t)}function Su(e,t,n,r){const i=Be();if(i.firstCreatePass){const s=ze();Au(i,new gu(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Cu(i,je(),n)}function Iu(){return e=je(),t=it(),e[19].queries[t].queryList;var e,t}function Cu(e,t,n){const r=new du(4==(4&n));Pi(e,t,r,r.destroy),null===t[19]&&(t[19]=new pu),t[19].queries.push(new fu(r))}function Au(e,t,n){null===e.queries&&(e.queries=new mu),e.queries.track(new yu(t,n))}function ku(e,t){return e.queries.getByIndex(t)}const xu=new nn("Application Initializer");let Ou=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ia,this.reject=ia,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Xs(t))e.push(t);else if(to(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Tn(xu,8))},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();const Nu=new nn("AppId"),Du={provide:Nu,useFactory:function(){return`${Ru()}${Ru()}${Ru()}`},deps:[]};function Ru(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pu=new nn("Platform Initializer"),Lu=new nn("Platform ID"),Fu=new nn("appBootstrapListener");let Zu=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();const Mu=new nn("LocaleId"),Uu=new nn("DefaultCurrencyCode");class qu{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Vu=function(e){return new su(e)},ju=Vu,Bu=function(e){return Promise.resolve(Vu(e))},$u=function(e){const t=Vu(e),n=Ar(ce(e).declarations).reduce((e,t)=>{const n=ue(t);return n&&e.push(new tu(n)),e},[]);return new qu(t,n)},zu=$u,Hu=function(e){return Promise.resolve($u(e))};let Gu=(()=>{class e{constructor(){this.compileModuleSync=ju,this.compileModuleAsync=Bu,this.compileModuleAndAllComponentsSync=zu,this.compileModuleAndAllComponentsAsync=Hu}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();const Ku=(()=>Promise.resolve(0))();function Wu(e){"undefined"==typeof Zone?Ku.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Qu{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lu(!1),this.onMicrotaskEmpty=new lu(!1),this.onStable=new lu(!1),this.onError=new lu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=j.requestAnimationFrame,t=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(j,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xu(e),e.isCheckStableRunning=!0,Ju(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return ec(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),tc(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return ec(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),tc(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Xu(e),Ju(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Yu,ia,ia);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Yu={};function Ju(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ec(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tc(e){e._nesting--,Ju(e)}class nc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lu,this.onMicrotaskEmpty=new lu,this.onStable=new lu,this.onError=new lu}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let rc=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qu.assertNotInAngularZone(),Wu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wu(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Tn(Qu))},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})(),ic=(()=>{class e{constructor(){this._applications=new Map,ac.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return ac.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();class sc{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function oc(e){ac=e}let ac=new sc,uc=!0,cc=!1;function lc(){return cc=!0,uc}function hc(){if(cc)throw new Error("Cannot enable prod mode after platform setup.");uc=!1}let dc;const fc=new nn("AllowMultipleToken");class pc{constructor(e,t){this.name=e,this.token=t}}function gc(e,t,n=[]){const r=`Platform: ${t}`,i=new nn(r);return(t=[])=>{let s=mc();if(!s||s.injector.get(fc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:ds,useValue:"platform"});!function(e){if(dc&&!dc.destroyed&&!dc.injector.get(fc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");dc=e.get(yc);const t=e.get(Pu,null);t&&t.forEach(e=>e())}(Is.create({providers:e,name:r}))}return function(e){const t=mc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function mc(){return dc&&!dc.destroyed?dc:null}let yc=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new nc:("zone.js"===e?void 0:e)||new Qu({enableLongStackTrace:lc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Qu,useValue:n}];return n.run(()=>{const i=Is.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(i),o=s.injector.get(Ir,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});s.onDestroy(()=>{bc(this._modules,s),e.unsubscribe()})}),function(e,n,r){try{const t=r();return Xs(t)?t.catch(t=>{throw n.runOutsideAngular(()=>e.handleError(t)),t}):t}catch(t){throw n.runOutsideAngular(()=>e.handleError(t)),t}}(o,n,()=>{const e=s.injector.get(Ou);return e.runInitializers(),e.donePromise.then(()=>(zo(s.injector.get(Mu,Bo)||Bo),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=vc({},t);return function(e,t,n){const r=new su(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(_c);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Tn(Is))},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();function vc(e,t){return Array.isArray(t)?t.reduce(vc,e):Object.assign(Object.assign({},e),t)}let _c=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Qu.assertNotInAngularZone(),Wu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>(0,u.x)()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r}}(c)(e))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ea?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(ja),i=n.create(Is.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(rc,null),a=o&&i.injector.get(ic);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),bc(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;bc(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Fu,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Tn(Qu),Tn(Is),Tn(Ir),Tn(ra),Tn(Ou))},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();function bc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class wc{}class Tc{}const Ec={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Sc=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Ec}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Ic(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Ic(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Tn(Gu),Tn(Tc,8))},e.\u0275prov=E({token:e,factory:e.\u0275fac}),e})();function Ic(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Cc=function(e){return null},Ac=gc(null,"core",[{provide:Lu,useValue:"unknown"},{provide:yc,deps:[Is]},{provide:ic,deps:[]},{provide:Zu,deps:[]}]),kc=[{provide:_c,useClass:_c,deps:[Qu,Is,Ir,ra,Ou]},{provide:eu,deps:[Qu],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Ou,useClass:Ou,deps:[[new kn,xu]]},{provide:Gu,useClass:Gu,deps:[]},Du,{provide:Ca,useFactory:function(){return La},deps:[]},{provide:ka,useFactory:function(){return Fa},deps:[]},{provide:Mu,useFactory:function(e){return zo(e=e||"undefined"!=typeof $localize&&$localize.locale||Bo),e},deps:[[new An(Mu),new kn,new xn]]},{provide:Uu,useValue:"USD"}];let xc=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Tn(_c))},e.\u0275mod=re({type:e}),e.\u0275inj=S({providers:kc}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return g},xv:function(){return h},Dh:function(){return l},GT:function(){return u},cc:function(){return m},on:function(){return d},pX:function(){return a}});var r=n(3018),i=n(7841),s=n(6643);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(v("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,v=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:function(e,t,n){"use strict";n.d(t,{q4:function(){return Zn},iC:function(){return Kn},HU:function(){return Hn},vb:function(){return jn},JM:function(){return Vn}});var r=n(3018),i=n(2329),s=n(8239),o=n(5452),a=n(3854),u=n(6034),c=n(5601),l=n(6676);const h="@firebase/installations",d="0.5.2",f=`w:${d}`,p="FIS_v2",g=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(e){return e instanceof a.ZR&&e.code.includes("request-failed")}function y({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function v(e){return{token:e.token,requestStatus:2,expiresIn:I(e.expiresIn),creationTime:Date.now()}}function _(e,t){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)(function*(e,t){const n=(yield t.json()).error;return g.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function w({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function T(e,{refreshToken:t}){const n=w(e);return n.append("Authorization",function(e){return`${p} ${e}`}(t)),n}function E(e){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function I(e){return Number(e.replace("s","000"))}function C(e,t){return A.apply(this,arguments)}function A(){return(A=(0,s.Z)(function*(e,{fid:t}){const n=y(e),r={method:"POST",headers:w(e),body:JSON.stringify({fid:t,authVersion:p,appId:e.appId,sdkVersion:f})},i=yield E(()=>fetch(n,r));if(i.ok){const e=yield i.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:v(e.authToken)}}throw yield _("Create Installation",i)})).apply(this,arguments)}function k(e){return new Promise(t=>{setTimeout(t,e)})}const x=/^[cdef][\w-]{21}$/;function O(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return x.test(t)?t:""}catch(e){return""}}function N(e){return`${e.appName}!${e.appId}`}const D=new Map;function R(e,t){const n=N(e);P(n,t),function(e,t){const n=(!L&&"BroadcastChannel"in self&&(L=new BroadcastChannel("[Firebase] FID Change"),L.onmessage=e=>{P(e.data.key,e.data.fid)}),L);n&&n.postMessage({key:e,fid:t}),0===D.size&&L&&(L.close(),L=null)}(n,t)}function P(e,t){const n=D.get(e);if(n)for(const r of n)r(t)}let L=null;const F="firebase-installations-store";let Z=null;function M(){return Z||(Z=(0,l.openDb)("firebase-installations-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(F)}})),Z}function U(e,t){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(e,t){const n=N(e),r=(yield M()).transaction(F,"readwrite"),i=r.objectStore(F),s=yield i.get(n);return yield i.put(t,n),yield r.complete,(!s||s.fid!==t.fid)&&R(e,t.fid),t})).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(function*(e){const t=N(e),n=(yield M()).transaction(F,"readwrite");yield n.objectStore(F).delete(t),yield n.complete})).apply(this,arguments)}function B(e,t){return $.apply(this,arguments)}function $(){return($=(0,s.Z)(function*(e,t){const n=N(e),r=(yield M()).transaction(F,"readwrite"),i=r.objectStore(F),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,o&&(!s||s.fid!==o.fid)&&R(e,o.fid),o})).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(function*(e){let t;const n=yield B(e,n=>{const r=G(n),i=K(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function G(e){return X(e||{fid:O(),registrationStatus:0})}function K(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return W.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Q(e)}:{installationEntry:t}}function W(){return(W=(0,s.Z)(function*(e,t){try{return U(e,yield C(e,t))}catch(n){throw m(n)&&409===n.customData.serverCode?yield V(e):yield U(e,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function Q(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(function*(e){let t=yield J(e);for(;1===t.registrationStatus;)yield k(100),t=yield J(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield z(e);return n||t}return t})).apply(this,arguments)}function J(e){return B(e,e=>{if(!e)throw g.create("installation-not-found");return X(e)})}function X(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=(0,s.Z)(function*({appConfig:e,platformLoggerProvider:t},n){const r=ne(e,n),i=T(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:f}})},a=yield E(()=>fetch(r,o));if(a.ok)return v(yield a.json());throw yield _("Generate Auth Token",a)})).apply(this,arguments)}function ne(e,{fid:t}){return`${y(e)}/${t}/authTokens:generate`}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,s.Z)(function*(e,t=!1){let n;const r=yield B(e.appConfig,r=>{if(!le(r))throw g.create("not-registered");const i=r.authToken;if(!t&&he(i))return r;if(1===i.requestStatus)return n=se(e,t),r;{if(!navigator.onLine)throw g.create("app-offline");const t=de(r);return n=ue(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=(0,s.Z)(function*(e,t){let n=yield ae(e.appConfig);for(;1===n.authToken.requestStatus;)yield k(100),n=yield ae(e.appConfig);const r=n.authToken;return 0===r.requestStatus?re(e,t):r})).apply(this,arguments)}function ae(e){return B(e,e=>{if(!le(e))throw g.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ue(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,s.Z)(function*(e,t){try{const n=yield ee(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield U(e.appConfig,r),n}catch(n){if(!m(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield U(e.appConfig,n)}else yield V(e.appConfig);throw n}})).apply(this,arguments)}function le(e){return void 0!==e&&2===e.registrationStatus}function he(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function de(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function fe(){return(fe=(0,s.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield z(t.appConfig);return r?r.catch(console.error):re(t).catch(console.error),n.fid})).apply(this,arguments)}function pe(){return(pe=(0,s.Z)(function*(e,t=!1){const n=e;return yield ge(n.appConfig),(yield re(n,t)).token})).apply(this,arguments)}function ge(e){return me.apply(this,arguments)}function me(){return(me=(0,s.Z)(function*(e){const{registrationPromise:t}=yield z(e);t&&(yield t)})).apply(this,arguments)}function ye(e){return g.create("missing-app-config-values",{valueName:e})}const ve="installations";(0,o._registerComponent)(new u.wA(ve,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw ye("App Configuration");if(!e.name)throw ye("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ye(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,o._getProvider)(t,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new u.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,o._getProvider)(t,ve).getImmediate();return{getId:()=>function(e){return fe.apply(this,arguments)}(n),getToken:e=>function(e){return pe.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,o.registerVersion)(h,d),(0,o.registerVersion)(h,d,"esm2017");const _e="@firebase/remote-config",be=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class we{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function Te(e=navigator){return e.languages&&e.languages[0]||e.language}class Ee{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:Te()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(i,a),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([u,c]),l=yield u}catch(g){let e="fetch-client-network";throw"AbortError"===g.name&&(e="fetch-timeout"),be.create(e,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let e;try{e=yield l.json()}catch(m){throw be.create("fetch-client-parse",{originalErrorMessage:m.message})}f=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:("NO_TEMPLATE"===p||"EMPTY_CONFIG"===p)&&(f={}),304!==h&&200!==h)throw be.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class Se{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,s.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(be.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(t),r.attemptFetch(e,t)}})()}}class Ie{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ce(e,t){const n=e.target.error||void 0;return be.create(t,{originalErrorMessage:n&&n.message})}const Ae="app_namespace_store";class ke{constructor(e,t,n,r=function(){return new Promise((e,n)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=e=>{n(Ce(e,"storage-open"))},t.onsuccess=t=>{e(t.target.result)},t.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Ae,{keyPath:"compositeKey"})}}}catch(t){n(be.create("storage-open",{originalErrorMessage:t}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([Ae],"readonly").objectStore(Ae),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(Ce(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(be.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([Ae],"readwrite").objectStore(Ae),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(Ce(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(u){s(be.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(e){var t=this;return(0,s.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([Ae],"readwrite").objectStore(Ae),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(Ce(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(be.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class xe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,s.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Oe(){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw be.create("registration-window");if(!(0,a.hl)())throw be.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:u}=n.options;if(!i)throw be.create("registration-project-id");if(!s)throw be.create("registration-api-key");if(!u)throw be.create("registration-app-id");const l=new ke(u,n.name,t=t||"firebase"),h=new xe(l),d=new c.Yd(_e);d.logLevel=c.in.ERROR;const f=new Ee(r,o.SDK_VERSION,t,i,s,u),p=new Se(f,l),g=new we(p,l,h,d),m=new Ie(n,g,h,l,d);return function(e){const t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(_e,"0.3.1"),(0,o.registerVersion)(_e,"0.3.1","esm2017");const De="/firebase-messaging-sw.js",Re="/firebase-cloud-messaging-push-scope",Pe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Le="google.c.a.c_id",Fe="google.c.a.c_l",Ze="google.c.a.ts",Me="google.c.a.e";var Ue=(()=>{return(e=Ue||(Ue={})).PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",Ue;var e})();function qe(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ve(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const je="fcm_token_details_db",Be="fcm_token_object_Store";function $e(e){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(je))return null;let t=null;return(yield(0,l.openDb)(je,5,function(){var n=(0,s.Z)(function*(n){var r;if(n.oldVersion<2||!n.objectStoreNames.contains(Be))return;const i=n.transaction.objectStore(Be),s=yield i.index("fcmSenderId").get(e);if(yield i.clear(),s)if(2===n.oldVersion){const e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(r=e.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:qe(e.vapidKey)}}}else if(3===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:qe(e.auth),p256dh:qe(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:qe(e.vapidKey)}}}else if(4===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:qe(e.auth),p256dh:qe(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:qe(e.vapidKey)}}}});return function(e){return n.apply(this,arguments)}}())).close(),yield(0,l.deleteDb)(je),yield(0,l.deleteDb)("fcm_vapid_details_db"),yield(0,l.deleteDb)("undefined"),He(t)?t:null})).apply(this,arguments)}function He(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const Ge="firebase-messaging-store";let Ke=null;function We(){return Ke||(Ke=(0,l.openDb)("firebase-messaging-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(Ge)}})),Ke}function Qe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,s.Z)(function*(e){const t=nt(e),n=yield(yield We()).transaction(Ge).objectStore(Ge).get(t);if(n)return n;{const t=yield $e(e.appConfig.senderId);if(t)return yield Je(e,t),t}})).apply(this,arguments)}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,s.Z)(function*(e,t){const n=nt(e),r=(yield We()).transaction(Ge,"readwrite");return yield r.objectStore(Ge).put(t,n),yield r.complete,t})).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(function*(e){const t=nt(e),n=(yield We()).transaction(Ge,"readwrite");yield n.objectStore(Ge).delete(t),yield n.complete})).apply(this,arguments)}function nt({appConfig:e}){return e.appId}const rt=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(e,t){const n=yield ht(e),r=ft(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(lt(e.appConfig),i)).json()}catch(o){throw rt.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw rt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw rt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function ot(e,t){return at.apply(this,arguments)}function at(){return(at=(0,s.Z)(function*(e,t){const n=yield ht(e),r=ft(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${lt(e.appConfig)}/${t.token}`,i)).json()}catch(o){throw rt.create("token-update-failed",{errorInfo:o})}if(s.error)throw rt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw rt.create("token-update-no-token");return s.token})).apply(this,arguments)}function ut(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,s.Z)(function*(e,t){const n={method:"DELETE",headers:yield ht(e)};try{const r=yield(yield fetch(`${lt(e.appConfig)}/${t}`,n)).json();if(r.error)throw rt.create("token-unsubscribe-failed",{errorInfo:r.error.message})}catch(r){throw rt.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function lt({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function ht(e){return dt.apply(this,arguments)}function dt(){return(dt=(0,s.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function ft({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==Pe&&(i.web.applicationPubKey=r),i}const pt=6048e5;function gt(e){return mt.apply(this,arguments)}function mt(){return(mt=(0,s.Z)(function*(e){const t=yield Et(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:qe(t.getKey("auth")),p256dh:qe(t.getKey("p256dh"))},r=yield Qe(e.firebaseDependencies);if(r){if(It(r.subscriptionOptions,n))return Date.now()>=r.createTime+pt?_t(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield ut(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return wt(e.firebaseDependencies,n)}return wt(e.firebaseDependencies,n)})).apply(this,arguments)}function yt(e){return vt.apply(this,arguments)}function vt(){return(vt=(0,s.Z)(function*(e){const t=yield Qe(e.firebaseDependencies);t&&(yield ut(e.firebaseDependencies,t.token),yield et(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function _t(e,t){return bt.apply(this,arguments)}function bt(){return(bt=(0,s.Z)(function*(e,t){try{const n=yield ot(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield Je(e.firebaseDependencies,r),n}catch(n){throw yield yt(e),n}})).apply(this,arguments)}function wt(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,s.Z)(function*(e,t){const n={token:yield it(e,t),createTime:Date.now(),subscriptionOptions:t};return yield Je(e,n),n.token})).apply(this,arguments)}function Et(e,t){return St.apply(this,arguments)}function St(){return(St=(0,s.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ve(t)})})).apply(this,arguments)}function It(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function Ct(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){!t.data||(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function At(e){return"object"==typeof e&&!!e&&Le in e}function kt(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function xt(e){return rt.create("missing-app-config-values",{valueName:e})}kt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),kt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ot{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw xt("App Configuration Object");if(!e.name)throw xt("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw xt(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function Nt(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,s.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(De,{scope:Re}),e.swRegistration.update().catch(()=>{})}catch(t){throw rt.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function Rt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(e,t){if(!t&&!e.swRegistration&&(yield Nt(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw rt.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function Lt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,s.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Pe)})).apply(this,arguments)}function Zt(){return(Zt=(0,s.Z)(function*(e,t){if(!navigator)throw rt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rt.create("permission-blocked");return yield Lt(e,null==t?void 0:t.vapidKey),yield Rt(e,null==t?void 0:t.serviceWorkerRegistration),gt(e)})).apply(this,arguments)}function Mt(e,t,n){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,s.Z)(function*(e,t,n){const r=qt(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Le],message_name:n[Fe],message_time:n[Ze],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qt(e){switch(e){case Ue.NOTIFICATION_CLICKED:return"notification_open";case Ue.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vt(){return(Vt=(0,s.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Ue.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Ct(n)):e.onMessageHandler.next(Ct(n)));const r=n.data;At(r)&&"1"===r[Me]&&(yield Mt(e,n.messageType,r))})).apply(this,arguments)}const jt="@firebase/messaging";function Bt(){return $t.apply(this,arguments)}function $t(){return($t=(0,s.Z)(function*(){return"undefined"!=typeof window&&(0,a.hl)()&&(yield(0,a.eu)())&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("messaging",e=>{const t=new Ot(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return Vt.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,o._registerComponent)(new u.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return Zt.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,o.registerVersion)(jt,"0.9.2"),(0,o.registerVersion)(jt,"0.9.2","esm2017");const zt="analytics",Ht="firebase_id",Gt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Kt="https://www.googletagmanager.com/gtag/js",Wt=new c.Yd("@firebase/analytics");function Qt(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Yt(e,t){const n=document.createElement("script");n.src=`${Kt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function Jt(e,t,n,r,i,s){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,s.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield Qt(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){Wt.error(a)}e("config",i,s)})).apply(this,arguments)}function en(e,t,n,r,i){return tn.apply(this,arguments)}function tn(){return(tn=(0,s.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield Qt(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){Wt.error(s)}})).apply(this,arguments)}function nn(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Kt))return t;return null}const rn=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sn=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function on(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function an(e){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:on(r)},s=Gt.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw rn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function cn(e){return ln.apply(this,arguments)}function ln(){return(ln=(0,s.Z)(function*(e,t=sn,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw rn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw rn.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new gn;return setTimeout((0,s.Z)(function*(){u.abort()}),void 0!==n?n:6e4),hn({appId:r,apiKey:i,measurementId:o},a,u,t)})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,s.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=sn){const{appId:s,measurementId:o}=e;try{yield fn(r,t)}catch(u){if(o)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}try{const t=yield an(e);return i.deleteThrottleMetadata(s),t}catch(u){if(!pn(u)){if(i.deleteThrottleMetadata(s),o)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}const t=503===Number(u.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,c),Wt.debug(`Calling attemptFetch again in ${t} millis`),hn(e,c,r,i)}})).apply(this,arguments)}function fn(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(rn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function pn(e){if(!(e instanceof a.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class gn{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function mn(){return yn.apply(this,arguments)}function yn(){return(yn=(0,s.Z)(function*(){if(!(0,a.hl)())return Wt.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(e){return Wt.warn(rn.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function vn(){return(vn=(0,s.Z)(function*(e,t,n,r,i,s,o){var a;const u=cn(e);u.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Wt.error(e)),t.push(u);const c=mn().then(e=>{if(e)return r.getId()}),[l,h]=yield Promise.all([u,c]);nn()||Yt(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d[Ht]=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class _n{constructor(e){this.app=e}_delete(){return delete bn[this.app.options.appId],Promise.resolve()}}let bn={},wn=[];const Tn={};let En,Sn,In="dataLayer",Cn=!1;function An(e,t,n){!function(){const e=[];if((0,a.ru)()&&e.push("This is a browser extension environment."),(0,a.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:t});Wt.warn(n.message)}}();const r=e.options.appId;if(!r)throw rn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rn.create("no-api-key");Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bn[r])throw rn.create("already-exists",{id:r});if(!Cn){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(In);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield en(e,t,n,s,o):"config"===i?yield Jt(e,t,n,r,s,o):e("set",s)}catch(a){Wt.error(a)}})).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(bn,wn,Tn,In,"gtag");Sn=e,En=t,Cn=!0}return bn[r]=function(e,t,n,r,i,s,o){return vn.apply(this,arguments)}(e,wn,Tn,t,En,In,n),new _n(e)}function kn(){return(kn=(0,s.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function xn(){return On.apply(this,arguments)}function On(){return(On=(0,s.Z)(function*(){if((0,a.ru)()||!(0,a.zI)()||!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(e){return!1}})).apply(this,arguments)}const Nn="@firebase/analytics";(0,o._registerComponent)(new u.wA(zt,(e,{options:t})=>An(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new u.wA("analytics-internal",function(e){try{const t=e.getProvider(zt).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,a.m9)(e),function(e,t,n,r,i){return kn.apply(this,arguments)}(Sn,bn[e.app.options.appId],t,n,r).catch(e=>Wt.error(e))}(t,e,n,r)}}catch(t){throw rn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)(Nn,"0.7.2"),(0,o.registerVersion)(Nn,"0.7.2","esm2017");var Dn=n(7771),Rn=n(3637),Pn=n(3342),Ln=n(3101),Fn=n(309);const Zn=new r.GfV("7.1.1"),Mn="__angularfire_symbol__analyticsIsSupported",Un="__angularfire_symbol__remoteConfigIsSupported",qn="__angularfire_symbol__messagingIsSupported";function Vn(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[Mn]||(globalThis[Mn]=xn().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e)),globalThis[qn]||(globalThis[qn]=Bt().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e)),globalThis[Un]||(globalThis[Un]=Oe().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e));const jn=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function Bn(){}class $n{constructor(e,t=Dn.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class zn{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bn,{},Bn,Bn)),t.pipe((0,Pn.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hn=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new $n(Zone.current)),this.insideAngular=e.run(()=>new $n(Zone.current,Rn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Gn(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function Kn(e){return Gn(),function(e){return function(t){return(t=t.lift(new zn(e.ngZone))).pipe((0,Ln.R)(e.outsideAngular),(0,Fn.QV)(e.insideAngular))}}(Gn())(e)}},4486:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3854),i=n(6034),s=n(5452),o=n(5601);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return T},_DEFAULT_ENTRY_NAME:function(){return l},_addComponent:function(){return p},_addOrOverwriteComponent:function(){return g},_apps:function(){return d},_clearComponents:function(){return _},_components:function(){return f},_getProvider:function(){return y},_registerComponent:function(){return m},_removeServiceInstance:function(){return v},deleteApp:function(){return C},getApp:function(){return S},getApps:function(){return I},initializeApp:function(){return E},onLog:function(){return x},registerVersion:function(){return k},setLogLevel:function(){return O}});var r=n(8239),i=n(6034),s=n(5601),o=n(3854);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c=new s.Yd("@firebase/app"),l="[DEFAULT]",h={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=l){y(e,t).clearInstance(n)}function _(){f.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class w{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const T="9.1.3";function E(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw b.create("bad-app-name",{appName:String(r)});const s=d.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw b.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const u=new w(e,n,a);return d.set(r,u),u}function S(e=l){const t=d.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function I(){return Array.from(d.values())}function C(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function k(e,t,n){var r;let s=null!==(r=h[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}m(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function x(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,s.Am)(e,t)}function O(e){(0,s.Ub)(e)}m(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),k(u,"0.7.4",""),k(u,"0.7.4","esm2017"),k("fire-js","")},6034:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return c}});var r=n(4762),i=n(3854),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===o?void 0:e}var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},5601:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return c},Ub:function(){return l},Am:function(){return h}});const r=[];var i=(()=>{return(e=i||(i={}))[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",i;var e})();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return c},LL:function(){return I},ZR:function(){return S},zI:function(){return E},US:function(){return i},tV:function(){return o},$s:function(){return Z},r3:function(){return A},Sg:function(){return l},ne:function(){return P},vZ:function(){return x},ZB:function(){return a},pd:function(){return R},m9:function(){return M},z$:function(){return h},jU:function(){return p},ru:function(){return g},d:function(){return y},xb:function(){return k},w1:function(){return v},hl:function(){return w},uI:function(){return d},UG:function(){return f},b$:function(){return m},G6:function(){return b},Mn:function(){return _},xO:function(){return N},zd:function(){return D},eu:function(){return T}});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!u(n)||(e[n]=a(e[n],t[n]));return e}function u(e){return"__proto__"!==e}class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function g(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){const e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return h().indexOf("MSAppHost/")>=0}function b(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){return"object"==typeof indexedDB}function T(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function E(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new S(r,`${this.serviceName}: ${s} (${r}).`,n)}}const C=/\{\$([^}]+)}/g;function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(O(n)&&O(s)){if(!x(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O(e){return null!==e&&"object"==typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F(){}function Z(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function M(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps}});var r=n(5452);(0,r.registerVersion)("firebase","9.1.3","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(4486);r.Z.registerVersion("firebase","9.1.3","app-compat")},4671:function(e,t,n){"use strict";n.r(t);var r=n(8239),i=n(4486),s=n(3854),o=n(5452),a=n(4762),u=n(5601),c=n(6034);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},d=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f=new u.Yd("@firebase/auth");function p(e,...t){f.logLevel<=u.in.ERROR&&f.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function g(e,...t){throw _(e,...t)}function m(e,...t){return _(e,...t)}function y(e,t,n){const r=Object.assign(Object.assign({},h()),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),y(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d.create(e,...t)}function b(e,t,...n){if(!e)throw _(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function T(e,t){e||w(t)}const E=new Map;function S(e){T(e instanceof Function,"Expected a class definition");let t=E.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,E.set(e,t),t)}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===A()||"https:"===A()}function A(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(C()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class O{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},D=new k(3e4,6e4);function R(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function P(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t,n,r,i={}){return F(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=new(O.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&u.set("X-Firebase-Locale",e.languageCode),O.fetch()(q(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function F(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new V(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw j(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw y(e,a,o);g(e,a)}}catch(i){if(i instanceof s.ZR)throw i;g(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield P(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{serverResponse:s}),s})).apply(this,arguments)}function q(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),D.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function $(e,t){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function H(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Y(r);b(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:K(Q(i.auth_time)),issuedAtTime:K(Q(i.iat)),expirationTime:K(Q(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function Q(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(i){return p("Caught error parsing JWT payload as JSON",i),null}}function J(e,t){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&ee(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function ee({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield J(e,H(n,{idToken:r}));b(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ae(s.providerUserInfo):[],a=oe(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield re(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function oe(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ae(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ue(){return(ue=(0,r.Z)(function*(e,t){const n=yield F(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=q(e,r,"/v1/token",`key=${i}`);return O.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(void 0!==e.idToken,"internal-error"),b(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return b(t,"internal-error"),b(void 0!==t.exp,"internal-error"),b(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return b(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ue.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ce;return n&&(b("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(b("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(b("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return w("not implemented")}}function le(e,t){b("string"==typeof e||void 0===e,"internal-error",{appName:t})}class he{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new ne(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield J(t,t.stsTokenManager.getToken(t.auth,e));return b(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield re(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield J(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:T,stsTokenManager:E}=t;b(v&&E,e,"internal-error");const S=ce.fromJSON(this.name,E);b("string"==typeof v,e,"internal-error"),le(l,e.name),le(h,e.name),b("boolean"==typeof _,e,"internal-error"),b("boolean"==typeof w,e,"internal-error"),le(d,e.name),le(f,e.name),le(p,e.name),le(g,e.name),le(m,e.name),le(y,e.name);const I=new he({uid:v,auth:e,email:h,emailVerified:_,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return T&&Array.isArray(T)&&(I.providerData=T.map(e=>Object.assign({},e))),g&&(I._redirectEventId=g),I}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ce;r.updateFromServerResponse(t);const i=new he({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield re(i),i})()}}const de=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function fe(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fe(this.userKey,r.apiKey,i),this.fullPersistenceKey=fe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?he._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(S(de),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||S(de);const o=fe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=he._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(t){}});return function(t){return e.apply(this,arguments)}}())),new pe(s,e,n)):new pe(s,e,n)})()}}function ge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(Te(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,s.z$)()){return/firefox\//i.test(e)}function ye(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ve(e=(0,s.z$)()){return/crios\//i.test(e)}function _e(e=(0,s.z$)()){return/iemobile/i.test(e)}function be(e=(0,s.z$)()){return/android/i.test(e)}function we(e=(0,s.z$)()){return/blackberry/i.test(e)}function Te(e=(0,s.z$)()){return/webos/i.test(e)}function Ee(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Se(e=(0,s.z$)()){return Ee(e)||be(e)||Te(e)||we(e)||/windows phone/i.test(e)||_e(e)}function Ie(e,t=[]){let n;switch(e){case"Browser":n=ge((0,s.z$)());break;case"Worker":n=`${ge((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Ce{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=S(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield pe.create(n,e),!n._deleted&&((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),!n._deleted&&(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t)}})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);(!i||i===s)&&(null==o?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(b(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield re(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&b(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&b(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(S(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&S(e)||t._popupRedirectResolver;b(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[S(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return b(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ae(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Oe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function De(e,t){return Re.apply(this,arguments)}function Re(){return(Re=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:resetPassword",R(e,t))})).apply(this,arguments)}function Pe(e,t){return Le.apply(this,arguments)}function Le(){return(Le=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Fe(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",R(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",R(e,t))})).apply(this,arguments)}function Ue(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:sendOobCode",R(e,t))})).apply(this,arguments)}function Ve(e,t){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Be(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function ze(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ge(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))})).apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))})).apply(this,arguments)}class Ye extends Ne{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ye(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:g(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Pe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Qe.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:g(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",R(e,t))})).apply(this,arguments)}class et extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new et(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new et(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Je(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Je(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Je(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:sendVerificationCode",R(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t))})).apply(this,arguments)}function it(){return(it=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const st={USER_NOT_FOUND:"user-not-found"};function ot(){return(ot=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),st)})).apply(this,arguments)}class at extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new at({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new at({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return rt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return it.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return ot.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new at({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ut{constructor(e){var t,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);b(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new ut(t)}catch(n){return null}}}let ct=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ut.parseLink(t);return b(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class lt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ht extends lt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dt extends ht{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return b("providerId"in t&&"signInMethod"in t,"argument-error"),et._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return b(e.idToken||e.accessToken,"argument-error"),et._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return dt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return dt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!n&&!r&&!t&&!i||!o)return null;try{return new dt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let ft=(()=>{class e extends ht{constructor(){super("facebook.com")}static credential(t){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),pt=(()=>{class e extends ht{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),gt=(()=>{class e extends ht{constructor(){super("github.com")}static credential(t){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class mt extends Ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Je(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Je(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Je(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mt(n,i):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let yt=(()=>{class e extends ht{constructor(){super("twitter.com")}static credential(t,n){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function vt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",R(e,t))})).apply(this,arguments)}class bt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield he._fromIdTokenResponse(e,n,i),s=wt(n);return new bt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=wt(n);return new bt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function wt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Tt(){return(Tt=(0,r.Z)(function*(e){var t;const n=Ae(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new bt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield vt(n,{returnSecureToken:!0}),i=yield bt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Et extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Et.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Et(e,t,n,r)}}function St(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw"auth/multi-factor-auth-required"===n.code?Et._fromErrorAndOperation(e,n,t,r):n})}function It(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Ct(){return(Ct=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield xt(!0,n,t);const{providerUserInfo:r}=yield $(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=It(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function At(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield J(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return bt._forOperation(e,"link",r)})).apply(this,arguments)}function xt(e,t,n){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t,n){yield re(t);const r=!1===e?"provider-already-linked":"no-such-provider";b(It(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Nt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield J(e,St(r,i,t,e),n);b(s.idToken,r,"internal-error");const o=Y(s.idToken);b(o,r,"internal-error");const{sub:a}=o;return b(e.uid===a,r,"user-mismatch"),bt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&g(r,"user-mismatch"),s}})).apply(this,arguments)}function Rt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield St(e,r,t),s=yield bt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Lt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,r.Z)(function*(e,t){return Rt(Ae(e),t)})).apply(this,arguments)}function Zt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield xt(!1,n,t.providerId),At(n,t)})).apply(this,arguments)}function Ut(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(e,t){return Nt((0,s.m9)(e),t)})).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",R(e,t))})).apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){const n=Ae(e),r=yield Vt(n,{token:t,returnSecureToken:!0}),i=yield bt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class $t{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?zt._fromServerResponse(e,t):g(e,"internal-error")}}class zt extends $t{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new zt(t)}}function Ht(e,t,n){var r;b((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),b(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&Ht(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t,n){yield De((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){yield Fe((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield De(n,{oobCode:t}),i=r.requestType;switch(b(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":b(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":b(r.mfaInfo,n,"internal-error");default:b(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=$t._fromServerResponse(Ae(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const{data:n}=yield Qt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=Ae(e),i=yield vt(r,{returnSecureToken:!0,email:t,password:n}),s=yield bt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};b(n.handleCodeInApp,r,"argument-error"),n&&Ht(r,i,n),yield ze(r,i)})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=ct.credentialWithLink(t,n||I());return b(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lt(r,i)})).apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:createAuthUri",R(e,t))})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:C()?I():"http://localhost"},{signinMethods:r}=yield nn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Ht(n.auth,r,t);const{email:i}=yield Ve(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Ht(r.auth,i,n);const{email:o}=yield Ge(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function un(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield J(r,un(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield J(e,Pe(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class fn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends fn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class gn extends fn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class yn extends fn{constructor(e,t){super(e,"google.com",t)}}class vn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function _n(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new fn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new gn(s,i);case"github.com":return new mn(s,i);case"google.com":return new yn(s,i);case"twitter.com":return new vn(s,i,e.screenName||null);case"custom":case"anonymous":return new fn(s,null);default:return new fn(s,r,i)}}(n)}class bn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new bn("enroll",e)}static _fromMfaPendingCredential(e){return new bn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return bn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return bn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class wn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ae(e),i=(t.serverResponse.mfaInfo||[]).map(e=>$t._fromServerResponse(n,e));b(t.serverResponse.mfaPendingCredential,n,"internal-error");const s=bn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new wn(s,i,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,s);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const i=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield bt._fromIdTokenResponse(n,t.operationType,i);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return b(t.user,n,"internal-error"),bt._forOperation(t.user,t.operationType,i);default:g(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function Tn(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:start",R(e,t))}class En{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>$t._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new En(e)}getSession(){var e=this;return(0,r.Z)(function*(){return bn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield J(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield J(t.user,function(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:withdraw",R(e,t))}(t.user.auth,{idToken:r,mfaEnrollmentId:n}));t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(s){if("auth/user-token-expired"!==s.code)throw s}})()}}const Sn=new WeakMap,In="__sak";class Cn{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(In,"1"),this.storage.removeItem(In),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const An=(()=>{class e extends Cn{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return ye(e)||Ee(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends Cn{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let xn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function On(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=On("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Dn(){return window}function Rn(){return void 0!==Dn().WorkerGlobalScope&&"function"==typeof Dn().importScripts}function Pn(){return(Pn=(0,r.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(hi){return null}})).apply(this,arguments)}const Ln="firebaseLocalStorageDb",Fn="firebaseLocalStorage",Zn="fbase_key";class Mn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Un(e,t){return e.transaction([Fn],t?"readwrite":"readonly").objectStore(Fn)}function qn(){const e=indexedDB.open(Ln,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Fn,{keyPath:Zn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Fn)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Ln);return new Mn(e).toPromise()}(),t(yield qn()))}))})}function Vn(e,t,n){return jn.apply(this,arguments)}function jn(){return(jn=(0,r.Z)(function*(e,t,n){const r=Un(e,!0).put({[Zn]:t,value:n});return new Mn(r).toPromise()})).apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t){const n=Un(e,!1).get(t),r=yield new Mn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function $n(e,t){const n=Un(e,!0).delete(t);return new Mn(n).toPromise()}const zn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield qn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return Rn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=xn._getInstance(Rn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Pn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Nn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);!r||(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){if(t.sender&&t.activeServiceWorker&&function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield qn();return yield Vn(e,In,"1"),yield $n(e,In),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>Vn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return Bn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>$n(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Un(e,!1).getAll();return new Mn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Hn(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:start",R(e,t))}function Gn(){return(Gn=(0,r.Z)(function*(e){return(yield P(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kn(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Wn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Qn=1e12;class Yn{constructor(e){this.auth=e,this.counter=Qn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Qn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Qn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Qn))||void 0===n||n.execute(),""})()}}class Jn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;b(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Wn("rcb"),er=new k(3e4,6e4);class tr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Dn().grecaptcha}load(e,t=""){return b((n=t).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Dn().grecaptcha):new Promise((n,r)=>{const i=Dn().setTimeout(()=>{r(m(e,"network-request-failed"))},er.get());Dn()[Xn]=()=>{Dn().clearTimeout(i),delete Dn()[Xn];const s=Dn().grecaptcha;if(!s)return void r(m(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Kn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Xn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(m(e,"internal-error"))})});var n}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Dn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(e){return(0,r.Z)(function*(){return new Yn(e)})()}clearedOneInstance(){}}const rr="recaptcha",ir={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},ir),n){this.parameters=t,this.type=rr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ae(n),this.isInvisible="invisible"===this.parameters.size,b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;b(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new tr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{!t||(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){b(!this.parameters.sitekey,this.auth,"argument-error"),b(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Dn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){b(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){b(C()&&!Rn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Gn.apply(this,arguments)}(e.auth);b(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return b(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=at._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=Ae(e),i=yield lr(r,t,(0,s.m9)(n));return new or(i,e=>Lt(r,e))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield xt(!1,r,"phone");const i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Zt(r,e))})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Ut(r,e))})).apply(this,arguments)}function lr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(b("string"==typeof i,e,"argument-error"),b(n.type===rr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return b("enroll"===t.type,e,"internal-error"),(yield Tn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{b("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return b(n,e,"missing-multi-factor-info"),(yield Hn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield tt(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function dr(){return(dr=(0,r.Z)(function*(e,t){yield At((0,s.m9)(e),t)})).apply(this,arguments)}let fr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ae(t)}verifyPhoneNumber(e,t){return lr(this.auth,e,(0,s.m9)(t))}static credential(e,t){return at._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?at._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function pr(e,t){return t?S(t):(b(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class gr extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Je(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Je(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Je(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Rt(e.auth,new gr(e),e.bypassAuthState)}function yr(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Nt(n,new gr(e),e.bypassAuthState)}function vr(e){return _r.apply(this,arguments)}function _r(){return(_r=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),At(n,new gr(e),e.bypassAuthState)})).apply(this,arguments)}class br{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return yr;default:g(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new k(2e3,1e4);function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,lt);const i=pr(r,n);return new Ir(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);return new Ir(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Sr(){return(Sr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);return new Ir(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Ir=(()=>{class e extends br{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return b(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){T(1===e.filter.length,"Popup operations only handle one event");const t=On();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,wr.get())};e()}}return e.currentPopupAction=null,e})();const Cr=new Map;class Ar extends br{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Cr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Cr.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Dr(t),r="true"===(yield Nr(e)._get(n));return yield Nr(e)._remove(n),r})).apply(this,arguments)}function xr(e,t){return Or.apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(e,t){return Nr(e)._set(Dr(t),"true")})).apply(this,arguments)}function Nr(e){return S(e._redirectPersistence)}function Dr(e){return fe("pendingRedirect",e.config.apiKey,e.name)}function Rr(){return(Rr=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,lt);const i=pr(r,n);return yield xr(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);yield xr(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);yield xt(!1,r,t.providerId),yield xr(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Fr(){return(Fr=(0,r.Z)(function*(e,t){return yield Ae(e)._initializationPromise,Zr(e,t,!1)})).apply(this,arguments)}function Zr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t,n=!1){const r=Ae(e),i=pr(r,t),s=yield new Ar(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}function Ur(e){return qr.apply(this,arguments)}function qr(){return(qr=(0,r.Z)(function*(e){const t=On(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class Vr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Br(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Br(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jr(e))}saveEventToCache(e){this.cachedEventUids.add(jr(e)),this.lastProcessedEventTime=Date.now()}}function jr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Br({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function $r(e){return zr.apply(this,arguments)}function zr(){return(zr=(0,r.Z)(function*(e,t={}){return P(e,"GET","/v1/projects",t)})).apply(this,arguments)}const Hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Kr(){return(Kr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield $r(e);for(const r of t)try{if(Wr(r))return}catch(n){}g(e,"unauthorized-domain")})).apply(this,arguments)}function Wr(e){const t=I(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gr.test(n))return!1;if(Hr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Qr=new k(3e4,6e4);function Yr(){const e=Dn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Jr=null;function Xr(e){return Jr=Jr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Yr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yr(),n(m(e,"network-request-failed"))},timeout:Qr.get()})}if(null===(i=null===(r=Dn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dn().gapi)||void 0===s?void 0:s.load)){const t=Wn("iframefcb");return Dn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Kn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Jr=null,e})}(e),Jr}const ei=new k(5e3,15e3),ti={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ri(e){const t=e.config;b(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ni.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ii(){return(ii=(0,r.Z)(function*(e){const t=yield Xr(e),n=Dn().gapi;return b(n,e,"internal-error"),t.open({where:document.body,url:ri(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ti,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=Dn().setTimeout(()=>{r(i)},ei.get());function o(){Dn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ai(e,t,n,r,i,a){b(e.config.authDomain,e,"auth-domain-config-required"),b(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof lt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof ht){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const ui="webStorageSupport";class ci extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ci(e)}_finalizeEnroll(e,t,n){return function(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:finalize",R(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:finalize",R(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let li=(()=>{class e{constructor(){}static assertion(e){return ci._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var hi,di="@firebase/auth";class fi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pi(){return window}function gi(){return(gi=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=pi();T(t.sessionId,"AuthEvent did not contain a session ID");const s=yield vi(t.sessionId),o={};return Ee()?o.ibi=i.packageName:be()?o.apn=i.packageName:g(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ai(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function mi(){return(mi=(0,r.Z)(function*(e){const{BuildInfo:t}=pi(),n={};Ee()?n.iosBundleId=t.packageName:be()?n.androidPackageName=t.packageName:g(e,"operation-not-supported-in-this-environment"),yield $r(e,n)})).apply(this,arguments)}function yi(){return(yi=(0,r.Z)(function*(e,t,n){const{cordova:r}=pi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null==document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),be()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function vi(e){return _i.apply(this,arguments)}function _i(){return(_i=(0,r.Z)(function*(e){const t=bi(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bi(e){if(T(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}hi="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{b(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),b(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:hi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ie(hi)},s=new Ce(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(S);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{const t=Ae(e.getProvider("auth").getImmediate());return new fi(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)(di,"0.18.3",void 0),(0,o.registerVersion)(di,"0.18.3","esm2017");class wi extends Vr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function Ti(e){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,r.Z)(function*(e){const t=yield Ii()._get(Ci(e));return t&&(yield Ii()._remove(Ci(e))),t})).apply(this,arguments)}function Si(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ii(){return S(An)}function Ci(e){return fe("authEvent",e.config.apiKey,e.name)}function Ai(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function ki(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function xi(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Oi(e=(0,s.z$)()){return!("file:"!==xi()&&"ionic:"!==xi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ni(){try{const e=self.localStorage,t=On();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null==document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(hi){return Di()&&(0,s.hl)()}return!1}function Di(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return("http:"===xi()||"https:"===xi()||(0,s.ru)()||Oi())&&!((0,s.b$)()||(0,s.UG)())&&Ni()&&!Di()}function Pi(){return Oi()&&"undefined"!=typeof document}function Li(){return(Li=(0,r.Z)(function*(){return!!Pi()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},Zi=b,Mi="persistence";function Ui(e){return qi.apply(this,arguments)}function qi(){return(qi=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Vi(),n=fe(Mi,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Vi(){return"undefined"!=typeof window?window:null}const ji=b;class Bi{constructor(){this.browserResolver=S(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Zr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;T(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ai(e,t,n,I(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},si),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=ve(l)?"_blank":n),me(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Ee(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new oi(null);const d=window.open(t||"",u,h);b(d,e,"popup-blocked");try{d.focus()}catch(f){}return new oi(d)}(e,a,On())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s._originValidation(e),r=ai(e,t,n,I(),i),Dn().location.href=r,new Promise(()=>{});var r})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ii.apply(this,arguments)}(e),r=new Vr(e);return n.register("authEvent",t=>(b(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ui,{type:ui},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[ui];void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Kr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Se()||ye()||Ee()}}),this.cordovaResolver=S(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new wi(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){g(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,u,c,l;const h=pi();b("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),b(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),b("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),b("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),b("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Cr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Si(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ii()._set(Ci(e),t)}(e,a);const u=yield function(e,t,n){return gi.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=pi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(e,t,n){return yi.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return mi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=pi(),o=setTimeout((0,r.Z)(function*(){yield Ti(e),t.onEvent(ki())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield Ti(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Ai(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ai(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ai(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const s=Ai(i),o=s.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(s.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=a?m(a):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||ki())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;pi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Zr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Pi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ji(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Li.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function $i(e){return e.unwrap()}function zi(e){return Hi(e)}function Hi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return fr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=pt;break;case"facebook.com":r=ft;break;case"github.com":r=gt;break;case"twitter.com":r=yt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?mt._create(n,o):et._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new dt(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Gi(e,t){return t.catch(t=>{throw t instanceof s.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Qi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return b(t.operationType,r,"argument-error"),b(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),wn._fromError(r,i)}(e,t));else if(r){const e=Hi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:zi(e),additionalUserInfo:_n(e),user:Yi.getOrCreate(t)}})}function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Gi(e,n.confirm(t))}})).apply(this,arguments)}class Qi{constructor(e,t){this.resolver=t,this.auth=function(e){return e.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gi($i(this.auth),this.resolver.resolveSignIn(e))}}class Yi{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return Sn.has(t)||Sn.set(t,En._fromUser(t)),Sn.get(t)}(e)}static getOrCreate(e){return Yi.USER_MAP.has(e)||Yi.USER_MAP.set(e,new Yi(e)),Yi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Zt(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Ki(n.auth,function(e,t,n){return ur.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,function(e,t,n){return Sr.apply(this,arguments)}(t._delegate,e,Bi))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Ui(Ae(t.auth)),function(e,t,n){return function(e,t,n){return Lr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Bi)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Ut(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Ki(this.auth,function(e,t,n){return cr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gi(this.auth,function(e,t,n){return Er.apply(this,arguments)}(this._delegate,e,Bi))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Ui(Ae(t.auth)),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Bi)})()}sendEmailVerification(e){return function(e,t){return on.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Ct.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return hn((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hn((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return dr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return an.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yi.USER_MAP=new WeakMap;const Ji=b;let Xi=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ji(n,"invalid-api-key",{appName:e.name});let r=[de];if("undefined"!=typeof window){r=function(e,t){const n=Vi();if(!(null==n?void 0:n.sessionStorage))return[];const r=fe(Mi,e,t);switch(n.sessionStorage.getItem(r)){case Fi.NONE:return[de];case Fi.LOCAL:return[zn,kn];case Fi.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[zn,An,kn])r.includes(e)||r.push(e)}Ji(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?Bi:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ae(e);b(r._canInitEmulator,r,"emulator-config-failed"),b(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=xe(t),{host:o,port:a}=function(e){const t=xe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Oe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Oe(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Qt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Kt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Gi(n._delegate,function(e,t,n){return Xt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ut.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Ji(Ri(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Fr.apply(this,arguments)}(e._delegate,Bi);return t?Gi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ae(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=es(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Zi(Object.values(Fi).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Zi(t!==Fi.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Zi(t===Fi.NONE,e,"unsupported-persistence-type"):Di()?Zi(t===Fi.NONE||t===Fi.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Zi(t===Fi.NONE||Ni(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Fi.SESSION:n=kn;break;case Fi.LOCAL:n=(yield S(zn)._isAvailable())?zn:An;break;case Fi.NONE:n=de;break;default:return g("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gi(this._delegate,function(e){return Tt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Gi(this._delegate,Lt(this._delegate,e))}signInWithCustomToken(e){return Gi(this._delegate,function(e,t){return Bt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gi(this._delegate,function(e,t,n){return Lt((0,s.m9)(e),ct.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Gi(this._delegate,function(e,t,n){return tn.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ki(this._delegate,function(e,t,n){return ar.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Ji(Ri(),t._delegate,"operation-not-supported-in-this-environment"),Gi(t._delegate,function(e,t,n){return Tr.apply(this,arguments)}(t._delegate,e,Bi))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Ji(Ri(),t._delegate,"operation-not-supported-in-this-environment"),yield Ui(t._delegate),function(e,t,n){return function(e,t,n){return Rr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Bi)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Jt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Fi,e})();function es(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Yi.getOrCreate(e)),error:t,complete:n}}class ts{constructor(){this.providerId="phone",this._delegate=new fr($i(i.Z.auth()))}static credential(e,t){return fr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ts.PHONE_SIGN_IN_METHOD=fr.PHONE_SIGN_IN_METHOD,ts.PROVIDER_ID=fr.PROVIDER_ID;const ns=b;class rs{constructor(e,t,n=i.Z.app()){var r;ns(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xi(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ct,FacebookAuthProvider:ft,GithubAuthProvider:gt,GoogleAuthProvider:pt,OAuthProvider:dt,PhoneAuthProvider:ts,PhoneMultiFactorGenerator:li,RecaptchaVerifier:rs,TwitterAuthProvider:yt,Auth:Xi,AuthCredential:Ne,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.6")}(i.Z)},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,s=new Promise(function(s,o){n(i=e[t].apply(e,r)).then(s,o)});return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function s(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}s(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new f(s.result,e.oldVersion,s.transaction))}),i.then(function(e){return new p(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487);var u=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:function(e){return 0===e.length?a.y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}(e)(this)}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return c},xQ:function(){return l}});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){super(),this._parentSubscriber=e;let o,a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(d){e=e||[],d instanceof o?e=e.concat(c(d.errors)):e.push(d)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var u;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return u}});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return u}});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return s}});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return u}});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function u(e,t=0){return function(n){return n.lift(new c(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}class l extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(e,t=0,n=h){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(!(0,d.k)(r=t)&&r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),(!n||"function"!=typeof n.schedule)&&(this.scheduler=h)}static create(e,t=0,n=h){return new f(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function p(e,t=0){return function(n){return n.lift(new g(e,t))}}class g{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new f(t,this.delay,this.scheduler).subscribe(e)}}},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return(e=>t=>{const n=e[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t))(e);if(e&&"function"==typeof e[s.hZ])return(e=>t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=`You provided ${(0,c.K)(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},4763:function(e,t,n){"use strict";var r=n(3018);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new _((0,r.LFG)(a),t&&t.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return f(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=f(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=p(E(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,E(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=f,e.stripTrailingSlash=p,e.\u0275prov=(0,r.Yz7)({factory:T,token:e,providedIn:"root"}),e})();function T(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function E(e){return e.replace(/\/index.html$/,"")}const S={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var I=(()=>((I=I||{})[I.Decimal=0]="Decimal",I[I.Percent=1]="Percent",I[I.Currency=2]="Currency",I[I.Scientific=3]="Scientific",I))(),C=(()=>((C=C||{})[C.Zero=0]="Zero",C[C.One=1]="One",C[C.Two=2]="Two",C[C.Few=3]="Few",C[C.Many=4]="Many",C[C.Other=5]="Other",C))(),A=(()=>((A=A||{})[A.Decimal=0]="Decimal",A[A.Group=1]="Group",A[A.List=2]="List",A[A.PercentSign=3]="PercentSign",A[A.PlusSign=4]="PlusSign",A[A.MinusSign=5]="MinusSign",A[A.Exponential=6]="Exponential",A[A.SuperscriptingExponent=7]="SuperscriptingExponent",A[A.PerMille=8]="PerMille",A[A.Infinity=9]="Infinity",A[A.NaN=10]="NaN",A[A.TimeSeparator=11]="TimeSeparator",A[A.CurrencyDecimal=12]="CurrencyDecimal",A[A.CurrencyGroup=13]="CurrencyGroup",A))();function k(e,t){const n=(0,r.cg1)(e),i=n[r.wAp.NumberSymbols][t];if(void 0===i){if(t===A.CurrencyDecimal)return n[r.wAp.NumberSymbols][A.Decimal];if(t===A.CurrencyGroup)return n[r.wAp.NumberSymbols][A.Group]}return i}const x=r.kL8;const O=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function N(e,t,n,i,s){const o=function(e,t="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],s=r[1],o=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=o[0],u=o[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const e=u.charAt(l);"0"===e?n.minFrac=n.maxFrac=l+1:"#"===e?n.maxFrac=l+1:n.posSuf+=e}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const e=i.length-n.posPre.length-n.posSuf.length,t=s.indexOf("#");n.negPre=s.substr(0,t).replace(/'/g,""),n.negSuf=s.substr(t+e).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return(0,r.cg1)(e)[r.wAp.NumberFormats][t]}(t,I.Currency),k(t,A.MinusSign));return o.minFrac=function(e){let t;const n=S[e];return n&&(t=n[2]),"number"==typeof t?t:2}(i),o.maxFrac=o.minFrac,function(e,t,n,r,i,s,o=!1){let a="",u=!1;if(isFinite(e)){let c=function(e){let t,n,r,i,s,o=Math.abs(e)+"",a=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(r=o.search(/e/i))>0?(n<0&&(n=r),n+=+o.slice(r+1),o=o.substring(0,r)):n<0&&(n=o.length),r=0;"0"===o.charAt(r);r++);if(r===(s=o.length))t=[0],n=1;else{for(s--;"0"===o.charAt(s);)s--;for(n-=r,t=[],i=0;r<=s;r++,i++)t[i]=Number(o.charAt(r))}return n>22&&(t=t.splice(0,21),a=n-1,n=1),{digits:t,exponent:a,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;const t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));let l=t.minInt,h=t.minFrac,d=t.maxFrac;if(s){const e=s.match(O);if(null===e)throw new Error(`${s} is not a valid digit info`);const t=e[1],n=e[3],r=e[5];null!=t&&(l=D(t)),null!=n&&(h=D(n)),null!=r?d=D(r):null!=n&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,i=r.length-e.integerLen;const s=Math.min(Math.max(t,i),n);let o=s+e.integerLen,a=r[o];if(o>0){r.splice(Math.max(e.integerLen,o));for(let e=o;e<r.length;e++)r[e]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let e=1;e<o;e++)r[e]=0}if(a>=5)if(o-1<0){for(let t=0;t>o;t--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=0!==s;const c=t+e.integerLen,l=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),t>=10?1:0},0);l&&(r.unshift(l),e.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(e=>!e);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=t.lgSize&&y.unshift(f.splice(-t.lgSize,f.length).join(""));f.length>t.gSize;)y.unshift(f.splice(-t.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(k(n,r)),m.length&&(a+=k(n,i)+m.join("")),g&&(a+=k(n,A.Exponential)+"+"+g)}else a=k(n,A.Infinity);return a=e<0&&!u?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(e,o,t,A.CurrencyGroup,A.CurrencyDecimal,s).replace("\xa4",n).replace("\xa4","").trim()}function D(e){const t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}class R{}let P=(()=>{class e extends R{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(x(t||this.locale)(e)){case C.Zero:return"zero";case C.One:return"one";case C.Two:return"two";case C.Few:return"few";case C.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class L{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let F=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(e){return e.name||typeof e}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new L(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Z(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Z(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class Z{constructor(e,t){this.record=e,this.view=t}}let M=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new U,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){q("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){q("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class U{constructor(){this.$implicit=null,this.ngIf=null}}function q(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}function V(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}class j{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class B{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const $=new B,z=new j;let H=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return $;if((0,r.F4k)(t))return z;throw V(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),G=(()=>{class e{constructor(e,t="USD"){this._locale=e,this._defaultCurrencyCode=t}transform(t,n=this._defaultCurrencyCode,i="symbol",s,o){if(!function(e){return!(null==e||""===e||e!=e)}(t))return null;o=o||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(e,t,n="en"){const i=function(e){return(0,r.cg1)(e)[r.wAp.Currencies]}(n)[e]||S[e]||[],s=i[1];return"narrow"===t&&"string"==typeof s?s:i[0]||e}(a,"symbol"===i?"wide":"narrow",o):i);try{return N(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),o,a,n,s)}catch(u){throw V(e,u.message)}}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.soG,16),r.Y36(r.EJc,16))},e.\u0275pipe=r.Yjl({name:"currency",type:e,pure:!0}),e})();let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:R,useClass:P}]}),e})();function W(e){return"server"===e}let Q=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new Y((0,r.LFG)(o),window)}),e})();class Y{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=J(this.window.history)||J(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function J(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class X extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new X,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(te=te||document.querySelector("base"),te?te.getAttribute("href"):null);return null==t?null:function(e){ee=ee||document.createElement("a"),ee.setAttribute("href",e);const t=ee.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){te=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let ee,te=null;const ne=new r.OlP("TRANSITION_ID"),re=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let e=0;e<r.length;e++)n.remove(r[e])})}},deps:[ne,o,r.zs3],multi:!0}];class ie{static init(){(0,r.VLi)(new ie)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let se=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const oe=new r.OlP("EventManagerPlugins");let ae=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(oe),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ue{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let ce=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),le=(()=>{class e extends ce{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(he),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(he))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function he(e){s().remove(e)}const de={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fe=/%COMP%/g;function pe(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?pe(e,i,n):(i=i.replace(fe,e),n.push(i))}return n}function ge(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let me=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ye(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ve(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new _e(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=pe(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ae),r.LFG(le),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ye{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(de[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=de[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=de[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ge(n)):this.eventManager.addEventListener(e,t,ge(n))}}class ve extends ye{constructor(e,t,n,r){super(e),this.component=n;const i=pe(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(fe,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(fe,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class _e extends ye{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=pe(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let be=(()=>{class e extends ue{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const we=["alt","control","meta","shift"],Te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ee={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Se={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ie=(()=>{class e extends ue{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(we.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ee.hasOwnProperty(t)&&(t=Ee[t]))}return Te[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),we.forEach(r=>{r!=n&&Se[r](e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(Ae)},token:e,providedIn:"root"}),e})(),Ae=(()=>{class e extends Ce{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case r.q3G.NONE:return t;case r.q3G.HTML:return(0,r.qzn)(t,"HTML")?(0,r.z3N)(t):(0,r.EiD)(this._doc,String(t)).toString();case r.q3G.STYLE:return(0,r.qzn)(t,"Style")?(0,r.z3N)(t):t;case r.q3G.SCRIPT:if((0,r.qzn)(t,"Script"))return(0,r.z3N)(t);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(t),(0,r.qzn)(t,"URL")?(0,r.z3N)(t):(0,r.mCW)(String(t));case r.q3G.RESOURCE_URL:if((0,r.qzn)(t,"ResourceURL"))return(0,r.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,r.JVY)(e)}bypassSecurityTrustStyle(e){return(0,r.L6k)(e)}bypassSecurityTrustScript(e){return(0,r.eBb)(e)}bypassSecurityTrustUrl(e){return(0,r.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,r.pB0)(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:function(){return function(e){return new Ae(e.get(o))}((0,r.LFG)(r.gxx))},token:e,providedIn:"root"}),e})();const ke=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){X.makeCurrent(),ie.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),xe=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:oe,useClass:be,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:oe,useClass:Ie,multi:!0,deps:[o]},[],{provide:me,useClass:me,deps:[ae,le,r.AFp]},{provide:r.FYo,useExisting:me},{provide:ce,useExisting:le},{provide:le,useClass:le,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:ae,useClass:ae,deps:[oe,r.R0b]},{provide:class{},useClass:se,deps:[]},[]];let Oe=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:ne,useExisting:r.AFp},re]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:xe,imports:[K,r.hGG]}),e})();"undefined"!=typeof window&&window;var Ne=n(4402),De=n(7574),Re=n(9796),Pe=n(8002),Le=n(1555);function Fe(e,t){return new De.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,Ne.D)(e[a]);let c=!1;n.add(u.subscribe({next:e=>{c||(c=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,(s===r||!c)&&(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let Ze=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),Me=(()=>{class e extends Ze{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const Ue=new r.OlP("NgValueAccessor"),qe={provide:Ue,useExisting:(0,r.Gpc)(()=>Ve),multi:!0};let Ve=(()=>{class e extends Me{writeValue(e){this.setProperty("checked",e)}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.checked)})("blur",function(){return t.onTouched()})},features:[r._Bn([qe]),r.qOj]}),e})();const je={provide:Ue,useExisting:(0,r.Gpc)(()=>$e),multi:!0},Be=new r.OlP("CompositionEventMode");let $e=(()=>{class e extends Ze{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Be,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([je]),r.qOj]}),e})();function ze(e){return null==e||0===e.length}function He(e){return null!=e&&"number"==typeof e.length}const Ge=new r.OlP("NgValidators"),Ke=new r.OlP("NgAsyncValidators"),We=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qe{static min(e){return function(e){return t=>{if(ze(t.value)||ze(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(ze(t.value)||ze(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return function(e){return ze(e.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return ze(e.value)||We.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>ze(t.value)||!He(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>He(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return Ye;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(ze(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return rt(e)}static composeAsync(e){return st(e)}}function Ye(e){return null}function Je(e){return null!=e}function Xe(e){const t=(0,r.QGY)(e)?(0,Ne.D)(e):e;return(0,r.CqO)(t),t}function et(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function tt(e,t){return t.map(t=>t(e))}function nt(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function rt(e){if(!e)return null;const t=e.filter(Je);return 0==t.length?null:function(e){return et(tt(e,t))}}function it(e){return null!=e?rt(nt(e)):null}function st(e){if(!e)return null;const t=e.filter(Je);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,Re.k)(t))return Fe(t,null);if((0,Le.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Fe(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Fe(e=1===e.length&&(0,Re.k)(e[0])?e[0]:e,null).pipe((0,Pe.U)(e=>t(...e)))}return Fe(e,null)}(tt(e,t).map(Xe)).pipe((0,Pe.U)(et))}}function ot(e){return null!=e?st(nt(e)):null}function at(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function ut(e){return e._rawValidators}function ct(e){return e._rawAsyncValidators}function lt(e){return e?Array.isArray(e)?e:[e]:[]}function ht(e,t){return Array.isArray(e)?e.includes(t):e===t}function dt(e,t){const n=lt(t);return lt(e).forEach(e=>{ht(n,e)||n.push(e)}),n}function ft(e,t){return lt(t).filter(t=>!ht(e,t))}let pt=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=it(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),gt=(()=>{class e extends pt{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class mt extends pt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yt{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let vt=(()=>{class e extends yt{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(mt,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),_t=(()=>{class e extends yt{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(gt,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function bt(e,t){Et(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&It(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&It(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function wt(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),St(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Tt(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Et(e,t){const n=ut(e);null!==t.validator?e.setValidators(at(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=ct(e);null!==t.asyncValidator?e.setAsyncValidators(at(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();Tt(t._rawValidators,i),Tt(t._rawAsyncValidators,i)}function St(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=ut(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.validator);i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const r=ct(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.asyncValidator);i.length!==r.length&&(n=!0,e.setAsyncValidators(i))}}}const r=()=>{};return Tt(t._rawValidators,r),Tt(t._rawAsyncValidators,r),n}function It(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Ct(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const At="VALID",kt="INVALID",xt="PENDING",Ot="DISABLED";function Nt(e){return(Lt(e)?e.validators:e)||null}function Dt(e){return Array.isArray(e)?it(e):e||null}function Rt(e,t){return(Lt(t)?t.asyncValidators:e)||null}function Pt(e){return Array.isArray(e)?ot(e):e||null}function Lt(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Ft{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Dt(this._rawValidators),this._composedAsyncValidatorFn=Pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===At}get invalid(){return this.status===kt}get pending(){return this.status==xt}get disabled(){return this.status===Ot}get enabled(){return this.status!==Ot}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Dt(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Pt(e)}addValidators(e){this.setValidators(dt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ft(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ft(e,this._rawAsyncValidators))}hasValidator(e){return ht(this._rawValidators,e)}hasAsyncValidator(e){return ht(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ot,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=At,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===At||this.status===xt)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ot:At}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xt,this._hasOwnPendingAsyncValidator=!0;const t=Xe(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=e;return t.forEach(e=>{r=r instanceof Mt?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Ut&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?Ot:this.errors?kt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xt)?xt:this._anyControlsHaveStatus(kt)?kt:At}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lt(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Zt extends Ft{constructor(e=null,t,n){super(Nt(t),Rt(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ct(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ct(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Mt extends Ft{constructor(e,t,n){super(Nt(t),Rt(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Zt?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ut extends Ft{constructor(e,t,n){super(Nt(t),Rt(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Zt?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let qt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Vt={provide:Ue,useExisting:(0,r.Gpc)(()=>jt),multi:!0};let jt=(()=>{class e extends Me{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},features:[r._Bn([Vt]),r.qOj]}),e})(),Bt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const $t=new r.OlP("NgModelWithFormControlWarning"),zt={provide:gt,useExisting:(0,r.Gpc)(()=>Ht)};let Ht=(()=>{class e extends gt{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(St(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return bt(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){wt(e.control||null,e,!1),Ct(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,function(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(wt(t||null,e),n instanceof Zt&&(bt(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);(function(e,t){Et(e,t)})(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return St(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Et(this.form,this),this._oldForm&&St(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Ge,10),r.Y36(Ke,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([zt]),r.qOj,r.TTD]}),e})();const Gt={provide:mt,useExisting:(0,r.Gpc)(()=>Kt)};let Kt=(()=>{class e extends mt{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===$e?n=e:function(e){return Object.getPrototypeOf(e.constructor)===Me}(e)?r=e:i=e}),i||r||n||null}(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(e,t){return[...t.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(gt,13),r.Y36(Ge,10),r.Y36(Ke,10),r.Y36(Ue,10),r.Y36($t,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Gt]),r.qOj,r.TTD]}),e._ngModelWarningSentOnce=!1,e})();const Wt={provide:Ue,useExisting:(0,r.Gpc)(()=>Yt),multi:!0};function Qt(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Yt=(()=>{class e extends Me{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);const n=Qt(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Wt]),r.qOj]}),e})(),Jt=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Qt(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Yt,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Xt={provide:Ue,useExisting:(0,r.Gpc)(()=>tn),multi:!0};function en(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let tn=(()=>{class e extends Me{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Xt]),r.qOj]}),e})(),nn=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(en(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(en(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(tn,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),rn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[Bt]]}),e})(),sn=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:$t,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[rn]}),e})(),on=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new Mt(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new Zt(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new Ut(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Zt||e instanceof Mt||e instanceof Ut?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return new e},token:e,providedIn:sn}),e})();var an=n(9765),un=n(5917),cn=n(6682),ln=n(309),hn=n(5345);function dn(e,t){return"function"==typeof t?n=>n.pipe(dn((n,r)=>(0,Ne.D)(e(n,r)).pipe((0,Pe.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new fn(e))}class fn{constructor(e){this.project=e}call(e,t){return t.subscribe(new pn(e,this.project))}}class pn extends hn.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new hn.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,hn.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var gn=n(7771),mn=n(5319),yn=n(7971),vn=n(8858);class _n extends an.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new bn(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new yn.N;if(this.isStopped||this.hasError?s=mn.w.EMPTY:(this.observers.push(e),s=new vn.W(this,e)),r&&e.add(e=new ln.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||gn.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class bn{constructor(e,t){this.time=e,this.value=t}}function wn(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new _n(e,t,r),l=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}const Tn=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var En=n(7393);function Sn(e,t){return function(n){return n.lift(new In(e,t))}}class In{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Cn(e,this.predicate,this.thisArg))}}class Cn extends En.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const An=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();var kn=n(9193);function xn(e){return t=>0===e?(0,kn.c)():t.lift(new On(e))}class On{constructor(e){if(this.total=e,this.total<0)throw new An}call(e,t){return t.subscribe(new Nn(e,this.total))}}class Nn extends En.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Dn(e=null){return t=>t.lift(new Rn(e))}class Rn{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Pn(e,this.defaultValue))}}class Pn extends En.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ln(e=Mn){return t=>t.lift(new Fn(e))}class Fn{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Zn(e,this.errorFactory))}}class Zn extends En.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Mn(){return new Tn}var Un=n(4487);function qn(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Sn((t,n)=>e(t,n,r)):Un.y,xn(1),n?Dn(t):Ln(()=>new Tn))}function Vn(e,t){return t?dn(()=>e,t):dn(()=>e)}var jn=n(3101),Bn=n(6643),$n=n(8939);n(2329);var zn=n(8239),Hn=n(5452),Gn=n(6034),Kn=n(3854),Wn=n(5601);const Qn=new Map,Yn={activated:!1,tokenObservers:[]},Jn={initialized:!1,enabled:!1};function Xn(e){return Qn.get(e)||Yn}function er(e,t){Qn.set(e,t)}function tr(){return Jn}class nr{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,zn.Z)(function*(){t.stop();try{t.pending=new Kn.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new Kn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const rr=new Kn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function ir(e){if(!Xn(e).activated)throw rr.create("use-before-activation",{appName:e.name})}function sr(e,t){return or.apply(this,arguments)}function or(){return(or=(0,zn.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw rr.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw rr.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw rr.create("fetch-parse-error",{originalErrorMessage:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw rr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.attestationToken,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function ar(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const ur="firebase-app-check-store";let cr=null;function lr(){return cr||(cr=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(rr.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(ur,{keyPath:"compositeKey"})}}}catch(n){t(rr.create("storage-open",{originalErrorMessage:n.message}))}}),cr)}function hr(){return(hr=(0,zn.Z)(function*(e,t){const n=(yield lr()).transaction(ur,"readwrite"),r=n.objectStore(ur).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(rr.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const dr=new Wn.Yd("@firebase/app-check");function fr(e,t){return(0,Kn.hl)()?function(e,t){return function(e,t){return hr.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{dr.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function pr(){return tr().enabled}function gr(){return mr.apply(this,arguments)}function mr(){return(mr=(0,zn.Z)(function*(){const e=tr();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yr={error:"UNKNOWN_ERROR"};function vr(e){return Kn.US.encodeString(JSON.stringify(e),!1)}function _r(e){return br.apply(this,arguments)}function br(){return(br=(0,zn.Z)(function*(e,t=!1){const n=e.app;ir(n);const r=Xn(n);let i,s,o=r.token;if(!o){const e=yield r.cachedTokenPromise;e&&Er(e)&&(o=e,er(n,Object.assign(Object.assign({},r),{token:o})),Tr(n,{token:o.token}))}if(!t&&o&&Er(o))return{token:o.token};if(pr()){const t=yield sr(ar(n,yield gr()),e.platformLoggerProvider);return yield fr(n,t),er(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{o=yield r.provider.getToken()}catch(a){dr.error(a),i=a}return o?(s={token:o.token},er(n,Object.assign(Object.assign({},r),{token:o})),yield fr(n,o)):s=Sr(i),Tr(n,s),s})).apply(this,arguments)}function wr(e,t){const n=Xn(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),er(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function Tr(e,t){const n=Xn(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function Er(e){return e.expireTimeMillis-Date.now()>0}function Sr(e){return{token:vr(yr),error:e}}class Ir{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Xn(this.app);for(const t of e)wr(this.app,t.next);return Promise.resolve()}}const Cr="app-check-internal";(0,Hn._registerComponent)(new Gn.wA("app-check",e=>function(e,t){return new Ir(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Cr).initialize()})),(0,Hn._registerComponent)(new Gn.wA(Cr,e=>function(e){return{getToken:t=>_r(e,t),addTokenListener:t=>function(e,t,n,r){const{app:i}=e,s=Xn(i),o={next:n,error:r,type:t},a=Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]});if(!a.tokenRefresher){const t=function(e){const{app:t}=e;return new nr((0,zn.Z)(function*(){let n;if(n=Xn(t).token?yield _r(e,!0):yield _r(e),n.error)throw n.error}),()=>!0,()=>{const e=Xn(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e);a.tokenRefresher=t}if(!a.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&a.tokenRefresher.start(),s.token&&Er(s.token)){const e=s.token;Promise.resolve().then(()=>n({token:e.token})).catch(()=>{})}else null==s.token&&s.cachedTokenPromise.then(e=>{e&&Er(e)&&n({token:e.token})}).catch(()=>{});er(i,a)}(e,"INTERNAL",t),removeTokenListener:t=>wr(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hn.registerVersion)("@firebase/app-check","0.4.2");class Ar{constructor(){return(0,Bn.vb)("app-check")}}"undefined"!=typeof window&&window;var kr=n(7841);const xr=new r.OlP("angularfire2.auth.use-emulator"),Or=new r.OlP("angularfire2.auth.settings"),Nr=new r.OlP("angularfire2.auth.tenant-id"),Dr=new r.OlP("angularfire2.auth.langugage-code"),Rr=new r.OlP("angularfire2.auth.use-device-language"),Pr=new r.OlP("angularfire.auth.persistence"),Lr=(e,t,n,r,i,s,o,a)=>(0,$n.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let Fr=(()=>{class e{constructor(e,t,r,i,s,o,a,u,c,l,h,d){const f=new an.xQ,p=(0,un.of)(void 0).pipe((0,ln.QV)(s.outsideAngular),dn(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,4671)))),(0,Pe.U)(()=>(0,$n.on)(e,i,t)),(0,Pe.U)(e=>Lr(e,i,o,u,c,l,a,h)),wn({bufferSize:1,refCount:!1}));if(W(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,un.of)(null);else{p.pipe(qn()).subscribe();const e=p.pipe(dn(e=>e.getRedirectResult().then(e=>e,()=>null)),Bn.iC,wn({bufferSize:1,refCount:!1})),t=p.pipe(dn(e=>new De.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(dn(e=>new De.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(Vn(t),(0,jn.R)(s.outsideAngular),(0,ln.QV)(s.insideAngular)),this.user=e.pipe(Vn(n),(0,jn.R)(s.outsideAngular),(0,ln.QV)(s.insideAngular)),this.idToken=this.user.pipe(dn(e=>e?(0,Ne.D)(e.getIdToken()):(0,un.of)(null))),this.idTokenResult=this.user.pipe(dn(e=>e?(0,Ne.D)(e.getIdTokenResult()):(0,un.of)(null))),this.credential=(0,cn.T)(e,f,this.authState.pipe(Sn(e=>!e))).pipe((0,Pe.U)(e=>(null==e?void 0:e.user)?e:null),(0,jn.R)(s.outsideAngular),(0,ln.QV)(s.insideAngular))}return(0,$n.pX)(this,p,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>f.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG($n.Dh),r.LFG($n.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Bn.HU),r.LFG(xr,8),r.LFG(Or,8),r.LFG(Nr,8),r.LFG(Dr,8),r.LFG(Rr,8),r.LFG(Pr,8),r.LFG(Ar,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),Zr=(()=>{class e{constructor(){kr.Z.registerVersion("angularfire",Bn.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Fr]}),e})(),Mr=(()=>{class e{constructor(e){this.afa=e}signInWithEmail(e,t){return this.afa.signInWithEmailAndPassword(e,t)}saveLocalData(e,t){localStorage.setItem(e,t)}getLocalData(e){return localStorage.getItem(e)}clearLocalStorage(){localStorage.clear()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Fr))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ur=n(3637),qr=n(3282);function Vr(...e){return(0,qr.J)(1)((0,un.of)(...e))}var jr=n(4869);function Br(...e){const t=e[e.length-1];return(0,jr.K)(t)?(e.pop(),n=>Vr(e,n,t)):t=>Vr(e,t)}function $r(){return e=>e.lift(new zr)}class zr{call(e,t){return t.subscribe(new Hr(e))}}class Hr extends En.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function Gr(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Kr(e,t,n))}}class Kr{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Wr(e,this.accumulator,this.seed,this.hasSeed))}}class Wr extends En.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Qr{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Yr(e,this.compare,this.keySelector))}}class Yr extends En.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}n(4671);var Jr,Xr=n(4486),ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ti={},ni=ni||{},ri=ei||self;function ii(){}function si(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function oi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ai="closure_uid_"+(1e9*Math.random()>>>0),ui=0;function ci(e,t,n){return e.call.apply(e.bind,arguments)}function li(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hi(e,t,n){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ci:li).apply(null,arguments)}function di(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fi(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function pi(){this.s=this.s,this.o=this.o}var gi={};pi.prototype.s=!1,pi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ai)&&e[ai]||(e[ai]=++ui)}(this);delete gi[e]}},pi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},yi=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function vi(e){return Array.prototype.concat.apply([],arguments)}function _i(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function bi(e){return/^[\s\xa0]*$/.test(e)}var wi,Ti=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ei(e,t){return-1!=e.indexOf(t)}function Si(e,t){return e<t?-1:e>t?1:0}e:{var Ii=ri.navigator;if(Ii){var Ci=Ii.userAgent;if(Ci){wi=Ci;break e}}wi=""}function Ai(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ki(e){const t={};for(const n in e)t[n]=e[n];return t}var xi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oi(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<xi.length;t++)n=xi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ni(e){return Ni[" "](e),e}Ni[" "]=ii;var Di,Ri,Pi=Ei(wi,"Opera"),Li=Ei(wi,"Trident")||Ei(wi,"MSIE"),Fi=Ei(wi,"Edge"),Zi=Fi||Li,Mi=Ei(wi,"Gecko")&&!(Ei(wi.toLowerCase(),"webkit")&&!Ei(wi,"Edge"))&&!(Ei(wi,"Trident")||Ei(wi,"MSIE"))&&!Ei(wi,"Edge"),Ui=Ei(wi.toLowerCase(),"webkit")&&!Ei(wi,"Edge");function qi(){var e=ri.document;return e?e.documentMode:void 0}e:{var Vi="",ji=(Ri=wi,Mi?/rv:([^\);]+)(\)|;)/.exec(Ri):Fi?/Edge\/([\d\.]+)/.exec(Ri):Li?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ri):Ui?/WebKit\/(\S+)/.exec(Ri):Pi?/(?:Version)[ \/]?(\S+)/.exec(Ri):void 0);if(ji&&(Vi=ji?ji[1]:""),Li){var Bi=qi();if(null!=Bi&&Bi>parseFloat(Vi)){Di=String(Bi);break e}}Di=Vi}var $i={};function zi(){return e=$i,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Ti(String(Di)).split("."),n=Ti("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=Si(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Si(0==i[2].length,0==s[2].length)||Si(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}var Hi=ri.document&&Li&&(qi()||parseInt(Di,10))||void 0,Gi=function(){if(!ri.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ri.addEventListener("test",ii,t),ri.removeEventListener("test",ii,t)}catch(n){}return e}();function Ki(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Wi(e,t){if(Ki.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mi){e:{try{Ni(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Qi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Wi.Z.h.call(this)}}Ki.prototype.h=function(){this.defaultPrevented=!0},fi(Wi,Ki);var Qi={2:"touch",3:"pen",4:"mouse"};Wi.prototype.h=function(){Wi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yi="closure_listenable_"+(1e6*Math.random()|0),Ji=0;function Xi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ji,this.ca=this.fa=!1}function es(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ts(e){this.src=e,this.g={},this.h=0}function ns(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=mi(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(es(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ts.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=rs(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xi(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var is="closure_lm_"+(1e6*Math.random()|0),ss={};function os(e,t,n,r,i){if(r&&r.once)return us(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)os(e,t[s],n,r,i);return null}return n=gs(n),e&&e[Yi]?e.N(t,n,oi(r)?!!r.capture:!!r,i):as(e,t,n,!1,r,i)}function as(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=oi(i)?!!i.capture:!!i,a=fs(e);if(a||(e[is]=a=new ts(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=ds;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gi||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function us(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)us(e,t[s],n,r,i);return null}return n=gs(n),e&&e[Yi]?e.O(t,n,oi(r)?!!r.capture:!!r,i):as(e,t,n,!0,r,i)}function cs(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)cs(e,t[s],n,r,i);else r=oi(r)?!!r.capture:!!r,n=gs(n),e&&e[Yi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=rs(s=e.g[t],n,r,i))&&(es(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=fs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rs(t,n,r,i)),(n=-1<e?t[e]:null)&&ls(n))}function ls(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yi])ns(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fs(t))?(ns(n,e),0==n.h&&(n.src=null,t[is]=null)):es(e)}}}function hs(e){return e in ss?ss[e]:ss[e]="on"+e}function ds(e,t){if(e.ca)e=!0;else{t=new Wi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ls(e),e=n.call(r,t)}return e}function fs(e){return(e=e[is])instanceof ts?e:null}var ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function gs(e){return"function"==typeof e?e:(e[ps]||(e[ps]=function(t){return e.handleEvent(t)}),e[ps])}function ms(){pi.call(this),this.i=new ts(this),this.P=this,this.I=null}function ys(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Ki(t,e);else if(t instanceof Ki)t.target=t.target||e;else{var i=t;Oi(t=new Ki(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=vs(o,r,!0,t)&&i}if(i=vs(o=t.g=e,r,!0,t)&&i,i=vs(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=vs(o=t.g=n[s],r,!1,t)&&i}function vs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&ns(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}fi(ms,pi),ms.prototype[Yi]=!0,ms.prototype.removeEventListener=function(e,t,n,r){cs(this,e,t,n,r)},ms.prototype.M=function(){if(ms.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)es(n[r]);delete t.g[e],t.h--}}this.I=null},ms.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ms.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _s=ri.JSON.stringify;function bs(){var e=As;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ws,Ts=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Es,e=>e.reset());class Es{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ss(e){ri.setTimeout(()=>{throw e},0)}function Is(e,t){ws||function(){var e=ri.Promise.resolve(void 0);ws=function(){e.then(ks)}}(),Cs||(ws(),Cs=!0),As.add(e,t)}var Cs=!1,As=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ts.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ks(){for(var e;e=bs();){try{e.h.call(e.g)}catch(n){Ss(n)}var t=Ts;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cs=!1}function xs(e,t){ms.call(this),this.h=e||1,this.g=t||ri,this.j=hi(this.kb,this),this.l=Date.now()}function Os(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ns(e,t,n){if("function"==typeof e)n&&(e=hi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hi(e.handleEvent,e)}return 2147483647<Number(t)?-1:ri.setTimeout(e,t||0)}function Ds(e){e.g=Ns(()=>{e.g=null,e.i&&(e.i=!1,Ds(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}fi(xs,ms),(Jr=xs.prototype).da=!1,Jr.S=null,Jr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ys(this,"tick"),this.da&&(Os(this),this.start()))}},Jr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jr.M=function(){xs.Z.M.call(this),Os(this),delete this.g};class Rs extends pi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ds(this)}M(){super.M(),this.g&&(ri.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(e){pi.call(this),this.h=e,this.g={}}fi(Ps,pi);var Ls=[];function Fs(e,t,n,r){Array.isArray(n)||(n&&(Ls[0]=n.toString()),n=Ls);for(var i=0;i<n.length;i++){var s=os(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Zs(e){Ai(e.g,function(e,t){this.g.hasOwnProperty(t)&&ls(e)},e),e.g={}}function Ms(){this.g=!0}function Us(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return _s(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ps.prototype.M=function(){Ps.Z.M.call(this),Zs(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ms.prototype.Aa=function(){this.g=!1},Ms.prototype.info=function(){};var qs={},Vs=null;function js(){return Vs=Vs||new ms}function Bs(e){Ki.call(this,qs.Ma,e)}function $s(e){const t=js();ys(t,new Bs(t,e))}function zs(e,t){Ki.call(this,qs.STAT_EVENT,e),this.stat=t}function Hs(e){const t=js();ys(t,new zs(t,e))}function Gs(e,t){Ki.call(this,qs.Na,e),this.size=t}function Ks(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ri.setTimeout(function(){e()},t)}qs.Ma="serverreachability",fi(Bs,Ki),qs.STAT_EVENT="statevent",fi(zs,Ki),qs.Na="timingevent",fi(Gs,Ki);var Ws={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Qs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ys(){}function Js(){}Ys.prototype.h=null;var Xs,eo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function to(){Ki.call(this,"d")}function no(){Ki.call(this,"c")}function ro(){}function io(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ps(this),this.P=oo,this.W=new xs(e=Zi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new so}function so(){this.i=null,this.g="",this.h=!1}fi(to,Ki),fi(no,Ki),fi(ro,Ys),ro.prototype.g=function(){return new XMLHttpRequest},ro.prototype.i=function(){return{}},Xs=new ro;var oo=45e3,ao={},uo={};function co(e,t,n){e.K=1,e.v=Ro(Ao(t)),e.s=n,e.U=!0,lo(e,null)}function lo(e,t){e.F=Date.now(),go(e),e.A=Ao(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ho(n.h,"t",r),e.C=0,n=e.l.H,e.h=new so,e.g=Ha(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Rs(hi(e.Ia,e,e.g),e.O)),Fs(e.V,e.g,"readystatechange",e.gb),t=e.H?ki(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),$s(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function ho(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function fo(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=po(e,n),r==uo){4==t&&(e.o=4,Hs(14),i=!1),Us(e.j,e.m,null,"[Incomplete Response]");break}if(r==ao){e.o=4,Hs(15),Us(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Us(e.j,e.m,r,null),bo(e,r)}ho(e)&&r!=uo&&r!=ao&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ma(t),t.L=!0,Hs(11))):(Us(e.j,e.m,n,"[Invalid Chunked Response]"),_o(e),vo(e))}function po(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uo:(n=Number(t.substring(n,r)),isNaN(n)?ao:(r+=1)+n>t.length?uo:(t=t.substr(r,n),e.C=r+n,t))}function go(e){e.Y=Date.now()+e.P,mo(e,e.P)}function mo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ks(hi(e.eb,e),t)}function yo(e){e.B&&(ri.clearTimeout(e.B),e.B=null)}function vo(e){0==e.l.G||e.I||Va(e.l,e)}function _o(e){yo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Os(e.W),Zs(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function bo(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Jo(n.i,e)))if(n.I=e.N,!e.J&&Jo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ks(hi(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;qa(n),xa(n)}Za(n),Hs(18)}if(1>=Yo(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Ba(n,11)}else if((e.J||n.g==e)&&qa(n),!bi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const t=c[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(Ei(e,"spdy")||Ei(e,"quic")||Ei(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Xo(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,Do(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=za(r,r.H?r.la:null,r.W),o.J){ea(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(yo(a),go(a)),r.g=o}else Fa(r);0<n.l.length&&Da(n)}else"stop"!=c[0]&&"close"!=c[0]||Ba(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ba(n,7):ka(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}$s(4)}catch(c){}}function wo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(si(e)||"string"==typeof e)yi(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(si(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(si(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function To(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof To)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Eo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];So(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)So(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function So(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Jr=io.prototype).setTimeout=function(e){this.P=e},Jr.gb=function(e){e=e.target;const t=this.L;t&&3==Ea(e)?t.l():this.Ia(e)},Jr.Ia=function(e){try{if(e==this.g)e:{const l=Ea(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Zi||this.g&&(this.h.h||this.g.ga()||Sa(this.g)))){this.I||4!=l||7==t||$s(8==t||0>=h?3:2),yo(this);var n=this.g.ba();this.N=n;t:if(ho(this)){var r=Sa(this.g);e="";var i=r.length,s=4==Ea(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_o(this),vo(this);var o="";break t}this.h.i=new ri.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bi(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Hs(12),_o(this),vo(this);break e}Us(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bo(this,n)}this.U?(fo(this,l,o),Zi&&this.i&&3==l&&(Fs(this.V,this.W,"tick",this.fb),this.W.start())):(Us(this.j,this.m,o,null),bo(this,o)),4==l&&_o(this),this.i&&!this.I&&(4==l?Va(this.l,this):(this.i=!1,go(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Hs(12)):(this.o=0,Hs(13)),_o(this),vo(this)}}}catch(l){}},Jr.fb=function(){if(this.g){var e=Ea(this.g),t=this.g.ga();this.C<t.length&&(yo(this),fo(this,e,t),this.i&&4!=e&&go(this))}},Jr.cancel=function(){this.I=!0,_o(this)},Jr.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&($s(3),Hs(17)),_o(this),this.o=2,vo(this)):mo(this,this.Y-e)},(Jr=To.prototype).R=function(){Eo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Jr.T=function(){return Eo(this),this.g.concat()},Jr.get=function(e,t){return So(this.h,e)?this.h[e]:t},Jr.set=function(e,t){So(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Jr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Io=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Co(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Co){this.g=void 0!==t?t:e.g,ko(this,e.j),this.s=e.s,xo(this,e.i),Oo(this,e.m),this.l=e.l,t=e.h;var n=new jo;n.i=t.i,t.g&&(n.g=new To(t.g),n.h=t.h),No(this,n),this.o=e.o}else e&&(n=String(e).match(Io))?(this.g=!!t,ko(this,n[1]||"",!0),this.s=Po(n[2]||""),xo(this,n[3]||"",!0),Oo(this,n[4]),this.l=Po(n[5]||"",!0),No(this,n[6]||"",!0),this.o=Po(n[7]||"")):(this.g=!!t,this.h=new jo(null,this.g))}function Ao(e){return new Co(e)}function ko(e,t,n){e.j=n?Po(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xo(e,t,n){e.i=n?Po(t,!0):t}function Oo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function No(e,t,n){t instanceof jo?(e.h=t,function(e,t){t&&!e.j&&(Bo(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&($o(this,t),Ho(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Lo(t,qo)),e.h=new jo(t,e.g))}function Do(e,t,n){e.h.set(t,n)}function Ro(e){return Do(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Po(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lo(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Fo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Co.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lo(t,Zo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lo(t,Zo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lo(n,"/"==n.charAt(0)?Uo:Mo,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lo(n,Vo)),e.join("")};var Zo=/[#\/\?@]/g,Mo=/[#\?:]/g,Uo=/[#\?]/g,qo=/[#\?@]/g,Vo=/#/g;function jo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bo(e){e.g||(e.g=new To,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function $o(e,t){Bo(e),t=Go(e,t),So(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,So((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Eo(e)))}function zo(e,t){return Bo(e),t=Go(e,t),So(e.g.h,t)}function Ho(e,t,n){$o(e,t),0<n.length&&(e.i=null,e.g.set(Go(e,t),_i(n)),e.h+=n.length)}function Go(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ko(e){this.l=e||Wo,e=ri.PerformanceNavigationTiming?0<(e=ri.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ri.g&&ri.g.Ea&&ri.g.Ea()&&ri.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Jr=jo.prototype).add=function(e,t){Bo(this),this.i=null,e=Go(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Jr.forEach=function(e,t){Bo(this),this.g.forEach(function(n,r){yi(n,function(n){e.call(t,n,r,this)},this)},this)},Jr.T=function(){Bo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},Jr.R=function(e){Bo(this);var t=[];if("string"==typeof e)zo(this,e)&&(t=vi(t,this.g.get(Go(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=vi(t,e[n])}return t},Jr.set=function(e,t){return Bo(this),this.i=null,zo(this,e=Go(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Jr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Jr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Wo=10;function Qo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yo(e){return e.h?1:e.g?e.g.size:0}function Jo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xo(e,t){e.g?e.g.add(t):e.h=t}function ea(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ta(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return _i(e.i)}function na(){}function ra(){this.g=new na}function ia(e,t,n){const r=n||"";try{wo(e,function(e,n){let i=e;oi(e)&&(i=_s(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function oa(e){this.l=e.$b||null,this.j=e.ib||!1}function aa(e,t){ms.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ua,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ko.prototype.cancel=function(){if(this.i=ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},na.prototype.stringify=function(e){return ri.JSON.stringify(e,void 0)},na.prototype.parse=function(e){return ri.JSON.parse(e,void 0)},fi(oa,Ys),oa.prototype.g=function(){return new aa(this.l,this.j)},oa.prototype.i=function(e){return function(){return e}}({}),fi(aa,ms);var ua=0;function ca(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function la(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ha(e)}function ha(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Jr=aa.prototype).open=function(e,t){if(this.readyState!=ua)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ha(this)},Jr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ri).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Jr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,la(this)),this.readyState=ua},Jr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ri.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ca(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Jr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?la(this):ha(this),3==this.readyState&&ca(this)}},Jr.Ua=function(e){this.g&&(this.response=this.responseText=e,la(this))},Jr.Ta=function(e){this.g&&(this.response=e,la(this))},Jr.ha=function(){this.g&&la(this)},Jr.setRequestHeader=function(e,t){this.v.append(e,t)},Jr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Jr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var da=ri.JSON.parse;function fa(e){ms.call(this),this.headers=new To,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pa,this.K=this.L=!1}fi(fa,ms);var pa="",ga=/^https?$/i,ma=["POST","PUT"];function ya(e){return"content-type"==e.toLowerCase()}function va(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_a(e),wa(e)}function _a(e){e.D||(e.D=!0,ys(e,"complete"),ys(e,"error"))}function ba(e){if(e.h&&void 0!==ni&&(!e.C[1]||4!=Ea(e)||2!=e.ba()))if(e.v&&4==Ea(e))Ns(e.Fa,0,e);else if(ys(e,"readystatechange"),4==Ea(e)){e.h=!1;try{const u=e.ba();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===u){var i=String(e.H).match(Io)[1]||null;if(!i&&ri.self&&ri.self.location){var s=ri.self.location.protocol;i=s.substr(0,s.length-1)}r=!ga.test(i?i.toLowerCase():"")}n=r}if(n)ys(e,"complete"),ys(e,"success");else{e.m=6;try{var o=2<Ea(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",_a(e)}}finally{wa(e)}}}function wa(e,t){if(e.g){Ta(e);const r=e.g,i=e.C[0]?ii:null;e.g=null,e.C=null,t||ys(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ta(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ri.clearTimeout(e.A),e.A=null)}function Ea(e){return e.g?e.g.readyState:0}function Sa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case pa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ia(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return Ai(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Do(e,t,n))}function Ca(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Aa(e){this.za=0,this.l=[],this.h=new Ms,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ca("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ca("baseRetryDelayMs",5e3,e),this.$a=Ca("retryDelaySeedMs",1e4,e),this.Ya=Ca("forwardChannelMaxRetries",2,e),this.ra=Ca("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ko(e&&e.concurrentRequestLimit),this.Ca=new ra,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ka(e){if(Oa(e),3==e.G){var t=e.V++,n=Ao(e.F);Do(n,"SID",e.J),Do(n,"RID",t),Do(n,"TYPE","terminate"),Pa(e,n),(t=new io(e,e.h,t,void 0)).K=2,t.v=Ro(Ao(n)),n=!1,ri.navigator&&ri.navigator.sendBeacon&&(n=ri.navigator.sendBeacon(t.v.toString(),"")),!n&&ri.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ha(t.l,null),t.g.ea(t.v)),t.F=Date.now(),go(t)}$a(e)}function xa(e){e.g&&(Ma(e),e.g.cancel(),e.g=null)}function Oa(e){xa(e),e.u&&(ri.clearTimeout(e.u),e.u=null),qa(e),e.i.cancel(),e.m&&("number"==typeof e.m&&ri.clearTimeout(e.m),e.m=null)}function Na(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Da(e)}function Da(e){Qo(e.i)||e.m||(e.m=!0,Is(e.Ha,e),e.C=0)}function Ra(e,t){var n;n=t?t.m:e.V++;const r=Ao(e.F);Do(r,"SID",e.J),Do(r,"RID",n),Do(r,"AID",e.U),Pa(e,r),e.o&&e.s&&Ia(r,e.o,e.s),n=new io(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=La(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xo(e.i,n),co(n,r,t)}function Pa(e,t){e.j&&wo({},function(e,n){Do(t,n,e)})}function La(e,t,n){n=Math.min(e.l.length,n);var r=e.j?hi(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].h;const u=i[a].g;if(n-=t,0>n)t=Math.max(0,i[a].h-100),o=!1;else try{ia(u,e,"req"+n+"_")}catch(s){r&&r(u)}}if(o){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Fa(e){e.g||e.u||(e.Y=1,Is(e.Ga,e),e.A=0)}function Za(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Ks(hi(e.Ga,e),ja(e,e.A)),e.A++,0))}function Ma(e){null!=e.B&&(ri.clearTimeout(e.B),e.B=null)}function Ua(e){e.g=new io(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ao(e.oa);Do(t,"RID","rpc"),Do(t,"SID",e.J),Do(t,"CI",e.N?"0":"1"),Do(t,"AID",e.U),Pa(e,t),Do(t,"TYPE","xmlhttp"),e.o&&e.s&&Ia(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ro(Ao(t)),n.s=null,n.U=!0,lo(n,e)}function qa(e){null!=e.v&&(ri.clearTimeout(e.v),e.v=null)}function Va(e,t){var n=null;if(e.g==t){qa(e),Ma(e),e.g=null;var r=2}else{if(!Jo(e.i,t))return;n=t.D,ea(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ys(r=js(),new Gs(r,n,t,i)),Da(e)}else Fa(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Yo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Ks(hi(e.Ha,e,t),ja(e,e.C)),e.C++,0)))}(e,t)||2==r&&Za(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ba(e,5);break;case 4:Ba(e,10);break;case 3:Ba(e,6);break;default:Ba(e,2)}}function ja(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ba(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=hi(e.jb,e);n||(n=new Co("//www.google.com/images/cleardot.gif"),ri.location&&"http"==ri.location.protocol||ko(n,"https"),Ro(n)),function(e,t){const n=new Ms;if(ri.Image){const r=new Image;r.onload=di(sa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=di(sa,n,r,"TestLoadImage: error",!1,t),r.onabort=di(sa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=di(sa,n,r,"TestLoadImage: timeout",!1,t),ri.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hs(2);e.G=0,e.j&&e.j.va(t),$a(e),Oa(e)}function $a(e){e.G=0,e.I=-1,e.j&&((0!=ta(e.i).length||0!=e.l.length)&&(e.i.i.length=0,_i(e.l),e.l.length=0),e.j.ua())}function za(e,t,n){let r=function(e){return e instanceof Co?Ao(e):new Co(e,void 0)}(n);if(""!=r.i)t&&xo(r,t+"."+r.i),Oo(r,r.m);else{const e=ri.location;r=function(e,t,n,r){var i=new Co(null,void 0);return e&&ko(i,e),t&&xo(i,t),n&&Oo(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&Ai(e.aa,function(e,t){Do(r,t,e)}),n=e.sa,(t=e.D)&&n&&Do(r,t,n),Do(r,"VER",e.ma),Pa(e,r),r}function Ha(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new fa(n&&e.Ba&&!e.qa?new oa({ib:!0}):e.qa)).L=e.H,t}function Ga(){}function Ka(){if(Li&&!(10<=Number(Hi)))throw Error("Environmental error: no available transport.")}function Wa(e,t){ms.call(this),this.g=new Aa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!bi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Ja(this)}function Qa(e){to.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ya(){no.call(this),this.status=1}function Ja(e){this.g=e}(Jr=fa.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xs.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Xs),this.g.onreadystatechange=hi(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void va(this,s)}e=n||"";const i=new To(this.headers);r&&wo(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=ya;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=ri.FormData&&e instanceof ri.FormData,!(0<=mi(ma,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ta(this),0<this.B&&((this.K=function(e){return Li&&zi()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.pa,this)):this.A=Ns(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){va(this,s)}},Jr.pa=function(){void 0!==ni&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ys(this,"timeout"),this.abort(8))},Jr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ys(this,"complete"),ys(this,"abort"),wa(this))},Jr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wa(this,!0)),fa.Z.M.call(this)},Jr.Fa=function(){this.s||(this.F||this.v||this.l?ba(this):this.cb())},Jr.cb=function(){ba(this)},Jr.ba=function(){try{return 2<Ea(this)?this.g.status:-1}catch(Ri){return-1}},Jr.ga=function(){try{return this.g?this.g.responseText:""}catch(Ri){return""}},Jr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),da(t)}},Jr.Da=function(){return this.m},Jr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Jr=Aa.prototype).ma=8,Jr.G=1,Jr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Jr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new io(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=ki(s),Oi(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=La(this,i,t),Do(n=Ao(this.F),"RID",e),Do(n,"CVER",22),this.D&&Do(n,"X-HTTP-Session-Id",this.D),Pa(this,n),this.o&&s&&Ia(n,this.o,s),Xo(this.i,i),this.Ra&&Do(n,"TYPE","init"),this.ja?(Do(n,"$req",t),Do(n,"SID","null"),i.$=!0,co(i,n,null)):co(i,n,t),this.G=2}}else 3==this.G&&(e?Ra(this,e):0==this.l.length||Qo(this.i)||Ra(this))},Jr.Ga=function(){if(this.u=null,Ua(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ks(hi(this.bb,this),e)}},Jr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hs(10),xa(this),Ua(this))},Jr.ab=function(){null!=this.v&&(this.v=null,xa(this),Za(this),Hs(19))},Jr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hs(2)):(this.h.info("Failed to ping google.com"),Hs(1))},(Jr=Ga.prototype).xa=function(){},Jr.wa=function(){},Jr.va=function(){},Jr.ua=function(){},Jr.Oa=function(){},Ka.prototype.g=function(e,t){return new Wa(e,t)},fi(Wa,ms),Wa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Is(hi(e.hb,e,t))),Hs(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=za(e,null,e.W),Da(e)},Wa.prototype.close=function(){ka(this.g)},Wa.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Na(this.g,t)}else this.v?((t={}).__data__=_s(e),Na(this.g,t)):Na(this.g,e)},Wa.prototype.M=function(){this.g.j=null,delete this.j,ka(this.g),delete this.g,Wa.Z.M.call(this)},fi(Qa,to),fi(Ya,no),fi(Ja,Ga),Ja.prototype.xa=function(){ys(this.g,"a")},Ja.prototype.wa=function(e){ys(this.g,new Qa(e))},Ja.prototype.va=function(e){ys(this.g,new Ya(e))},Ja.prototype.ua=function(){ys(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Wa.prototype.send=Wa.prototype.u,Wa.prototype.open=Wa.prototype.m,Wa.prototype.close=Wa.prototype.close,Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Qs.COMPLETE="complete",Js.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",ms.prototype.listen=ms.prototype.N,fa.prototype.listenOnce=fa.prototype.O,fa.prototype.getLastError=fa.prototype.La,fa.prototype.getLastErrorCode=fa.prototype.Da,fa.prototype.getStatus=fa.prototype.ba,fa.prototype.getResponseJson=fa.prototype.Qa,fa.prototype.getResponseText=fa.prototype.ga,fa.prototype.send=fa.prototype.ea;var Xa=ti.createWebChannelTransport=function(){return new Ka},eu=ti.getStatEventTarget=function(){return js()},tu=ti.ErrorCode=Ws,nu=ti.EventType=Qs,ru=ti.Event=qs,iu=ti.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},su=ti.FetchXmlHttpFactory=oa,ou=ti.WebChannel=Js,au=ti.XhrIo=fa;const uu="@firebase/firestore";class cu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cu.UNAUTHENTICATED=new cu(null),cu.GOOGLE_CREDENTIALS=new cu("google-credentials-uid"),cu.FIRST_PARTY=new cu("first-party-uid"),cu.MOCK_USER=new cu("mock-user");let lu="9.1.3";const hu=new Wn.Yd("@firebase/firestore");function du(){return hu.logLevel}function fu(e,...t){if(hu.logLevel<=Wn.in.DEBUG){const n=t.map(mu);hu.debug(`Firestore (${lu}): ${e}`,...n)}}function pu(e,...t){if(hu.logLevel<=Wn.in.ERROR){const n=t.map(mu);hu.error(`Firestore (${lu}): ${e}`,...n)}}function gu(e,...t){if(hu.logLevel<=Wn.in.WARN){const n=t.map(mu);hu.warn(`Firestore (${lu}): ${e}`,...n)}}function mu(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function yu(e="Unexpected state"){const t=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: `+e;throw pu(t),new Error(t)}function vu(e,t){e||yu()}function _u(e,t){return e}const bu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wu extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Eu{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Su{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cu.UNAUTHENTICATED))}shutdown(){}}class Iu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Cu{constructor(e){this.t=e,this.currentUser=cu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Tu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,zn.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{fu("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(fu("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(fu("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vu("string"==typeof t.accessToken),new Eu(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vu(null===e||"string"==typeof e),new cu(e)}}class Au{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=cu.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class ku{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Au(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(cu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Ou(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}xu.T=-1;class Nu{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Ou(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Du(e,t){return e<t?-1:e>t?1:0}function Ru(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Pu(e){return e+"\0"}class Lu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wu(bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wu(bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new wu(bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wu(bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lu.fromMillis(Date.now())}static fromDate(e){return Lu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Lu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Du(this.nanoseconds,e.nanoseconds):Du(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fu(e)}static min(){return new Fu(new Lu(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class qu{constructor(e,t,n){void 0===t?t=0:t>e.length&&yu(),void 0===n?n=e.length-t:n>e.length-t&&yu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===qu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vu extends qu{construct(e,t,n){return new Vu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new wu(bu.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Vu(t)}static emptyPath(){return new Vu([])}}const ju=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bu extends qu{construct(e,t,n){return new Bu(e,t,n)}static isValidIdentifier(e){return ju.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new wu(bu.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new wu(bu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new wu(bu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new wu(bu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bu(t)}static emptyPath(){return new Bu([])}}class $u{constructor(e){this.fields=e,e.sort(Bu.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class zu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new zu(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Du(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zu.EMPTY_BYTE_STRING=new zu("");const Hu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(e){if(vu(!!e),"string"==typeof e){let t=0;const n=Hu.exec(e);if(vu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ku(e.seconds),nanos:Ku(e.nanos)}}function Ku(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wu(e){return"string"==typeof e?zu.fromBase64String(e):zu.fromUint8Array(e)}function Qu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yu(e){const t=e.mapValue.fields.__previous_value__;return Qu(t)?Yu(t):t}function Ju(e){const t=Gu(e.mapValue.fields.__local_write_time__.timestampValue);return new Lu(t.seconds,t.nanos)}function Xu(e){return null==e}function ec(e){return 0===e&&1/e==-1/0}function tc(e){return"number"==typeof e&&Number.isInteger(e)&&!ec(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class nc{constructor(e){this.path=e}static fromPath(e){return new nc(Vu.fromString(e))}static fromName(e){return new nc(Vu.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Vu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nc(new Vu(e.slice()))}}function rc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qu(e)?4:10:yu()}function ic(e,t){const n=rc(e);if(n!==rc(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ju(e).isEqual(Ju(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Gu(e.timestampValue),r=Gu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Wu(e.bytesValue).isEqual(Wu(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ku(e.geoPointValue.latitude)===Ku(t.geoPointValue.latitude)&&Ku(e.geoPointValue.longitude)===Ku(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ku(e.integerValue)===Ku(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ku(e.doubleValue),r=Ku(t.doubleValue);return n===r?ec(n)===ec(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ru(e.arrayValue.values||[],t.arrayValue.values||[],ic);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zu(n)!==Zu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ic(n[i],r[i])))return!1;return!0}(e,t);default:return yu()}var r}function sc(e,t){return void 0!==(e.values||[]).find(e=>ic(e,t))}function oc(e,t){const n=rc(e),r=rc(t);if(n!==r)return Du(n,r);switch(n){case 0:return 0;case 1:return Du(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ku(e.integerValue||e.doubleValue),r=Ku(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ac(e.timestampValue,t.timestampValue);case 4:return ac(Ju(e),Ju(t));case 5:return Du(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Wu(e),r=Wu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Du(n[i],r[i]);if(0!==e)return e}return Du(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Du(Ku(e.latitude),Ku(t.latitude));return 0!==n?n:Du(Ku(e.longitude),Ku(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=oc(n[i],r[i]);if(e)return e}return Du(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Du(r[o],s[o]);if(0!==e)return e;const t=oc(n[r[o]],i[s[o]]);if(0!==t)return t}return Du(r.length,s.length)}(e.mapValue,t.mapValue);default:throw yu()}}function ac(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Du(e,t);const n=Gu(e),r=Gu(t),i=Du(n.seconds,r.seconds);return 0!==i?i:Du(n.nanos,r.nanos)}function uc(e){return cc(e)}function cc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Gu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wu(e.bytesValue).toBase64():"referenceValue"in e?nc.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=cc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${cc(e.fields[i])}`;return n+"}"}(e.mapValue):yu();var t}function lc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function hc(e){return!!e&&"integerValue"in e}function dc(e){return!!e&&"arrayValue"in e}function fc(e){return!!e&&"nullValue"in e}function pc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gc(e){return!!e&&"mapValue"in e}function mc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Mu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=mc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mc(e.arrayValue.values[n]);return t}return Object.assign({},e)}class yc{constructor(e){this.value=e}static empty(){return new yc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=Bu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=mc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Mu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new yc(mc(this.value))}}function vc(e){const t=[];return Mu(e.fields,(e,n)=>{const r=new Bu([e]);if(gc(n)){const e=vc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new $u(t)}class _c{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new _c(e,0,Fu.min(),yc.empty(),0)}static newFoundDocument(e,t,n){return new _c(e,1,t,n,0)}static newNoDocument(e,t){return new _c(e,2,t,yc.empty(),0)}static newUnknownDocument(e,t){return new _c(e,3,t,yc.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _c&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new _c(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bc{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function wc(e,t=null,n=[],r=[],i=null,s=null,o=null){return new bc(e,t,n,r,i,s,o)}function Tc(e){const t=_u(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+uc(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Xu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Lc(t.startAt)),t.endAt&&(e+="|ub:",e+=Lc(t.endAt)),t.A=e}return t.A}function Ec(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Zc(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!ic(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uc(e.startAt,t.startAt)&&Uc(e.endAt,t.endAt)}function Sc(e){return nc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ic extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Cc(e,t,n):"array-contains"===t?new Oc(e,n):"in"===t?new Nc(e,n):"not-in"===t?new Dc(e,n):"array-contains-any"===t?new Rc(e,n):new Ic(e,t,n)}static R(e,t,n){return"in"===t?new Ac(e,n):new kc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(oc(t,this.value)):null!==t&&rc(this.value)===rc(t)&&this.P(oc(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yu()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Cc extends Ic{constructor(e,t,n){super(e,t,n),this.key=nc.fromName(n.referenceValue)}matches(e){const t=nc.comparator(e.key,this.key);return this.P(t)}}class Ac extends Ic{constructor(e,t){super(e,"in",t),this.keys=xc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kc extends Ic{constructor(e,t){super(e,"not-in",t),this.keys=xc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>nc.fromName(e.referenceValue))}class Oc extends Ic{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dc(t)&&sc(t.arrayValue,this.value)}}class Nc extends Ic{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sc(this.value.arrayValue,t)}}class Dc extends Ic{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sc(this.value.arrayValue,t)}}class Rc extends Ic{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>sc(this.value.arrayValue,e))}}class Pc{constructor(e,t){this.position=e,this.before=t}}function Lc(e){return`${e.before?"b":"a"}:${e.position.map(e=>uc(e)).join(",")}`}class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Mc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?nc.comparator(nc.fromName(o.referenceValue),n.key):oc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Uc(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ic(e.position[n],t.position[n]))return!1;return!0}class qc{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function Vc(e,t,n,r,i,s,o,a){return new qc(e,t,n,r,i,s,o,a)}function jc(e){return new qc(e)}function Bc(e){return!Xu(e.limit)&&"F"===e.limitType}function $c(e){return!Xu(e.limit)&&"L"===e.limitType}function zc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hc(e){for(const t of e.filters)if(t.v())return t.field;return null}function Gc(e){return null!==e.collectionGroup}function Kc(e){const t=_u(e);if(null===t.V){t.V=[];const e=Hc(t),n=zc(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Fc(e)),t.V.push(new Fc(Bu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Fc(Bu.keyField(),e))}}}return t.V}function Wc(e){const t=_u(e);if(!t.S)if("F"===t.limitType)t.S=wc(t.path,t.collectionGroup,Kc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Kc(t))e.push(new Fc(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Pc(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Pc(t.startAt.position,!t.startAt.before):null;t.S=wc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function Qc(e,t,n){return new qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yc(e,t){return Ec(Wc(e),Wc(t))&&e.limitType===t.limitType}function Jc(e){return`${Tc(Wc(e))}|lt:${e.limitType}`}function Xc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${uc(t.value)}`;var t}).join(", ")}]`),Xu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: "+Lc(e.startAt)),e.endAt&&(t+=", endAt: "+Lc(e.endAt)),`Target(${t})`}(Wc(e))}; limitType=${e.limitType})`}function el(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):nc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!Mc(n.startAt,Kc(n),r)||n.endAt&&Mc(n.endAt,Kc(n),r)));var n,r}function tl(e){return(t,n)=>{let r=!1;for(const i of Kc(e)){const e=nl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function nl(e,t,n){const r=e.field.isKeyField()?nc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?oc(r,i):yu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yu()}}function rl(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(t)?"-0":t}}function il(e){return{integerValue:""+e}}function sl(e,t){return tc(t)?il(t):rl(e,t)}class ol{constructor(){this._=void 0}}function al(e,t,n){return e instanceof ll?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof hl?dl(e,t):e instanceof fl?pl(e,t):function(e,t){const n=cl(e,t),r=ml(n)+ml(e.C);return hc(n)&&hc(e.C)?il(r):rl(e.N,r)}(e,t)}function ul(e,t,n){return e instanceof hl?dl(e,t):e instanceof fl?pl(e,t):n}function cl(e,t){return e instanceof gl?hc(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}class ll extends ol{}class hl extends ol{constructor(e){super(),this.elements=e}}function dl(e,t){const n=yl(t);for(const r of e.elements)n.some(e=>ic(e,r))||n.push(r);return{arrayValue:{values:n}}}class fl extends ol{constructor(e){super(),this.elements=e}}function pl(e,t){let n=yl(t);for(const r of e.elements)n=n.filter(e=>!ic(e,r));return{arrayValue:{values:n}}}class gl extends ol{constructor(e,t){super(),this.N=e,this.C=t}}function ml(e){return Ku(e.integerValue||e.doubleValue)}function yl(e){return dc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vl{constructor(e,t){this.field=e,this.transform=t}}class _l{constructor(e,t){this.version=e,this.transformResults=t}}class bl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bl}static exists(e){return new bl(void 0,e)}static updateTime(e){return new bl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tl{}function El(e,t,n){e instanceof kl?function(e,t,n){const r=e.value.clone(),i=Nl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xl?function(e,t,n){if(!wl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Nl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ol(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function Sl(e,t,n){var r;e instanceof kl?function(e,t,n){if(!wl(e.precondition,t))return;const r=e.value.clone(),i=Dl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Al(t),r).setHasLocalMutations()}(e,t,n):e instanceof xl?function(e,t,n){if(!wl(e.precondition,t))return;const r=Dl(e.fieldTransforms,n,t),i=t.data;i.setAll(Ol(e)),i.setAll(r),t.convertToFoundDocument(Al(t),i).setHasLocalMutations()}(e,t,n):wl(e.precondition,r=t)&&r.convertToNoDocument(Fu.min())}function Il(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=cl(r.transform,e||null);null!=i&&(null==n&&(n=yc.empty()),n.set(r.field,i))}return n||null}function Cl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Ru(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof hl&&r instanceof hl||n instanceof fl&&r instanceof fl?Ru(n.elements,r.elements,ic):n instanceof gl&&r instanceof gl?ic(n.C,r.C):n instanceof ll&&r instanceof ll);var n,r}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function Al(e){return e.isFoundDocument()?e.version:Fu.min()}class kl extends Tl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class xl extends Tl{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Ol(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Nl(e,t,n){const r=new Map;vu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ul(o,a,n[i]))}return r}function Dl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,al(e,s,t))}return r}class Rl extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Pl extends Tl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ll{constructor(e){this.count=e}}var Fl,Zl;function Ml(e){switch(e){default:return yu();case bu.CANCELLED:case bu.UNKNOWN:case bu.DEADLINE_EXCEEDED:case bu.RESOURCE_EXHAUSTED:case bu.INTERNAL:case bu.UNAVAILABLE:case bu.UNAUTHENTICATED:return!1;case bu.INVALID_ARGUMENT:case bu.NOT_FOUND:case bu.ALREADY_EXISTS:case bu.PERMISSION_DENIED:case bu.FAILED_PRECONDITION:case bu.ABORTED:case bu.OUT_OF_RANGE:case bu.UNIMPLEMENTED:case bu.DATA_LOSS:return!0}}function Ul(e){if(void 0===e)return pu("GRPC error has no .code"),bu.UNKNOWN;switch(e){case Fl.OK:return bu.OK;case Fl.CANCELLED:return bu.CANCELLED;case Fl.UNKNOWN:return bu.UNKNOWN;case Fl.DEADLINE_EXCEEDED:return bu.DEADLINE_EXCEEDED;case Fl.RESOURCE_EXHAUSTED:return bu.RESOURCE_EXHAUSTED;case Fl.INTERNAL:return bu.INTERNAL;case Fl.UNAVAILABLE:return bu.UNAVAILABLE;case Fl.UNAUTHENTICATED:return bu.UNAUTHENTICATED;case Fl.INVALID_ARGUMENT:return bu.INVALID_ARGUMENT;case Fl.NOT_FOUND:return bu.NOT_FOUND;case Fl.ALREADY_EXISTS:return bu.ALREADY_EXISTS;case Fl.PERMISSION_DENIED:return bu.PERMISSION_DENIED;case Fl.FAILED_PRECONDITION:return bu.FAILED_PRECONDITION;case Fl.ABORTED:return bu.ABORTED;case Fl.OUT_OF_RANGE:return bu.OUT_OF_RANGE;case Fl.UNIMPLEMENTED:return bu.UNIMPLEMENTED;case Fl.DATA_LOSS:return bu.DATA_LOSS;default:return yu()}}(Zl=Fl||(Fl={}))[Zl.OK=0]="OK",Zl[Zl.CANCELLED=1]="CANCELLED",Zl[Zl.UNKNOWN=2]="UNKNOWN",Zl[Zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zl[Zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zl[Zl.NOT_FOUND=5]="NOT_FOUND",Zl[Zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zl[Zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zl[Zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zl[Zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zl[Zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zl[Zl.ABORTED=10]="ABORTED",Zl[Zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zl[Zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zl[Zl.INTERNAL=13]="INTERNAL",Zl[Zl.UNAVAILABLE=14]="UNAVAILABLE",Zl[Zl.DATA_LOSS=15]="DATA_LOSS";class ql{constructor(e,t){this.comparator=e,this.root=t||jl.EMPTY}insert(e,t){return new ql(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jl.BLACK,null,null))}remove(e){return new ql(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jl.RED,this.left=null!=r?r:jl.EMPTY,this.right=null!=i?i:jl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new jl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yu();const e=this.left.check();if(e!==this.right.check())throw yu();return e+(this.isRed()?0:1)}}jl.EMPTY=null,jl.RED=!0,jl.BLACK=!1,jl.EMPTY=new class{constructor(){this.size=0}get key(){throw yu()}get value(){throw yu()}get color(){throw yu()}get left(){throw yu()}get right(){throw yu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new jl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bl{constructor(e){this.comparator=e,this.data=new ql(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $l(this.data.getIterator())}getIteratorFrom(e){return new $l(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bl(this.comparator);return t.data=e,t}}class $l{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const zl=new ql(nc.comparator);function Hl(){return zl}const Gl=new ql(nc.comparator);function Kl(){return Gl}const Wl=new ql(nc.comparator);function Ql(){return Wl}const Yl=new Bl(nc.comparator);function Jl(...e){let t=Yl;for(const n of e)t=t.add(n);return t}const Xl=new Bl(Du);function eh(){return Xl}class th{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,t)),new th(Fu.min(),n,eh(),Hl(),Jl())}}class nh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new nh(zu.EMPTY_BYTE_STRING,t,Jl(),Jl(),Jl())}}class rh{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class ih{constructor(e,t){this.targetId=e,this.O=t}}class sh{constructor(e,t,n=zu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class oh{constructor(){this.F=0,this.M=ch(),this.L=zu.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Jl(),t=Jl(),n=Jl();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yu()}}),new nh(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=ch()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class ah{constructor(e){this.tt=e,this.et=new Map,this.nt=Hl(),this.st=uh(),this.it=new Bl(Du)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:yu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Sc(e))if(0===n){const n=new nc(e.path);this.at(t,n,_c.newNoDocument(n,Fu.min()))}else vu(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Sc(i.target)){const t=new nc(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,_c.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=Jl();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new th(e,t,this.it,this.nt,n);return this.nt=Hl(),this.st=uh(),this.it=new Bl(Du),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new oh,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Bl(Du),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||fu("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new oh),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function uh(){return new ql(nc.comparator)}function ch(){return new ql(nc.comparator)}const lh={asc:"ASCENDING",desc:"DESCENDING"},hh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dh{constructor(e,t){this.databaseId=e,this.D=t}}function fh(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ph(e,t){return e.D?t.toBase64():t.toUint8Array()}function gh(e,t){return fh(e,t.toTimestamp())}function mh(e){return vu(!!e),Fu.fromTimestamp(function(e){const t=Gu(e);return new Lu(t.seconds,t.nanos)}(e))}function yh(e,t){return(n=e,new Vu(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function vh(e){const t=Vu.fromString(e);return vu(jh(t)),t}function _h(e,t){return yh(e.databaseId,t.path)}function bh(e,t){const n=vh(t);if(n.get(1)!==e.databaseId.projectId)throw new wu(bu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wu(bu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nc(Sh(n))}function wh(e,t){return yh(e.databaseId,t)}function Th(e){const t=vh(e);return 4===t.length?Vu.emptyPath():Sh(t)}function Eh(e){return new Vu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sh(e){return vu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ih(e,t,n){return{name:_h(e,t),fields:n.value.mapValue.fields}}function Ch(e,t,n){const r=bh(e,t.name),i=mh(t.updateTime),s=new yc({mapValue:{fields:t.fields}}),o=_c.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ah(e,t){let n;if(t instanceof kl)n={update:Ih(e,t.key,t.value)};else if(t instanceof Rl)n={delete:_h(e,t.key)};else if(t instanceof xl)n={update:Ih(e,t.key,t.data),updateMask:Vh(t.fieldMask)};else{if(!(t instanceof Pl))return yu();n={verify:_h(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ll)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof hl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),increment:n.C};throw yu()}(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:gh(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:yu()),n;var r}function kh(e,t){const n=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?bl.updateTime(mh(i.updateTime)):void 0!==i.exists?bl.exists(i.exists):bl.none():bl.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(vu("REQUEST_TIME"===t.setToServerValue),n=new ll):"appendMissingElements"in t?n=new hl(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new fl(t.removeAllFromArray.values||[]):"increment"in t?n=new gl(e,t.increment):yu();const r=Bu.fromServerFormat(t.fieldPath);return new vl(r,n)}(e,t)):[];var i;if(t.update){const i=bh(e,t.update.name),s=new yc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=new $u((t.updateMask.fieldPaths||[]).map(e=>Bu.fromServerFormat(e)));return new xl(i,s,e,n,r)}return new kl(i,s,n,r)}if(t.delete){const r=bh(e,t.delete);return new Rl(r,n)}if(t.verify){const r=bh(e,t.verify);return new Pl(r,n)}return yu()}function xh(e,t){return{documents:[wh(e,t.path)]}}function Oh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=wh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=wh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(pc(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NAN"}};if(fc(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pc(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NAN"}};if(fc(e.value))return{unaryFilter:{field:Zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(e.field),op:Fh(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>{return{field:Zh((t=e).field),direction:Lh(t.dir)};var t})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(a=t.limit,e.D||Xu(a)?a:{value:a});var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Rh(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Rh(t.endAt)),n}function Nh(e){let t=Th(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){vu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Dh(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new Fc(Mh((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Xu(t)?null:t}(n.limit));let u=null;n.startAt&&(u=Ph(n.startAt));let c=null;return n.endAt&&(c=Ph(n.endAt)),Vc(t,i,o,s,a,"F",u,c)}function Dh(e){return e?void 0!==e.unaryFilter?[qh(e)]:void 0!==e.fieldFilter?[Uh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Dh(e)).reduce((e,t)=>e.concat(t)):yu():[]}function Rh(e){return{before:e.before,values:e.position}}function Ph(e){return new Pc(e.values||[],!!e.before)}function Lh(e){return lh[e]}function Fh(e){return hh[e]}function Zh(e){return{fieldPath:e.canonicalString()}}function Mh(e){return Bu.fromServerFormat(e.fieldPath)}function Uh(e){return Ic.create(Mh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yu()}}(e.fieldFilter.op),e.fieldFilter.value)}function qh(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Mh(e.unaryFilter.field);return Ic.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Mh(e.unaryFilter.field);return Ic.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mh(e.unaryFilter.field);return Ic.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Mh(e.unaryFilter.field);return Ic.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yu()}}function Vh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function jh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Bh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=zh(t)),t=$h(e.get(n),t);return zh(t)}function $h(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function zh(e){return e+"\x01\x01"}function Hh(e){const t=e.length;if(vu(t>=2),2===t)return vu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Vu.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&yu(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:yu()}s=t+2}return new Vu(r)}class Gh{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Kh{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Kh.store="owner",Kh.key="owner";class Wh{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Wh.store="mutationQueues",Wh.keyPath="userId";class Qh{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}Qh.store="mutations",Qh.keyPath="batchId",Qh.userMutationsIndex="userMutationsIndex",Qh.userMutationsKeyPath=["userId","batchId"];class Yh{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Bh(t)]}static key(e,t,n){return[e,Bh(t),n]}}Yh.store="documentMutations",Yh.PLACEHOLDER=new Yh;class Jh{constructor(e,t){this.path=e,this.readTime=t}}class Xh{constructor(e,t){this.path=e,this.version=t}}class ed{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}ed.store="remoteDocuments",ed.readTimeIndex="readTimeIndex",ed.readTimeIndexPath="readTime",ed.collectionReadTimeIndex="collectionReadTimeIndex",ed.collectionReadTimeIndexPath=["parentPath","readTime"];class td{constructor(e){this.byteSize=e}}td.store="remoteDocumentGlobal",td.key="remoteDocumentGlobalKey";class nd{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}nd.store="targets",nd.keyPath="targetId",nd.queryTargetsIndexName="queryTargetsIndex",nd.queryTargetsKeyPath=["canonicalId","targetId"];class rd{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}rd.store="targetDocuments",rd.keyPath=["targetId","path"],rd.documentTargetsIndex="documentTargetsIndex",rd.documentTargetsKeyPath=["path","targetId"];class id{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}id.key="targetGlobalKey",id.store="targetGlobal";class sd{constructor(e,t){this.collectionId=e,this.parent=t}}sd.store="collectionParents",sd.keyPath=["collectionId","parent"];class od{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}od.store="clientMetadata",od.keyPath="clientId";class ad{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}ad.store="bundles",ad.keyPath="bundleId";class ud{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}ud.store="namedQueries",ud.keyPath="name";const cd=[Wh.store,Qh.store,Yh.store,ed.store,nd.store,Kh.store,id.store,rd.store,od.store,td.store,sd.store,ad.store,ud.store],ld="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class dd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dd((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof dd?t:dd.resolve(t)}catch(t){return dd.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dd.reject(t)}static resolve(e){return new dd((t,n)=>{t(e)})}static reject(e){return new dd((t,n)=>{n(e)})}static waitFor(e){return new dd((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=dd.resolve(!1);for(const n of e)t=t.next(e=>e?dd.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class fd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Tu,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new md(e,t.error)):this.Et.resolve()},this.transaction.onerror=t=>{const n=wd(t.target.error);this.Et.reject(new md(e,n))}}static open(e,t,n,r){try{return new fd(t,e.transaction(r,n))}catch(i){throw new md(t,i)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(fu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new vd(t)}}class pd{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===pd.Rt((0,Kn.z$)())&&pu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return fu("SimpleDb","Removing database:",e),_d(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Kn.hl)())return!1;if(pd.Pt())return!0;const e=(0,Kn.z$)(),t=pd.Rt(e),n=0<t&&t<10,r=pd.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,zn.Z)(function*(){return t.db||(fu("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new md(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new wu(bu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new wu(bu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new md(e,n))},i.onupgradeneeded=e=>{fu("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{fu("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,zn.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=fd.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),dd.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(a){const e="FirebaseError"!==a.name&&o<3;if(fu("SimpleDb","Transaction failed with error:",a.message,"Retrying:",e),i.close(),!e)return Promise.reject(a)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gd{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return _d(this.kt.delete())}}class md extends wu{constructor(e,t){super(bu.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yd(e){return"IndexedDbTransactionError"===e.name}class vd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(fu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(fu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_d(n)}add(e){return fu("SimpleDb","ADD",this.store.name,e,e),_d(this.store.add(e))}get(e){return _d(this.store.get(e)).next(t=>(void 0===t&&(t=null),fu("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return fu("SimpleDb","DELETE",this.store.name,e),_d(this.store.delete(e))}count(){return fu("SimpleDb","COUNT",this.store.name),_d(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){fu("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new dd((n,r)=>{t.onerror=e=>{const t=wd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new dd((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new gd(i),o=t(i.primaryKey,i.value,s);if(o instanceof dd){const e=o.catch(e=>(s.done(),dd.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>dd.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _d(e){return new dd((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=wd(e.target.error);n(t)}})}let bd=!1;function wd(e){const t=pd.Rt((0,Kn.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new wu("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bd||(bd=!0,setTimeout(()=>{throw e},0)),e}}return e}class Td extends hd{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ed(e,t){const n=_u(e);return pd.St(n.Qt,t)}class Sd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&El(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Sl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Sl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Fu.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jl())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(e,t)=>Cl(e,t))&&Ru(this.baseMutations,e.baseMutations,(e,t)=>Cl(e,t))}}class Id{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vu(e.mutations.length===n.length);let r=Ql();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Id(e,t,n,r)}}class Cd{constructor(e,t,n,r,i=Fu.min(),s=Fu.min(),o=zu.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Cd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ad{constructor(e){this.Wt=e}}function kd(e,t){if(t.document)return Ch(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=nc.fromSegments(t.noDocument.path),n=Rd(t.noDocument.readTime),r=_c.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=nc.fromSegments(t.unknownDocument.path),n=Rd(t.unknownDocument.version);return _c.newUnknownDocument(e,n)}return yu()}function xd(e,t,n){const r=Od(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n={name:_h(s=e.Wt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:fh(s,o.version.toTimestamp())};return new ed(null,null,n,t.hasCommittedMutations,r,i)}var s,o;if(t.isNoDocument()){const e=t.key.path.toArray(),n=Dd(t.version),s=t.hasCommittedMutations;return new ed(null,new Jh(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Dd(t.version);return new ed(new Xh(e,n),null,null,!0,r,i)}return yu()}function Od(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Nd(e){const t=new Lu(e[0],e[1]);return Fu.fromTimestamp(t)}function Dd(e){const t=e.toTimestamp();return new Gh(t.seconds,t.nanoseconds)}function Rd(e){const t=new Lu(e.seconds,e.nanoseconds);return Fu.fromTimestamp(t)}function Pd(e,t){const n=(t.baseMutations||[]).map(t=>kh(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>kh(e.Wt,t)),i=Lu.fromMillis(t.localWriteTimeMs);return new Sd(t.batchId,i,n,r)}function Ld(e){const t=Rd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Rd(e.lastLimboFreeSnapshotVersion):Fu.min();let r;var i;return void 0!==e.query.documents?(vu(1===(i=e.query).documents.length),r=Wc(jc(Th(i.documents[0])))):r=Wc(Nh(e.query)),new Cd(r,e.targetId,0,e.lastListenSequenceNumber,t,n,zu.fromBase64String(e.resumeToken))}function Fd(e,t){const n=Dd(t.snapshotVersion),r=Dd(t.lastLimboFreeSnapshotVersion);let i;i=Sc(t.target)?xh(e.Wt,t.target):Oh(e.Wt,t.target);const s=t.resumeToken.toBase64();return new nd(t.targetId,Tc(t.target),n,s,t.sequenceNumber,r,i)}function Zd(e){const t=Nh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qc(t,t.limit,"L"):t}class Md{getBundleMetadata(e,t){return Ud(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Rd(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Ud(e).put({bundleId:(n=t).id,createTime:Dd(mh(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return qd(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Zd(t.bundledQuery),readTime:Rd(t.readTime)};var t})}saveNamedQuery(e,t){return qd(e).put({name:(n=t).name,readTime:Dd(mh(n.readTime)),bundledQuery:n.bundledQuery});var n}}function Ud(e){return Ed(e,ad.store)}function qd(e){return Ed(e,ud.store)}class Vd{constructor(){this.Gt=new jd}addToCollectionParentIndex(e,t){return this.Gt.add(t),dd.resolve()}getCollectionParents(e,t){return dd.resolve(this.Gt.getEntries(t))}}class jd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bl(Vu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bl(Vu.comparator)).toArray()}}class Bd{constructor(){this.zt=new jd}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:Bh(r)};return $d(e).put(i)}return dd.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Pu(t),""],!1,!0);return $d(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Hh(r.parent))}return n})}}function $d(e){return Ed(e,sd.store)}const zd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hd(e,Hd.DEFAULT_COLLECTION_PERCENTILE,Hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gd(e,t,n){const r=e.store(Qh.store),i=e.store(Yh.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{vu(1===a)}));const c=[];for(const l of n.mutations){const e=Yh.key(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return dd.waitFor(s).next(()=>c)}function Kd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yu();t=e.noDocument}return JSON.stringify(t).length}Hd.DEFAULT_COLLECTION_PERCENTILE=10,Hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hd.DEFAULT=new Hd(41943040,Hd.DEFAULT_COLLECTION_PERCENTILE,Hd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hd.DISABLED=new Hd(-1,0,0);class Wd{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){vu(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Wd(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).Kt({index:Qh.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Jd(e),s=Yd(e);return s.add({}).next(o=>{vu("number"==typeof o);const a=new Sd(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>Ah(e.Wt,t)),i=n.mutations.map(t=>Ah(e.Wt,t));return new Qh(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let l=new Bl((e,t)=>Du(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Yh.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,Yh.PLACEHOLDER))}return l.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),dd.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return Yd(e).get(t).next(e=>e?(vu(e.userId===this.userId),Pd(this.N,e)):null)}Xt(e,t){return this.Jt[t]?dd.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Yd(e).Kt({index:Qh.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(vu(t.batchId>=n),i=Pd(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Yd(e).Kt({index:Qh.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).Lt(Qh.userMutationsIndex,t).next(e=>e.map(e=>Pd(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Yh.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Jd(e).Kt({range:r},(n,r,s)=>{const[o,a,u]=n,c=Hh(a);if(o===this.userId&&t.path.isEqual(c))return Yd(e).get(u).next(e=>{if(!e)throw yu();vu(e.userId===this.userId),i.push(Pd(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bl(Du);const r=[];return t.forEach(t=>{const i=Yh.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Jd(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,u=Hh(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),dd.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Yh.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Bl(Du);return Jd(e).Kt({range:s},(e,t,i)=>{const[s,a,u]=e,c=Hh(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Yd(e).get(t).next(e=>{if(null===e)throw yu();vu(e.userId===this.userId),n.push(Pd(this.N,e))}))}),dd.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Gd(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),dd.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return dd.resolve();const n=IDBKeyRange.lowerBound(Yh.prefixForUser(this.userId)),r=[];return Jd(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Hh(e[1]);r.push(t)}else n.done()}).next(()=>{vu(0===r.length)})})}containsKey(e,t){return Qd(e,this.userId,t)}ee(e){return Xd(e).get(this.userId).next(e=>e||new Wh(this.userId,-1,""))}}function Qd(e,t,n){const r=Yh.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Jd(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function Yd(e){return Ed(e,Qh.store)}function Jd(e){return Ed(e,Yh.store)}function Xd(e){return Ed(e,Wh.store)}class ef{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new ef(0)}static ie(){return new ef(-1)}}class tf{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new ef(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>Fu.fromTimestamp(new Lu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nf(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(vu(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return nf(e).Kt((s,o)=>{const a=Ld(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>dd.waitFor(i)).next(()=>r)}forEachTarget(e,t){return nf(e).Kt((e,n)=>{const r=Ld(n);t(r)})}re(e){return rf(e).get(id.key).next(e=>(vu(null!==e),e))}oe(e,t){return rf(e).put(id.key,t)}ae(e,t){return nf(e).put(Fd(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Tc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return nf(e).Kt({range:r,index:nd.queryTargetsIndexName},(e,n,r)=>{const s=Ld(n);Ec(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=sf(e);return t.forEach(t=>{const s=Bh(t.path);r.push(i.put(new rd(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),dd.waitFor(r)}removeMatchingKeys(e,t,n){const r=sf(e);return dd.forEach(t,t=>{const i=Bh(t.path);return dd.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=sf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=sf(e);let i=Jl();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=Hh(e[1]),s=new nc(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Bh(t.path),r=IDBKeyRange.bound([n],[Pu(n)],!1,!0);let i=0;return sf(e).Kt({index:rd.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Tt(e,t){return nf(e).get(t).next(e=>e?Ld(e):null)}}function nf(e){return Ed(e,nd.store)}function rf(e){return Ed(e,id.store)}function sf(e){return Ed(e,rd.store)}function of(e){return af.apply(this,arguments)}function af(){return(af=(0,zn.Z)(function*(e){if(e.code!==bu.FAILED_PRECONDITION||e.message!==ld)throw e;fu("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function uf([e,t],[n,r]){const i=Du(e,n);return 0===i?Du(t,r):i}class cf{constructor(e){this.ue=e,this.buffer=new Bl(uf),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();uf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lf{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;fu("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,zn.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(n){yd(n)?fu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield of(n)}yield t._e(e)}))}}class hf{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return dd.resolve(xu.T);const n=new cf(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(fu("LruGarbageCollector","Garbage collection skipped; disabled"),dd.resolve(zd)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(fu("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zd):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(fu("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),du()<=Wn.in.DEBUG&&fu("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(u-a)+`ms\nTotal Duration: ${u-c}ms`),dd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class df{constructor(e,t){this.db=e,this.garbageCollector=new hf(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Te(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(e,n)=>t(n))}addReference(e,t,n){return ff(e,n)}removeReference(e,t,n){return ff(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ff(e,t)}Ie(e,t){return function(e,t){let n=!1;return Xd(e).jt(r=>Qd(e,r,t).next(e=>(e&&(n=!0),dd.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ee(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),sf(e).delete([0,Bh(s.path)])))});r.push(t)}}).next(()=>dd.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ff(e,t)}Ee(e,t){const n=sf(e);let r,i=xu.T;return n.Kt({index:rd.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==xu.T&&t(new nc(Hh(r)),i),i=o,r=s):i=xu.T}).next(()=>{i!==xu.T&&t(new nc(Hh(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(e,t){return sf(e).put((n=e.currentSequenceNumber,new rd(0,Bh(t.path),n)));var n}class pf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Mu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Uu(this.inner)}}class gf{constructor(){this.changes=new pf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Fu.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:_c.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dd.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mf{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return _f(e).put(bf(t),n)}removeEntry(e,t){const n=_f(e),r=bf(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return _f(e).get(bf(t)).next(e=>this.Re(t,e))}be(e,t){return _f(e).get(bf(t)).next(e=>({document:this.Re(t,e),size:Kd(e)}))}getEntries(e,t){let n=Hl();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=Hl(),r=new ql(nc.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,Kd(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return dd.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return _f(e).Kt({range:r},(e,t,r)=>{const o=nc.fromSegments(e);for(;s&&nc.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=Hl();const i=t.path.length+1,s={};if(n.isEqual(Fu.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Od(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=ed.collectionReadTimeIndex}return _f(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=kd(this.N,n);t.path.isPrefixOf(o.key.path)?el(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new yf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return vf(e).get(td.key).next(e=>(vu(!!e),e))}Ae(e,t){return vf(e).put(td.key,t)}Re(e,t){if(t){const e=kd(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Fu.min()))return e}return _c.newInvalidDocument(e)}}class yf extends gf{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new pf(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Bl((e,t)=>Du(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=xd(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast()),n+=Kd(a)-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=xd(this.Se.N,_c.newNoDocument(i,Fu.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),dd.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function vf(e){return Ed(e,td.store)}function _f(e){return Ed(e,ed.store)}function bf(e){return e.path.toArray()}class wf{constructor(e){this.N=e}Ct(e,t,n,r){vu(n<r&&n>=0&&r<=11);const i=new fd("createOrUpgrade",t);var s;n<1&&r>=1&&(e.createObjectStore(Kh.store),(s=e).createObjectStore(Wh.store,{keyPath:Wh.keyPath}),s.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0}),s.createObjectStore(Yh.store),Tf(e),function(e){e.createObjectStore(ed.store)}(e));let o=dd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(rd.store),e.deleteObjectStore(nd.store),e.deleteObjectStore(id.store)}(e),Tf(e)),o=o.next(()=>function(e){const t=e.store(id.store),n=new id(0,0,Fu.min().toTimestamp(),0);return t.put(id.key,n)}(i))),n<4&&r>=4&&(0!==n&&(o=o.next(()=>function(e,t){return t.store(Qh.store).Lt().next(n=>{e.deleteObjectStore(Qh.store),e.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0});const r=t.store(Qh.store),i=n.map(e=>r.put(e));return dd.waitFor(i)})}(e,i))),o=o.next(()=>{!function(e){e.createObjectStore(od.store,{keyPath:od.keyPath})}(e)})),n<5&&r>=5&&(o=o.next(()=>this.Ce(i))),n<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore(td.store)}(e),this.Ne(i)))),n<7&&r>=7&&(o=o.next(()=>this.xe(i))),n<8&&r>=8&&(o=o.next(()=>this.ke(e,i))),n<9&&r>=9&&(o=o.next(()=>{(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){const t=e.objectStore(ed.store);t.createIndex(ed.readTimeIndex,ed.readTimeIndexPath,{unique:!1}),t.createIndex(ed.collectionReadTimeIndex,ed.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(o=o.next(()=>this.$e(i))),n<11&&r>=11&&(o=o.next(()=>{(function(e){e.createObjectStore(ad.store,{keyPath:ad.keyPath})})(e),function(e){e.createObjectStore(ud.store,{keyPath:ud.keyPath})}(e)})),o}Ne(e){let t=0;return e.store(ed.store).Kt((e,n)=>{t+=Kd(n)}).next(()=>{const n=new td(t);return e.store(td.store).put(td.key,n)})}Ce(e){const t=e.store(Wh.store),n=e.store(Qh.store);return t.Lt().next(t=>dd.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(Qh.userMutationsIndex,r).next(n=>dd.forEach(n,n=>{vu(n.userId===t.userId);const r=Pd(this.N,n);return Gd(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(rd.store),n=e.store(ed.store);return e.store(id.store).get(id.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new Vu(n),o=[0,Bh(s)];r.push(t.get(o).next(n=>n?dd.resolve():t.put(new rd(0,Bh(s),e.highestListenSequenceNumber))))}).next(()=>dd.waitFor(r))})}ke(e,t){e.createObjectStore(sd.store,{keyPath:sd.keyPath});const n=t.store(sd.store),r=new jd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Bh(r)})}};return t.store(ed.store).Kt({qt:!0},(e,t)=>{const n=new Vu(e);return i(n.popLast())}).next(()=>t.store(Yh.store).Kt({qt:!0},([e,t,n],r)=>{const s=Hh(t);return i(s.popLast())}))}$e(e){const t=e.store(nd.store);return t.Kt((e,n)=>{const r=Ld(n),i=Fd(this.N,r);return t.put(i)})}}function Tf(e){e.createObjectStore(rd.store,{keyPath:rd.keyPath}).createIndex(rd.documentTargetsIndex,rd.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(nd.store,{keyPath:nd.keyPath}).createIndex(nd.queryTargetsIndexName,nd.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(id.store)}const Ef="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sf{constructor(e,t,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=u,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Sf.bt())throw new wu(bu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new df(this,r),this.We=t+"main",this.N=new Ad(a),this.Ge=new pd(this.We,11,new wf(this.N)),this.ze=new tf(this.referenceDelegate,this.N),this.Ht=new Bd,this.He=new mf(this.N,this.Ht),this.Je=new Md,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&pu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new wu(bu.FAILED_PRECONDITION,Ef);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new xu(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,zn.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,zn.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,zn.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cf(e).put(new od(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(yd(e))return fu("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return If(e).get(Kh.key).next(e=>dd.resolve(this.cn(e)))}un(e){return Cf(e).delete(this.clientId)}hn(){var e=this;return(0,zn.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Ed(t,od.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return dd.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?dd.resolve(!0):If(e).get(Kh.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new wu(bu.FAILED_PRECONDITION,Ef);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cf(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&fu("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,zn.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Kh.store,od.store],t=>{const n=new Td(t,xu.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Cf(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return Wd.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return fu("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",cd,i=>(r=new Td(i,this.Le?this.Le.next():xu.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw pu(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new wu(bu.FAILED_PRECONDITION,ld);return n(r)}).next(e=>this.an(r).next(()=>e)):this.Tn(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}Tn(e){return If(e).get(Kh.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new wu(bu.FAILED_PRECONDITION,Ef)})}an(e){const t=new Kh(this.clientId,this.allowTabSynchronization,Date.now());return If(e).put(Kh.key,t)}static bt(){return pd.bt()}on(e){const t=If(e);return t.get(Kh.key).next(e=>this.cn(e)?(fu("IndexedDbPersistence","Releasing primary lease."),t.delete(Kh.key)):dd.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(pu(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,Kn.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return fu("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return pu("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){pu("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function If(e){return Ed(e,Kh.store)}function Cf(e){return Ed(e,od.store)}function Af(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class kf{constructor(e,t){this.progress=e,this.En=t}}class xf{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return nc.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(e,t.path):Gc(t)?this.Sn(e,t,n):this.Dn(e,t,n);var r}Vn(e,t){return this.An(e,new nc(t)).next(e=>{let t=Kl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=Kl();return this.Ht.getCollectionParents(e,r).next(s=>dd.forEach(s,s=>{const o=(a=t,u=s.child(r),new qc(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));var a,u;return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=_c.newInvalidDocument(n),r=r.insert(n,i)),Sl(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{el(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=Jl();for(const s of t)for(const e of s.mutations)e instanceof xl&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Of{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=Jl(),r=Jl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Of(e,t.fromCache,n,r)}}class Nf{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Fu.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(Bc(t)||$c(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(du()<=Wn.in.DEBUG&&fu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Xc(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))});var i}Mn(e,t){let n=new Bl(tl(e));return t.forEach((t,r)=>{el(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return du()<=Wn.in.DEBUG&&fu("QueryEngine","Using full collection scan to execute query:",Xc(t)),this.On.getDocumentsMatchingQuery(e,t,Fu.min())}}class Df{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new ql(Du),this.qn=new pf(e=>Tc(e),Ec),this.Kn=Fu.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new xf(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function Rf(e,t,n,r){return new Df(e,t,n,r)}function Pf(e,t){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,zn.Z)(function*(e,t){const n=_u(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new xf(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=Jl();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s})).apply(this,arguments)}function Ff(e,t){const n=_u(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=dd.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);vu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function Zf(e){const t=_u(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function Mf(e,t){const n=_u(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const u=t.resumeToken;if(u.approximateByteSize()>0){const d=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,d),c=a,h=t,vu((l=d).resumeToken.approximateByteSize()>0),(0===c.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&o.push(n.ze.updateTargetData(e,d))}var c,l,h});let a=Hl();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Uf(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(Fu.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return dd.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function Uf(e,t,n,r,i){let s=Jl();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Hl();return n.forEach((n,o)=>{const a=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Fu.min())?(t.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),s=s.insert(n,o)):fu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function qf(e,t){const n=_u(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function Vf(e,t){const n=_u(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,dd.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new Cd(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function jf(e,t,n){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,zn.Z)(function*(e,t,n){const r=_u(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(o){if(!yd(o))throw o;fu("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)})).apply(this,arguments)}function $f(e,t,n){const r=_u(e);let i=Fu.min(),s=Jl();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=_u(e),i=r.qn.get(n);return void 0!==i?dd.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,Wc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Fu.min(),n?s:Jl())).next(e=>({documents:e,Gn:s})))}function zf(e,t){const n=_u(e),r=_u(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Tt(e,t).next(e=>e?e.target:null))}function Hf(e){const t=_u(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=_u(e);let i=Hl(),s=Od(n);const o=_f(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:ed.readTimeIndex,range:a},(e,t)=>{const n=kd(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({En:i,readTime:Nd(s)}))}(t.jn,e,t.Kn)).then(({En:e,readTime:n})=>(t.Kn=n,e))}function Gf(){return(Gf=(0,zn.Z)(function*(e){const t=_u(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=_f(e);let n=Fu.min();return t.Kt({index:ed.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=Nd(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function Kf(){return(Kf=(0,zn.Z)(function*(e,t,n,r){const i=_u(e);let s=Jl(),o=Hl(),a=Ql();for(const h of n){const e=t.zn(h.metadata.name);h.document&&(s=s.add(e)),o=o.insert(e,t.Hn(h)),a=a.insert(e,t.Jn(h.metadata.readTime))}const u=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield Vf(i,(l=r,Wc(jc(Vu.fromString(`__bundle__/docs/${l}`)))));var l;return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Uf(e,u,o,Fu.min(),a).next(t=>(u.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function Wf(e,t){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,zn.Z)(function*(e,t,n=Jl()){const r=yield Vf(e,Wc(Zd(t.bundledQuery))),i=_u(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=mh(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(zu.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class Yf{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return dd.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:mh(n.createTime)}),dd.resolve()}getNamedQuery(e,t){return dd.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:Zd(n.bundledQuery),readTime:mh(n.readTime)}),dd.resolve();var n}}class Jf{constructor(){this.Zn=new Bl(Xf.ts),this.es=new Bl(Xf.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Xf(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new Xf(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new nc(new Vu([])),n=new Xf(t,e),r=new Xf(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new nc(new Vu([])),n=new Xf(t,e),r=new Xf(t,e+1);let i=Jl();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Xf(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xf{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return nc.comparator(e.key,t.key)||Du(e.ls,t.ls)}static ns(e,t){return Du(e.ls,t.ls)||nc.comparator(e.key,t.key)}}class ep{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Bl(Xf.ts)}checkEmpty(e){return dd.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new Sd(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new Xf(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return dd.resolve(s)}lookupMutationBatch(e,t){return dd.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return dd.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return dd.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return dd.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xf(t,0),r=new Xf(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),dd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bl(Du);return t.forEach(e=>{const t=new Xf(e,0),r=new Xf(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),dd.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;nc.isDocumentKey(i)||(i=i.child(""));const s=new Xf(new nc(i),0);let o=new Bl(Du);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),dd.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){vu(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return dd.forEach(t.mutations,r=>{const i=new Xf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new Xf(t,0),r=this.ds.firstAfterOrEqual(n);return dd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return dd.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class tp{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new ql(nc.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dd.resolve(n?n.document.clone():_c.newInvalidDocument(t))}getEntries(e,t){let n=Hl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():_c.newInvalidDocument(e))}),dd.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=Hl();const i=new nc(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||el(t,i)&&(r=r.insert(i.key,i.clone()))}return dd.resolve(r)}Ts(e,t){return dd.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new np(this)}getSize(e){return dd.resolve(this.size)}}class np extends gf{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),dd.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class rp{constructor(e){this.persistence=e,this.Es=new pf(e=>Tc(e),Ec),this.lastRemoteSnapshotVersion=Fu.min(),this.highestTargetId=0,this.Is=0,this.As=new Jf,this.targetCount=0,this.Rs=ef.se()}forEachTarget(e,t){return this.Es.forEach((e,n)=>t(n)),dd.resolve()}getLastRemoteSnapshotVersion(e){return dd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dd.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),dd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),dd.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ef(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,dd.resolve()}updateTargetData(e,t){return this.ae(t),dd.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,dd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Es.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Es.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),dd.waitFor(i).next(()=>r)}getTargetCount(e){return dd.resolve(this.targetCount)}getTargetData(e,t){const n=this.Es.get(t)||null;return dd.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),dd.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),dd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),dd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return dd.resolve(n)}containsKey(e,t){return dd.resolve(this.As.containsKey(t))}}class ip{constructor(e,t){this.bs={},this.Le=new xu(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new rp(this),this.Ht=new Vd,this.He=new tp(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new Ad(t),this.Je=new Yf(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new ep(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){fu("MemoryPersistence","Starting transaction:",e);const r=new sp(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return dd.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class sp extends hd{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Ds=new Jf,this.Cs=null}static Ns(e){return new op(e)}get xs(){if(this.Cs)return this.Cs;throw yu()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),dd.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),dd.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),dd.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dd.forEach(this.xs,n=>{const r=nc.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return dd.or([()=>dd.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function ap(e,t){return`firestore_clients_${e}_${t}`}function up(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function cp(e,t){return`firestore_targets_${e}_${t}`}class lp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new wu(r.error.code,r.error.message))),s?new lp(e,t,r.state,i):(pu("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new wu(n.error.code,n.error.message))),i?new hp(e,n.state,r):(pu("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=eh();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=tc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new dp(e,i):(pu("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fp{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fp(t.clientId,t.onlineState):(pu("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pp{constructor(){this.activeTargetIds=eh()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gp{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new ql(Du),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=ap(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new pp),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,zn.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(ap(e.persistenceKey,r));if(t){const n=dp.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(cp(this.persistenceKey,e));if(n){const r=hp.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fu("SharedClientState","READ",e,t),t}setItem(e,t){fu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){fu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(fu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void pu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,zn.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=xu.T;if(null!=e)try{const n=JSON.parse(e);vu("number"==typeof n),t=n}catch(n){pu("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue);e!==xu.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new lp(this.currentUser,e,t,n),i=up(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=up(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=cp(this.persistenceKey,e),i=new hp(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return dp.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return lp.$s(new cu(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return hp.$s(r,t)}Xs(e){return fp.$s(e)}li(e){var t=this;return(0,zn.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);fu("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=eh();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class mp{constructor(){this.yi=new pp,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new pp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class yp{Ti(e){}shutdown(){}}class vp{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){fu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){fu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const _p={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class bp{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class wp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);fu("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(fu("RestConnection","Received: ",e),e),t=>{throw gu("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+lu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${_p[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new au;o.listenOnce(nu.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case tu.NO_ERROR:const t=o.getResponseJson();fu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case tu.TIMEOUT:fu("Connection",'RPC "'+e+'" timed out'),s(new wu(bu.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const n=o.getStatus();if(fu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(bu).indexOf(t)>=0?t:bu.UNKNOWN}(e.status);s(new wu(t,e.message))}else s(new wu(bu.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new wu(bu.UNAVAILABLE,"Connection failed."));break;default:yu()}}finally{fu("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Xa(),i=eu(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new su({})),this.Ui(s.initMessageHeaders,t),(0,Kn.uI)()||(0,Kn.b$)()||(0,Kn.d)()||(0,Kn.w1)()||(0,Kn.Mn)()||(0,Kn.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");fu("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let u=!1,c=!1;const l=new bp({vi:e=>{c?fu("Connection","Not sending because WebChannel is closed:",e):(u||(fu("Connection","Opening WebChannel transport."),a.open(),u=!0),fu("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return h(a,ou.EventType.OPEN,()=>{c||fu("Connection","WebChannel transport opened.")}),h(a,ou.EventType.CLOSE,()=>{c||(c=!0,fu("Connection","WebChannel transport closed"),l.$i())}),h(a,ou.EventType.ERROR,e=>{c||(c=!0,gu("Connection","WebChannel transport errored:",e),l.$i(new wu(bu.UNAVAILABLE,"The operation could not be completed")))}),h(a,ou.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];vu(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){fu("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Fl[e];if(void 0!==t)return Ul(t)}(e),n=i.message;void 0===t&&(t=bu.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,l.$i(new wu(t,n)),a.close()}else fu("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,ru.STAT_EVENT,e=>{e.stat===iu.PROXY?fu("Connection","Detected buffering proxy"):e.stat===iu.NOPROXY&&fu("Connection","Detected no buffering proxy")}),setTimeout(()=>{l.ki()},0),l}}function Tp(){return"undefined"!=typeof window?window:null}function Ep(){return"undefined"!=typeof document?document:null}function Sp(e){return new dh(e,!0)}class Ip{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&fu("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Cp{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Ip(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,zn.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,zn.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,zn.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===bu.RESOURCE_EXHAUSTED?(pu(t.toString()),pu("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===bu.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new wu(bu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,zn.Z)(function*(){e.state=0,e.start()}))}pr(e){return fu("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(fu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ap extends Cp{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:yu(),s=t.targetChange.targetIds||[],o=function(e,t){return e.D?(vu(void 0===t||"string"==typeof t),zu.fromBase64String(t||"")):(vu(void 0===t||t instanceof Uint8Array),zu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(e){const t=void 0===e.code?bu.UNKNOWN:Ul(e.code);return new wu(t,e.message||"")}(a);n=new sh(i,s,o,u||null)}else if("documentChange"in t){const r=t.documentChange,i=bh(e,r.document.name),s=mh(r.document.updateTime),o=new yc({mapValue:{fields:r.document.fields}}),a=_c.newFoundDocument(i,s,o);n=new rh(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=bh(e,r.document),s=r.readTime?mh(r.readTime):Fu.min(),o=_c.newNoDocument(i,s);n=new rh([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=bh(e,r.document);n=new rh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return yu();{const e=t.filter,r=new Ll(e.count||0);n=new ih(e.targetId,r)}}var r;return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Fu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Fu.min():t.readTime?mh(t.readTime):Fu.min()}(e);return this.listener.Er(t,n)}Ir(e){const t={};t.database=Eh(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Sc(r)?{documents:xh(e,r)}:{query:Oh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ph(e,t.resumeToken):t.snapshotVersion.compareTo(Fu.min())>0&&(n.readTime=fh(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Eh(this.N),t.removeTarget=e,this.wr(t)}}class kp extends Cp{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(vu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(vu(void 0!==t),e.map(e=>function(e,t){let n=mh(e.updateTime?e.updateTime:t);return n.isEqual(Fu.min())&&(n=mh(t)),new _l(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=mh(e.commitTime);return this.listener.vr(n,t)}return vu(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Eh(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ah(this.N,e))};this.wr(t)}}class xp extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new wu(bu.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===bu.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new wu(bu.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===bu.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new wu(bu.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class Op{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(pu(t),this.$r=!1):fu("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Np{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ti(e=>{n.enqueueAndForget((0,zn.Z)(function*(){var e;jp(s)&&(fu("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,zn.Z)(function*(e){const t=_u(e);t.Kr.add(4),yield Pp(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield Dp(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Wr=new Op(n,r)}}function Dp(e){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,zn.Z)(function*(e){if(jp(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function Pp(e){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,zn.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function Fp(e,t){const n=_u(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Vp(n)?qp(n):gg(n).cr()&&Mp(n,t))}function Zp(e,t){const n=_u(e),r=gg(n);n.qr.delete(t),r.cr()&&Up(n,t),0===n.qr.size&&(r.cr()?r.lr():jp(n)&&n.Wr.set("Unknown"))}function Mp(e,t){e.Gr.Y(t.targetId),gg(e).Ir(t)}function Up(e,t){e.Gr.Y(t),gg(e).Ar(t)}function qp(e){e.Gr=new ah({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>e.qr.get(t)||null}),gg(e).start(),e.Wr.Or()}function Vp(e){return jp(e)&&!gg(e).ar()&&e.qr.size>0}function jp(e){return 0===_u(e).Kr.size}function Bp(e){e.Gr=void 0}function $p(e){return zp.apply(this,arguments)}function zp(){return(zp=(0,zn.Z)(function*(e){e.qr.forEach((t,n)=>{Mp(e,t)})})).apply(this,arguments)}function Hp(e,t){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,zn.Z)(function*(e,t){Bp(e),Vp(e)?(e.Wr.Lr(t),qp(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function Kp(e,t,n){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,zn.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof sh&&2===t.state&&t.cause)try{yield(r=(0,zn.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(r){fu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield Qp(e,r)}else if(t instanceof rh?e.Gr.rt(t):t instanceof ih?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Fu.min()))try{const t=yield Zf(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(zu.EMPTY_BYTE_STRING,n.snapshotVersion)),Up(e,t);const r=new Cd(n.target,t,1,n.sequenceNumber);Mp(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(r){fu("RemoteStore","Failed to raise snapshot:",r),yield Qp(e,r)}var r})).apply(this,arguments)}function Qp(e,t,n){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,zn.Z)(function*(e,t,n){if(!yd(t))throw t;e.Kr.add(1),yield Pp(e),e.Wr.set("Offline"),n||(n=()=>Zf(e.localStore)),e.asyncQueue.enqueueRetryable((0,zn.Z)(function*(){fu("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield Dp(e)}))})).apply(this,arguments)}function Jp(e,t){return t().catch(n=>Qp(e,n,t))}function Xp(e){return eg.apply(this,arguments)}function eg(){return(eg=(0,zn.Z)(function*(e){const t=_u(e),n=mg(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;tg(t);)try{const e=yield qf(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,ng(t,e)}catch(i){yield Qp(t,i)}rg(t)&&ig(t)})).apply(this,arguments)}function tg(e){return jp(e)&&e.Ur.length<10}function ng(e,t){e.Ur.push(t);const n=mg(e);n.cr()&&n.br&&n.Pr(t.mutations)}function rg(e){return jp(e)&&!mg(e).ar()&&e.Ur.length>0}function ig(e){mg(e).start()}function sg(e){return og.apply(this,arguments)}function og(){return(og=(0,zn.Z)(function*(e){mg(e).Sr()})).apply(this,arguments)}function ag(e){return ug.apply(this,arguments)}function ug(){return(ug=(0,zn.Z)(function*(e){const t=mg(e);for(const n of e.Ur)t.Pr(n.mutations)})).apply(this,arguments)}function cg(e,t,n){return lg.apply(this,arguments)}function lg(){return(lg=(0,zn.Z)(function*(e,t,n){const r=e.Ur.shift(),i=Id.from(r,t,n);yield Jp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Xp(e)})).apply(this,arguments)}function hg(e,t){return dg.apply(this,arguments)}function dg(){return(dg=(0,zn.Z)(function*(e,t){var n;t&&mg(e).br&&(yield(n=(0,zn.Z)(function*(e,t){if(Ml(n=t.code)&&n!==bu.ABORTED){const n=e.Ur.shift();mg(e).hr(),yield Jp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Xp(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),rg(e)&&ig(e)})).apply(this,arguments)}function fg(e,t){return pg.apply(this,arguments)}function pg(){return(pg=(0,zn.Z)(function*(e,t){const n=_u(e);t?(n.Kr.delete(2),yield Dp(n)):t||(n.Kr.add(2),yield Pp(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function gg(e){return e.zr||(e.zr=function(e,t,n){const r=_u(e);return r.Cr(),new Ap(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:$p.bind(null,e),Ci:Hp.bind(null,e),Er:Kp.bind(null,e)}),e.jr.push(function(){var t=(0,zn.Z)(function*(t){t?(e.zr.hr(),Vp(e)?qp(e):e.Wr.set("Unknown")):(yield e.zr.stop(),Bp(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function mg(e){return e.Hr||(e.Hr=function(e,t,n){const r=_u(e);return r.Cr(),new kp(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:sg.bind(null,e),Ci:hg.bind(null,e),Vr:ag.bind(null,e),vr:cg.bind(null,e)}),e.jr.push(function(){var t=(0,zn.Z)(function*(t){t?(e.Hr.hr(),yield Xp(e)):(yield e.Hr.stop(),e.Ur.length>0&&(fu("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class yg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wu(bu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(e,t){if(pu("AsyncQueue",`${t}: ${e}`),yd(e))return new wu(bu.UNAVAILABLE,`${t}: ${e}`);throw e}class _g{constructor(e){this.comparator=e?(t,n)=>e(t,n)||nc.comparator(t.key,n.key):(e,t)=>nc.comparator(e.key,t.key),this.keyedMap=Kl(),this.sortedSet=new ql(this.comparator)}static emptySet(e){return new _g(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _g)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _g;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bg{constructor(){this.Jr=new ql(nc.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):yu():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class wg{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new wg(e,t,_g.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Tg{constructor(){this.Xr=void 0,this.listeners=[]}}class Eg{constructor(){this.queries=new pf(e=>Jc(e),Yc),this.onlineState="Unknown",this.Zr=new Set}}function Sg(e,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,zn.Z)(function*(e,t){const n=_u(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Tg),i)try{s.Xr=yield n.onListen(r)}catch(o){const e=vg(o,`Initialization of query '${Xc(t.query)}' failed`);return void t.onError(e)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&Og(n)})).apply(this,arguments)}function Cg(e,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,zn.Z)(function*(e,t){const n=_u(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function kg(e,t){const n=_u(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.no(i)&&(r=!0);e.Xr=i}}r&&Og(n)}function xg(e,t,n){const r=_u(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Og(e){e.Zr.forEach(e=>{e.next()})}class Ng{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=wg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Dg{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Rg{constructor(e){this.N=e}zn(e){return bh(this.N,e)}Hn(e){return e.metadata.exists?Ch(this.N,e.document,!1):_c.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return mh(e)}}class Pg{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Lg(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new Rg(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Jl()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,zn.Z)(function*(){const t=yield function(e,t,n,r){return Kf.apply(this,arguments)}(e.localStore,new Rg(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield Wf(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new kf(Object.assign({},e.progress),t)})()}}function Lg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Fg{constructor(e){this.key=e}}class Zg{constructor(e){this.key=e}}class Mg{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Jl(),this.mutatedKeys=Jl(),this.po=tl(e),this.To=new _g(this.po)}get Eo(){return this._o}Io(e,t){const n=t?t.Ao:new bg,r=t?t.To:this.To;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Bc(this.query)&&r.size===this.query.limit?r.last():null,u=$c(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=el(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ro(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.po(l,a)>0||u&&this.po(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),Bc(this.query)||$c(this.query))for(;s.size>this.query.limit;){const e=Bc(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{To:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yu()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const s=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new wg(this.query,e.To,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new bg,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Jl(),this.To.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new Zg(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new Fg(n))}),t}So(e){this._o=e.Gn,this.yo=Jl();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return wg.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class Ug{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class qg{constructor(e){this.key=e,this.Co=!1}}class Vg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new pf(e=>Jc(e),Yc),this.ko=new Map,this.$o=new Set,this.Oo=new ql(nc.comparator),this.Fo=new Map,this.Mo=new Jf,this.Lo={},this.Bo=new Map,this.Uo=ef.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function jg(e,t){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,zn.Z)(function*(e,t){const n=Dm(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=yield Vf(n.localStore,Wc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield $g(n,t,r,"current"===s),n.isPrimaryClient&&Fp(n.remoteStore,e)}return i})).apply(this,arguments)}function $g(e,t,n,r){return zg.apply(this,arguments)}function zg(){return(zg=(0,zn.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(i=(0,zn.Z)(function*(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=yield $f(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return cm(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield $f(e.localStore,t,!0),s=new Mg(t,i.Gn),o=s.Io(i.documents),a=nh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);cm(e,n,u.vo);const c=new Ug(t,n,s);return e.xo.set(t,c),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot})).apply(this,arguments)}function Hg(e,t){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,zn.Z)(function*(e,t){const n=_u(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter(e=>!Yc(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Zp(n.remoteStore,r.targetId),am(n,r.targetId)}).catch(of))):(am(n,r.targetId),yield jf(n.localStore,r.targetId,!0))})).apply(this,arguments)}function Kg(){return(Kg=(0,zn.Z)(function*(e,t,n){const r=Rm(e);try{const e=yield function(e,t){const n=_u(e),r=Lu.now(),i=t.reduce((e,t)=>e.add(t.key),Jl());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Il(e,s.get(e.key));null!=t&&o.push(new xl(e.key,t,vc(t.value.mapValue),bl.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new ql(Du)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield dm(r,e.changes),yield Xp(r.remoteStore)}catch(i){const e=vg(i,"Failed to persist write");n.reject(e)}})).apply(this,arguments)}function Wg(e,t){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,zn.Z)(function*(e,t){const n=_u(e);try{const e=yield Mf(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(vu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?vu(r.Co):e.removedDocuments.size>0&&(vu(r.Co),r.Co=!1))}),yield dm(n,e,t)}catch(r){yield of(r)}})).apply(this,arguments)}function Yg(e,t,n){const r=_u(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=_u(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)}),r&&Og(n)}(r.eventManager,t),e.length&&r.No.Er(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Jg(e,t,n){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,zn.Z)(function*(e,t,n){const r=_u(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new ql(nc.comparator);e=e.insert(s,_c.newNoDocument(s,Fu.min()));const n=Jl().add(s),i=new th(Fu.min(),new Map,new Bl(Du),e,n);yield Wg(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),hm(r)}else yield jf(r.localStore,t,!1).then(()=>am(r,t,n)).catch(of)})).apply(this,arguments)}function em(e,t){return tm.apply(this,arguments)}function tm(){return(tm=(0,zn.Z)(function*(e,t){const n=_u(e),r=t.batch.batchId;try{const e=yield Ff(n.localStore,t);om(n,r,null),sm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield dm(n,e)}catch(i){yield of(i)}})).apply(this,arguments)}function nm(e,t,n){return rm.apply(this,arguments)}function rm(){return(rm=(0,zn.Z)(function*(e,t,n){const r=_u(e);try{const e=yield function(e,t){const n=_u(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(vu(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);om(r,t,n),sm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield dm(r,e)}catch(i){yield of(i)}})).apply(this,arguments)}function im(){return(im=(0,zn.Z)(function*(e,t){const n=_u(e);jp(n.remoteStore)||fu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=_u(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(r){const e=vg(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}})).apply(this,arguments)}function sm(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function om(e,t,n){const r=_u(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function am(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||um(e,t)})}function um(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(Zp(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),hm(e))}function cm(e,t,n){for(const r of n)r instanceof Fg?(e.Mo.addReference(r.key,t),lm(e,r)):r instanceof Zg?(fu("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||um(e,r.key)):yu()}function lm(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(fu("SyncEngine","New document in limbo: "+n),e.$o.add(r),hm(e))}function hm(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new nc(Vu.fromString(t)),r=e.Uo.next();e.Fo.set(r,new qg(n)),e.Oo=e.Oo.insert(n,r),Fp(e.remoteStore,new Cd(Wc(jc(n.path)),r,2,xu.T))}}function dm(e,t,n){return fm.apply(this,arguments)}function fm(){return(fm=(0,zn.Z)(function*(e,t,n){const r=_u(e),i=[],s=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Of.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.No.Er(i),yield(a=(0,zn.Z)(function*(e,t){const n=_u(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>dd.forEach(t,t=>dd.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>dd.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!yd(r))throw r;fu("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function pm(e,t){return gm.apply(this,arguments)}function gm(){return(gm=(0,zn.Z)(function*(e,t){const n=_u(e);if(!n.currentUser.isEqual(t)){fu("SyncEngine","User change. New user:",t.toKey());const e=yield Pf(n.localStore,t);n.currentUser=t,(r=n).Bo.forEach(e=>{e.forEach(e=>{e.reject(new wu(bu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Bo.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield dm(n,e.Wn)}var r})).apply(this,arguments)}function mm(e,t){const n=_u(e),r=n.Fo.get(t);if(r&&r.Co)return Jl().add(r.key);{let e=Jl();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.Eo)}return e}}function ym(e,t){return vm.apply(this,arguments)}function vm(){return(vm=(0,zn.Z)(function*(e,t){const n=_u(e),r=yield $f(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&cm(n,t.targetId,i.vo),i})).apply(this,arguments)}function _m(e){return bm.apply(this,arguments)}function bm(){return(bm=(0,zn.Z)(function*(e){const t=_u(e);return Hf(t.localStore).then(e=>dm(t,e))})).apply(this,arguments)}function wm(e,t,n,r){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,zn.Z)(function*(e,t,n,r){const i=_u(e),s=yield function(e,t){const n=_u(e),r=_u(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):dd.resolve(null)))}(i.localStore,t);var o;null!==s?("pending"===n?yield Xp(i.remoteStore):"acknowledged"===n||"rejected"===n?(om(i,t,r||null),sm(i,t),o=t,_u(_u(i.localStore).In).te(o)):yu(),yield dm(i,s)):fu("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Em(){return(Em=(0,zn.Z)(function*(e,t){const n=_u(e);if(Dm(n),Rm(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Sm(n,e.toArray());n.qo=!0,yield fg(n.remoteStore,!0);for(const r of t)Fp(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(am(n,i),jf(n.localStore,i,!0))),Zp(n.remoteStore,i)}),yield t,yield Sm(n,e),function(e){const t=_u(e);t.Fo.forEach((e,n)=>{Zp(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new ql(nc.comparator)}(n),n.qo=!1,yield fg(n.remoteStore,!1)}})).apply(this,arguments)}function Sm(e,t,n){return Im.apply(this,arguments)}function Im(){return(Im=(0,zn.Z)(function*(e,t,n){const r=_u(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield Vf(r.localStore,Wc(t[0]));for(const e of t){const t=r.xo.get(e),n=yield ym(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield zf(r.localStore,o);e=yield Vf(r.localStore,t),yield $g(r,Cm(t),o,!1)}i.push(e)}return r.No.Er(s),i})).apply(this,arguments)}function Cm(e){return Vc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Am(e){const t=_u(e);return _u(_u(t.localStore).persistence).pn()}function km(e,t,n,r){return xm.apply(this,arguments)}function xm(){return(xm=(0,zn.Z)(function*(e,t,n,r){const i=_u(e);if(i.qo)fu("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=yield Hf(i.localStore),r=th.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield dm(i,e,r);break}case"rejected":yield jf(i.localStore,t,!0),am(i,t,r);break;default:yu()}})).apply(this,arguments)}function Om(e,t,n){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,zn.Z)(function*(e,t,n){const r=Dm(e);if(r.qo){for(const e of t){if(r.ko.has(e)){fu("SyncEngine","Adding an already active target "+e);continue}const t=yield zf(r.localStore,e),n=yield Vf(r.localStore,t);yield $g(r,Cm(t),n.targetId,!1),Fp(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield jf(r.localStore,e,!1).then(()=>{Zp(r.remoteStore,e),am(r,e)}).catch(of))}})).apply(this,arguments)}function Dm(e){const t=_u(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jg.bind(null,t),t.No.Er=kg.bind(null,t.eventManager),t.No.jo=xg.bind(null,t.eventManager),t}function Rm(e){const t=_u(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=em.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nm.bind(null,t),t}class Pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,zn.Z)(function*(){t.N=Sp(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return Rf(this.persistence,new Nf,e.initialUser,this.N)}Go(e){return new ip(op.Ns,this.N)}Wo(e){return new mp}terminate(){var e=this;return(0,zn.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lm extends Pm{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,zn.Z)(function*(){yield t().call(n,e),yield function(e){return Gf.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield Rm(n.Jo.syncEngine),yield Xp(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return Rf(this.persistence,new Nf,e.initialUser,this.N)}zo(e){return new lf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=Af(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Hd.withCacheSize(this.cacheSizeBytes):Hd.DEFAULT;return new Sf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tp(),Ep(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new mp}}class Fm extends Lm{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,zn.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof gp&&(n.sharedClientState.syncEngine={_i:wm.bind(null,r),mi:km.bind(null,r),gi:Om.bind(null,r),pn:Am.bind(null,r),wi:_m.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,zn.Z)(function*(e){yield function(e,t){return Em.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=Tp();if(!gp.bt(t))throw new wu(bu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Af(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Zm{initialize(e,t){var n=this;return(0,zn.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Yg(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=pm.bind(null,n.syncEngine),yield fg(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Eg}createDatastore(e){const t=Sp(e.databaseInfo.databaseId),n=new wp(e.databaseInfo);return new xp(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Yg(this.syncEngine,e,0),s=vp.bt()?new vp:new yp,new Np(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Vg(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,zn.Z)(function*(e){const t=_u(e);fu("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield Pp(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mm(e,t=10240){let n=0;return{read:()=>(0,zn.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,zn.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Um{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qm{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Tu,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,zn.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,zn.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,zn.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const i=yield e.ia(r);return new Dg(JSON.parse(i),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,zn.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,zn.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,zn.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Vm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,zn.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new wu(bu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,zn.Z)(function*(e,t){const n=_u(e),r=Eh(n.N)+"/documents",i={documents:t.map(e=>_h(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){vu(!!t.found);const n=bh(e,t.found.name),r=mh(t.found.updateTime),i=new yc({mapValue:{fields:t.found.fields}});return _c.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){vu(!!t.missing),vu(!!t.readTime);const n=bh(e,t.missing),r=mh(t.readTime);return _c.newNoDocument(n,r)}(e,t):yu()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());vu(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,zn.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=nc.fromPath(n);e.mutations.push(new Pl(r,e.precondition(r)))}),yield(n=(0,zn.Z)(function*(e,t){const n=_u(e),r=Eh(n.N)+"/documents",i={writes:t.map(e=>Ah(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yu();t=Fu.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wu(bu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?bl.updateTime(t):bl.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fu.min()))throw new wu(bu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bl.updateTime(t)}return bl.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jm{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Ip(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,zn.Z)(function*(){const t=new Vm(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!Xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ml(t)}return!1}}class Bm{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=cu.UNAUTHENTICATED,this.clientId=Nu.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,zn.Z)(function*(e){fu("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,zn.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new wu(bu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Tu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,zn.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=vg(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function $m(e,t){return zm.apply(this,arguments)}function zm(){return(zm=(0,zn.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),fu("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,zn.Z)(function*(e){r.isEqual(e)||(yield Pf(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function Hm(e,t){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,zn.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield Km(e);fu("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,zn.Z)(function*(e,t){const n=_u(e);n.asyncQueue.verifyOperationInProgress(),fu("RemoteStore","RemoteStore received new credentials");const r=jp(n);n.Kr.add(3),yield Pp(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield Dp(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function Km(e){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,zn.Z)(function*(e){return e.offlineComponents||(fu("FirestoreClient","Using default OfflineComponentProvider"),yield $m(e,new Pm)),e.offlineComponents})).apply(this,arguments)}function Qm(e){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,zn.Z)(function*(e){return e.onlineComponents||(fu("FirestoreClient","Using default OnlineComponentProvider"),yield Hm(e,new Zm)),e.onlineComponents})).apply(this,arguments)}function Jm(e){return Km(e).then(e=>e.persistence)}function Xm(e){return Km(e).then(e=>e.localStore)}function ey(e){return Qm(e).then(e=>e.remoteStore)}function ty(e){return Qm(e).then(e=>e.syncEngine)}function ny(e){return ry.apply(this,arguments)}function ry(){return(ry=(0,zn.Z)(function*(e){const t=yield Qm(e),n=t.eventManager;return n.onListen=jg.bind(null,t.syncEngine),n.onUnlisten=Hg.bind(null,t.syncEngine),n})).apply(this,arguments)}function iy(e,t,n={}){const r=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return function(e,t,n,r,i){const s=new Um({next:s=>{t.enqueueAndForget(()=>Cg(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new wu(bu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new wu(bu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Ng(jc(n.path),s,{includeMetadataChanges:!0,uo:!0});return Sg(e,o)}(yield ny(e),e.asyncQueue,t,n,r)})),r.promise}function sy(e,t,n={}){const r=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return function(e,t,n,r,i){const s=new Um({next:n=>{t.enqueueAndForget(()=>Cg(e,o)),n.fromCache&&"server"===r.source?i.reject(new wu(bu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ng(n,s,{includeMetadataChanges:!0,uo:!0});return Sg(e,o)}(yield ny(e),e.asyncQueue,t,n,r)})),r.promise}class oy{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class ay{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ay&&e.projectId===this.projectId&&e.database===this.database}}const uy=new Map;function cy(e,t,n){if(!n)throw new wu(bu.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ly(e,t,n,r){if(!0===t&&!0===r)throw new wu(bu.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hy(e){if(!nc.isDocumentKey(e))throw new wu(bu.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function dy(e){if(nc.isDocumentKey(e))throw new wu(bu.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":yu()}function py(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wu(bu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fy(e);throw new wu(bu.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function gy(e,t){if(t<=0)throw new wu(bu.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class my{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new wu(bu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wu(bu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ly("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yy{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new my({}),this._settingsFrozen=!1,e instanceof ay?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wu(bu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ay(e.options.projectId)}(e))}get app(){if(!this._app)throw new wu(bu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wu(bu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new my(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Su;switch(e.type){case"gapi":const t=e.client;return vu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ku(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new wu(bu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uy.get(e);t&&(fu("ComponentProvider","Removing Datastore"),uy.delete(e),t.terminate())}(this),Promise.resolve()}}class vy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new by(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vy(this.firestore,e,this._key)}}class _y{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _y(this.firestore,e,this._query)}}class by extends _y{constructor(e,t,n){super(e,t,jc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vy(this.firestore,null,new nc(e))}withConverter(e){return new by(this.firestore,e,this._path)}}function wy(e,t,...n){if(e=(0,Kn.m9)(e),cy("collection","path",t),e instanceof yy){const r=Vu.fromString(t,...n);return dy(r),new by(e,null,r)}{if(!(e instanceof vy||e instanceof by))throw new wu(bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Vu.fromString(t,...n));return dy(r),new by(e.firestore,null,r)}}function Ty(e,t,...n){if(e=(0,Kn.m9)(e),1===arguments.length&&(t=Nu.I()),cy("doc","path",t),e instanceof yy){const r=Vu.fromString(t,...n);return hy(r),new vy(e,null,new nc(r))}{if(!(e instanceof vy||e instanceof by))throw new wu(bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Vu.fromString(t,...n));return hy(r),new vy(e.firestore,e instanceof by?e.converter:null,new nc(r))}}function Ey(e,t){return e=(0,Kn.m9)(e),t=(0,Kn.m9)(t),(e instanceof vy||e instanceof by)&&(t instanceof vy||t instanceof by)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sy(e,t){return e=(0,Kn.m9)(e),t=(0,Kn.m9)(t),e instanceof _y&&t instanceof _y&&e.firestore===t.firestore&&Yc(e._query,t._query)&&e.converter===t.converter}class Iy{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Ip(this,"async_queue_retry"),this.Ta=()=>{const e=Ep();e&&fu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Ep();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new Tu;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,zn.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!yd(t))throw t;fu("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,pu("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const r=yg.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ea(){this.ma&&yu()}verifyOperationInProgress(){}ba(){var e=this;return(0,zn.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Cy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Ay{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ky extends yy{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Iy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Oy(this),this._firestoreClient.terminate()}}function xy(e){return e._firestoreClient||Oy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Oy(e){var t;const n=e._freezeSettings(),r=(i=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new oy(e._databaseId,i,e._persistenceKey,(s=n).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));var i,s;e._firestoreClient=new Bm(e._credentials,e._queue,r)}function Ny(e,t,n){const r=new Tu;return e.asyncQueue.enqueue((0,zn.Z)(function*(){try{yield $m(e,n),yield Hm(e,t),r.resolve()}catch(s){if(!("FirebaseError"===(i=s).name?i.code===bu.FAILED_PRECONDITION||i.code===bu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var i})).then(()=>r.promise)}function Dy(e){if(e._initialized||e._terminated)throw new wu(bu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ry{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wu(bu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bu(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Py{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Py(zu.fromBase64String(e))}catch(t){throw new wu(bu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Py(zu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ly{constructor(e){this._methodName=e}}class Fy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wu(bu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wu(bu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Du(this._lat,e._lat)||Du(this._long,e._long)}}const Zy=/^__.*__$/;class My{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class Uy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yu()}}class Vy{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Vy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return av(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(qy(this.Da)&&Zy.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class jy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Sp(e)}Ba(e,t,n,r=!1){return new Vy({Da:e,methodName:t,La:n,path:Bu.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function By(e){const t=e._freezeSettings(),n=Sp(e._databaseId);return new jy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $y(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);rv("Data must be an object, but it was:",o,r);const a=tv(r,o);let u,c;if(s.merge)u=new $u(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=iv(t,r,n);if(!o.contains(i))throw new wu(bu.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);uv(e,i)||e.push(i)}u=new $u(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new My(new yc(a),u,c)}class zy extends Ly{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zy}}function Hy(e,t,n){return new Vy({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class Gy extends Ly{_toFieldTransform(e){return new vl(e.path,new ll)}isEqual(e){return e instanceof Gy}}class Ky extends Ly{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Hy(this,e,!0),n=this.Ua.map(e=>ev(e,t)),r=new hl(n);return new vl(e.path,r)}isEqual(e){return this===e}}class Wy extends Ly{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Hy(this,e,!0),n=this.Ua.map(e=>ev(e,t)),r=new fl(n);return new vl(e.path,r)}isEqual(e){return this===e}}class Qy extends Ly{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new gl(e.N,sl(e.N,this.qa));return new vl(e.path,t)}isEqual(e){return this===e}}function Yy(e,t,n,r){const i=e.Ba(1,t,n);rv("Data must be an object, but it was:",i,r);const s=[],o=yc.empty();Mu(r,(e,r)=>{const a=ov(t,e,n);r=(0,Kn.m9)(r);const u=i.$a(a);if(r instanceof zy)s.push(a);else{const e=ev(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new $u(s);return new Uy(o,a,i.fieldTransforms)}function Jy(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[iv(t,r,n)],u=[i];if(s.length%2!=0)throw new wu(bu.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(iv(t,s[d])),u.push(s[d+1]);const c=[],l=yc.empty();for(let d=a.length-1;d>=0;--d)if(!uv(c,a[d])){const e=a[d];let t=u[d];t=(0,Kn.m9)(t);const n=o.$a(e);if(t instanceof zy)c.push(e);else{const r=ev(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new $u(c);return new Uy(l,h,o.fieldTransforms)}function Xy(e,t,n,r=!1){return ev(n,e.Ba(r?4:3,t))}function ev(e,t){if(nv(e=(0,Kn.m9)(e)))return rv("Unsupported field value:",t,e),tv(e,t);if(e instanceof Ly)return function(e,t){if(!qy(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ev(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Kn.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sl(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Lu.fromDate(e);return{timestampValue:fh(t.N,n)}}if(e instanceof Lu){const n=new Lu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fh(t.N,n)}}if(e instanceof Fy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Py)return{bytesValue:ph(t.N,e._byteString)};if(e instanceof vy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:yh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${fy(e)}`)}(e,t)}function tv(e,t){const n={};return Uu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mu(e,(e,r)=>{const i=ev(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function nv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Lu||e instanceof Fy||e instanceof Py||e instanceof vy||e instanceof Ly)}function rv(e,t,n){if(!nv(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fy(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}var r}function iv(e,t,n){if((t=(0,Kn.m9)(t))instanceof Ry)return t._internalPath;if("string"==typeof t)return ov(e,t);throw av("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const sv=new RegExp("[~\\*/\\[\\]]");function ov(e,t,n){if(t.search(sv)>=0)throw av(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ry(...t.split("."))._internalPath}catch(r){throw av(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function av(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new wu(bu.INVALID_ARGUMENT,a+e+u)}function uv(e,t){return e.some(e=>e.isEqual(t))}class cv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lv extends cv{data(){return super.data()}}function hv(e,t){return"string"==typeof t?ov(e,t):t instanceof Ry?t._internalPath:t._delegate._internalPath}class dv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fv extends cv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(hv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class pv extends fv{data(e={}){return super.data(e)}}class gv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new pv(this._firestore,this._userDataWriter,n.key,n,new dv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wu(bu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new pv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new pv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:mv(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yu()}}function yv(e,t){return e instanceof fv&&t instanceof fv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof gv&&t instanceof gv&&e._firestore===t._firestore&&Sy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function vv(e){if($c(e)&&0===e.explicitOrderBy.length)throw new wu(bu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}function bv(e,...t){for(const n of t)e=n._apply(e);return e}class wv extends _v{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=By(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new wu(bu.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){kv(o,s);const t=[];for(const n of o)t.push(Av(r,e,n));a={arrayValue:{values:t}}}else a=Av(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||kv(o,s),a=Xy(n,"where",o,"in"===s||"not-in"===s);const u=Ic.create(i,s,a);return function(e,t){if(t.v()){const n=Hc(e);if(null!==n&&!n.isEqual(t.field))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=zc(e);null!==r&&xv(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new wu(bu.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new _y(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new qc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Tv extends _v{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new wu(bu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wu(bu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Fc(t,n);return function(e,t){if(null===zc(e)){const n=Hc(e);null!==n&&xv(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new _y(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new qc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Ev extends _v{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new _y(e.firestore,e.converter,Qc(e._query,this.Ga,this.za))}}class Sv extends _v{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Cv(e,this.type,this.Ha,this.Ja);return new _y(e.firestore,e.converter,(r=t,new qc((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,r,n.endAt)));var n,r}}class Iv extends _v{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Cv(e,this.type,this.Ha,this.Ja);return new _y(e.firestore,e.converter,(r=t,new qc((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,r)));var n,r}}function Cv(e,t,n,r){if(n[0]=(0,Kn.m9)(n[0]),n[0]instanceof cv)return function(e,t,n,r,i){if(!r)throw new wu(bu.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Kc(e))if(o.field.isKeyField())s.push(lc(t,r.key));else{const e=r.data.field(o.field);if(Qu(e))throw new wu(bu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new wu(bu.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Pc(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=By(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new wu(bu.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new wu(bu.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Gc(e)&&-1!==s.indexOf("/"))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Vu.fromString(s));if(!nc.isDocumentKey(n))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new nc(n);a.push(lc(t,i))}else{const e=Xy(n,r,s);a.push(e)}}return new Pc(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Av(e,t,n){if("string"==typeof(n=(0,Kn.m9)(n))){if(""===n)throw new wu(bu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gc(t)&&-1!==n.indexOf("/"))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Vu.fromString(n));if(!nc.isDocumentKey(r))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lc(e,new nc(r))}if(n instanceof vy)return lc(e,n._key);throw new wu(bu.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${fy(n)}.`)}function kv(e,t){if(!Array.isArray(e)||0===e.length)throw new wu(bu.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new wu(bu.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function xv(e,t,n){if(!n.isEqual(t))throw new wu(bu.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ov{convertValue(e,t="none"){switch(rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ku(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yu()}}convertObject(e,t){const n={};return Mu(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Fy(Ku(e.latitude),Ku(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Yu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new Lu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Vu.fromString(e);vu(jh(n));const r=new ay(n.get(1),n.get(3)),i=new nc(n.popFirst(5));return r.isEqual(t)||pu(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Nv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dv extends Ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new Py(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vy(this.firestore,null,t)}}class Rv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=By(e)}set(e,t,n){this._verifyNotCommitted();const r=Pv(e,this._firestore),i=Nv(r.converter,t,n),s=$y(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,bl.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Pv(e,this._firestore);let s;return s="string"==typeof(t=(0,Kn.m9)(t))||t instanceof Ry?Jy(this._dataReader,"WriteBatch.update",i._key,t,n,r):Yy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,bl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pv(e,this._firestore);return this._mutations=this._mutations.concat(new Rl(t._key,bl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new wu(bu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pv(e,t){if((e=(0,Kn.m9)(e)).firestore!==t)throw new wu(bu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Lv extends Ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new Py(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vy(this.firestore,null,t)}}function Fv(e,t,n){e=py(e,vy);const r=py(e.firestore,ky),i=Nv(e.converter,t,n);return Uv(r,[$y(By(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,bl.none())])}function Zv(e,t,n,...r){e=py(e,vy);const i=py(e.firestore,ky),s=By(i);let o;return o="string"==typeof(t=(0,Kn.m9)(t))||t instanceof Ry?Jy(s,"updateDoc",e._key,t,n,r):Yy(s,"updateDoc",e._key,t),Uv(i,[o.toMutation(e._key,bl.exists(!0))])}function Mv(e,...t){var n,r,i;e=(0,Kn.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Cy(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Cy(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof vy)c=py(e.firestore,ky),l=jc(e._key.path),u={next:n=>{t[o]&&t[o](qv(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=py(e,_y);c=py(n.firestore,ky),l=n._query;const r=new Lv(c);u={next:e=>{t[o]&&t[o](new gv(c,r,n,e))},error:t[o+1],complete:t[o+2]},vv(e._query)}return function(e,t,n,r){const i=new Um(r),s=new Ng(t,i,n);return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return Sg(yield ny(e),s)})),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return Cg(yield ny(e),s)}))}}(xy(c),l,a,u)}function Uv(e,t){return function(e,t){const n=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return function(e,t,n){return Kg.apply(this,arguments)}(yield ty(e),t,n)})),n.promise}(xy(e),t)}function qv(e,t,n){const r=n.docs.get(t._key),i=new Lv(e);return new fv(e,i,t._key,r,new dv(n.hasPendingWrites,n.fromCache),t.converter)}class Vv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=By(e)}get(e){const t=Pv(e,this._firestore),n=new Dv(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return yu();const r=e[0];if(r.isFoundDocument())return new cv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new cv(this._firestore,n,t._key,null,t.converter);throw yu()})}set(e,t,n){const r=Pv(e,this._firestore),i=Nv(r.converter,t,n),s=$y(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=Pv(e,this._firestore);let s;return s="string"==typeof(t=(0,Kn.m9)(t))||t instanceof Ry?Jy(this._dataReader,"Transaction.update",i._key,t,n,r):Yy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=Pv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pv(e,this._firestore),n=new Lv(this._firestore);return super.get(e).then(e=>new fv(this._firestore,n,t._key,e._document,new dv(!1,!1),t.converter))}}function jv(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wu("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Bv(){if("undefined"==typeof Uint8Array)throw new wu("unimplemented","Uint8Arrays are not available in this environment.")}function $v(){if("undefined"==typeof atob)throw new wu("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(e){lu=e})(Hn.SDK_VERSION),(0,Hn._registerComponent)(new Gn.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new ky(n,new Cu(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,Hn.registerVersion)(uu,"3.1.1",void 0),(0,Hn.registerVersion)(uu,"3.1.1","esm2017");class zv{constructor(e){this._delegate=e}static fromBase64String(e){return $v(),new zv(Py.fromBase64String(e))}static fromUint8Array(e){return Bv(),new zv(Py.fromUint8Array(e))}toBase64(){return $v(),this._delegate.toBase64()}toUint8Array(){return Bv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Gv{enableIndexedDbPersistence(e,t){return function(e,t){Dy(e=py(e,ky));const n=xy(e),r=e._freezeSettings(),i=new Zm;return Ny(n,i,new Lm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Dy(e=py(e,ky));const t=xy(e),n=e._freezeSettings(),r=new Zm;return Ny(t,r,new Fm(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new wu(bu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Tu;return e._queue.enqueueAndForgetEvenWhileRestricted((0,zn.Z)(function*(){try{yield(n=(0,zn.Z)(function*(e){if(!pd.bt())return Promise.resolve();const t=e+"main";yield pd.delete(t)}),function(e){return n.apply(this,arguments)})(Af(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}var n})),t.promise}(e._delegate)}}class Kv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof ay||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=py(e,yy))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&gu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cu.MOCK_USER;else{t=(0,Kn.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new wu(bu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cu(s)}e._credentials=new Iu(new Eu(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,zn.Z)(function*(){const t=yield Jm(e),n=yield ey(e);return t.setNetworkEnabled(!0),function(e){const t=_u(e);return t.Kr.delete(0),Dp(t)}(n)}))}(xy(e=py(e,ky)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,zn.Z)(function*(){const t=yield Jm(e),n=yield ey(e);return t.setNetworkEnabled(!1),(r=(0,zn.Z)(function*(e){const t=_u(e);t.Kr.add(0),yield Pp(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(xy(e=py(e,ky)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ly("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return function(e,t){return im.apply(this,arguments)}(yield ty(e),t)})),t.promise}(xy(e=py(e,ky)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new Um(t);return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return t=yield ny(e),r=n,_u(t).Zr.add(r),void r.next();var t,r})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return t=yield ny(e),r=n,void _u(t).Zr.delete(r);var t,r}))}}(xy(e=py(e,ky)),Cy(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new wu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new u_(this,wy(this._delegate,e))}catch(t){throw e_(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xv(this,Ty(this._delegate,e))}catch(t){throw e_(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new s_(this,function(e,t){if(e=py(e,yy),cy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wu(bu.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _y(e,null,(n=t,new qc(Vu.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw e_(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){const r=yield(i=e,Qm(i).then(e=>e.datastore));var i;new jm(e.asyncQueue,r,t,n).run()})),n.promise}(xy(e),n=>t(new Vv(e,n)))}(this._delegate,t=>e(new Qv(this,t)))}batch(){return xy(this._delegate),new Yv(new Rv(this._delegate,e=>Uv(this._delegate,e)))}loadBundle(e){return function(e,t){const n=xy(e=py(e,ky)),r=new Ay;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,r=function(e,t){if(e instanceof Uint8Array)return Mm(e,t);if(e instanceof ArrayBuffer)return Mm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),new qm(r,t);var r}(n,Sp(t));e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){!function(e,t,n){const r=_u(e);var i;(i=(0,zn.Z)(function*(e,t,n){try{const i=yield t.getMetadata();if(yield function(e,t){const n=_u(e),r=mh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,i))return yield t.close(),void n._completeWith((r=i,{taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}));n._updateProgress(Lg(i));const s=new Pg(i,e.localStore,t.N);let o=yield t.Qo();for(;o;){const e=yield s.fo(o);e&&n._updateProgress(e),o=yield t.Qo()}const a=yield s.complete();yield dm(e,a.En,void 0),yield function(e,t){const n=_u(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,i),n._completeWith(a.progress)}catch(i){gu("SyncEngine",`Loading bundle failed with ${i}`),n._failWith(i)}var r}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield ty(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,zn.Z)(function*(){return function(e,t){const n=_u(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield Xm(e),t)}))}(xy(e=py(e,ky)),t).then(t=>t?new _y(e,null,t.query):null)}(this._delegate,e).then(e=>e?new s_(this,e):null)}}class Wv extends Ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new zv(new Py(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xv.forKey(t,this.firestore,null)}}class Qv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wv(e)}get(e){const t=c_(e);return this._delegate.get(t).then(e=>new r_(this._firestore,new fv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=c_(e);return n?(jv("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=c_(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=c_(e);return this._delegate.delete(t),this}}class Yv{constructor(e){this._delegate=e}set(e,t,n){const r=c_(e);return n?(jv("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=c_(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=c_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new pv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new i_(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Jv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Jv(e,new Wv(e),t),r.set(t,i)),i}}Jv.INSTANCES=new WeakMap;class Xv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wv(e)}static forPath(e,t,n){if(e.length%2!=0)throw new wu("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xv(t,new vy(t._delegate,n,new nc(e)))}static forKey(e,t,n){return new Xv(t,new vy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new u_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new u_(this.firestore,wy(this._delegate,e))}catch(t){throw e_(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kn.m9)(e))instanceof vy&&Ey(this._delegate,e)}set(e,t){t=jv("DocumentReference.set",t);try{return t?Fv(this._delegate,e,t):Fv(this._delegate,e)}catch(n){throw e_(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Zv(this._delegate,e):Zv(this._delegate,e,t,...n)}catch(r){throw e_(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Uv(py(e.firestore,ky),[new Rl(e._key,bl.none())])}(this._delegate)}onSnapshot(...e){const t=t_(e),n=n_(e,e=>new r_(this.firestore,new fv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Mv(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=py(e,vy);const t=py(e.firestore,ky),n=xy(t),r=new Lv(t);return function(e,t){const n=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return(r=(0,zn.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=_u(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new wu(bu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){const e=vg(r,`Failed to get document '${t} from cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield Xm(e),t,n);var r})),n.promise}(n,e._key).then(n=>new fv(t,r,e._key,n,new dv(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=py(e,vy);const t=py(e.firestore,ky);return iy(xy(t),e._key,{source:"server"}).then(n=>qv(t,e,n))}(this._delegate):function(e){e=py(e,vy);const t=py(e.firestore,ky);return iy(xy(t),e._key).then(n=>qv(t,e,n))}(this._delegate),t.then(e=>new r_(this.firestore,new fv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Xv(this.firestore,this._delegate.withConverter(e?Jv.getInstance(this.firestore,e):null))}}function e_(e,t,n){return e.message=e.message.replace(t,n),e}function t_(e){for(const t of e)if("object"==typeof t&&!Hv(t))return t;return{}}function n_(e,t){var n,r;let i;return i=Hv(e[0])?e[0]:Hv(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class r_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yv(this._delegate,e._delegate)}}class i_ extends r_{data(e){const t=this._delegate.data(e);return function(e,t){e||yu()}(void 0!==t),t}}class s_{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wv(e)}where(e,t,n){try{return new s_(this.firestore,bv(this._delegate,function(e,t,n){const r=t,i=hv("where",e);return new wv(i,r,n)}(e,t,n)))}catch(r){throw e_(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new s_(this.firestore,bv(this._delegate,function(e,t="asc"){const n=t,r=hv("orderBy",e);return new Tv(r,n)}(e,t)))}catch(n){throw e_(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new s_(this.firestore,bv(this._delegate,function(e){return gy("limit",e),new Ev("limit",e,"F")}(e)))}catch(t){throw e_(t,"limit()","Query.limit()")}}limitToLast(e){try{return new s_(this.firestore,bv(this._delegate,function(e){return gy("limitToLast",e),new Ev("limitToLast",e,"L")}(e)))}catch(t){throw e_(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new s_(this.firestore,bv(this._delegate,function(...e){return new Sv("startAt",e,!0)}(...e)))}catch(t){throw e_(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new s_(this.firestore,bv(this._delegate,function(...e){return new Sv("startAfter",e,!1)}(...e)))}catch(t){throw e_(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new s_(this.firestore,bv(this._delegate,function(...e){return new Iv("endBefore",e,!0)}(...e)))}catch(t){throw e_(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new s_(this.firestore,bv(this._delegate,function(...e){return new Iv("endAt",e,!1)}(...e)))}catch(t){throw e_(t,"endAt()","Query.endAt()")}}isEqual(e){return Sy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=py(e,_y);const t=py(e.firestore,ky),n=xy(t),r=new Lv(t);return function(e,t){const n=new Tu;return e.asyncQueue.enqueueAndForget((0,zn.Z)(function*(){return(r=(0,zn.Z)(function*(e,t,n){try{const r=yield $f(e,t,!0),i=new Mg(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(r){const e=vg(r,`Failed to execute query '${t} against cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield Xm(e),t,n);var r})),n.promise}(n,e._query).then(n=>new gv(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=py(e,_y);const t=py(e.firestore,ky),n=xy(t),r=new Lv(t);return sy(n,e._query,{source:"server"}).then(n=>new gv(t,r,e,n))}(this._delegate):function(e){e=py(e,_y);const t=py(e.firestore,ky),n=xy(t),r=new Lv(t);return vv(e._query),sy(n,e._query).then(n=>new gv(t,r,e,n))}(this._delegate),t.then(e=>new a_(this.firestore,new gv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=t_(e),n=n_(e,e=>new a_(this.firestore,new gv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Mv(this._delegate,t,n)}withConverter(e){return new s_(this.firestore,this._delegate.withConverter(e?Jv.getInstance(this.firestore,e):null))}}class o_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new i_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class a_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new s_(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new i_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new o_(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new i_(this._firestore,n))})}isEqual(e){return yv(this._delegate,e._delegate)}}class u_ extends s_{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xv(this.firestore,e):null}doc(e){try{return new Xv(this.firestore,void 0===e?Ty(this._delegate):Ty(this._delegate,e))}catch(t){throw e_(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=py(e.firestore,ky),r=Ty(e),i=Nv(e.converter,t);return Uv(n,[$y(By(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,bl.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Xv(this.firestore,e))}isEqual(e){return Ey(this._delegate,e._delegate)}withConverter(e){return new u_(this.firestore,this._delegate.withConverter(e?Jv.getInstance(this.firestore,e):null))}}function c_(e){return py(e,vy)}class l_{constructor(...e){this._delegate=new Ry(...e)}static documentId(){return new l_(Bu.keyField().canonicalString())}isEqual(e){return(e=(0,Kn.m9)(e))instanceof Ry&&this._delegate._internalPath.isEqual(e._internalPath)}}class h_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Gy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new h_(e)}static delete(){const e=new zy("deleteField");return e._methodName="FieldValue.delete",new h_(e)}static arrayUnion(...e){const t=function(...e){return new Ky("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new h_(t)}static arrayRemove(...e){const t=function(...e){return new Wy("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new h_(t)}static increment(e){const t=function(e){return new Qy("increment",e)}(e);return t._methodName="FieldValue.increment",new h_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const d_={Firestore:Kv,GeoPoint:Fy,Timestamp:Lu,Blob:zv,Transaction:Qv,WriteBatch:Yv,DocumentReference:Xv,DocumentSnapshot:r_,Query:s_,QueryDocumentSnapshot:i_,QuerySnapshot:a_,CollectionReference:u_,FieldPath:l_,FieldValue:h_,setLogLevel:function(e){!function(e){hu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function f_(e,t){return function(e,t=Ur.z){return new De.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function p_(e,t){return f_(e,t).pipe((0,Pe.U)(e=>({payload:e,type:"query"})))}function g_(e,t){return p_(e,t).pipe(Br(void 0),$r(),(0,Pe.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function m_(e,t,n){return g_(e,n).pipe(Gr((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return y_(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return y_(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return y_(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new Qr(void 0,void 0)),(0,Pe.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function y_(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function v_(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}!function(e){(function(e,t){e.INTERNAL.registerComponent(new Gn.wA("firestore-compat",e=>((e,t)=>new Kv(e,t,new Gv))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},d_)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.4")}(Xr.Z);class __{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=g_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(Br(void 0),$r(),Sn(([e,t])=>t.length>0||!e),(0,Pe.U)(([e,t])=>t),Bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gr((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=v_(e);return m_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return p_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),Bn.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(Bn.iC)}add(e){return this.ref.add(e)}doc(e){return new b_(this.ref.doc(e),this.afs)}}class b_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=C_(n,t);return new __(r,i,this.afs)}snapshotChanges(){return function(e,t){return f_(e,t).pipe(Br(void 0),$r(),(0,Pe.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(Bn.iC)}}class w_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?g_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Sn(e=>e.length>0),Bn.iC):g_(this.query,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Gr((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=v_(e);return m_(this.query,t,this.afs.schedulers.outsideAngular).pipe(Bn.iC)}valueChanges(e={}){return p_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pe.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),Bn.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(Bn.iC)}}const T_=new r.OlP("angularfire2.enableFirestorePersistence"),E_=new r.OlP("angularfire2.firestore.persistenceSettings"),S_=new r.OlP("angularfire2.firestore.settings"),I_=new r.OlP("angularfire2.firestore.use-emulator");function C_(e,t=(e=>e)){return{query:t(e),ref:e}}let A_=(()=>{class e{constructor(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){this.schedulers=o;const y=(0,$n.on)(e,s,t),v=u;c&&Lr(y,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,$n.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const e=s.runOutsideAngular(()=>y.firestore());if(r&&e.settings(r),v&&e.useEmulator(...v),n&&!W(i)){const t=()=>{try{return(0,Ne.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,un.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,un.of)(!1)]},[r,v,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=C_(n,t),s=this.schedulers.ngZone.run(()=>r);return new __(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new w_(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new b_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG($n.Dh),r.LFG($n.xv,8),r.LFG(T_,8),r.LFG(S_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Bn.HU),r.LFG(E_,8),r.LFG(I_,8),r.LFG(Fr,8),r.LFG(xr,8),r.LFG(Or,8),r.LFG(Nr,8),r.LFG(Dr,8),r.LFG(Rr,8),r.LFG(Pr,8),r.LFG(Ar,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),k_=(()=>{class e{constructor(e){this.af=e}getUsuarioPorEmail(e){return this.af.collection("usuarios",t=>t.where("email","==",e)).valueChanges({idField:"id"})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(A_))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class x_{}const O_="*";function N_(e,t){return{type:7,name:e,definitions:t,options:{}}}function D_(e,t=null){return{type:4,styles:t,timings:e}}function R_(e,t=null){return{type:2,steps:e,options:t}}function P_(e){return{type:6,styles:e,offset:null}}function L_(e,t,n){return{type:0,name:e,styles:t,options:n}}function F_(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function Z_(e){Promise.resolve(null).then(e)}class M_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Z_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class U_{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const i=this.players.length;0==i?Z_(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==i&&this._onFinish()}),e.onDestroy(()=>{++n==i&&this._onDestroy()}),e.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const q_=["toast-component",""];function V_(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(e),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function j_(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.hij("[",e.duplicatesCount+1,"]")}}function B_(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,j_,2,1,"ng-container",4),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.titleClass),r.uIk("aria-label",e.title),r.xp6(1),r.hij(" ",e.title," "),r.xp6(1),r.Q6J("ngIf",e.duplicatesCount)}}function $_(e,t){if(1&e&&r._UZ(0,"div",7),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.Q6J("innerHTML",e.message,r.oJD)}}function z_(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.uIk("aria-label",e.message),r.xp6(1),r.hij(" ",e.message," ")}}function H_(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Udp("width",e.width+"%")}}function G_(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(e),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function K_(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.hij("[",e.duplicatesCount+1,"]")}}function W_(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,K_,2,1,"ng-container",4),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.titleClass),r.uIk("aria-label",e.title),r.xp6(1),r.hij(" ",e.title," "),r.xp6(1),r.Q6J("ngIf",e.duplicatesCount)}}function Q_(e,t){if(1&e&&r._UZ(0,"div",7),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.Q6J("innerHTML",e.message,r.oJD)}}function Y_(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.uIk("aria-label",e.message),r.xp6(1),r.hij(" ",e.message," ")}}function J_(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Udp("width",e.width+"%")}}class X_{constructor(e,t,n,r,i,s){this.toastId=e,this.config=t,this.message=n,this.title=r,this.toastType=i,this.toastRef=s,this._onTap=new an.xQ,this._onAction=new an.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const eb={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},tb=new r.OlP("ToastConfig");class nb{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class rb extends class{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,n){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=n}attachComponentPortal(e,t){const n=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=n.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let ib=(()=>{class e{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})();class sb{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let ob=(()=>{class e{constructor(e,t,n,r){this._overlayContainer=e,this._componentFactoryResolver=t,this._appRef=n,this._document=r,this._paneElements=new Map}create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(e){return new rb(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new sb(this._createPortalHost(e))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ib),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(ib),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},token:e,providedIn:"root"}),e})();class ab{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new an.xQ,this._activate=new an.xQ,this._manualClose=new an.xQ,this._resetTimeout=new an.xQ,this._countDuplicate=new an.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ub{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,n){return e===X_?this._toastPackage:this._parentInjector.get(e,t,n)}}let cb=(()=>{class e{constructor(e,t,n,r,i){this.overlay=t,this._injector=n,this.sanitizer=r,this.ngZone=i,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},e.default.iconClasses),e.config.iconClasses))}show(e,t,n={},r=""){return this._preBuildNotification(r,e,t,this.applyConfig(n))}success(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,t,this.applyConfig(n))}error(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,t,this.applyConfig(n))}info(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,t,this.applyConfig(n))}warning(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,t,this.applyConfig(n))}clear(e){for(const t of this.toasts)if(void 0!==e){if(t.toastId===e)return void t.toastRef.manualClose()}else t.toastRef.manualClose()}remove(e){const t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const e=this.toasts[this.currentlyActive].toastRef;e.isInactive()||(this.currentlyActive=this.currentlyActive+1,e.activate())}return!0}findDuplicate(e="",t="",n,r){const{includeTitleDuplicates:i}=this.toastrConfig;for(const s of this.toasts){const o=i&&s.title===e;if((!i||o)&&s.message===t)return s.toastRef.onDuplicate(n,r),s}return null}applyConfig(e={}){return Object.assign(Object.assign({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,n,r)):this._buildNotification(e,t,n,r)}_buildNotification(e,t,n,i){if(!i.toastComponent)throw new Error("toastComponent required");const s=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&i.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&null!==s)return s;this.previousToastMessage=t;let o=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(o=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(i.positionClass,this.overlayContainer);this.index=this.index+1;let u=t;t&&i.enableHtml&&(u=this.sanitizer.sanitize(r.q3G.HTML,t));const c=new ab(a),l=new X_(this.index,i,u,n,e,c),h=new ub(l,this._injector),d=new nb(i.toastComponent,h),f=a.attach(d,this.toastrConfig.newestOnTop);c.componentInstance=f.instance;const p={toastId:this.index,title:n||"",message:t||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:l.onTap(),onAction:l.onAction(),portal:f};return o||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{p.toastRef.activate()})),this.toasts.push(p),p}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(tb),r.LFG(ob),r.LFG(r.zs3),r.LFG(Ce),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(tb),r.LFG(ob),r.LFG(r.gxx),r.LFG(Ce),r.LFG(r.R0b))},token:e,providedIn:"root"}),e})(),lb=(()=>{class e{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(cb),r.Y36(X_),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(r.d8E("@flyInOut",t.state),r.Tol(t.toastClasses),r.Udp("display",t.displayStyle))},attrs:q_,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(r.YNc(0,V_,3,0,"button",0),r.YNc(1,B_,3,5,"div",1),r.YNc(2,$_,1,3,"div",2),r.YNc(3,z_,2,4,"div",3),r.YNc(4,H_,2,2,"div",4)),2&e&&(r.Q6J("ngIf",t.options.closeButton),r.xp6(1),r.Q6J("ngIf",t.title),r.xp6(1),r.Q6J("ngIf",t.message&&t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.message&&!t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.options.progressBar))},directives:[M],encapsulation:2,data:{animation:[N_("flyInOut",[L_("inactive",P_({opacity:0})),L_("active",P_({opacity:1})),L_("removed",P_({opacity:0})),F_("inactive => active",D_("{{ easeTime }}ms {{ easing }}")),F_("active => removed",D_("{{ easeTime }}ms {{ easing }}"))])]}}),e})();const hb=Object.assign(Object.assign({},eb),{toastComponent:lb});let db=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:tb,useValue:{default:hb,config:t}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[K]]}),e})(),fb=(()=>{class e{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(cb),r.Y36(X_),r.Y36(r.z2F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(r.Tol(t.toastClasses),r.Udp("display",t.displayStyle))},attrs:q_,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(r.YNc(0,G_,3,0,"button",0),r.YNc(1,W_,3,5,"div",1),r.YNc(2,Q_,1,3,"div",2),r.YNc(3,Y_,2,4,"div",3),r.YNc(4,J_,2,2,"div",4)),2&e&&(r.Q6J("ngIf",t.options.closeButton),r.xp6(1),r.Q6J("ngIf",t.title),r.xp6(1),r.Q6J("ngIf",t.message&&t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.message&&!t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.options.progressBar))},directives:[M],encapsulation:2}),e})();Object.assign(Object.assign({},eb),{toastComponent:fb});class pb extends an.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new yn.N;return this._value}next(e){super.next(this._value=e)}}class gb extends En.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class mb extends En.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var yb=n(7444);function vb(e,t,n,r,i=new mb(e,n,r)){if(!i.closed)return t instanceof De.y?t.subscribe(i):(0,yb.s)(t)(i)}var _b=n(6693);const bb={};class wb{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Tb(e,this.resultSelector))}}class Tb extends gb{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(bb),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(vb(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===bb?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function Eb(e){return new De.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Ne.D)(n):(0,kn.c)()).subscribe(t)})}var Sb=n(2441);function Ib(e){return function(t){const n=new Cb(e),r=t.lift(n);return n.caught=r}}class Cb{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Ab(e,this.selector,this.caught))}}class Ab extends hn.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new hn.IY(this);this.add(r);const i=(0,hn.ft)(n,r);i!==r&&this.add(i)}}}var kb=n(9773);function xb(e,t){return(0,kb.zg)(e,t,1)}function Ob(e){return function(t){return 0===e?(0,kn.c)():t.lift(new Nb(e))}}class Nb{constructor(e){if(this.total=e,this.total<0)throw new An}call(e,t){return t.subscribe(new Db(e,this.total))}}class Db extends En.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var Rb=n(3342),Pb=n(1307);class Lb{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Fb(e,this.callback))}}class Fb extends En.L{constructor(e,t){super(e),this.add(new mn.w(t))}}class Zb{constructor(e,t){this.id=e,this.url=t}}class Mb extends Zb{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ub extends Zb{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qb extends Zb{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vb extends Zb{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jb extends Zb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bb extends Zb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $b extends Zb{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zb extends Zb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hb extends Zb{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kb{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wb{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qb{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yb{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jb{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xb{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ew="primary";class tw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nw(e){return new tw(e)}const rw="ngNavigationCancelingError";function iw(e){const t=Error("NavigationCancelingError: "+e);return t[rw]=!0,t}function sw(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ow(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!aw(e[i],t[i]))return!1;return!0}function aw(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function uw(e){return Array.prototype.concat.apply([],e)}function cw(e){return e.length>0?e[e.length-1]:null}function lw(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function hw(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,Ne.D)(Promise.resolve(e)):(0,un.of)(e)}const dw={exact:function e(t,n,r){if(!ww(t.segments,n.segments)||!yw(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:gw},fw={exact:function(e,t){return ow(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>aw(e[n],t[n]))},ignored:()=>!0};function pw(e,t,n){return dw[n.paths](e.root,t.root,n.matrixParams)&&fw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function gw(e,t,n){return mw(e,t,t.segments,n)}function mw(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!ww(i,n)||t.hasChildren()||!yw(i,n,r))}if(e.segments.length===n.length){if(!ww(e.segments,n)||!yw(e.segments,n,r))return!1;for(const n in t.children)if(!e.children[n]||!gw(e.children[n],t.children[n],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(ww(e.segments,i)&&yw(e.segments,i,r)&&e.children[ew])&&mw(e.children[ew],t,s,r)}}function yw(e,t,n){return t.every((t,r)=>fw[n](e[r].parameters,t.parameters))}class vw{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nw(this.queryParams)),this._queryParamMap}toString(){return Sw.serialize(this)}}class _w{constructor(e,t){this.segments=e,this.children=t,this.parent=null,lw(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iw(this)}}class bw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nw(this.parameters)),this._parameterMap}toString(){return Dw(this)}}function ww(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Tw{}class Ew{parse(e){const t=new Zw(e);return new vw(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${Cw(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${kw(t)}=${kw(e)}`).join("&"):`${kw(t)}=${kw(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(e){return encodeURI(e)}(e.fragment)}`:""}`}}const Sw=new Ew;function Iw(e){return e.segments.map(e=>Dw(e)).join("/")}function Cw(e,t){if(!e.hasChildren())return Iw(e);if(t){const t=e.children[ew]?Cw(e.children[ew],!1):"",n=[];return lw(e.children,(e,t)=>{t!==ew&&n.push(`${t}:${Cw(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return lw(e.children,(e,r)=>{r===ew&&(n=n.concat(t(e,r)))}),lw(e.children,(e,r)=>{r!==ew&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===ew?[Cw(e.children[ew],!1)]:[`${n}:${Cw(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[ew]?`${Iw(e)}/${t[0]}`:`${Iw(e)}/(${t.join("//")})`}}function Aw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kw(e){return Aw(e).replace(/%3B/gi,";")}function xw(e){return Aw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ow(e){return decodeURIComponent(e)}function Nw(e){return Ow(e.replace(/\+/g,"%20"))}function Dw(e){return`${xw(e.path)}${function(e){return Object.keys(e).map(t=>`;${xw(t)}=${xw(e[t])}`).join("")}(e.parameters)}`}const Rw=/^[^\/()?;=#]+/;function Pw(e){const t=e.match(Rw);return t?t[0]:""}const Lw=/^[^=?&#]+/,Fw=/^[^?&#]+/;class Zw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _w([],{}):new _w([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[ew]=new _w(e,t)),n}parseSegment(){const e=Pw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new bw(Ow(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Pw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=Pw(this.remaining);e&&(n=e,this.capture(n))}e[Ow(t)]=Ow(n)}parseQueryParam(e){const t=function(e){const t=e.match(Lw);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Fw);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Nw(t),i=Nw(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Pw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ew);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[ew]:new _w([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Mw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Uw(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Uw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return qw(e,this._root).map(e=>e.value)}}function Uw(e,t){if(e===t.value)return t;for(const n of t.children){const t=Uw(e,n);if(t)return t}return null}function qw(e,t){if(e===t.value)return[t];for(const n of t.children){const r=qw(e,n);if(r.length)return r.unshift(t),r}return[]}class Vw{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jw(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Bw extends Mw{constructor(e,t){super(e),this.snapshot=t,Ww(this,e)}toString(){return this.snapshot.toString()}}function $w(e,t){const n=function(e,t){const n=new Gw([],{},{},"",{},ew,t,null,e.root,-1,{});return new Kw("",new Vw(n,[]))}(e,t),r=new pb([new bw("",{})]),i=new pb({}),s=new pb({}),o=new pb({}),a=new pb(""),u=new zw(r,i,o,a,s,ew,t,n.root);return u.snapshot=n.root,new Bw(new Vw(u,[]),n)}class zw{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Pe.U)(e=>nw(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Pe.U)(e=>nw(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hw(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Gw{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nw(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nw(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kw extends Mw{constructor(e,t){super(t),this.url=e,Ww(this,t)}toString(){return Qw(this._root)}}function Ww(e,t){t.value._routerState=e,t.children.forEach(t=>Ww(e,t))}function Qw(e){const t=e.children.length>0?` { ${e.children.map(Qw).join(", ")} } `:"";return`${e.value}${t}`}function Yw(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ow(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ow(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ow(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ow(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Jw(e,t){return ow(e.params,t.params)&&function(e,t){return ww(e,t)&&e.every((e,n)=>ow(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Jw(e.parent,t.parent))}function Xw(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return Xw(e,t,r);return Xw(e,t)})}(e,t,n);return new Vw(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return eT(t,e),e}}const n=function(e){return new zw(new pb(e.url),new pb(e.params),new pb(e.queryParams),new pb(e.fragment),new pb(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(t=>Xw(e,t));return new Vw(n,r)}}function eT(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)eT(e.children[n],t.children[n])}function tT(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function nT(e){return"object"==typeof e&&null!=e&&e.outlets}function rT(e,t,n,r,i){let s={};return r&&lw(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new vw(n.root===e?t:iT(n.root,e,t),s,i)}function iT(e,t,n){const r={};return lw(e.children,(e,i)=>{r[i]=e===t?n:iT(e,t,n)}),new _w(e.segments,r)}class sT{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&tT(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(nT);if(r&&r!==cw(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oT{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function aT(e,t,n){if(e||(e=new _w([],{})),0===e.segments.length&&e.hasChildren())return uT(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(nT(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!dT(a,u,t))return s;r+=2}else{if(!dT(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new _w(e.segments.slice(0,r.pathIndex),{});return t.children[ew]=new _w(e.segments.slice(r.pathIndex),e.children),uT(t,0,i)}return r.match&&0===i.length?new _w(e.segments,{}):r.match&&!e.hasChildren()?cT(e,t,n):r.match?uT(e,0,i):cT(e,t,n)}function uT(e,t,n){if(0===n.length)return new _w(e.segments,{});{const r=function(e){return nT(e[0])?e[0].outlets:{[ew]:e}}(n),i={};return lw(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=aT(e.children[r],t,n))}),lw(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new _w(e.segments,i)}}function cT(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(nT(s)){const e=lT(s.outlets);return new _w(r,e)}if(0===i&&tT(n[0])){r.push(new bw(e.segments[t].path,hT(n[0]))),i++;continue}const o=nT(s)?s.outlets[ew]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&tT(a)?(r.push(new bw(o,hT(a))),i+=2):(r.push(new bw(o,{})),i++)}return new _w(r,{})}function lT(e){const t={};return lw(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=cT(new _w([],{}),0,e))}),t}function hT(e){const t={};return lw(e,(e,n)=>t[n]=`${e}`),t}function dT(e,t,n){return e==n.path&&ow(t,n.parameters)}class fT{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Yw(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=jw(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),lw(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=jw(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=jw(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Jb(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Qb(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Yw(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),pT(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function pT(e){Yw(e.value),e.children.forEach(pT)}class gT{constructor(e,t){this.routes=e,this.module=t}}function mT(e){return"function"==typeof e}function yT(e){return e instanceof vw}const vT=Symbol("INITIAL_VALUE");function _T(){return dn(e=>function(...e){let t,n;return(0,jr.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,Re.k)(e[0])&&(e=e[0]),(0,_b.n)(e,n).lift(new wb(t))}(e.map(e=>e.pipe(xn(1),Br(vT)))).pipe(Gr((e,t)=>{let n=!1;return t.reduce((e,r,i)=>e!==vT?e:(r===vT&&(n=!0),n||!1!==r&&i!==t.length-1&&!yT(r)?e:r),e)},vT),Sn(e=>e!==vT),(0,Pe.U)(e=>yT(e)?e:!0===e),xn(1)))}let bT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[_E]},encapsulation:2}),e})();function wT(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];TT(r,ET(t,r))}}function TT(e,t){e.children&&wT(e.children,t)}function ET(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function ST(e){const t=e.children&&e.children.map(ST),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ew&&(n.component=bT),n}function IT(e){return e.outlet||ew}function CT(e,t){const n=e.filter(e=>IT(e)===t);return n.push(...e.filter(e=>IT(e)!==t)),n}const AT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function kT(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},AT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||sw)(n,e,t);if(!i)return Object.assign({},AT);const s={};lw(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function xT(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>OT(e,t,n)&&IT(n)!==ew)}(e,n,r)){const i=new _w(t,function(e,t,n,r){const i={};i[ew]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&IT(s)!==ew){const n=new _w([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[IT(s)]=n}return i}(e,t,r,new _w(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>OT(e,t,n))}(e,n,r)){const s=new _w(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(OT(e,n,a)&&!i[IT(a)]){const n=new _w([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[IT(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new _w(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function OT(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function NT(e,t,n,r){return!!(IT(e)===r||r!==ew&&OT(t,n,e))&&("**"===e.path||kT(t,e,n).matched)}function DT(e,t,n){return 0===t.length&&!e.children[n]}class RT{constructor(e){this.segmentGroup=e||null}}class PT{constructor(e){this.urlTree=e}}function LT(e){return new De.y(t=>t.error(new RT(e)))}function FT(e){return new De.y(t=>t.error(new PT(e)))}function ZT(e){return new De.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class MT{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=xT(this.urlTree.root,[],[],this.config).segmentGroup,t=new _w(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ew).pipe((0,Pe.U)(e=>this.createUrlTree(UT(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ib(e=>{if(e instanceof PT)return this.allowRedirects=!1,this.match(e.urlTree);throw e instanceof RT?this.noMatchError(e):e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ew).pipe((0,Pe.U)(t=>this.createUrlTree(UT(t),e.queryParams,e.fragment))).pipe(Ib(e=>{throw e instanceof RT?this.noMatchError(e):e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new _w([],{[ew]:e}):e;return new vw(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Pe.U)(e=>new _w([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Ne.D)(r).pipe(xb(r=>{const i=n.children[r],s=CT(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Pe.U)(e=>({segment:e,outlet:r})))}),Gr((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Sn((t,n)=>e(t,n,r)):Un.y,Ob(1),n?Dn(t):Ln(()=>new Tn))}())}expandSegment(e,t,n,r,i,s){return(0,Ne.D)(n).pipe(xb(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(Ib(e=>{if(e instanceof RT)return(0,un.of)(null);throw e}))),qn(e=>!!e),Ib((e,n)=>{if(e instanceof Tn||"EmptyError"===e.name){if(DT(t,r,i))return(0,un.of)(new _w([],{}));throw new RT(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return NT(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):LT(t):LT(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?FT(i):this.lineralizeSegments(n,i).pipe((0,kb.zg)(n=>{const i=new _w(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=kT(t,r,i);if(!o)return LT(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?FT(l):this.lineralizeSegments(r,l).pipe((0,kb.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,un.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Pe.U)(e=>(n._loadedConfig=e,new _w(r,{})))):(0,un.of)(new _w(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=kT(t,n,r);if(!s)return LT(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,kb.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=xT(t,o,u,s),l=new _w(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Pe.U)(e=>new _w(o,e)));if(0===s.length&&0===c.length)return(0,un.of)(new _w(o,{}));const h=IT(n)===i;return this.expandSegment(r,l,s,c,h?ew:i,!0).pipe((0,Pe.U)(e=>new _w(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,un.of)(new gT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,un.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,kb.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Pe.U)(e=>(t._loadedConfig=e,e))):function(e){return new De.y(t=>t.error(iw(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,un.of)(new gT([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,un.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&mT(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!mT(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return hw(s)});return(0,un.of)(i).pipe(_T(),(0,Rb.b)(e=>{if(!yT(e))return;const t=iw(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Pe.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,un.of)(n);if(r.numberOfChildren>1||!r.children[ew])return ZT(e.redirectTo);r=r.children[ew]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new vw(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return lw(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return lw(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new _w(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function UT(e){const t={};for(const n of Object.keys(e.children)){const r=UT(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children[ew]){const t=e.children[ew];return new _w(e.segments.concat(t.segments),t.children)}return e}(new _w(e.segments,t))}class qT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class VT{constructor(e,t){this.component=e,this.route=t}}function jT(e,t,n){const r=e._root;return $T(r,t?t._root:null,n,[r.value])}function BT(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function $T(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=jw(t);return e.children.forEach(e=>{(function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!ww(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ww(e.url,t.url)||!ow(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jw(e,t)||!ow(e.queryParams,t.queryParams);case"paramsChange":default:return!Jw(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qT(r)):(s.data=o.data,s._resolvedData=o._resolvedData),$T(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new VT(a.outlet.component,o))}else o&&zT(t,a,i),i.canActivateChecks.push(new qT(r)),$T(e,null,s.component?a?a.children:null:n,r,i)})(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),lw(s,(e,t)=>zT(e,n.getContext(t),i)),i}function zT(e,t,n){const r=jw(e),i=e.value;lw(r,(e,r)=>{zT(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new VT(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class HT{}function GT(e){return new De.y(t=>t.error(e))}class KT{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=xT(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ew);if(null===t)return null;const n=new Gw([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ew,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vw(n,t),i=new Kw(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=Hw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=CT(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=QT(n);return function(e){e.sort((e,t)=>e.value.outlet===ew?-1:t.value.outlet===ew?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return DT(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!NT(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?cw(n).parameters:{};i=new Gw(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,XT(e),IT(e),e.component,e,YT(t),JT(t)+n.length,eE(e))}else{const r=kT(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Gw(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,XT(e),IT(e),e.component,e,YT(t),JT(t)+s.length,eE(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=xT(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new Vw(i,e)]}if(0===a.length&&0===c.length)return[new Vw(i,[])];const l=IT(e)===r,h=this.processSegment(a,u,c,l?ew:r);return null===h?null:[new Vw(i,h)]}}function WT(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function QT(e){const t=[],n=new Set;for(const r of e){if(!WT(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=QT(r.children);t.push(new Vw(r.value,e))}return t.filter(e=>!n.has(e))}function YT(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function JT(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function XT(e){return e.data||{}}function eE(e){return e.resolve||{}}function tE(e){return dn(t=>{const n=e(t);return n?(0,Ne.D)(n).pipe((0,Pe.U)(()=>t)):(0,un.of)(t)})}class nE extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const rE=new r.OlP("ROUTES");class iE{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Pe.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new gT(uw(i.injector.get(rE,void 0,r.XFs.Self|r.XFs.Optional)).map(ST),i)}),Ib(e=>{throw t._loader$=void 0,e}));return t._loader$=new Sb.c(n,()=>new an.xQ).pipe((0,Pb.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Ne.D)(this.loader.load(e)):hw(e()).pipe((0,kb.zg)(e=>e instanceof r.YKP?(0,un.of)(e):(0,Ne.D)(this.compiler.compileModuleAsync(e))))}}class sE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new oE,this.attachRef=null}}class oE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new sE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class aE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uE(e){throw e}function cE(e,t,n){return t.parse("/")}function lE(e,t){return(0,un.of)(null)}const hE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fE=(()=>{class e{constructor(e,t,n,i,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new an.xQ,this.errorHandler=uE,this.malformedUriErrorHandler=cE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:lE,afterPreactivation:lE},this.urlHandlingStrategy=new aE,this.routeReuseStrategy=new nE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new vw(new _w([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iE(o,a,e=>this.triggerEvent(new Gb(e)),e=>this.triggerEvent(new Kb(e))),this.routerState=$w(this.currentUrlTree,this.rootComponentType),this.transitions=new pb({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(Sn(e=>0!==e.id),(0,Pe.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),dn(e=>{let n=!1,r=!1;return(0,un.of)(e).pipe((0,Rb.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dn(e=>{const n=this.browserUrlTree.toString(),i=!this.navigated||e.extractedUrl.toString()!==n||n!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||i)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return pE(e.source)&&(this.browserUrlTree=e.extractedUrl),(0,un.of)(e).pipe(dn(e=>{const n=this.transitions.getValue();return t.next(new Mb(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?kn.E:Promise.resolve(e)}),function(e,t,n,r){return dn(i=>function(e,t,n,r,i){return new MT(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,Pe.U)(e=>Object.assign(Object.assign({},i),{urlAfterRedirects:e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Rb.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,s){return(0,kb.zg)(o=>function(e,t,n,i,s="emptyOnly",o="legacy"){try{const r=new KT(e,t,n,i,s,o).recognize();return null===r?GT(new HT):(0,un.of)(r)}catch(r){return GT(r)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),i,s).pipe((0,Pe.U)(e=>Object.assign(Object.assign({},o),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rb.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new jb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Mb(n,this.serializeUrl(r),i,s);t.next(a);const u=$w(r,this.rootComponentType).snapshot;return(0,un.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),kn.E}),tE(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Rb.b)(e=>{const t=new Bb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Pe.U)(e=>Object.assign(Object.assign({},e),{guards:jT(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,kb.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,un.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Ne.D)(e).pipe((0,kb.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,un.of)(!0);const o=s.map(s=>{const o=BT(s,t,i);let a;if(function(e){return e&&mT(e.canDeactivate)}(o))a=hw(o.canDeactivate(e,t,n,r));else{if(!mT(o))throw new Error("Invalid CanDeactivate guard");a=hw(o(e,t,n,r))}return a.pipe(qn())});return(0,un.of)(o).pipe(_T())}(e.component,e.route,n,t,r)),qn(e=>!0!==e,!0))}(o,r,i,e).pipe((0,kb.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Ne.D)(t).pipe(xb(t=>Vr(function(e,t){return null!==e&&t&&t(new Wb(e)),(0,un.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Yb(e)),(0,un.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Eb(()=>{const i=t.guards.map(i=>{const s=BT(i,t.node,n);let o;if(function(e){return e&&mT(e.canActivateChild)}(s))o=hw(s.canActivateChild(r,e));else{if(!mT(s))throw new Error("Invalid CanActivateChild guard");o=hw(s(r,e))}return o.pipe(qn())});return(0,un.of)(i).pipe(_T())}));return(0,un.of)(i).pipe(_T())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,un.of)(!0);const i=r.map(r=>Eb(()=>{const i=BT(r,t,n);let s;if(function(e){return e&&mT(e.canActivate)}(i))s=hw(i.canActivate(t,e));else{if(!mT(i))throw new Error("Invalid CanActivate guard");s=hw(i(t,e))}return s.pipe(qn())}));return(0,un.of)(i).pipe(_T())}(e,t.route,n))),qn(e=>!0!==e,!0))}(r,s,e,t):(0,un.of)(n)),(0,Pe.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,Rb.b)(e=>{if(yT(e.guardsResult)){const t=iw(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new $b(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Sn(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),tE(e=>{if(e.guards.canActivateChecks.length)return(0,un.of)(e).pipe((0,Rb.b)(e=>{const t=new zb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),dn(e=>{let t=!1;return(0,un.of)(e).pipe(function(e,t){return(0,kb.zg)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return(0,un.of)(n);let s=0;return(0,Ne.D)(i).pipe(xb(n=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,un.of)({});const s={};return(0,Ne.D)(i).pipe((0,kb.zg)(i=>function(e,t,n,r){const i=BT(e,t,r);return hw(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Rb.b)(e=>{s[i]=e}))),Ob(1),(0,kb.zg)(()=>Object.keys(s).length===i.length?(0,un.of)(s):kn.E))}(e._resolve,e,t,r).pipe((0,Pe.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Hw(e,n).resolve),null)))}(n.route,r,e,t)),(0,Rb.b)(()=>s++),Ob(1),(0,kb.zg)(e=>s===i.length?(0,un.of)(n):kn.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Rb.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Rb.b)(e=>{const t=new Hb(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),tE(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Pe.U)(e=>{const t=function(e,t,n){const r=Xw(e,t._root,n?n._root:void 0);return new Bw(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,Rb.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),((e,t,n)=>(0,Pe.U)(r=>(new fT(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),(0,Rb.b)({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new Lb(e))}(()=>{var t;if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}(null===(t=this.currentNavigation)||void 0===t?void 0:t.id)===e.id&&(this.currentNavigation=null)}),Ib(n=>{if(r=!0,function(e){return e&&e[rw]}(n)){const r=yT(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new qb(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree),r={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pE(e.source)};this.scheduleNavigation(t,"imperative",null,r,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new Vb(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return kn.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){wT(e),this.config=e.map(ST),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return rT(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new sT(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return lw(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new sT(n,t,r)}(n);if(s.toRoot())return rT(t.root,new _w([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new oT(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new oT(e,e===t.root,0)}const r=tT(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new oT(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?uT(o.segmentGroup,o.index,s.commands):aT(o.segmentGroup,o.index,s.commands);return rT(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=yT(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},hE):!1===t?Object.assign({},dE):t,yT(e))return pw(this.currentUrlTree,e,n);const r=this.parseUrl(e);return pw(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ub(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u=pE(t)&&a&&!pE(a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new qb(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(Tw),r.LFG(oE),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function pE(e){return"imperative"!==e}let gE=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new an.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:yE(this.skipLocationChange),replaceUrl:yE(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yE(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fE),r.Y36(zw),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})(),mE=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new an.xQ,this.subscription=e.events.subscribe(e=>{e instanceof Ub&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i||"string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:yE(this.skipLocationChange),replaceUrl:yE(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yE(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fE),r.Y36(zw),r.Y36(m))},e.\u0275dir=r.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(r.Ikx("href",t.href,r.LSH),r.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})();function yE(e){return""===e||!!e}let vE=(()=>{class e{constructor(e,t,n,r,i,s){this.router=e,this.element=t,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(e=>{e instanceof Ub&&this.update()})}ngAfterContentInit(){(0,un.of)(this.links.changes,this.linksWithHrefs.changes,(0,un.of)(null)).pipe((0,qr.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(e=>!!e).map(e=>e.onChanges);this.linkInputChangesSubscription=(0,Ne.D)(t).pipe((0,qr.J)()).subscribe(e=>{this.isActive!==this.isLinkActive(this.router)(e)&&this.update()})}set routerLinkActive(e){const t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(e=>!!e)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}))})}isLinkActive(e){const t=function(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>e.isActive(n.urlTree,t)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fE),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(gE,8),r.Y36(mE,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){if(1&e&&(r.Suo(n,gE,5),r.Suo(n,mE,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.links=e),r.iGM(e=r.CRH())&&(t.linksWithHrefs=e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.TTD]}),e})(),_E=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||ew,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bE(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(oE),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class bE{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===zw?this.route:e===oE?this.childContexts:this.parent.get(e,t)}}class wE{}class TE{preload(e,t){return(0,un.of)(null)}}let EE=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new iE(t,n,t=>e.triggerEvent(new Gb(t)),t=>e.triggerEvent(new Kb(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Sn(e=>e instanceof Ub),xb(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,Ne.D)(n).pipe((0,qr.J)(),(0,Pe.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,un.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,kb.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fE),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(wE))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),SE=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Mb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ub&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Xb&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Xb(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fE),r.LFG(Q),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const IE=new r.OlP("ROUTER_CONFIGURATION"),CE=new r.OlP("ROUTER_FORROOT_GUARD"),AE=[w,{provide:Tw,useClass:Ew},{provide:fE,useFactory:function(e,t,n,r,i,s,o,a={},u,c){const l=new fE(null,e,t,n,r,i,s,uw(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Tw,oE,w,r.zs3,r.v3s,r.Sil,rE,IE,[class{},new r.FiY],[class{},new r.FiY]]},oE,{provide:zw,useFactory:function(e){return e.routerState.root},deps:[fE]},{provide:r.v3s,useClass:r.EAV},EE,TE,class{preload(e,t){return t().pipe(Ib(()=>(0,un.of)(null)))}},{provide:IE,useValue:{enableTracing:!1}}];function kE(){return new r.PXZ("Router",fE)}let xE=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[AE,RE(t),{provide:CE,useFactory:DE,deps:[[fE,new r.FiY,new r.tp0]]},{provide:IE,useValue:n||{}},{provide:m,useFactory:NE,deps:[a,[new r.tBr(v),new r.FiY],IE]},{provide:SE,useFactory:OE,deps:[fE,Q,IE]},{provide:wE,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:TE},{provide:r.PXZ,multi:!0,useFactory:kE},[PE,{provide:r.ip1,multi:!0,useFactory:LE,deps:[PE]},{provide:ZE,useFactory:FE,deps:[PE]},{provide:r.tb,multi:!0,useExisting:ZE}]]}}static forChild(t){return{ngModule:e,providers:[RE(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(CE,8),r.LFG(fE,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function OE(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new SE(e,t,n)}function NE(e,t,n={}){return n.useHash?new b(e,t):new _(e,t)}function DE(e){return"guarded"}function RE(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:rE,multi:!0,useValue:e}]}let PE=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new an.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(fE),r=this.injector.get(IE);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,un.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(IE),n=this.injector.get(EE),i=this.injector.get(SE),s=this.injector.get(fE),o=this.injector.get(r.z2F);e===o.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function LE(e){return e.appInitializer.bind(e)}function FE(e){return e.bootstrapListener.bind(e)}const ZE=new r.OlP("Router Initializer");function ME(e,t){1&e&&r._UZ(0,"span",14)}let UE=(()=>{class e{constructor(e,t,n,r,i){this.fb=e,this._auth=t,this._usuario=n,this.toastr=r,this.router=i,this.entrando=!1,this.loginForm=this.fb.group({email:["",Qe.required],pass:["",Qe.required]})}ngOnInit(){}login(){if(this.entrando=!0,this.loginForm.invalid)return this.toastr.error("Ingrese sus credenciales","Ha ocurrido un error"),void(this.entrando=!1);this._auth.signInWithEmail(this.loginForm.value.email,this.loginForm.value.pass).then(e=>{e.user.getIdTokenResult().then(e=>{this._usuario.getUsuarioPorEmail(this.loginForm.value.email).subscribe(e=>{e.length>0?(this._auth.saveLocalData("email",this.loginForm.value.email),this._auth.saveLocalData("names",e[0].nombres),this._auth.saveLocalData("lastnames",e[0].apellidos),this._auth.saveLocalData("administrador",e[0].admin),this.router.navigateByUrl("/inicio")):(this.toastr.error("Verifique las credenciales ingresadas","Acceso denegado"),this.entrando=!1)})}),this.entrando=!1}).catch(e=>{this.toastr.error("Verifique las credenciales ingresadas","Acceso denegado"),this.entrando=!1})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(on),r.Y36(Mr),r.Y36(k_),r.Y36(cb),r.Y36(fE))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-login"]],decls:23,vars:2,consts:[[1,"login-row"],[1,"card","col-sm-6","login-card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","email",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["type","text","id","email","formControlName","email",1,"form-control"],["for","pass",1,"col-sm-4","col-form-label"],["type","password","id","pass","formControlName","pass",1,"form-control"],[1,"col-sm-4"],["type","submit",1,"btn","btn-light"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"b"),r._uU(4,"FARMACIA MIHZELLA"),r.qZA(),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"form",4),r.NdJ("ngSubmit",function(){return t.login()}),r.TgZ(7,"div",5),r.TgZ(8,"label",6),r._uU(9,"Correo electr\xf3nico"),r.qZA(),r.TgZ(10,"div",7),r._UZ(11,"input",8),r.qZA(),r.qZA(),r.TgZ(12,"div",5),r.TgZ(13,"label",9),r._uU(14,"Contrase\xf1a"),r.qZA(),r.TgZ(15,"div",7),r._UZ(16,"input",10),r.qZA(),r.qZA(),r.TgZ(17,"div",5),r._UZ(18,"div",11),r.TgZ(19,"div",7),r.TgZ(20,"button",12),r.YNc(21,ME,1,0,"span",13),r._uU(22," ENTRAR "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.Q6J("formGroup",t.loginForm),r.xp6(15),r.Q6J("ngIf",t.entrando))},directives:[qt,_t,Ht,$e,vt,Kt,M],styles:[""]}),e})(),qE=(()=>{class e{constructor(e){this.firestore=e}getLaboratorios(){return this.firestore.collection("laboratorios",e=>e.orderBy("nombre")).valueChanges({idField:"id"})}getCategorias(){return this.firestore.collection("categoria",e=>e.orderBy("descripcion")).valueChanges()}getProductos(){return this.firestore.collection("productos",e=>e.orderBy("generico")).valueChanges({idField:"id"})}getComprasCabecera(){return this.firestore.collection("compras-cabecera").valueChanges()}getCompras(){return this.firestore.collection("compras",e=>e.orderBy("orden","desc")).valueChanges()}getVentasCabecera(){return this.firestore.collection("ventas-cabecera").valueChanges()}getVentas(){return this.firestore.collection("ventas",e=>e.orderBy("orden","desc")).valueChanges()}getComprasProducto(e){return this.firestore.collection("compras",t=>t.where("id","==",e).orderBy("fecha","desc")).valueChanges()}getVentasProducto(e){return this.firestore.collection("ventas",t=>t.where("id","==",e).orderBy("fecha","desc")).valueChanges()}getProducto(e){return this.firestore.collection("productos").doc(e).valueChanges({idField:"id"})}saveProducto(e){this.firestore.collection("productos").add(e)}saveCompraCabecera(e){this.firestore.collection("compras-cabecera").add(e)}saveCompra(e){this.firestore.collection("compras").add(e)}saveVentaCabecera(e){this.firestore.collection("ventas-cabecera").add(e)}saveVenta(e){this.firestore.collection("ventas").add(e)}updateProducto(e,t){this.firestore.collection("productos").doc(e).update(t)}deleteProducto(e){this.firestore.collection("productos").doc(e).delete()}deleteCompra(e){this.firestore.collection("compras").doc(e).delete()}deleteVenta(e){this.firestore.collection("venas").doc(e).delete()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(A_))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),VE=(()=>{class e{constructor(){}getTodayString(){var e=new Date;return String(e.getDate()).padStart(2,"0")+"/"+String(e.getMonth()+1).padStart(2,"0")+"/"+e.getFullYear()}getTodayTimestamp(){return Lu.fromDate(new Date)}getDateFromTimestamp(e){var t=e.toDate();let n=t.getDate(),r=t.getMonth()+1,i=t.getFullYear(),s=t.getHours(),o=t.getMinutes(),a=t.getSeconds();return o<10&&(o=`0${o}`),a<10&&(a=`0${a}`),r<10?`${n}/0${r}/${i} ${s}:${o}:${a}`:`${n}/${r}/${i} ${s}:${o}:${a}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function jE(e,t){if(1&e&&(r.TgZ(0,"option",30),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.lnq("",e.codigo," - ",e.comercial," | ",e.generico,"")}}function BE(e,t){1&e&&r._UZ(0,"span",31)}function $E(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.fecha),r.xp6(2),r.Oqu(e.descripcion),r.xp6(2),r.Oqu(e.entrada),r.xp6(2),r.Oqu(e.salida),r.xp6(2),r.Oqu(e.saldo)}}let zE=(()=>{class e{constructor(e,t,n,r){this._inventario=e,this._utils=t,this.fb=n,this.toastr=r,this.kardex=[],this.producto={},this.buscando=!1,this.kardexForm=this.fb.group({producto:["",Qe.required]}),this.productos=e.getProductos()}ngOnInit(){}generarKardex(){if(this.buscando=!0,this.kardexForm.invalid)return this.toastr.error("Para generar el kardex debe seleccionar un producto","Error"),void(this.buscando=!1);this.getProducto(),this.compras=this._inventario.getComprasProducto(this.kardexForm.value.producto),this.ventas=this._inventario.getVentasProducto(this.kardexForm.value.producto),setTimeout(()=>{this.kardex=[],this.compras.forEach(e=>{for(let t=0;t<e.length;t++)this.kardex.push({timest:e[t].fecha,fecha:this._utils.getDateFromTimestamp(e[t].fecha),descripcion:e[t].saldo?"Saldo":"Compra",entrada:e[t].cantidad,salida:0,saldo:0})}),this.ventas.forEach(e=>{for(let t=0;t<e.length;t++)this.kardex.push({timest:e[t].fecha,fecha:this._utils.getDateFromTimestamp(e[t].fecha),descripcion:"Venta",entrada:0,salida:e[t].cantidad,saldo:0})}),setTimeout(()=>{this.kardex.sort((e,t)=>e.timest-t.timest),setTimeout(()=>{var e=0;for(let t=0;t<this.kardex.length;t++)this.kardex[t].saldo=e+this.kardex[t].entrada-this.kardex[t].salida,e=this.kardex[t].saldo;this.buscando=!1},300)},500)},400)}getProducto(){this._inventario.getProducto(this.kardexForm.value.producto).subscribe(e=>{this.producto={codigo:e.codigo,categoria:e.categoria,comercial:e.comercial,generico:e.generico,laboratorio:e.laboratorio,presentacion:e.presentacion,contenido:e.contenido}})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qE),r.Y36(VE),r.Y36(on),r.Y36(cb))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-kardex"]],decls:70,vars:13,consts:[[1,"row","col-sm-12"],[1,"card","col-sm-6","kardex","mt-2"],[1,"card-body"],[3,"formGroup"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","producto",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12","text-center"],["type","button","id","generar","data-toggle","modal","data-target","#kardexModal",1,"btn","btn-success","mt-4",3,"click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["id","kardexModal","tabindex","-1","aria-labelledby","kardexModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","kardexModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],[1,"card"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"badge","badge-dark"],[1,"col-sm-6"],[1,"badge","badge-info"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"form",3),r.TgZ(4,"div",4),r.TgZ(5,"label",5),r._uU(6,"Producto"),r.qZA(),r.TgZ(7,"select",6),r.TgZ(8,"option",7),r._uU(9,"Seleccione..."),r.qZA(),r.YNc(10,jE,2,4,"option",8),r.ALo(11,"async"),r.qZA(),r.qZA(),r.TgZ(12,"div",9),r.TgZ(13,"button",10),r.NdJ("click",function(){return t.generarKardex()}),r.YNc(14,BE,1,0,"span",11),r._uU(15," Generar Kardex "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",12),r.TgZ(17,"div",13),r.TgZ(18,"div",14),r.TgZ(19,"div",15),r.TgZ(20,"h5",16),r._uU(21,"KARDEX DEL PRODUCTO"),r.qZA(),r.TgZ(22,"button",17,18),r.TgZ(24,"span",19),r._uU(25,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div",20),r.TgZ(27,"div",2),r.TgZ(28,"div",21),r.TgZ(29,"div",22),r._uU(30," Codigo: "),r.qZA(),r.TgZ(31,"div",23),r._uU(32),r.qZA(),r.TgZ(33,"div",24),r.TgZ(34,"span",25),r._uU(35),r.qZA(),r.qZA(),r.qZA(),r.TgZ(36,"div",21),r.TgZ(37,"div",22),r._uU(38," Nombre gen\xe9rico: "),r.qZA(),r.TgZ(39,"div",26),r._uU(40),r.qZA(),r.qZA(),r.TgZ(41,"div",21),r.TgZ(42,"div",22),r._uU(43," Nombre comercial: "),r.qZA(),r.TgZ(44,"div",26),r._uU(45),r.qZA(),r.qZA(),r.TgZ(46,"div",21),r.TgZ(47,"div",22),r._uU(48," Presentaci\xf3n: "),r.qZA(),r.TgZ(49,"div",23),r._uU(50),r.qZA(),r.TgZ(51,"div",24),r.TgZ(52,"span",27),r._uU(53),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(54,"div",20),r.TgZ(55,"div",2),r.TgZ(56,"table",28),r.TgZ(57,"thead"),r.TgZ(58,"tr"),r.TgZ(59,"th"),r._uU(60,"Fecha"),r.qZA(),r.TgZ(61,"th"),r._uU(62,"Descripci\xf3n"),r.qZA(),r.TgZ(63,"th"),r._uU(64,"Entrada"),r.qZA(),r.TgZ(65,"th"),r._uU(66,"Salida"),r.qZA(),r.TgZ(67,"th"),r._uU(68,"Saldo"),r.qZA(),r.qZA(),r.qZA(),r.YNc(69,$E,11,5,"tr",29),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",t.kardexForm),r.xp6(7),r.Q6J("ngForOf",r.lcZ(11,11,t.productos)),r.xp6(4),r.Q6J("ngIf",t.buscando),r.xp6(18),r.hij(" ",t.producto.codigo," "),r.xp6(3),r.Oqu(t.producto.categoria),r.xp6(5),r.hij(" ",t.producto.generico," "),r.xp6(5),r.hij(" ",t.producto.comercial," "),r.xp6(5),r.AsE(" ",t.producto.presentacion," (",t.producto.contenido,") "),r.xp6(3),r.hij("Laboratorio ",t.producto.laboratorio,""),r.xp6(16),r.Q6J("ngForOf",t.kardex))},directives:[qt,_t,Ht,Yt,vt,Kt,Jt,nn,F,M],pipes:[H],styles:[""]}),e})();const HE=["closeButtonForm"];function GE(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij("",e.precio," Bs.")}}function KE(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r.TgZ(10,"span",45),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"td"),r.YNc(13,GE,2,1,"span",46),r.qZA(),r.TgZ(14,"td"),r.TgZ(15,"button",47),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().openModal(t.id)}),r._uU(16,"Detalles"),r.qZA(),r.TgZ(17,"button",48),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().deleteProducto(t.id)}),r._uU(18,"Eliminar"),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.comercial),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(3),r.Oqu(e.categoria),r.xp6(2),r.Q6J("ngIf",e.precio)}}function WE(e,t){if(1&e&&(r.TgZ(0,"option",49),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.nombre),r.xp6(1),r.Oqu(e.nombre)}}function QE(e,t){if(1&e&&(r.TgZ(0,"option",49),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.descripcion),r.xp6(1),r.Oqu(e.descripcion)}}const YE=["closeButtonForm"];function JE(e,t){1&e&&(r.TgZ(0,"td"),r.TgZ(1,"span",42),r._uU(2,"SALDO"),r.qZA(),r.qZA())}function XE(e,t){1&e&&(r.TgZ(0,"td"),r.TgZ(1,"span",43),r._uU(2,"COMPRA"),r.qZA(),r.qZA())}function eS(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.YNc(5,JE,3,0,"td",40),r.YNc(6,XE,3,0,"td",40),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.qZA(),r.TgZ(13,"td"),r.TgZ(14,"span",41),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"td"),r._uU(17),r.qZA(),r.TgZ(18,"td"),r._uU(19),r.qZA(),r.TgZ(20,"td"),r._uU(21),r.qZA(),r.TgZ(22,"td"),r._uU(23),r.qZA(),r.qZA()),2&e){const e=t.$implicit,n=r.oxw();r.xp6(2),r.Oqu(e.orden),r.xp6(2),r.Oqu(n.getFecha(e.fecha)),r.xp6(1),r.Q6J("ngIf",1==e.saldo),r.xp6(1),r.Q6J("ngIf",0==e.saldo),r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(3),r.Oqu(e.categoria),r.xp6(2),r.hij("",e.costo," Bs."),r.xp6(2),r.hij("",e.precio," Bs."),r.xp6(2),r.Oqu(e.cantidad),r.xp6(2),r.hij("",e.total," Bs.")}}function tS(e,t){if(1&e&&(r.TgZ(0,"option",44),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.HOy("",e.codigo," - ",e.comercial," | ",e.generico," (",e.laboratorio,")")}}function nS(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.ALo(11,"currency"),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.ALo(14,"currency"),r.qZA(),r.TgZ(15,"td"),r._uU(16),r.qZA(),r.TgZ(17,"td"),r._uU(18),r.ALo(19,"currency"),r.qZA(),r.TgZ(20,"td"),r.TgZ(21,"button",45),r.NdJ("click",function(){const t=r.CHM(e).index;return r.oxw().quitarProducto(t)}),r._UZ(22,"i",46),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.comercial),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(2),r.Oqu(r.lcZ(11,8,e.costo)),r.xp6(3),r.Oqu(r.lcZ(14,10,e.precio)),r.xp6(3),r.Oqu(e.cantidad),r.xp6(2),r.Oqu(r.lcZ(19,12,e.total))}}function rS(e,t){1&e&&(r.TgZ(0,"div",47),r.TgZ(1,"span",48),r._uU(2,"Loading..."),r.qZA(),r.qZA())}function iS(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"button",49),r._uU(2,"Cancelar"),r.qZA(),r.TgZ(3,"button",50),r.NdJ("click",function(){return r.CHM(e),r.oxw().guardarCompras()}),r._uU(4,"Guardar"),r.qZA(),r.qZA()}}const sS=["closeButtonForm"];function oS(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r.TgZ(12,"span",36),r._uU(13),r.qZA(),r.qZA(),r.TgZ(14,"td"),r._uU(15),r.qZA(),r.TgZ(16,"td"),r._uU(17),r.qZA(),r.TgZ(18,"td"),r._uU(19),r.qZA(),r.qZA()),2&e){const e=t.$implicit,n=r.oxw();r.xp6(2),r.Oqu(e.orden),r.xp6(2),r.Oqu(n.getFecha(e.fecha)),r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(3),r.Oqu(e.categoria),r.xp6(2),r.Oqu(e.precio),r.xp6(2),r.Oqu(e.cantidad),r.xp6(2),r.hij("",e.total," Bs.")}}function aS(e,t){if(1&e&&(r.TgZ(0,"option",37),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.s9C("value",e.id),r.xp6(1),r.HOy("",e.codigo," - ",e.comercial," | ",e.generico," (",e.laboratorio,")")}}function uS(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.ALo(11,"currency"),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.qZA(),r.TgZ(14,"td"),r._uU(15),r.ALo(16,"currency"),r.qZA(),r.TgZ(17,"td"),r.TgZ(18,"button",38),r.NdJ("click",function(){const t=r.CHM(e).index;return r.oxw().quitarProducto(t)}),r._UZ(19,"i",39),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.comercial),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(2),r.Oqu(r.lcZ(11,7,e.precio)),r.xp6(3),r.Oqu(e.cantidad),r.xp6(2),r.Oqu(r.lcZ(16,9,e.total))}}function cS(e,t){1&e&&(r.TgZ(0,"div",40),r.TgZ(1,"span",41),r._uU(2,"Loading..."),r.qZA(),r.qZA())}function lS(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"button",42),r._uU(2,"Cancelar"),r.qZA(),r.TgZ(3,"button",43),r.NdJ("click",function(){return r.CHM(e),r.oxw().guardarCompras()}),r._uU(4,"Guardar"),r.qZA(),r.qZA()}}function hS(e,t){if(1&e&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r.TgZ(10,"span",5),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"td"),r._uU(13),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(2),r.Oqu(e.codigo),r.xp6(2),r.Oqu(e.generico),r.xp6(2),r.Oqu(e.comercial),r.xp6(2),r.Oqu(e.laboratorio),r.xp6(3),r.Oqu(e.categoria),r.xp6(2),r.Oqu(e.stock)}}const dS=[{path:"login",component:UE},{path:"inicio",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-inicio"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"text-center","col-sm-12"],[1,"col-sm-12","text-center"],["src","assets/images/logo_farmacia.png","alt","Farmacia Mihzella Salud"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h4",2),r._uU(3,"Bienvenido al Sistema Web de Inventario"),r.qZA(),r.TgZ(4,"div",3),r._UZ(5,"img",4),r.qZA(),r.qZA(),r.qZA())},styles:[""]}),e})()},{path:"productos",component:(()=>{class e{constructor(e,t,n){this._inventario=e,this.formBuilder=t,this.toastr=n,this.edicion=!1,this.idEdicion="",this.productoForm=this.formBuilder.group({codigo:["",Qe.required],generico:["",Qe.required],comercial:["",Qe.required],laboratorio:["",Qe.required],categoria:["",Qe.required],composicion:["",Qe.required],contenido:["",Qe.required],presentacion:["",Qe.required],cliente:["",Qe.required],costo:["",Qe.required]}),this.productos=e.getProductos(),this.laboratorios=e.getLaboratorios(),this.categorias=e.getCategorias()}ngOnInit(){}newModal(){this.productoForm.reset(),document.getElementById("codigo").removeAttribute("readonly")}openModal(e){this.edicion=!0,this.idEdicion=e;const t=this._inventario.getProducto(e);setTimeout(()=>{t.forEach(e=>{this.producto=e,document.getElementById("codigo").setAttribute("readonly","true"),null!=this.producto&&(this.productoForm=this.formBuilder.group({codigo:[this.producto.codigo,Qe.required],generico:[this.producto.generico,Qe.required],comercial:[this.producto.comercial,Qe.required],laboratorio:[this.producto.laboratorio,Qe.required],categoria:[this.producto.categoria,Qe.required],composicion:[this.producto.composicion,Qe.required],contenido:[this.producto.contenido,Qe.required],presentacion:[this.producto.contenido,Qe.required],cliente:[this.producto.cliente,Qe.required],costo:[this.producto.costo,Qe.required]}))})},500)}saveProducto(){this.productoForm.invalid?this.toastr.error("Todos los campos son requeridos","Ha ocurrido un error"):this.edicion?(this._inventario.updateProducto(this.idEdicion,this.productoForm.value),this.toastr.success("Producto modificado correctamente","Operaci\xf3n exitosa"),this.productoForm.reset(),this.edicion=!1,this.idEdicion="",this.producto=null,document.getElementById("codigo").removeAttribute("readonly"),this.closeButtonForm.nativeElement.click()):(this._inventario.saveProducto(this.productoForm.value),this.toastr.success("Producto guardado correctamente","Operaci\xf3n exitosa"),this.productoForm.reset(),this.edicion=!1,this.idEdicion="",this.producto=null,document.getElementById("codigo").removeAttribute("readonly"),this.closeButtonForm.nativeElement.click())}deleteProducto(e){this._inventario.deleteProducto(e),this.toastr.success("Producto eliminado correctamente","Operaci\xf3n exitosa")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qE),r.Y36(on),r.Y36(cb))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-productos"]],viewQuery:function(e,t){if(1&e&&r.Gf(HE,5),2&e){let e;r.iGM(e=r.CRH())&&(t.closeButtonForm=e.first)}},decls:95,vars:10,consts:[["type","button","data-toggle","modal","data-target","#productoModal",1,"btn","btn-sm","btn-success","mb-1",3,"click"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","productoModal","tabindex","-1","aria-labelledby","productoModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],[1,"row"],[1,"form-group","col-sm-6"],["for","codigo"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","codigo",1,"form-control"],[1,"form-group"],["for","generico"],["type","text","id","nombre","oninput","this.value = this.value.toUpperCase()","formControlName","generico",1,"form-control"],["for","comercial"],["type","text","id","descripcion","oninput","this.value = this.value.toUpperCase()","formControlName","comercial",1,"form-control"],[1,"card","mt-1"],["for","laboratorio"],["id","laboratorio","formControlName","laboratorio",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","categoria"],["id","codigo","formControlName","categoria",1,"form-control"],["for","composicion"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","composicion",1,"form-control"],["for","contenido"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","contenido",1,"form-control"],["for","presentacion"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","presentacion",1,"form-control"],["for","cliente"],["type","text","id","codigo","oninput","this.value = this.value.toUpperCase()","formControlName","cliente",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],[1,"badge","badge-dark"],[4,"ngIf"],["type","button","data-toggle","modal","data-target","#productoModal",1,"btn","btn-sm","btn-warning",3,"click"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[3,"value"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Listado de Productos"),r.qZA(),r.TgZ(2,"button",0),r.NdJ("click",function(){return t.newModal()}),r._uU(3,"Nuevo"),r.qZA(),r.TgZ(4,"table",1),r.TgZ(5,"thead",2),r.TgZ(6,"tr"),r.TgZ(7,"th",3),r._uU(8,"CODIGO"),r.qZA(),r.TgZ(9,"th",3),r._uU(10,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(11,"th",3),r._uU(12,"NOMBRE COMERCIAL"),r.qZA(),r.TgZ(13,"th",3),r._uU(14,"LABORATORIO"),r.qZA(),r.TgZ(15,"th",3),r._uU(16,"CATEGORIA"),r.qZA(),r.TgZ(17,"th",3),r._uU(18,"COSTO"),r.qZA(),r.TgZ(19,"th",3),r._uU(20,"OPCIONES"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"tbody",4),r.YNc(22,KE,19,6,"tr",5),r.ALo(23,"async"),r.qZA(),r.qZA(),r.TgZ(24,"div",6),r.TgZ(25,"div",7),r.TgZ(26,"div",8),r.TgZ(27,"div",9),r.TgZ(28,"h5",10),r._uU(29,"Registrar producto"),r.qZA(),r.TgZ(30,"button",11,12),r.TgZ(32,"span",13),r._uU(33,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"form",14),r.NdJ("ngSubmit",function(){return t.saveProducto()}),r.TgZ(35,"div",15),r.TgZ(36,"div",16),r.TgZ(37,"div",17),r.TgZ(38,"div",18),r.TgZ(39,"div",19),r.TgZ(40,"label",20),r._uU(41,"Codigo"),r.qZA(),r._UZ(42,"input",21),r.qZA(),r.qZA(),r.TgZ(43,"div",22),r.TgZ(44,"label",23),r._uU(45,"Nombre gen\xe9rico"),r.qZA(),r._UZ(46,"input",24),r.qZA(),r.TgZ(47,"div",22),r.TgZ(48,"label",25),r._uU(49,"Nombre comercial"),r.qZA(),r._UZ(50,"input",26),r.qZA(),r.qZA(),r.qZA(),r.TgZ(51,"div",27),r.TgZ(52,"div",17),r.TgZ(53,"div",18),r.TgZ(54,"div",19),r.TgZ(55,"label",28),r._uU(56,"Laboratorio"),r.qZA(),r.TgZ(57,"select",29),r.TgZ(58,"option",30),r._uU(59,"Seleccione..."),r.qZA(),r.YNc(60,WE,2,2,"option",31),r.ALo(61,"async"),r.qZA(),r.qZA(),r.TgZ(62,"div",19),r.TgZ(63,"label",32),r._uU(64,"Categor\xeda"),r.qZA(),r.TgZ(65,"select",33),r.TgZ(66,"option",30),r._uU(67,"Seleccione..."),r.qZA(),r.YNc(68,QE,2,2,"option",31),r.ALo(69,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(70,"div",27),r.TgZ(71,"div",17),r.TgZ(72,"div",18),r.TgZ(73,"div",19),r.TgZ(74,"label",34),r._uU(75,"Composici\xf3n"),r.qZA(),r._UZ(76,"input",35),r.qZA(),r.TgZ(77,"div",19),r.TgZ(78,"label",36),r._uU(79,"Contenido"),r.qZA(),r._UZ(80,"input",37),r.qZA(),r.qZA(),r.TgZ(81,"div",18),r.TgZ(82,"div",19),r.TgZ(83,"label",38),r._uU(84,"Presentaci\xf3n"),r.qZA(),r._UZ(85,"input",39),r.qZA(),r.TgZ(86,"div",19),r.TgZ(87,"label",40),r._uU(88,"Presentaci\xf3n al cliente"),r.qZA(),r._UZ(89,"input",41),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(90,"div",42),r.TgZ(91,"button",43),r._uU(92,"Cancelar"),r.qZA(),r.TgZ(93,"button",44),r._uU(94,"Guardar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(22),r.Q6J("ngForOf",r.lcZ(23,4,t.productos)),r.xp6(12),r.Q6J("formGroup",t.productoForm),r.xp6(26),r.Q6J("ngForOf",r.lcZ(61,6,t.laboratorios)),r.xp6(8),r.Q6J("ngForOf",r.lcZ(69,8,t.categorias)))},directives:[F,qt,_t,Ht,$e,vt,Kt,Yt,Jt,nn,M],pipes:[H],styles:[""]}),e})()},{path:"usuarios",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-usuario"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})()},{path:"compras",component:(()=>{class e{constructor(e,t,n,r){this._inventario=e,this._utils=t,this.fb=n,this.toastr=r,this.nuevasCompras=[],this.productoSeleccionado="",this.correlativo="OC-1",this.saving=!1,this.productoForm=this.fb.group({}),this.compraForm=this.fb.group({id:["",Qe.required],costo:["",Qe.required],cantidad:["",Qe.required],precio:["",Qe.required],saldo:!1}),this.compras=e.getCompras(),this.productos=e.getProductos(),this.comprasCabecera=e.getComprasCabecera()}ngOnInit(){}seleccionarProducto(e){this.productoSeleccionado=null==e?void 0:e.target.value}agregar(){if(this.compraForm.invalid)return void this.toastr.error("Debe completar todos los campos","Ocurri\xf3 un error");const e=this._inventario.getProducto(this.compraForm.value.id);var t=!0;e.forEach(e=>{if(t){let n={};n.id=e.id,n.codigo=e.codigo,n.comercial=e.comercial,n.generico=e.generico,n.laboratorio=e.laboratorio,n.categoria=e.categoria,n.costo=this.compraForm.value.costo,n.cantidad=this.compraForm.value.cantidad,n.precio=this.compraForm.value.precio,n.total=Math.round(this.compraForm.value.costo*this.compraForm.value.cantidad*100)/100,n.fecha=this._utils.getTodayTimestamp(),n.saldo=!0===this.compraForm.value.saldo,this.nuevasCompras.push(n),this.compraForm.reset(),t=!1}})}guardarCompras(){this.saving=!0,this._inventario.saveCompraCabecera({orden:this.correlativo}),this.generateOrdenCompra(),setTimeout(()=>{this.nuevasCompras.forEach(e=>{e.orden=this.correlativo,this._inventario.saveCompra(e),this.productoForm.value.precio=e.precio,this._inventario.updateProducto(e.id,this.productoForm.value)}),setTimeout(()=>{this.nuevasCompras=[],this.toastr.success("Registros almacenados correctamente","Operaci\xf3n exitosa"),this.closeButtonForm.nativeElement.click(),this.saving=!1},800)},500)}generateOrdenCompra(){this.comprasCabecera.forEach(e=>{this.correlativo="OC-"+e.length})}quitarProducto(e){this.nuevasCompras.splice(e,1)}getFecha(e){return this._utils.getDateFromTimestamp(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qE),r.Y36(VE),r.Y36(on),r.Y36(cb))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-compras"]],viewQuery:function(e,t){if(1&e&&r.Gf(YE,5),2&e){let e;r.iGM(e=r.CRH())&&(t.closeButtonForm=e.first)}},decls:105,vars:10,consts:[["type","button","data-toggle","modal","data-target","#compraModal",1,"btn","btn-sm","btn-success","mb-1"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","compraModal","tabindex","-1","aria-labelledby","compraModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","id",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],[1,"form-group","col-md-3"],["for","costo"],["type","number","id","costo","formControlName","costo",1,"form-control"],["for","cantidad"],["type","number","id","cantidad","formControlName","cantidad",1,"form-control"],["for","precio"],["type","number","id","precio","formControlName","precio",1,"form-control"],["type","button","id","agregar",1,"btn","btn-success","mt-4",3,"click"],[1,"form-group"],[1,"form-check"],["type","checkbox","id","saldo","formControlName","saldo",1,"form-check-input"],["for","saldo",1,"form-check-label"],[1,"modal-footer"],["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-dark"],[1,"badge","badge-primary"],[1,"badge","badge-success"],[3,"value"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[1,"fas","fa-trash"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","ml-2",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Listado de Compras"),r.qZA(),r.TgZ(2,"button",0),r._uU(3,"Nueva compra"),r.qZA(),r.TgZ(4,"table",1),r.TgZ(5,"thead",2),r.TgZ(6,"tr"),r.TgZ(7,"th",3),r._uU(8,"COMPRA"),r.qZA(),r.TgZ(9,"th",3),r._uU(10,"FECHA"),r.qZA(),r.TgZ(11,"th",3),r._uU(12,"TIPO"),r.qZA(),r.TgZ(13,"th",3),r._uU(14,"CODIGO"),r.qZA(),r.TgZ(15,"th",3),r._uU(16,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(17,"th",3),r._uU(18,"LABORATORIO"),r.qZA(),r.TgZ(19,"th",3),r._uU(20,"CATEGORIA"),r.qZA(),r.TgZ(21,"th",3),r._uU(22,"COSTO"),r.qZA(),r.TgZ(23,"th",3),r._uU(24,"PRECIO"),r.qZA(),r.TgZ(25,"th",3),r._uU(26,"CANTIDAD"),r.qZA(),r.TgZ(27,"th",3),r._uU(28,"TOTAL"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"tbody",4),r.YNc(30,eS,24,12,"tr",5),r.ALo(31,"async"),r.qZA(),r.qZA(),r.TgZ(32,"div",6),r.TgZ(33,"div",7),r.TgZ(34,"div",8),r.TgZ(35,"div",9),r.TgZ(36,"h5",10),r._uU(37,"Registrar nueva compra"),r.qZA(),r.TgZ(38,"button",11,12),r.TgZ(40,"span",13),r._uU(41,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"form",14),r.TgZ(43,"div",15),r.TgZ(44,"div",16),r.TgZ(45,"div",17),r.TgZ(46,"form",18),r.TgZ(47,"div",19),r.TgZ(48,"div",20),r.TgZ(49,"label",21),r._uU(50,"Producto"),r.qZA(),r.TgZ(51,"select",22),r.TgZ(52,"option",23),r._uU(53,"Seleccione..."),r.qZA(),r.YNc(54,tS,2,5,"option",24),r.ALo(55,"async"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(56,"div",25),r.TgZ(57,"div",26),r.TgZ(58,"label",27),r._uU(59,"Costo compra"),r.qZA(),r._UZ(60,"input",28),r.qZA(),r.TgZ(61,"div",26),r.TgZ(62,"label",29),r._uU(63,"Cantidad"),r.qZA(),r._UZ(64,"input",30),r.qZA(),r.TgZ(65,"div",26),r.TgZ(66,"label",31),r._uU(67,"Precio venta"),r.qZA(),r._UZ(68,"input",32),r.qZA(),r.TgZ(69,"div",26),r.TgZ(70,"button",33),r.NdJ("click",function(){return t.agregar()}),r._uU(71,"Agregar"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(72,"div",34),r.TgZ(73,"div",35),r._UZ(74,"input",36),r.TgZ(75,"label",37),r._uU(76," Es saldo "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(77,"div",16),r.TgZ(78,"div",17),r.TgZ(79,"table",1),r.TgZ(80,"thead",2),r.TgZ(81,"tr"),r.TgZ(82,"th",3),r._uU(83,"CODIGO DE PRODUCTO"),r.qZA(),r.TgZ(84,"th",3),r._uU(85,"NOMBRE COMERCIAL"),r.qZA(),r.TgZ(86,"th",3),r._uU(87,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(88,"th",3),r._uU(89,"LABORATORIO"),r.qZA(),r.TgZ(90,"th",3),r._uU(91,"COSTO"),r.qZA(),r.TgZ(92,"th",3),r._uU(93,"PRECIO"),r.qZA(),r.TgZ(94,"th",3),r._uU(95,"CANTIDAD"),r.qZA(),r.TgZ(96,"th",3),r._uU(97,"TOTAL"),r.qZA(),r.TgZ(98,"th",3),r._uU(99,"QUITAR"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(100,"tbody"),r.YNc(101,nS,23,14,"tr",5),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(102,"div",38),r.YNc(103,rS,3,0,"div",39),r.YNc(104,iS,5,0,"div",40),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(30),r.Q6J("ngForOf",r.lcZ(31,6,t.compras)),r.xp6(16),r.Q6J("formGroup",t.compraForm),r.xp6(8),r.Q6J("ngForOf",r.lcZ(55,8,t.productos)),r.xp6(47),r.Q6J("ngForOf",t.nuevasCompras),r.xp6(2),r.Q6J("ngIf",1==t.saving),r.xp6(1),r.Q6J("ngIf",0==t.saving))},directives:[F,qt,_t,Ht,Yt,vt,Kt,Jt,nn,jt,$e,Ve,M],pipes:[H,G],styles:[""]}),e})()},{path:"ventas",component:(()=>{class e{constructor(e,t,n,r){this._inventario=e,this._utils=t,this.fb=n,this.toastr=r,this.nuevasVentas=[],this.correlativo="OV-1",this.saving=!1,this.precioVenta=0,this.ventaForm=this.fb.group({id:["",Qe.required],cantidad:["",Qe.required]}),this.ventas=e.getVentas(),this.productos=e.getProductos(),this.ventasCabecera=e.getVentasCabecera()}ngOnInit(){}seleccionarProducto(e){const t=null==e?void 0:e.target.value;console.log(t);const n=this._inventario.getProducto(t);var r=!0;n.forEach(e=>{r&&(this.precioVenta=e.precio,r=!1)})}agregar(){if(this.ventaForm.invalid)return void this.toastr.error("Debe completar todos los campos","Ocurri\xf3 un error");const e=this._inventario.getProducto(this.ventaForm.value.id);var t=!0;e.forEach(e=>{if(t){let n={};n.codigo=e.codigo,n.id=e.id,n.comercial=e.comercial,n.generico=e.generico,n.laboratorio=e.laboratorio,n.categoria=e.categoria,n.precio=this.precioVenta,n.cantidad=this.ventaForm.value.cantidad,n.total=Math.round(this.precioVenta*this.ventaForm.value.cantidad*100)/100,n.fecha=this._utils.getTodayTimestamp(),this.nuevasVentas.push(n),this.ventaForm.reset(),this.precioVenta=0,t=!1}})}guardarCompras(){this.saving=!0,this._inventario.saveVentaCabecera({orden:this.correlativo}),this.generateOrdenCompra(),setTimeout(()=>{this.nuevasVentas.forEach(e=>{e.orden=this.correlativo,this._inventario.saveVenta(e)}),setTimeout(()=>{this.nuevasVentas=[],this.toastr.success("Registros almacenados correctamente","Venta exitosa"),this.closeButtonForm.nativeElement.click(),this.saving=!1},800)},500)}generateOrdenCompra(){this.ventasCabecera.forEach(e=>{this.correlativo="OV-"+e.length})}quitarProducto(e){console.log(e),this.nuevasVentas.splice(e,1)}getFecha(e){return this._utils.getDateFromTimestamp(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qE),r.Y36(VE),r.Y36(on),r.Y36(cb))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-ventas"]],viewQuery:function(e,t){if(1&e&&r.Gf(sS,5),2&e){let e;r.iGM(e=r.CRH())&&(t.closeButtonForm=e.first)}},decls:90,vars:11,consts:[["type","button","data-toggle","modal","data-target","#ventaModal",1,"btn","btn-sm","btn-success","mb-1"],[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],["id","ventaModal","tabindex","-1","aria-labelledby","ventaModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","productoModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeButtonForm",""],["aria-hidden","true"],["autocomplete","off"],[1,"modal-body","details-table"],[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup"],[1,"row"],[1,"form-group","col-sm-12"],["for","producto"],["id","producto","formControlName","id",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],[1,"form-group","col-md-5"],["for","precio"],["type","number","id","precio","readonly","",1,"form-control",3,"value"],["for","cantidad"],["type","number","id","cantidad","formControlName","cantidad",1,"form-control"],[1,"form-group","col-md-2"],["type","button","id","agregar",1,"btn","btn-success","mt-4",3,"click"],[1,"modal-footer"],["class","spinner-border text-primary","role","status",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-dark"],[3,"value"],["type","button",1,"btn","btn-sm","btn-danger","ml-1",3,"click"],[1,"fas","fa-trash"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","ml-2",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Listado de Ventas"),r.qZA(),r.TgZ(2,"button",0),r._uU(3,"Nueva venta"),r.qZA(),r.TgZ(4,"table",1),r.TgZ(5,"thead",2),r.TgZ(6,"tr"),r.TgZ(7,"th",3),r._uU(8,"VENTA"),r.qZA(),r.TgZ(9,"th",3),r._uU(10,"FECHA"),r.qZA(),r.TgZ(11,"th",3),r._uU(12,"CODIGO"),r.qZA(),r.TgZ(13,"th",3),r._uU(14,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(15,"th",3),r._uU(16,"LABORATORIO"),r.qZA(),r.TgZ(17,"th",3),r._uU(18,"CATEGORIA"),r.qZA(),r.TgZ(19,"th",3),r._uU(20,"PRECIO (Bs)"),r.qZA(),r.TgZ(21,"th",3),r._uU(22,"CANTIDAD"),r.qZA(),r.TgZ(23,"th",3),r._uU(24,"TOTAL"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"tbody",4),r.YNc(26,oS,20,9,"tr",5),r.ALo(27,"async"),r.qZA(),r.qZA(),r.TgZ(28,"div",6),r.TgZ(29,"div",7),r.TgZ(30,"div",8),r.TgZ(31,"div",9),r.TgZ(32,"h5",10),r._uU(33,"Registrar nueva venta"),r.qZA(),r.TgZ(34,"button",11,12),r.TgZ(36,"span",13),r._uU(37,"\xd7"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(38,"form",14),r.TgZ(39,"div",15),r.TgZ(40,"div",16),r.TgZ(41,"div",17),r.TgZ(42,"form",18),r.TgZ(43,"div",19),r.TgZ(44,"div",20),r.TgZ(45,"label",21),r._uU(46,"Producto"),r.qZA(),r.TgZ(47,"select",22),r.NdJ("change",function(e){return t.seleccionarProducto(e)}),r.TgZ(48,"option",23),r._uU(49,"Seleccione..."),r.qZA(),r.YNc(50,aS,2,5,"option",24),r.ALo(51,"async"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(52,"div",25),r.TgZ(53,"div",26),r.TgZ(54,"label",27),r._uU(55,"Precio"),r.qZA(),r._UZ(56,"input",28),r.qZA(),r.TgZ(57,"div",26),r.TgZ(58,"label",29),r._uU(59,"Cantidad"),r.qZA(),r._UZ(60,"input",30),r.qZA(),r.TgZ(61,"div",31),r.TgZ(62,"button",32),r.NdJ("click",function(){return t.agregar()}),r._uU(63,"Agregar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(64,"div",16),r.TgZ(65,"div",17),r.TgZ(66,"table",1),r.TgZ(67,"thead",2),r.TgZ(68,"tr"),r.TgZ(69,"th",3),r._uU(70,"CODIGO DE PRODUCTO"),r.qZA(),r.TgZ(71,"th",3),r._uU(72,"NOMBRE COMERCIAL"),r.qZA(),r.TgZ(73,"th",3),r._uU(74,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(75,"th",3),r._uU(76,"LABORATORIO"),r.qZA(),r.TgZ(77,"th",3),r._uU(78,"COSTO"),r.qZA(),r.TgZ(79,"th",3),r._uU(80,"CANTIDAD"),r.qZA(),r.TgZ(81,"th",3),r._uU(82,"TOTAL"),r.qZA(),r.TgZ(83,"th",3),r._uU(84,"QUITAR"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(85,"tbody"),r.YNc(86,uS,20,11,"tr",5),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(87,"div",33),r.YNc(88,cS,3,0,"div",34),r.YNc(89,lS,5,0,"div",35),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(26),r.Q6J("ngForOf",r.lcZ(27,7,t.ventas)),r.xp6(16),r.Q6J("formGroup",t.ventaForm),r.xp6(8),r.Q6J("ngForOf",r.lcZ(51,9,t.productos)),r.xp6(6),r.s9C("value",t.precioVenta),r.xp6(30),r.Q6J("ngForOf",t.nuevasVentas),r.xp6(2),r.Q6J("ngIf",1==t.saving),r.xp6(1),r.Q6J("ngIf",0==t.saving))},directives:[F,qt,_t,Ht,Yt,vt,Kt,Jt,nn,jt,$e,M],pipes:[H,G],styles:[""]}),e})()},{path:"inventario",component:(()=>{class e{constructor(e){this._inventario=e,this.inventario=[],this.sumatoriaCompras=0,this.sumatoriaVentas=0,this.productos=e.getProductos(),this.compras=e.getCompras(),this.ventas=e.getVentas(),this.calcularInventario()}ngOnInit(){}calcularInventario(){console.log("calculado inventario"),this.productos.forEach(e=>{for(var t=0;t<e.length;t++)this.sumatorias(e[t])})}sumatorias(e){this.sumatoriaCompras=0,this.sumatoriaVentas=0;var t=0,n=0;this.compras.forEach(n=>{for(var r=0;r<n.length;r++)n[r].codigo===e.codigo&&(t+=n[r].cantidad)}),this.ventas.forEach(t=>{for(var r=0;r<t.length;r++)t[r].codigo===e.codigo&&(n+=t[r].cantidad)}),setTimeout(()=>{let r={};r.codigo=e.codigo,r.generico=e.generico,r.comercial=e.comercial,r.laboratorio=e.laboratorio,r.categoria=e.categoria,r.stock=t-n,this.inventario.push(r)},400)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(qE))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-inventario"]],decls:19,vars:1,consts:[[1,"table"],[1,"thead-dark"],["scope","col"],[1,"details-table"],[4,"ngFor","ngForOf"],[1,"badge","badge-dark"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Inventario de Productos"),r.qZA(),r.TgZ(2,"table",0),r.TgZ(3,"thead",1),r.TgZ(4,"tr"),r.TgZ(5,"th",2),r._uU(6,"CODIGO"),r.qZA(),r.TgZ(7,"th",2),r._uU(8,"NOMBRE GEN\xc9RICO"),r.qZA(),r.TgZ(9,"th",2),r._uU(10,"NOMBRE COMERCIAL"),r.qZA(),r.TgZ(11,"th",2),r._uU(12,"LABORATORIO"),r.qZA(),r.TgZ(13,"th",2),r._uU(14,"CATEGORIA"),r.qZA(),r.TgZ(15,"th",2),r._uU(16,"STOCK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(17,"tbody",3),r.YNc(18,hS,14,6,"tr",4),r.qZA(),r.qZA()),2&e&&(r.xp6(18),r.Q6J("ngForOf",t.inventario))},directives:[F],styles:[""]}),e})()},{path:"kardex",component:zE},{path:"**",pathMatch:"full",redirectTo:"login"}];let fS=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[xE.forRoot(dS)],xE]}),e})(),pS=(()=>{class e{constructor(e,t){this._auth=e,this.router=t,this.usuario="",this.email="",this.usuario=e.getLocalData("names")+" "+e.getLocalData("lastnames"),this.email=e.getLocalData("email")}ngOnInit(){}logout(){this._auth.clearLocalStorage(),this.router.navigateByUrl("/login")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Mr),r.Y36(fE))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-header"]],decls:41,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bar-color"],["href","#",1,"navbar-brand"],["src","assets/images/salud_icono.png",1,"icono-logo"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],["routerLinkActive","active",1,"nav-item"],["routerLink","/inicio",1,"nav-link"],[1,"fas","fa-home"],[1,"sr-only"],["routerLinkActive","active",1,"nav-item","ml-3"],["routerLink","/productos",1,"nav-link"],[1,"fas","fa-first-aid"],["routerLink","/compras",1,"nav-link"],[1,"fas","fa-shopping-bag"],["routerLink","/ventas",1,"nav-link"],[1,"fas","fa-money-check-alt"],["routerLink","/inventario",1,"nav-link"],[1,"fas","fa-book-medical"],["routerLink","/kardex",1,"nav-link"],[1,"fas","fa-book"],[1,"navbar-text"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"fas","fa-user"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"nav",0),r.TgZ(1,"a",1),r._UZ(2,"img",2),r.qZA(),r.TgZ(3,"button",3),r._UZ(4,"span",4),r.qZA(),r.TgZ(5,"div",5),r.TgZ(6,"ul",6),r.TgZ(7,"li",7),r.TgZ(8,"a",8),r._UZ(9,"i",9),r._uU(10," Inicio "),r.TgZ(11,"span",10),r._uU(12,"(current)"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"li",11),r.TgZ(14,"a",12),r._UZ(15,"i",13),r._uU(16," Productos"),r.qZA(),r.qZA(),r.TgZ(17,"li",11),r.TgZ(18,"a",14),r._UZ(19,"i",15),r._uU(20," Compras"),r.qZA(),r.qZA(),r.TgZ(21,"li",11),r.TgZ(22,"a",16),r._UZ(23,"i",17),r._uU(24," Ventas"),r.qZA(),r.qZA(),r.TgZ(25,"li",11),r.TgZ(26,"a",18),r._UZ(27,"i",19),r._uU(28," Inventario"),r.qZA(),r.qZA(),r.TgZ(29,"li",11),r.TgZ(30,"a",20),r._UZ(31,"i",21),r._uU(32," Kardex"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"span",22),r.TgZ(34,"li",23),r.TgZ(35,"a",24),r._UZ(36,"i",25),r._uU(37),r.qZA(),r.TgZ(38,"div",26),r.TgZ(39,"button",27),r.NdJ("click",function(){return t.logout()}),r._uU(40,"Cerrar sesi\xf3n"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(37),r.hij(" ",t.email," "))},directives:[vE,mE],styles:[""]}),e})(),gS=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"bg-dark","text-center","text-lg-start","ftr"],[1,"text-center","p-3","text-muted"],["href","https://www.muvlin.com","target","blank",1,"text-light"]],template:function(e,t){1&e&&(r.TgZ(0,"footer",0),r.TgZ(1,"div",1),r._uU(2," \xa9 2021 Derechos reservados "),r.TgZ(3,"a",2),r._uU(4,"MUVLIN"),r.qZA(),r.qZA(),r.qZA())},styles:[""]}),e})();function mS(e,t){1&e&&(r.ynx(0),r._UZ(1,"router-outlet"),r.BQk())}function yS(e,t){1&e&&(r.ynx(0),r._UZ(1,"app-header"),r.TgZ(2,"div",1),r._UZ(3,"router-outlet"),r.qZA(),r._UZ(4,"app-footer"),r.BQk())}let vS=(()=>{class e{constructor(e){this.router=e,this.title="appinventario-frontend"}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fE))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container-fluid"]],template:function(e,t){1&e&&(r.YNc(0,mS,2,0,"ng-container",0),r.YNc(1,yS,5,0,"ng-container",0)),2&e&&(r.Q6J("ngIf","/login"==t.router.url),r.xp6(1),r.Q6J("ngIf","/login"!=t.router.url))},directives:[M,_E,pS,gS],styles:[""]}),e})();function _S(){return"undefined"!=typeof window&&void 0!==window.document}function bS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function wS(e){switch(e.length){case 0:return new M_;case 1:return e[0];default:return new U_(e)}}function TS(e,t,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(e=>{const n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case"!":a=i[n];break;case O_:a=s[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function ES(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&SS(n,"start",e)));break;case"done":e.onDone(()=>r(n&&SS(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&SS(n,"destroy",e)))}}function SS(e,t,n){const r=n.totalTime,i=IS(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),s=e._data;return null!=s&&(i._data=s),i}function IS(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function CS(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function AS(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let kS=(e,t)=>!1,xS=(e,t)=>!1,OS=(e,t,n)=>[];const NS=bS();(NS||"undefined"!=typeof Element)&&(kS=_S()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),xS=(()=>{if(NS||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):xS}})(),OS=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let DS=null,RS=!1;function PS(e){DS||(DS=("undefined"!=typeof document?document.body:null)||{},RS=!!DS.style&&"WebkitAppearance"in DS.style);let t=!0;return DS.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in DS.style,!t&&RS&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in DS.style)),t}const LS=xS,FS=kS,ZS=OS;function MS(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let US=(()=>{class e{validateStyleProperty(e){return PS(e)}matchesElement(e,t){return LS(e,t)}containsElement(e,t){return FS(e,t)}query(e,t,n){return ZS(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,i,s=[],o){return new M_(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),qS=(()=>{class e{}return e.NOOP=new US,e})();const VS="ng-enter",jS="ng-leave",BS="ng-trigger",$S=".ng-trigger",zS="ng-animating",HS=".ng-animating";function GS(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:KS(parseFloat(t[1]),t[2])}function KS(e,t){switch(t){case"s":return 1e3*e;default:return e}}function WS(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,i=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=KS(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=KS(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=e;if(!n){let n=!1,s=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:i,easing:s}}(e,t,n)}function QS(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function YS(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else QS(e,n);return n}function JS(e,t,n){return n?t+":"+n+";":""}function XS(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=JS(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=JS(0,cI(n),e.style[n]));e.setAttribute("style",t)}function eI(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const i=uI(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]}),bS()&&XS(e))}function tI(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=uI(t);e.style[n]=""}),bS()&&XS(e))}function nI(e){return Array.isArray(e)?1==e.length?e[0]:R_(e):e}const rI=new RegExp("{{\\s*(.+?)\\s*}}","g");function iI(e){let t=[];if("string"==typeof e){let n;for(;n=rI.exec(e);)t.push(n[1]);rI.lastIndex=0}return t}function sI(e,t,n){const r=e.toString(),i=r.replace(rI,(e,r)=>{let i=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?e:i}function oI(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const aI=/-+([a-z0-9])/g;function uI(e){return e.replace(aI,(...e)=>e[1].toUpperCase())}function cI(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lI(e,t){return 0===e||0===t}function hI(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let s=t[0],o=[];if(r.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var i=1;i<t.length;i++){let n=t[i];o.forEach(function(t){n[t]=fI(e,t)})}}return t}function dI(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function fI(e,t){return window.getComputedStyle(e)[t]}function pI(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const i=r[1],s=r[2],o=r[3];t.push(yI(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&t.push(yI(o,i))}(e,n,t)):n.push(e),n}const gI=new Set(["true","1"]),mI=new Set(["false","0"]);function yI(e,t){const n=gI.has(e)||mI.has(e),r=gI.has(t)||mI.has(t);return(i,s)=>{let o="*"==e||e==i,a="*"==t||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?gI.has(e):mI.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?gI.has(t):mI.has(t)),o&&a}}const vI=new RegExp("s*:selfs*,?","g");function _I(e,t,n){return new bI(e).build(t,n)}class bI{constructor(e){this._driver=e}build(e,t){const n=new wI(t);return this._resetContextStyleTimingState(n),dI(this,nI(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const i=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,i.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const i=this.visitTransition(e,t);n+=i.queryCount,r+=i.depCount,s.push(i)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(e=>{if(TI(e)){const t=e;Object.keys(t).forEach(e=>{iI(t[e]).forEach(e=>{s.hasOwnProperty(e)||i.add(e)})})}}),i.size){const n=oI(i.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=dI(this,nI(e.animation),t);return{type:1,matchers:pI(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:EI(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>dI(this,e,t)),options:EI(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const i=e.steps.map(e=>{t.currentTime=n;const i=dI(this,e,t);return r=Math.max(r,t.currentTime),i});return t.currentTime=r,{type:3,steps:i,options:EI(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return SI(WS(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=SI(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||WS(r,t),SI(n.duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,i=e.styles?e.styles:P_({});if(5==i.type)r=this.visitKeyframes(i,t);else{let i=e.styles,s=!1;if(!i){s=!0;const e={};n.easing&&(e.easing=n.easing),i=P_(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,t);o.isEmptyStep=s,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==O_?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,i=null;return n.forEach(e=>{if(TI(e)){const t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,i=t.currentTime;n&&i>0&&(i-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},i=iI(e);i.length&&i.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let u=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(TI(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(TI(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let l=0;r>0&&r<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=t.currentTime,f=t.currentAnimateTimings,p=f.duration;return u.forEach((e,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;t.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:dI(this,nI(e.animation),t),options:EI(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:EI(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:EI(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[i,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(vI,"")),[e=e.replace(/@\*/g,$S).replace(/@\w+/g,e=>$S+"-"+e.substr(1)).replace(/:animating/g,HS),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+i:i,CS(t.collectedStyles,t.currentQuerySelector,{});const o=dI(this,nI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:EI(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:WS(e.timings,t.errors,!0);return{type:12,animation:dI(this,nI(e.animation),t),timings:n,options:null}}}class wI{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function TI(e){return!Array.isArray(e)&&"object"==typeof e}function EI(e){return e?(e=QS(e)).params&&(e.params=function(e){return e?QS(e):null}(e.params)):e={},e}function SI(e,t,n){return{duration:e,delay:t,easing:n}}function II(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class CI{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const AI=new RegExp(":enter","g"),kI=new RegExp(":leave","g");function xI(e,t,n,r,i,s={},o={},a,u,c=[]){return(new OI).buildKeyframes(e,t,n,r,i,s,o,a,u,c)}class OI{buildKeyframes(e,t,n,r,i,s,o,a,u,c=[]){u=u||new CI;const l=new DI(e,t,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),dI(this,n,l);const h=l.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,l.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[II(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const i=null!=n.duration?GS(n.duration):null,s=null!=n.delay?GS(n.delay):null;return 0!==i&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),dI(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const i=e.options;if(i&&(i.params||i.delay)&&(r=t.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=NI);const e=GS(i.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>dI(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const i=e.options&&e.options.delay?GS(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);i&&o.delayNextStep(i),dI(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return WS(t.params?sI(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*i),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(r+i),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},i=r.delay?GS(r.delay):0;i&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=NI);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);i&&o.delayNextStep(i),n===t.element&&(a=o.currentTimeline),dI(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,i=e.timings,s=Math.abs(i.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=t.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;dI(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const NI={};class DI{constructor(e,t,n,r,i,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=NI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new RI(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=GS(n.duration)),null!=n.delay&&(r.delay=GS(n.delay));const i=n.params;if(i){let e=r.params;e||(e=this.options.params={}),Object.keys(i).forEach(n=>{(!t||!e.hasOwnProperty(n))&&(e[n]=sI(i[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,i=new DI(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(e),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(e){return this.previousNode=NI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new PI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,i,s){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(AI,"."+this._enterClassName)).replace(kI,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return!i&&0==o.length&&s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class RI{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new RI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||O_,this._currentKeyframe[e]=O_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const i=r&&r.params||{},s=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=O_})):YS(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=sI(s[e],i,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:O_),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=YS(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?e.add(n):r==O_&&t.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=e.size?oI(e.values()):[],s=t.size?oI(t.values()):[];if(n){const e=r[0],t=QS(e);e.offset=0,t.offset=1,r=[e,t]}return II(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class PI extends RI{constructor(e,t,n,r,i,s,o=!1){super(e,t,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const i=[],s=n+t,o=t/s,a=YS(e[0],!1);a.offset=0,i.push(a);const u=YS(e[0],!1);u.offset=LI(o),i.push(u);const c=e.length-1;for(let r=1;r<=c;r++){let o=YS(e[r],!1);o.offset=LI((t+o.offset*n)/s),i.push(o)}n=s,t=0,r="",e=i}return II(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function LI(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class FI{}class ZI extends FI{normalizePropertyName(e,t){return uI(e)}normalizeStyleValue(e,t,n,r){let i="";const s=n.toString().trim();if(MI[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+i}}const MI=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function UI(e,t,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const qI={};class VI{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,i){return e.some(e=>e(t,n,r,i))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],i=this._stateStyles[e],s=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):s}build(e,t,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||qI,d=this.buildStyles(n,o&&o.params||qI,l),f=a&&a.params||qI,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},b=c?[]:xI(e,t,this.ast.animation,i,s,d,p,_,u,l);let w=0;if(b.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),l.length)return UI(t,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);b.forEach(e=>{const n=e.element,r=CS(m,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const i=CS(y,n,{});e.postStyleProps.forEach(e=>i[e]=!0),n!==t&&g.add(n)});const T=oI(g.values());return UI(t,this._triggerName,n,r,v,d,p,b,T,m,y,w)}}class jI{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},r=QS(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const i=e;Object.keys(i).forEach(e=>{let s=i[e];s.length>1&&(s=sI(s,r,t));const o=this.normalizer.normalizePropertyName(e,t);s=this.normalizer.normalizeStyleValue(e,o,s,t),n[o]=s})}}),n}}class BI{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new jI(e.style,e.options&&e.options.params||{},n)}),$I(this.states,"true","1"),$I(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new VI(e,t,this.states))}),this.fallbackTransition=function(e,t,n){return new VI(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},t)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(i=>i.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function $I(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const zI=new CI;class HI{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=_I(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,i=TS(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],i=this._animations[e];let s;const o=new Map;if(i?(s=xI(this._driver,t,i,VS,jS,{},{},n,zI,r),s.forEach(e=>{const t=CS(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,O_)})});const a=wS(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const i=IS(t,"","","");return ES(this._getPlayer(e),n,i,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const GI="ng-animate-queued",KI="ng-animate-disabled",WI=".ng-animate-disabled",QI=[],YI={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JI={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},XI="__ng_removed";class eC{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(n?e.value:e),n){const t=QS(e);delete t.value,this.options=t}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const tC="void",nC=new eC(tC);class rC{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,hC(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(e){return"start"==e||"done"==e}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);const i=CS(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};i.push(s);const o=CS(this._engine.statesByElement,e,{});return o.hasOwnProperty(t)||(hC(e,BS),hC(e,BS+"-"+t),o[t]=nC),()=>{this._engine.afterFlush(()=>{const e=i.indexOf(s);e>=0&&i.splice(e,1),this._triggers[t]||delete o[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const i=this._getTrigger(t),s=new sC(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(hC(e,BS),hC(e,BS+"-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const u=new eC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[t]=u,a||(a=nC),u.value!==tC&&a.value===u.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,u.params)){const t=[],n=i.matchStyles(a.value,a.params,t),r=i.matchStyles(u.value,u.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{tI(e,n),eI(e,r)})}return}const c=CS(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let l=i.matchTransition(a.value,u.value,e,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(hC(e,GI),s.onStart(()=>{dC(e,GI)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,$S,!0);n.forEach(e=>{if(e[XI])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const i=this._engine.statesByElement.get(e);if(i){const s=[];if(Object.keys(i).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,tC,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&wS(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const i=t.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||nC,a=new eC(tC),u=new sC(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e[XI];(!r||r===YI)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){hC(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(t=>{if(t.name==n.triggerName){const r=IS(i,n.triggerName,n.fromState.value,n.toState.value);r._data=e,ES(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class iC{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new rC(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=n[e[r]].namespaceId;if(i){const e=this._fetchNamespace(i);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(oC(t)){const i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!oC(t))return;const i=t[XI];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),hC(e,KI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dC(e,KI))}removeNode(e,t,n,r){if(oC(t)){const i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t[XI]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,i){return oC(t)?this._fetchNamespace(e).listen(t,n,r,i):()=>{}}_buildInstruction(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}destroyInnerAnimations(e){let t=this.driver.query(e,$S,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,HS,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return wS(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[XI];if(t&&t.setForRemoval){if(e[XI]=YI,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,WI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,WI,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)hC(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?wS(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new CI,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)c.add(t[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=cC(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((e,t)=>{const n=VS+p++;f.set(t,n),e.forEach(e=>hC(e,n))});const g=[],m=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const e=this.collectedLeaveElements[O],t=e[XI];t&&t.setForRemoval&&(g.push(e),m.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>m.add(e)):y.add(e))}const v=new Map,_=cC(h,Array.from(m));_.forEach((e,t)=>{const n=jS+p++;v.set(t,n),e.forEach(e=>hC(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=f.get(t);e.forEach(e=>dC(e,n))}),_.forEach((e,t)=>{const n=v.get(t);e.forEach(e=>dC(e,n))}),g.forEach(e=>{this.processLeaveNode(e)})});const b=[],w=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach(e=>{const t=e.player,i=e.element;if(b.push(t),this.collectedEnterElements.length){const e=i[XI];if(e&&e.setForMove)return void t.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(e,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return t.onStart(()=>tI(i,p.fromStyles)),t.onDestroy(()=>eI(i,p.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>tI(i,p.fromStyles)),t.onDestroy(()=>eI(i,p.toStyles)),void r.push(t);p.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:t,element:i}),p.queriedElements.forEach(e=>CS(o,e,[]).push(t)),p.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),p.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=u.get(t);r||u.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const T=new Map,E=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(E.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{CS(T,t,[]).push(e),e.destroy()})});const S=g.filter(e=>gC(e,a,u)),I=new Map;uC(I,this.driver,y,u,O_).forEach(e=>{gC(e,a,u)&&S.push(e)});const C=new Map;d.forEach((e,t)=>{uC(C,this.driver,new Set(e),a,"!")}),S.forEach(e=>{const t=I.get(e),n=C.get(e);I.set(e,Object.assign(Object.assign({},t),n))});const A=[],k=[],x={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>eI(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let e=x;if(E.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=E.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>E.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,T,i,C,I);if(s.setRealPlayer(n),e===x)A.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=wS(t)),r.push(s)}}else tI(t,o.fromStyles),s.onDestroy(()=>eI(t,o.toStyles)),k.push(s),c.has(t)&&r.push(s)}),k.forEach(e=>{const t=i.get(e.element);if(t&&t.length){const n=wS(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let O=0;O<g.length;O++){const e=g[O],t=e[XI];if(dC(e,jS),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,HS,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?fC(this,e,r):this.processLeaveNode(e)}return g.length=0,A.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),A}elementContainsData(e,t){let n=!1;const r=t[XI];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,i){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!i||i==tC;t.forEach(t=>{t.queued||!e&&t.triggerName!=r||s.push(t)})}}return(n||r)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const r=t.element,i=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,u=CS(n,e,[]);this._getPreviousPlayers(e,a,i,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),u.push(e)})}tI(r,t.fromStyles)}_buildAnimation(e,t,n,r,i,s){const o=t.triggerName,a=t.element,u=[],c=new Set,l=new Set,h=t.timelines.map(t=>{const h=t.element;c.add(h);const d=h[XI];if(d&&d.removedBeforeQueried)return new M_(t.duration,t.delay);const f=h!==a,p=function(e){const t=[];return pC(e,t),t}((n.get(h)||QI).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),g=i.get(h),m=s.get(h),y=TS(0,this._normalizer,0,t.keyframes,g,m),v=this._buildPlayer(t,y,p);if(t.subTimeline&&r&&l.add(h),f){const t=new sC(e,o,h);t.setRealPlayer(v),u.push(t)}return v});u.forEach(e=>{CS(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>hC(e,zS));const d=wS(h);return d.onDestroy(()=>{c.forEach(e=>dC(e,zS)),eI(a,t.toStyles)}),l.forEach(e=>{CS(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new M_(e.duration,e.delay)}}class sC{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new M_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>ES(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){CS(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function oC(e){return e&&1===e.nodeType}function aC(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function uC(e,t,n,r,i){const s=[];n.forEach(e=>s.push(aC(e)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(r,e,i);(!n||0==n.length)&&(r[XI]=JI,o.push(r))}),e.set(r,s)});let a=0;return n.forEach(e=>aC(e,s[a++])),o}function cC(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),i=new Map;function s(e){if(!e)return 1;let t=i.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:s(o),i.set(e,t),t}return t.forEach(e=>{const t=s(e);1!==t&&n.get(t).push(e)}),n}const lC="$$classes";function hC(e,t){if(e.classList)e.classList.add(t);else{let n=e[lC];n||(n=e[lC]={}),n[t]=!0}}function dC(e,t){if(e.classList)e.classList.remove(t);else{let n=e[lC];n&&delete n[t]}}function fC(e,t,n){wS(n).onDone(()=>e.processLeaveNode(t))}function pC(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof U_?pC(r.players,t):t.push(r)}}function gC(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(e=>i.add(e)):t.set(e,r),n.delete(e),!0}class mC{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new iC(e,t,n),this._timelineEngine=new HI(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,i){const s=e+"-"+r;let o=this._triggerCache[s];if(!o){const e=[],t=_I(this._driver,i,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t,n){return new BI(e,t,n)}(r,t,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,i]=AS(n);this._timelineEngine.command(e,t,i,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,i){if("@"==n.charAt(0)){const[e,r]=AS(n);return this._timelineEngine.listen(e,t,r,i)}return this._transitionEngine.listen(e,t,n,r,i)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function yC(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=_C(t[0]),t.length>1&&(r=_C(t[t.length-1]))):t&&(n=_C(t)),n||r?new vC(e,n,r):null}let vC=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&eI(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(eI(this._element,this._initialStyles),this._endStyles&&(eI(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(tI(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tI(this._element,this._endStyles),this._endStyles=null),eI(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function _C(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=n[r];bC(i)&&(t=t||{},t[i]=e[i])}return t}function bC(e){return"display"===e||"position"===e}const wC="animation",TC="animationend";class EC{constructor(e,t,n,r,i,s,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){(function(e,t){const n=xC(e,"").trim();let r=0;n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++;return n}(n)+1,t=`${n}, ${t}`),kC(e,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),AC(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){SC(this._element,this._name,"paused")}resume(){SC(this._element,this._name,"running")}setPosition(e){const t=IC(this._element,this._name);this._position=e*this._duration,kC(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),AC(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=xC(e,"").split(","),r=CC(n,t);r>=0&&(n.splice(r,1),kC(e,"",n.join(",")))}(this._element,this._name))}}function SC(e,t,n){kC(e,"PlayState",n,IC(e,t))}function IC(e,t){const n=xC(e,"");return n.indexOf(",")>0?CC(n.split(","),t):CC([n],t)}function CC(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function AC(e,t,n){n?e.removeEventListener(TC,t):e.addEventListener(TC,t)}function kC(e,t,n,r){const i=wC+t;if(null!=r){const t=e.style[i];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[i]=n}function xC(e,t){return e.style[wC+t]||""}class OC{constructor(e,t,n,r,i,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new EC(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:fI(this.element,n))})}this.currentSnapshot=e}}class NC extends M_{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=MS(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class DC{constructor(){this._count=0}validateStyleProperty(e){return PS(e)}matchesElement(e,t){return LS(e,t)}containsElement(e,t){return FS(e,t)}query(e,t,n){return ZS(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>MS(e));let r=`@keyframes ${t} {\n`,i="";n.forEach(e=>{i=" ";const t=parseFloat(e.offset);r+=`${i}${100*t}% {\n`,i+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${t}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(e,t,n,r,i,s=[],o){const a=s.filter(e=>e instanceof OC),u={};lI(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"==n||"easing"==n||(t[n]=e[n])})}),t}(t=hI(e,t,u));if(0==n)return new NC(e,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,l,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=yC(e,t),f=new OC(e,t,l,n,r,i,c,d);return f.onDestroy(()=>function(e){e.parentNode.removeChild(e)}(h)),f}}class RC{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:fI(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class PC{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(LC().toString()),this._cssKeyframesDriver=new DC}validateStyleProperty(e){return PS(e)}matchesElement(e,t){return LS(e,t)}containsElement(e,t){return FS(e,t)}query(e,t,n){return ZS(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(e=>e instanceof RC);lI(n,r)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>u[e]=t[e])});const l=yC(e,t=hI(e,t=t.map(e=>YS(e,!1)),u));return new RC(e,t,a,l)}}function LC(){return _S()&&Element.prototype.animate||{}}let FC=(()=>{class e extends x_{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?R_(e):e;return UC(this._renderer,null,t,"register",[n]),new ZC(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ZC extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new MC(this._id,e,t||{},this._renderer)}}class MC{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return UC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function UC(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const qC="@.disabled";let VC=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new jC("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,e);const s=t=>{Array.isArray(t)?t.forEach(s):this.engine.registerTrigger(r,i,e,t.name,t)};return t.data.animation.forEach(s),new BC(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(mC),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class jC{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==qC?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class BC extends jC{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==qC?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let i=t.substr(1),s="";return"@"!=i.charAt(0)&&([i,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let $C=(()=>{class e extends mC{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(qS),r.LFG(FI))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const zC=new r.OlP("AnimationModuleType"),HC=[{provide:x_,useClass:FC},{provide:FI,useFactory:function(){return new ZI}},{provide:mC,useClass:$C},{provide:r.FYo,useFactory:function(e,t,n){return new VC(e,t,n)},deps:[me,mC,r.R0b]}],GC=[{provide:qS,useFactory:function(){return"function"==typeof LC()?new PC:new DC}},{provide:zC,useValue:"BrowserAnimations"},...HC],KC=[{provide:qS,useClass:US},{provide:zC,useValue:"NoopAnimations"},...HC];let WC=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?KC:GC}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:GC,imports:[Oe]}),e})();const QC={apiKey:"AIzaSyAkI6dae6Ln360lcQiSmIhH5rGkvavkQWM",authDomain:"appinventario-muvlin.firebaseapp.com",projectId:"appinventario-muvlin",storageBucket:"appinventario-muvlin.appspot.com",messagingSenderId:"1061489762380",appId:"1:1061489762380:web:55c864ca7a05815cb714e9",measurementId:"G-8G56N8R3E7"};let YC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[vS]}),e.\u0275inj=r.cJS({providers:[{provide:m,useClass:b}],imports:[[Oe,fS,sn,K,$n.hO.initializeApp(QC),Zr,WC,db.forRoot()]]}),e})();(0,r.G48)(),ke().bootstrapModule(YC).catch(e=>console.error(e))},4762:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,a)}u((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,{_T:function(){return r},mG:function(){return i},Jh:function(){return s},XA:function(){return o},CR:function(){return a},ev:function(){return u}})},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=4763)}]);